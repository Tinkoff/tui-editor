(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[7581],{87581:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Z});var i=o(76733),n=o(20755),r=o(43226),a=o(27848),s=o(67350),u=o(36292),d=o(40239),l=o(10409),c=o(74893),p=o(92425),g=o(84787),h=o(36293);function m(t){return e=>{const o=new FileReader;return t.loading$.next(!0),o.readAsDataURL(e),(0,l.R)(o,"load").pipe((0,c.g)(2e3),(0,p.U)((()=>String(o.result))),(0,g.w)((e=>t.save(e))),(0,h.x)((()=>t.loading$.next(!1))))}}var T=o(8239),I=o(56424),L=o(3489);let v=(()=>{var t;class e{constructor(){this.loading$=new I.X(!1)}static createBody(t){const e=new FormData;return e.append("image",t.split(",").pop()||""),new URLSearchParams(e)}get isLoading(){return this.loading$.getValue()}save(t){return(0,L.D)(fetch("https://api.imgbb.com/1/upload?key=3c1615980dcf693b282c4b0fb608b28a&expiration=300",{method:"POST",body:e.createBody(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){var t=(0,T.Z)((function*(t){return t.json()}));return function(e){return t.apply(this,arguments)}}())).pipe((0,p.U)((t=>t.data.url)))}}return(t=e).ɵfac=function(e){return new(e||t)},t.ɵprov=n.Yz7({token:t,factory:t.ɵfac,providedIn:"root"}),e})();var b=o(38454),f=o(35396),y=o(304);const M=function(){return[]},Z=(()=>{var t;class e{constructor(){this.isStackblitz=(0,n.f3M)(a.SgE),this.relativePath=this.isStackblitz?"https://taiga-ui.dev/":"",this.doc=(0,n.f3M)(i.K0),this.imgbbService=(0,n.f3M)(v),this.builtInTools=[d.TuiEditorTool.Undo,d.TuiEditorTool.Img],this.control=new r.NI(""),this.validator=({value:t})=>this.editor?.focused||this.imgbbService.isLoading||!this.doc.hasFocus()||t.length?null:{empty:new a.T8v("ERROR: content must not be empty")},this.control.patchValue(`\n                <img src="${this.relativePath}assets/images/lumberjack.png" width="300" />\n                <p>Try to drag right border of image!</p>\n                <p>To change min/max size of image use token <code>TUI_IMAGE_EDITOR_OPTIONS</code>.</p>\n                <img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUwIDUwIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPjxzdHlsZT4uYXtmaWxsOiNkZDAwMzF9LmJ7ZmlsbDojYzMwMDJmfS5je2ZpbGw6I2ZmZn08L3N0eWxlPjxwYXRoIGNsYXNzPSJhIiBkPSJtNDMuNiAxMi42bC0yLjggMjQuNy0xNS44IDguNy0xNS44LTguNy0yLjgtMjQuNyAxOC42LTYuNnoiLz48cGF0aCBjbGFzcz0iYiIgZD0ibTI1IDZsMTguNiA2LjYtMi44IDI0LjctMTUuOCA4Ljd2LTE1LjMtMjAuMy00LjR6Ii8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iYyIgZD0ibTM2LjYgMzYuNWgtNC4zbC0yLjQtNS44aC05LjlsLTIuMyA1LjhoLTQuM2wxMS42LTI2LjF6bS0xMS42LTE3LjZsLTMuNCA4LjJoNi44eiIvPjwvc3ZnPg==" />`)}}return(t=e).ɵfac=function(e){return new(e||t)},t.ɵcmp=n.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&n.Gf(d.TuiEditorComponent,7),2&t){let t;n.iGM(t=n.CRH())&&(e.editor=t.first)}},standalone:!0,features:[n._Bn([{provide:d.TUI_EDITOR_EXTENSIONS,deps:[n.zs3],useFactory:t=>[Promise.resolve().then(o.bind(o,40239)).then((({TuiStarterKit:t})=>t)),Promise.resolve().then(o.bind(o,40239)).then((({tuiCreateImageEditorExtension:e})=>e({injector:t}))),Promise.resolve().then(o.bind(o,5664)).then((({default:t})=>t.configure({inline:!0,allowBase64:!0})))]},{provide:d.TUI_IMAGE_EDITOR_OPTIONS,useValue:{minWidth:100,maxWidth:400}},{provide:d.TUI_IMAGE_LOADER,useFactory:m,deps:[v]}]),n.jDz],decls:13,vars:16,consts:[[3,"overlay","showLoader"],[1,"editor",3,"formControl","tools","tuiValidator"],[3,"error","formControl"],[3,"content"]],template:function(t,e){1&t&&(n.TgZ(0,"tui-loader",0),n.ALo(1,"async"),n._UZ(2,"tui-editor",1),n.qZA(),n._UZ(3,"tui-error",2),n.ALo(4,"async"),n.ALo(5,"tuiFieldError"),n.TgZ(6,"h4"),n._uU(7,"HTML:"),n.qZA(),n._UZ(8,"tui-editor-socket",3),n.TgZ(9,"h4"),n._uU(10,"Text:"),n.qZA(),n.TgZ(11,"p"),n._uU(12),n.qZA()),2&t&&(n.Q6J("overlay",!0)("showLoader",!!n.lcZ(1,9,e.imgbbService.loading$)),n.xp6(2),n.Q6J("formControl",e.control)("tools",e.builtInTools)("tuiValidator",e.validator),n.xp6(1),n.Q6J("error",n.lcZ(4,11,n.lcZ(5,13,n.DdM(15,M))))("formControl",e.control),n.xp6(5),n.Q6J("content",e.control.value||""),n.xp6(4),n.Oqu(e.control.value))},dependencies:[s.Shu,b.v,s.dSp,f.k,i.Ov,a.WJ2,r.UX,r.JJ,r.oH,u.YuV,y.A,d.TuiEditorSocketComponent,d.TuiEditorComponent],encapsulation:2,changeDetection:0}),e})()}}]);