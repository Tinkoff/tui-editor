(self.webpackChunktui_editor=self.webpackChunktui_editor||[]).push([[5681],{5681:(t,e,n)=>{n.r(e),n.d(e,{TuiDetails:()=>o,TuiDetailsContent:()=>i,TuiSummary:()=>d});var a=n(86298),s=n(48178),r=n(46309);const o=r.Node.create({name:"details",addOptions:()=>({HTMLAttributes:{}}),addAttributes:()=>({opened:{default:!0,keepOnSplit:!1,parseHTML:t=>"true"===t.getAttribute("data-opened"),renderHTML:t=>({"data-opened":t.opened})}}),content:"summary detailsContent",group:"block",draggable:!0,allowGapCursor:!0,isolating:!0,parseHTML:()=>[{tag:"details"}],renderHTML({HTMLAttributes:t}){return["div",{class:"t-details-wrapper t-details-wrapper_rendered"},["details",(0,r.mergeAttributes)(this.options.HTMLAttributes,t),0],["button",{class:"t-details-arrow"}]]},addNodeView(){return({node:t,getPos:e})=>{if(globalThis.document){const n=document.createElement("div"),s=document.createElement("details"),r=document.createElement("button"),o=document.createElement("button");n.className="t-details-wrapper",r.className="t-details-arrow",r.type="button",o.className="t-details-delete",o.type="button",s.open=t.attrs.opened;const i=n=>{const r=e?.()??0;s.open=!s.open,t.attrs.opened=s.open,n.target?.dispatchEvent(new CustomEvent(a.m,{bubbles:!0})),this.editor.chain().focus().setTextSelection(r).run()};return r.addEventListener("click",i),o.addEventListener("click",(t=>{r.removeEventListener("click",i);const n=e?.()??0;this.editor.chain().focus().setTextSelection(e?.()).run();const a=this.editor.state.selection.$anchor.nodeAfter,s=n+(a?.nodeSize??0);this.editor.isActive("summary")?this.editor.commands.deleteNode(this.type):this.editor.commands.deleteRange({from:n,to:s}),t.preventDefault()}),{capture:!0,once:!0}),n.append(s,r,o),{dom:n,contentDOM:s}}}},addCommands(){return{setDetails:()=>({commands:t,editor:e,state:n})=>{let a="";const r=this.editor.state.selection.$anchor.pos;return globalThis.document&&(a=(document.defaultView?.window.getSelection()?.toString().trim().length??0)>0?(0,s.Ap)(n):"",setTimeout((()=>e.chain().focus().setTextSelection(r).run()))),t.insertContent(`<details data-opened="true"><summary><p></p></summary><div data-type="details-content"><p>${a}</p></div></details><p></p>`)},removeDetails:()=>({editor:t,state:e,dispatch:n})=>((0,s.yU)(e,n,this.name),t.commands.focus("end"))}}}),i=r.Node.create({name:"detailsContent",content:"block+",group:"block",allowGapCursor:!0,parseHTML:()=>[{tag:'div[data-type="details-content"]'}],renderHTML({HTMLAttributes:t}){return["div",(0,r.mergeAttributes)(this.options.HTMLAttributes,t,{"data-type":"details-content"}),0]}}),d=r.Node.create({name:"summary",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph",group:"block",parseHTML:()=>[{tag:"summary"}],renderHTML({HTMLAttributes:t}){return["summary",(0,r.mergeAttributes)(this.options.HTMLAttributes,t),0]}})}}]);