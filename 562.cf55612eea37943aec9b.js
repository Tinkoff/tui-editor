"use strict";var mr=Object.defineProperty,gr=Object.defineProperties,br=Object.getOwnPropertyDescriptors,ai=Object.getOwnPropertySymbols,bi=Object.prototype.hasOwnProperty,yi=Object.prototype.propertyIsEnumerable,_i=(be,zt,j)=>zt in be?mr(be,zt,{enumerable:!0,configurable:!0,writable:!0,value:j}):be[zt]=j,At=(be,zt)=>{for(var j in zt||(zt={}))bi.call(zt,j)&&_i(be,j,zt[j]);if(ai)for(var j of ai(zt))yi.call(zt,j)&&_i(be,j,zt[j]);return be},xe=(be,zt)=>gr(be,br(zt)),Ci=(be,zt)=>{var j={};for(var D in be)bi.call(be,D)&&zt.indexOf(D)<0&&(j[D]=be[D]);if(null!=be&&ai)for(var D of ai(be))zt.indexOf(D)<0&&yi.call(be,D)&&(j[D]=be[D]);return j};(self.webpackChunktui_editor=self.webpackChunktui_editor||[]).push([[562],{1562:(be,zt,j)=>{j.r(zt),j.d(zt,{TuiEditorStarterPageModule:()=>fr});var D=j(2057),gt=j(7862),Ht=j(2586),at=j(997),dt=j(6331),re=j(4427),Xt=j(7801),qt=j(2847),Rt=j(6841),ae=j(5019),Gt=j(4762),e=j(4788),Ne=j(1211),se=j(2330),Nt=j(5648),Dt=j(4358),Mt=j(7103),Bt=j(946),Lt=j(1233),xt=j(9856),Jt=j(3190),Pt=j(8002),pt=j(6782),Qt=j(9761);let fe=(()=>{class c extends xt.y{constructor(r,{nativeElement:g},P){const U=(0,Bt.mL)(g,"mousedown").pipe((0,Bt.mp)(),(0,Jt.w)(wt=>{const oe=(0,Bt.mL)(P,"mousemove").pipe((0,Pt.U)(({clientX:Ze,clientY:cn})=>(0,Lt.Ws)(Ze,cn,g)),(0,pt.R)((0,Bt.mL)(P,"mouseup")));return wt.target===g?oe.pipe((0,Qt.O)((0,Lt.Ws)(wt.clientX,wt.clientY,g))):oe}),(0,pt.R)(r));super(wt=>U.subscribe(wt))}}return c.\u0275fac=function(r){return new(r||c)(e.LFG(Mt.a3,2),e.LFG(e.SBq),e.LFG(D.K0))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac}),c})(),le=(()=>{class c{constructor(r){this.value=[0,0],this.valueChange=new e.vpe,r.subscribe(g=>{this.value=g,this.valueChange.emit([g[0],g[1]])})}get left(){return 100*this.value[0]}get top(){return 100*this.value[1]}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(fe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-flat-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[e._Bn([Mt.a3,fe])],decls:1,vars:4,consts:[[1,"t-circle"]],template:function(r,g){1&r&&e._UZ(0,"div",0),2&r&&e.Udp("left",g.left,"%")("top",g.top,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:-.5rem 0 0 -.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),c})(),Ot=(()=>{class c{constructor(r){this.value=0,this.valueChange=new e.vpe,r.subscribe(([g])=>{this.value=g,this.valueChange.emit(g)})}get left(){return 100*this.value}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(fe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-linear-picker"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[e._Bn([Mt.a3,fe])],decls:1,vars:2,consts:[[1,"t-circle"]],template:function(r,g){1&r&&e._UZ(0,"div",0),2&r&&e.Udp("left",g.left,"%")},styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),c})();class vt{constructor(v){this.sanitizer=v,this.colorChange=new e.vpe,this.point=[0,1],this.hue=0,this.opacity=1}set color(v){if(this.currentColor.every((U,wt)=>U===v[wt])&&v[3]===this.opacity)return;const[r,g,P]=(0,se.bD)(v[0],v[1],v[2]);this.opacity=v[3],this.hue=r/360,this.point=[g,1-P/255]}get currentColor(){return this.getCurrentColor(this.hue,this.point)}get base(){return`rgb(${(0,se.qZ)(360*this.hue,1,255)})`}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to right, rgba(${this.currentColor.join(",")}, 0), rgb(${this.currentColor.join(",")}))`)}onPointChange(v){this.point=v,this.updateColor()}onHueChange(v){this.hue=v,this.updateColor()}onOpacityChange(v){this.opacity=(0,Nt.FG)(v,2),this.updateColor()}getCurrentColor(v,r){return(0,se.qZ)(360*v,r[0],255*(1-r[1]))}updateColor(){this.colorChange.emit([...this.currentColor,this.opacity])}}vt.\u0275fac=function(v){return new(v||vt)(e.Y36(Ne.H7))},vt.\u0275cmp=e.Xpm({type:vt,selectors:[["tui-color-picker"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:5,vars:7,consts:[[1,"t-flat",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_hue"],[1,"t-hue",3,"value","valueChange"],[1,"t-wrapper","t-wrapper_opacity"],[1,"t-opacity",3,"value","valueChange"]],template:function(v,r){1&v&&(e.TgZ(0,"tui-flat-picker",0),e.NdJ("valueChange",function(P){return r.onPointChange(P)}),e.qZA(),e.TgZ(1,"div",1),e.TgZ(2,"tui-linear-picker",2),e.NdJ("valueChange",function(P){return r.onHueChange(P)}),e.qZA(),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"tui-linear-picker",4),e.NdJ("valueChange",function(P){return r.onOpacityChange(P)}),e.qZA(),e.qZA()),2&v&&(e.Udp("background-color",r.base),e.Q6J("value",r.point),e.xp6(2),e.Q6J("value",r.hue),e.xp6(1),e.Udp("background",r.gradient),e.xp6(1),e.Q6J("value",r.opacity))},directives:[le,Ot],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block}.t-flat[_ngcontent-%COMP%]{height:14rem;background:linear-gradient(rgba(0,0,0,0),#000000),linear-gradient(to right,#ffffff,rgba(255,255,255,0));margin-bottom:.25rem;overflow:hidden}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1rem 1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper_hue[_ngcontent-%COMP%]{background:#ff0000}.t-wrapper_opacity[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hue[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff0000,#ffff00,#00ff00,#00ffff,#0000ff,#ff00ff,#ff0000);border-radius:inherit;margin:0 .5rem}.t-opacity[_ngcontent-%COMP%]{border-radius:inherit;margin:0 .5rem}'],changeDetection:0}),(0,Gt.gn)([Dt.UM],vt.prototype,"getCurrentColor",null);var $t=j(1927);const ht=new e.OlP("[TUI_EDITOR_EXTENSIONS]"),z=new e.OlP("[LAZY_EDITOR_EXTENSIONS]"),tt=new Map([["transparent","transparent"],["color-black-300","#333333"],["color-black-200","#666666"],["color-black-100","#909090"],["color-yellow-100","#FFDD2C"],["color-yellow-200","#FCC521"],["color-yellow-300","#FAB618"],["color-gray-100","#f5f5f6"],["color-gray-200","#e7e8ea"],["color-gray-300","#cbcfd3"],["color-gray-400","#959ba4"],["color-gray-500","#79818c"],["color-gray-600","#616871"],["color-light-blue-100","#ecf1f7"],["color-light-blue-200","#e4ebf3"],["color-light-blue-300","#dde4ed"],["color-blue-100","#1771e6"],["color-blue-200","#1464cc"],["color-blue-300","#0953b3"],["color-green-100","#39b54a"],["color-green-200","#2ca53a"],["color-green-300","#168a21"],["color-red-100","#e01f19"],["color-red-200","#d3120e"],["color-red-300","#c40b08"]]),q="rgb(51, 51, 51)";var st=(()=>{return(c=st||(st={})).Undo="undo",c.Anchor="anchor",c.Size="fontSize",c.Bold="bold",c.Italic="italic",c.Underline="underline",c.Strikethrough="strikeThrough",c.Align="justify",c.List="list",c.Quote="quote",c.Color="foreColor",c.Hilite="hiliteColor",c.Clear="clear",c.Link="link",c.Attach="attach",c.Tex="tex",c.Code="code",c.Img="image",c.HR="insertHorizontalRule",c.Sup="superscript",c.Sub="subscript",c.Table="insertTable",c.MergeCells="mergeCells",c.SplitCells="splitCells",c.RowsColumnsManaging="rowsColumnsManaging",c.Details="details",c.Group="group",st;var c})();const St=[st.Undo,st.Size,st.Bold,st.Italic,st.Underline,st.Align,st.List,st.Quote,st.Link,st.Anchor,st.Color,st.Hilite,st.Clear,st.Strikethrough,st.Code,st.Img,st.HR,st.Sup,st.Sub,st.Table,st.Details],ne=["id","class","src","style","controls","loop","muted","preload","autoplay","width","height","controlsList"],jt="#",ye="https://",ue="://",Ue={translate:"no",spellcheck:!1,colors:tt,blankColor:q,linkOptions:{protocol:ye},fontOptions:function(c){return[{px:13,name:c.small},{px:15,name:c.normal},{px:17,name:c.large},{px:24,family:"var(--tui-font-heading)",name:c.subtitle,headingLevel:2,weight:"bold"},{px:30,family:"var(--tui-font-heading)",name:c.title,headingLevel:1,weight:"bold"}]}},de=new e.OlP("[TUI_EDITOR_OPTIONS]",{factory:()=>Ue});var Ie=j(4487);const rn=new e.OlP("[TUI_EDITOR_CONTENT_PROCESSOR]",{factory:()=>Ie.y}),ve=new e.OlP("[TUI_EDITOR_VALUE_TRANSFORMER]"),Me=new e.OlP("[TUI_ATTACH_FILES_OPTIONS]",{factory:()=>({accept:"*/*",multiple:!0})}),Ge=new e.OlP("[TUI_ATTACH_FILES_LOADER]");var _e=j(7232);const Ve=new e.OlP("[TUI_EDITOR_COLOR_SELECTOR_MODE_NAMES]",{factory:()=>["Solid color","Gradient"]}),pe=new e.OlP("[TUI_EDITOR_TOOLBAR_TEXTS]",{factory:(0,_e.v)("toolbarTools")}),ke=new e.OlP("[TUI_EDITOR_TABLE_COMMANDS]",{factory:(0,_e.v)("editorTableCommands")}),Le=new e.OlP("[TUI_EDITOR_LINK_TEXTS]",{factory:(0,_e.v)("editorEditLink")}),an=new e.OlP("[TUI_EDITOR_CODE_OPTIONS]",{factory:(0,_e.v)("editorCodeOptions")}),qe=new e.OlP("[TUI_EDITOR_FONT_OPTIONS]",{factory:(0,_e.v)("editorFontOptions")}),Re=new e.OlP("[TUI_IMAGE_LOADER]",{factory:()=>c=>{const v=new FileReader;return v.readAsDataURL(c),(0,Bt.mL)(v,"load").pipe((0,Pt.U)(()=>String(v.result)))}});var Ye=j(4235);const me=new e.OlP("[TIPTAP_EDITOR]"),$e=new e.OlP("[LAZY_TIPTAP_EDITOR]",{factory:()=>{const c=new Ye.t(1);return Promise.resolve().then(j.bind(j,1046)).then(v=>c.next(v.Editor)),c}}),Ce=new e.OlP("[INITIALIZATION_TIPTAP_CONTAINER]");var Yt=j(3917),Y=j(2628),k=j(4789),M=j(5111),x=j(22),J=j(5974);function G(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"div",1),e.NdJ("mousedown",function(){const U=e.CHM(r).index;return e.oxw().onMouseDown(U)})("dblclick",function(){const U=e.CHM(r).index;return e.oxw().onClick(U)}),e.qZA()}2&c&&e.Udp("left",100*v.$implicit,"%")}let X=(()=>{class c{constructor(r){this.value=[0,1],this.valueChange=new e.vpe,this.indexChange=new e.vpe,this.index=NaN,r.subscribe(([g])=>{this.onPicker(g)})}onMouseUp(){this.index=NaN}onMouseDown(r){this.updateIndex(r)}onClick(r){this.value.length>2&&this.updateValue(this.value.filter((g,P)=>P!==r))}onPicker(r){Number.isNaN(this.index)&&(this.updateIndex(this.value.length),this.value=[...this.value,0]),!this.value.some((g,P)=>g===r&&P!==this.index)&&this.updateValue(this.value.map((g,P)=>P===this.index?r:g))}updateIndex(r){this.index=r,this.indexChange.emit(r)}updateValue(r){this.value=r,this.valueChange.emit(r)}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(fe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-linear-multi-picker"]],hostBindings:function(r,g){1&r&&e.NdJ("mouseup",function(){return g.onMouseUp()},!1,e.evT)},inputs:{value:"value"},outputs:{valueChange:"valueChange",indexChange:"indexChange"},features:[e._Bn([Mt.a3,fe])],decls:1,vars:1,consts:[["class","t-circle",3,"left","mousedown","dblclick",4,"ngFor","ngForOf"],[1,"t-circle",3,"mousedown","dblclick"]],template:function(r,g){1&r&&e.YNc(0,G,1,2,"div",0),2&r&&e.Q6J("ngForOf",g.value)},directives:[D.sg],styles:["[_nghost-%COMP%]{position:relative;display:block;height:1rem;box-sizing:border-box}.t-circle[_ngcontent-%COMP%]{position:absolute;width:1rem;height:1rem;border-radius:100%;margin:0 -.5rem;box-shadow:inset 0 0 0 2px var(--tui-base-01),0 0 0 1px var(--tui-base-03)}"],changeDetection:0}),c})();var ct=j(4337),_t=j(2878),R=j(6480),a=j(7179),d=j(9434),C=j(9588),S=j(9456),I=j(3631),H=j(4042),K=j(6747);function lt(c,v){if(1&c){const r=e.EpF();e.ynx(0),e.TgZ(1,"section",2),e.TgZ(2,"button",3),e.NdJ("mousedown",function(P){e.CHM(r);const U=e.oxw(2);return U.onButtonMouseDown(P,U.plusButtonDisabled)})("click",function(){return e.CHM(r),e.oxw(2).increaseValue()}),e.qZA(),e.TgZ(3,"button",4),e.NdJ("mousedown",function(P){e.CHM(r);const U=e.oxw(2);return U.onButtonMouseDown(P,U.minusButtonDisabled)})("click",function(){return e.CHM(r),e.oxw(2).decreaseValue()}),e.qZA(),e.qZA(),e.BQk()}if(2&c){const r=v.ngIf,g=e.oxw(2);e.xp6(2),e.Q6J("icon",g.iconUp)("appearance",g.options.appearance)("title",r[0])("disabled",g.plusButtonDisabled)("focusable",!1),e.xp6(1),e.Q6J("icon",g.iconDown)("appearance",g.options.appearance)("disabled",g.minusButtonDisabled)("focusable",!1)("title",r[1])}}function It(c,v){if(1&c&&(e.ynx(0),e.YNc(1,lt,4,10,"ng-container",1),e.ALo(2,"async"),e.BQk()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,r.minusTexts$))}}const Et=["*",[["input"]]],De=["*","input"],B={icons:{up:"tuiIconPlus",down:"tuiIconMinus"},appearance:"textfield",hideButtons:!1,min:0,max:Number.MAX_SAFE_INTEGER,step:1,postfix:""},O=new e.OlP("[TUI_INPUT_COUNT_OPTIONS]",{factory:()=>B});let it=(()=>{class c extends R.F9{constructor(r,g,P,U,wt,oe,Ze){super(r,g),this.textfieldController=P,this.minusTexts$=U,this.isMobile=wt,this.options=oe,this.numberFormat=Ze,this.step=this.options.step,this.min=this.options.min,this.max=this.options.max,this.hideButtons=this.options.hideButtons,this.prefix="",this.postfix=this.options.postfix}get buttonsHidden(){return this.hideButtons||"table"===this.textfieldController.appearance}get iconUp(){return this.options.icons.up}get iconDown(){return this.options.icons.down}get nativeFocusableElement(){return!this.inputNumber||this.computedDisabled?null:this.inputNumber.nativeFocusableElement}get size(){return this.textfieldController.size}get focused(){return(0,a.V8)(this.nativeFocusableElement)}get minusButtonDisabled(){return!this.interactive||(0,$t.Pc)(this.value)&&this.value<=this.min}get plusButtonDisabled(){return!this.interactive||(0,$t.Pc)(this.value)&&this.value>=this.max}onButtonMouseDown(r,g=!1){g||!this.nativeFocusableElement||this.isMobile||(r.preventDefault(),this.nativeFocusableElement.focus())}onFocused(r){this.updateFocused(r)}onInputNumberChange(r){this.value=r}onValueChange(r){this.value=(0,_t.vZ)(r,this.numberFormat.decimalSeparator)}decreaseValue(){this.readOnly||this.safeUpdateValue((this.value||0)-this.step)}increaseValue(){this.readOnly||this.safeUpdateValue((this.value||0)+this.step)}onKeydown(r){switch(r.key){case"ArrowUp":case"Up":this.increaseValue(),r.preventDefault();break;case"ArrowDown":case"Down":this.decreaseValue(),r.preventDefault()}}safeUpdateValue(r){this.value=(0,Nt.Ki)(r,this.min,this.max)}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(gt.a5,10),e.Y36(e.sBO),e.Y36(C.Cs),e.Y36(K.mT),e.Y36(d.fL),e.Y36(O),e.Y36(S.HO))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-input-count"]],viewQuery:function(r,g){if(1&r&&e.Gf(H.qS,5),2&r){let P;e.iGM(P=e.CRH())&&(g.inputNumber=P.first)}},hostVars:3,hostBindings:function(r,g){2&r&&(e.uIk("data-size",g.size),e.ekj("_hide-buttons",g.buttonsHidden))},inputs:{step:"step",min:"min",max:"max",hideButtons:"hideButtons",prefix:"prefix",postfix:"postfix"},features:[e._Bn([(0,d.FT)(c),(0,R.wB)(c),C.Y0]),e.qOj],ngContentSelectors:De,decls:4,vars:14,consts:[["decimal","never",1,"t-textfield",3,"pseudoFocus","pseudoHover","pseudoInvalid","pseudoActive","focusable","min","max","prefix","postfix","disabled","readOnly","nativeId","ngModel","ngModelChange","keydown","focusedChange"],[4,"ngIf"],[1,"t-buttons"],["tuiIconButton","","type","button","automation-id","tui-input-count__plus-button","size","s",1,"t-button","t-button_plus",3,"icon","appearance","title","disabled","focusable","mousedown","click"],["tuiIconButton","","type","button","automation-id","tui-input-count__minus-button","size","s",1,"t-button","t-button_minus",3,"icon","appearance","disabled","focusable","title","mousedown","click"]],template:function(r,g){1&r&&(e.F$t(Et),e.TgZ(0,"tui-input-number",0),e.NdJ("ngModelChange",function(U){return g.value=U})("keydown",function(U){return g.onKeydown(U)})("focusedChange",function(U){return g.onFocused(U)}),e.Hsn(1),e.Hsn(2,1,["ngProjectAs","input",5,["input"]]),e.qZA(),e.YNc(3,It,3,3,"ng-container",1)),2&r&&(e.Q6J("pseudoFocus",g.pseudoFocus)("pseudoHover",g.pseudoHover)("pseudoInvalid",g.pseudoInvalid)("pseudoActive",g.pseudoActive)("focusable",g.focusable)("min",g.min)("max",g.max)("prefix",g.prefix)("postfix",g.postfix)("disabled",g.computedDisabled)("readOnly",g.readOnly)("nativeId",g.nativeId)("ngModel",g.value),e.xp6(3),e.Q6J("ngIf",!g.buttonsHidden))},directives:[H.qS,H.g5,gt.JJ,gt.On,D.O5,Y.v0],pipes:[D.Ov],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);border-radius:var(--tui-radius-m);height:var(--tui-height-m);color:var(--tui-text-01);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}[data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l)}.t-textfield[_ngcontent-%COMP%]{position:relative;border-radius:inherit;text-align:inherit;flex-grow:1;min-width:0}[_nghost-%COMP%]:not(._hide-buttons)   .t-textfield[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.t-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:.125rem;height:100%}.t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{display:flex;width:calc(var(--tui-height-m) * .75);height:calc(50% - .0625rem)}.t-buttons[_ngcontent-%COMP%]   .t-button_plus[_ngcontent-%COMP%]{margin-bottom:.125rem;border-radius:0 var(--tui-radius-m) 0 0}.t-buttons[_ngcontent-%COMP%]   .t-button_minus[_ngcontent-%COMP%]{border-radius:0 0 var(--tui-radius-m)}[data-size=l][_nghost-%COMP%]   .t-buttons[_ngcontent-%COMP%]   .t-button[_ngcontent-%COMP%]{width:calc(var(--tui-height-l) * .75)}"],changeDetection:0}),c})(),ot=(()=>{class c extends I.D1{onValueChange(r){this.host.onValueChange(r)}ngAfterViewInit(){if(this.host.nativeFocusableElement){const{nativeFocusableElement:r}=this.host;r.autocomplete="off",r.inputMode="numeric",r.maxLength=r.maxLength>-1?r.maxLength:18}}}return c.\u0275fac=function(){let v;return function(g){return(v||(v=e.n5z(c)))(g||c)}}(),c.\u0275dir=e.lG2({type:c,selectors:[["tui-input-count"]],features:[e._Bn([(0,S.cp)(c)]),e.qOj]}),c})();var yt=j(5093),Ct=j(8952),Ut=j(2697),te=j(5642);function we(c,v){if(1&c&&(e.TgZ(0,"button",7),e._uU(1),e.qZA()),2&c){const r=v.$implicit;e.Q6J("value",r),e.xp6(1),e.hij(" ",r," ")}}function Wt(c,v){if(1&c&&(e.TgZ(0,"tui-data-list",5),e.YNc(1,we,2,2,"button",6),e.qZA()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.modes)}}function he(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-primitive-textfield",8),e.NdJ("valueChange",function(P){return e.CHM(r),e.oxw().onHexChange(P)}),e.qZA()}if(2&c){const r=e.oxw();e.Q6J("maskito",r.hexMask)("tuiTextfieldLabelOutside",!0)("value",r.hex)}}function ce(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-input-count",9),e.NdJ("ngModelChange",function(P){e.CHM(r);const U=e.oxw();return U.onRgbChange(P,U.color[1],U.color[2],U.color[3])}),e.qZA(),e.TgZ(1,"tui-input-count",9),e.NdJ("ngModelChange",function(P){e.CHM(r);const U=e.oxw();return U.onRgbChange(U.color[0],P,U.color[2],U.color[3])}),e.qZA(),e.TgZ(2,"tui-input-count",9),e.NdJ("ngModelChange",function(P){e.CHM(r);const U=e.oxw();return U.onRgbChange(U.color[0],U.color[1],P,U.color[3])}),e.qZA()}if(2&c){const r=e.oxw();e.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",r.color[0]),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",r.color[1]),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",255)("ngModel",r.color[2])}}let Be=(()=>{class c{constructor(){this.color=[0,0,0,1],this.colorChange=new e.vpe,this.hexMask={mask:new RegExp("^[A-F\\d]{0,6}$","gi")},this.modes=["HEX","RGB"],this.mode=this.modes[0]}get isHex(){return this.mode===this.modes[0]}get hex(){return(0,se.WS)(this.color[0],this.color[1],this.color[2]).replace("#","")}get opacity(){return Math.round(100*this.color[3])}onHexChange(r){if(6!==r.length)return;const g=(0,se.RO)(r);this.updateColor([g[0],g[1],g[2],this.color[3]])}onRgbChange(...r){this.updateColor(r)}updateColor(r){this.color=r,this.colorChange.emit(r)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-color-edit"]],inputs:{color:"color"},outputs:{colorChange:"colorChange"},decls:6,vars:8,consts:[["tuiTextfieldSize","m","tuiDropdownAlign","left","tuiDropdownLimitWidth","min",1,"t-select","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","ngModel","ngModelChange"],["size","s",4,"tuiDataList"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"maskito","tuiTextfieldLabelOutside","value","valueChange",4,"ngIf","ngIfElse"],["rgb",""],["tuiTextfieldPostfix","%","tuiTextfieldSize","m",1,"t-opacity","tui-group__auto-width-item",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"],["size","s"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],["tuiValueAccessor","","tuiTextfieldSize","m",3,"maskito","tuiTextfieldLabelOutside","value","valueChange"],["tuiTextfieldSize","m",3,"tuiTextfieldLabelOutside","hideButtons","max","ngModel","ngModelChange"]],template:function(r,g){if(1&r&&(e.TgZ(0,"tui-select",0),e.NdJ("ngModelChange",function(U){return g.mode=U}),e.YNc(1,Wt,2,1,"tui-data-list",1),e.qZA(),e.YNc(2,he,1,3,"tui-primitive-textfield",2),e.YNc(3,ce,3,12,"ng-template",null,3,e.W1O),e.TgZ(5,"tui-input-count",4),e.NdJ("ngModelChange",function(U){return g.onRgbChange(g.color[0],g.color[1],g.color[2],U/100)}),e.qZA()),2&r){const P=e.MAs(4);e.Q6J("tuiTextfieldLabelOutside",!0)("ngModel",g.mode),e.xp6(2),e.Q6J("ngIf",g.isHex)("ngIfElse",P),e.xp6(3),e.Q6J("tuiTextfieldLabelOutside",!0)("hideButtons",!0)("max",100)("ngModel",g.opacity)}},directives:[ct.uJ,ct.OI,C.sz,Ct.Ek,C.xT,gt.JJ,gt.On,M.gX,D.O5,it,ot,C.Tq,M.qi,D.sg,M.vK,Ut.yc,Ut.B1,yt.n,te.ro],styles:["[_nghost-%COMP%]{display:flex}.t-select[_ngcontent-%COMP%]{width:4.875rem}.t-opacity[_ngcontent-%COMP%]{width:4.275rem}"],changeDetection:0}),c})();function fn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){const U=e.CHM(r).$implicit;return e.oxw().selectedColor.emit(U.value)}),e.qZA()}if(2&c){const r=v.$implicit;e.Udp("background",r.value),e.Q6J("tuiHint",r.key)("tuiHintDescribe",r.key)("id",r.key)}}let ie=(()=>{class c{constructor(){this.colors=new Map,this.selectedColor=new e.vpe,this.originalOrder=(r,g)=>0}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-palette"]],inputs:{colors:"colors"},outputs:{selectedColor:"selectedColor"},decls:2,vars:4,consts:[["type","button","class","t-button",3,"background","tuiHint","tuiHintDescribe","id","click",4,"ngFor","ngForOf"],["type","button",1,"t-button",3,"tuiHint","tuiHintDescribe","id","click"]],template:function(r,g){1&r&&(e.YNc(0,fn,1,5,"button",0),e.ALo(1,"keyvalue")),2&r&&e.Q6J("ngForOf",e.xi3(1,1,g.colors,g.originalOrder))},directives:[D.sg,x.D,x.xn,x.t6,x.DM,x.$o],pipes:[D.Nd],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;padding:.875rem}.t-button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;width:1.5625rem;height:1.5625rem;box-sizing:border-box;margin:.375rem;border-radius:var(--tui-radius-m);border:1px solid rgba(0,0,0,.08)}"],changeDetection:0}),c})();function On(c,v){if(1&c&&e._UZ(0,"tui-svg",9),2&c){e.oxw();const r=e.MAs(1);e.ekj("t-arrow_rotated",r.open)}}function Qn(c,v){1&c&&e._UZ(0,"tui-svg",14)}function eo(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",12),e.NdJ("keydown.enter.prevent",function(){const U=e.CHM(r).$implicit,wt=e.oxw(2),oe=e.MAs(1);return wt.onModeSelect(U,oe)})("keydown.space.prevent",function(){const U=e.CHM(r).$implicit,wt=e.oxw(2),oe=e.MAs(1);return wt.onModeSelect(U,oe)})("click",function(){const U=e.CHM(r).$implicit,wt=e.oxw(2),oe=e.MAs(1);return wt.onModeSelect(U,oe)}),e._uU(1),e.YNc(2,Qn,1,0,"tui-svg",13),e.qZA()}if(2&c){const r=v.$implicit,g=e.oxw(2);e.uIk("aria-checked",g.isModeActive(r)),e.xp6(1),e.hij(" ",r," "),e.xp6(1),e.Q6J("ngIf",g.isModeActive(r))}}function Ln(c,v){if(1&c&&(e.TgZ(0,"tui-data-list",10),e.YNc(1,eo,3,3,"button",11),e.qZA()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",r.modes)}}function Jn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){const U=e.CHM(r).$implicit;return e.oxw(2).onDirectionChange(U)}),e.qZA()}if(2&c){const r=v.$implicit,g=e.oxw(2);e.ekj("t-direction_active",g.isDirectionActive(r)),e.Q6J("icon",g.getIcon(r))("tuiHint",r)}}function En(c,v){if(1&c){const r=e.EpF();e.ynx(0),e._UZ(1,"hr",15),e.TgZ(2,"div",16),e.TgZ(3,"tui-linear-multi-picker",17),e.NdJ("valueChange",function(P){return e.CHM(r),e.oxw().onStopsChange(P)})("indexChange",function(P){return e.CHM(r),e.oxw().onIndexChange(P)}),e.qZA(),e.qZA(),e.TgZ(4,"div",18),e.YNc(5,Jn,1,4,"button",19),e.qZA(),e.BQk()}if(2&c){const r=e.oxw();e.xp6(2),e.Udp("background",r.gradient),e.xp6(1),e.Q6J("value",r.stopsKeys),e.xp6(2),e.Q6J("ngForOf",r.buttons)}}function vn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-color-edit",21),e.NdJ("colorChange",function(P){return e.CHM(r),e.oxw().onColorChange(P)}),e.qZA()}if(2&c){const r=e.oxw();e.Q6J("color",r.color)}}function Rn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-palette",22),e.NdJ("selectedColor",function(P){return e.CHM(r),e.oxw().onPalettePick(P)}),e.qZA()}if(2&c){const r=e.oxw();e.Q6J("colors",r.palette)}}const mn=[0,0,0,0],kn=[[0,[0,0,0,1]],[1,[255,255,255,1]]],yn={"to top right":"tuiIconArrowUpRight","to right":"tuiIconArrowRight","to bottom right":"tuiIconArrowDownRight","to bottom":"tuiIconArrowDown","to bottom left":"tuiIconArrowDownLeft","to left":"tuiIconArrowLeft","to top left":"tuiIconArrowUpLeft","to top":"tuiIconArrowUp"};class We{constructor(v,r){this.sanitizer=v,this.modes=r,this.stops=new Map(kn),this.currentStop=0,this.direction="to bottom",this.colors=new Map,this.colorChange=new e.vpe,this.color=[0,0,0,1],this.currentMode=this.modes[0],this.buttons=["to top right","to right","to bottom right","to bottom","to bottom left","to left","to top left","to top"]}set colorSetter(v){this.parse(v)}get palette(){return this.filterPalette(this.colors,this.isGradient)}get stopsKeys(){return this.getStopsKeys(this.stops)}get currentColor(){return this.isGradient?this.getStop(this.currentStop):this.color}get gradient(){return this.sanitizer.bypassSecurityTrustStyle(this.getGradient("to right"))}get isGradient(){return this.currentMode===this.modes[1]}getIcon(v){return yn[v]}isModeActive(v){return this.currentMode===v}isDirectionActive(v){return this.direction===v}onPalettePick(v){this.updateColor(v)}onDirectionChange(v){this.direction=v,this.updateColor(this.getGradient(v))}onModeSelect(v,r){this.currentMode=v,r.open=!1,this.updateColor(v===this.modes[0]?`rgba(${this.color.join(", ")})`:this.getGradient(this.direction))}onIndexChange(v){this.currentStop=this.stopsKeys[v]}onColorChange(v){this.isGradient?(this.stops.set(this.currentStop,v),this.updateColor(this.getGradient(this.direction))):this.updateColor(`rgba(${v.join(", ")})`)}onStopsChange(v){const r=this.stopsKeys.find(P=>!v.includes(P)),g=v.find(P=>!this.stopsKeys.includes(P));void 0===r&&void 0!==g&&this.addStop(g),void 0!==r&&void 0===g&&this.removeStop(r),void 0!==r&&void 0!==g&&this.replaceStop(r,g),this.updateColor(this.getGradient(this.direction))}getStopsKeys(v){return Array.from(v.keys())}filterPalette(v,r){const g=new Map(v);return g.forEach((P,U)=>{(P.startsWith("linear-gradient")&&!r||!P.startsWith("linear-gradient")&&r)&&g.delete(U)}),g}updateColor(v){this.colorChange.emit(v)}getGradient(v){return`linear-gradient(${v}, ${[...this.stopsKeys].sort($t.A2).map(r=>`rgba(${this.getStop(r).join(", ")}) ${100*r}%`).join(", ")})`}getStop(v){return this.stops.get(v)||mn}addStop(v){const r=this.stopsKeys.reduce((g,P)=>Math.abs(P-v)<Math.abs(g-v)?P:g,this.stopsKeys[0]);this.stops.set(v,this.getStop(r)),this.stops=new Map(this.stops),this.currentStop=v}removeStop(v){this.stops.delete(v),this.stops=new Map(this.stops),this.currentStop=this.stopsKeys[0]}replaceStop(v,r){const g=this.getStop(v);this.currentStop=r,this.stops=new Map(this.stopsKeys.map(P=>P===v?[r,g]:[P,this.getStop(P)]))}parse(v){v.startsWith("linear-gradient")?this.parseGradient(v):this.parseColor(v)}parseGradient(v){if(v===this.getGradient(this.direction))return;const r=(0,Lt._N)((0,Lt.U5)(v));this.currentMode=this.modes[1],this.direction=r.side,this.currentStop=0,this.stops=new Map(r.stops.length?r.stops.map(({color:g,position:P})=>[parseFloat(P)/100,(0,se.Mp)(g)]):kn)}parseColor(v){this.currentMode=this.modes[0],this.currentStop=0,this.color=(0,se.Mp)(v)}}We.\u0275fac=function(v){return new(v||We)(e.Y36(Ne.H7),e.Y36(Ve))},We.\u0275cmp=e.Xpm({type:We,selectors:[["tui-color-selector"]],inputs:{colors:"colors",colorSetter:["color","colorSetter"]},outputs:{colorChange:"colorChange"},decls:12,vars:7,consts:[[1,"t-select",3,"content"],["dropdown",""],["tuiButton","","appearance","","size","s","type","button",3,"iconRight"],["arrow",""],["menu",""],[4,"ngIf"],[3,"color","colorChange"],["tuiGroup","","class","t-edit",3,"color","colorChange",4,"ngIf"],["class","t-palette",3,"colors","selectedColor",4,"ngIf"],["src","tuiIconChevronDown",1,"t-arrow"],["role","menu","size","s",1,"t-menu"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click",4,"ngFor","ngForOf"],["tuiOption","","role","menuitemradio",3,"keydown.enter.prevent","keydown.space.prevent","click"],["src","tuiIconCheck","class","t-checkmark",4,"ngIf"],["src","tuiIconCheck",1,"t-checkmark"],[1,"t-hr"],[1,"t-wrapper"],[1,"t-gradient",3,"value","valueChange","indexChange"],[1,"t-buttons"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","","class","t-direction",3,"t-direction_active","icon","tuiHint","click",4,"ngFor","ngForOf"],["tuiIconButton","","type","button","size","xs","appearance","","tuiHintDescribe","",1,"t-direction",3,"icon","tuiHint","click"],["tuiGroup","",1,"t-edit",3,"color","colorChange"],[1,"t-palette",3,"colors","selectedColor"]],template:function(v,r){if(1&v&&(e.TgZ(0,"tui-hosted-dropdown",0,1),e.TgZ(2,"button",2),e._uU(3),e.qZA(),e.YNc(4,On,1,2,"ng-template",null,3,e.W1O),e.YNc(6,Ln,2,1,"ng-template",null,4,e.W1O),e.qZA(),e.YNc(8,En,6,4,"ng-container",5),e.TgZ(9,"tui-color-picker",6),e.NdJ("colorChange",function(P){return r.onColorChange(P)}),e.qZA(),e.YNc(10,vn,1,1,"tui-color-edit",7),e.YNc(11,Rn,1,1,"tui-palette",8)),2&v){const g=e.MAs(5),P=e.MAs(7);e.Q6J("content",P),e.xp6(2),e.Q6J("iconRight",g),e.xp6(1),e.hij(" ",r.currentMode," "),e.xp6(5),e.Q6J("ngIf",r.isGradient),e.xp6(1),e.Q6J("color",r.currentColor),e.xp6(1),e.Q6J("ngIf",!r.isGradient),e.xp6(1),e.Q6J("ngIf",r.palette.size)}},directives:[Yt.o1,Y.v0,D.O5,vt,k.PN,M.qi,D.sg,M.vK,X,x.$o,x.D,x.xn,x.t6,x.DM,Be,J.gZ,ie],styles:['[_nghost-%COMP%]{position:relative;z-index:0;display:block;width:22.6rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:1.25rem;border-radius:.5rem}.t-wrapper[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";box-shadow:inset 0 0 0 1px rgba(0,0,0,.08);pointer-events:none;border-radius:inherit}.t-wrapper[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;width:100%;height:100%;content:"";z-index:-1;background-image:linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03)),linear-gradient(45deg,var(--tui-base-03) 25%,transparent 25%,transparent 75%,var(--tui-base-03) 75%,var(--tui-base-03));background-size:.375rem .375rem;background-position:0 0,.1875rem .1875rem;border-radius:inherit}.t-hr[_ngcontent-%COMP%]{height:1px;margin:0 0 0 -1px;border:none;background:var(--tui-base-03)}.t-gradient[_ngcontent-%COMP%]{margin:0 .5rem;border-radius:inherit}.t-select[_ngcontent-%COMP%]{margin:.75rem .5rem}.t-arrow[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-arrow_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-menu[_ngcontent-%COMP%]{width:11.25rem}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}.t-buttons[_ngcontent-%COMP%]{display:flex;padding:0 .75rem 1.25rem}.t-direction[_ngcontent-%COMP%]{color:var(--tui-text-02);margin:0 .375rem}.t-direction[_ngcontent-%COMP%]:hover, .t-direction_active[_ngcontent-%COMP%]{color:var(--tui-text-01);background:var(--tui-secondary-hover)}.t-edit[_ngcontent-%COMP%]{margin:1.25rem}.t-palette[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:inset 0 1px var(--tui-base-03)}'],changeDetection:0}),(0,Gt.gn)([Dt.UM],We.prototype,"getStopsKeys",null),(0,Gt.gn)([Dt.UM],We.prototype,"filterPalette",null);let b=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,x.go]]}),c})();var _=j(4493),m=j(5675),f=j(9765);let T=(()=>{class c{constructor(){this.stateChange$=new f.xQ,this.valueChange$=new f.xQ}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=e.lG2({type:c}),c})();var w=j(2463),N=j(7519);let L=(()=>{class c extends T{constructor(r){super(),this.editorRef=r,this.editorRef.subscribe(g=>{this.editor=g,g.on("transaction",()=>{this.stateChange$.next()}),g.on("update",()=>{const P=g.getHTML(),wt=function(c){return Array.isArray(c)&&1===c.length&&"paragraph"===c[0].type&&!c[0].hasOwnProperty("content")}(g.getJSON().content)?"":P;this.valueChange$.next(wt)})})}get isFocused(){return this.editor.isFocused}get html(){return this.editor.getHTML()}get editable(){return this.editor.isEditable}set editable(r){this.editor.setEditable(r)}get state(){return this.editor.state}getOriginTiptapEditor(){return this.editor}undoDisabled(){return!this.editor.can().undo()}redoDisabled(){return!this.editor.can().redo()}getFontColor(){return this.editor.getAttributes("textStyle").fontColor||q}getFontSize(){return parseInt(this.editor.getAttributes("textStyle").fontSize,10)}setFontSize(r){this.editor.chain().setMark("textStyle",{fontSize:(0,m.O)(r)}).run()}getBackgroundColor(){var r;return(null===(r=this.editor)||void 0===r?void 0:r.getAttributes("textStyle").backgroundColor)||"transparent"}getCellColor(){return this.editor.getAttributes("tableCell").background||this.editor.getAttributes("tableHeader").background}getGroupColor(){var r,g,P,U;if(this.editor.isActive("group")){const wt=null!==(g=null===(r=this.editor.getAttributes("group"))||void 0===r?void 0:r.style)&&void 0!==g?g:"",oe=(0,Lt.jx)(wt);return null!==(U=null!==(P=oe["background-color"])&&void 0!==P?P:oe.background)&&void 0!==U?U:""}return""}onAlign(r){this.editor.chain().focus().setTextAlign(r).run()}setImage(r){this.editor.chain().focus().command(({commands:g,state:P})=>{var U;const wt=null!==(U=g.setEditableImage)&&void 0!==U?U:g.setImage;if(wt){const oe=P.selection.anchor;return wt({src:r}),g.setTextSelection(oe),!0}return!1}).run()}undo(){this.editor.chain().undo().run()}redo(){this.editor.chain().redo().run()}setHorizontalRule(){this.editor.chain().focus().setHorizontalRule().run()}removeFormat(){this.editor.commands.unsetAllMarks(),this.editor.commands.clearNodes()}setFontColor(r){this.editor.chain().focus().setFontColor(r).run()}setBackgroundColor(r){this.editor.chain().focus().setBackgroundColor(r).run()}toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()}toggleStrike(){this.editor.chain().focus().toggleStrike().run()}toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()}toggleUnorderedList(){this.editor.chain().focus().toggleBulletList().run()}togglePre(){this.editor.chain().focus().toggleCodeBlock().run()}sinkListItem(){this.editor.chain().focus().sinkListItem("listItem").run()}liftListItem(){this.editor.chain().focus().liftListItem("listItem").run()}isActive(r){return this.editor.isActive(r)}isActive$(r){return this.stateChange$.pipe((0,Qt.O)(null),(0,Pt.U)(()=>this.isActive(r)),(0,N.x)())}toggleBold(){this.editor.chain().focus().toggleBold().run()}toggleCode(){this.editor.chain().focus().toggleCode().run()}toggleItalic(){this.editor.chain().focus().toggleItalic().run()}toggleBlockquote(){this.editor.chain().focus().toggleBlockquote().run()}toggleSubscript(){this.editor.chain().focus().toggleSubscript().run()}toggleSuperscript(){this.editor.chain().focus().toggleSuperscript().run()}toggleCodeBlock(){this.editor.chain().focus().toggleCodeBlock().run()}insertTable(r,g){this.editor.chain().focus().insertTable({cols:r,rows:g}).run()}addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()}addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()}addRowAfter(){this.editor.chain().focus().addRowAfter().run()}addRowBefore(){this.editor.chain().focus().addRowBefore().run()}deleteColumn(){this.editor.chain().focus().deleteColumn().run()}deleteRow(){this.editor.chain().focus().deleteRow().run()}mergeCells(){this.editor.chain().focus().mergeCells().run()}splitCell(){this.editor.chain().focus().splitCell().run()}canMergeCells(){return this.editor.can().mergeCells()}canSplitCells(){return this.editor.can().splitCell()}setHeading(r){this.editor.chain().focus().setHeading({level:r}).run()}setParagraph(r){this.editor.chain().focus().setParagraph().run(),r&&this.editor.chain().setMark("textStyle",r).run()}setHardBreak(){this.editor.chain().setHardBreak().run()}setTextSelection(r){this.editor.commands.setTextSelection(r)}toggleLink(r){this.editor.chain().focus().toggleLink({href:r}).run()}setLink(r){this.editor.chain().focus().setLink({href:r}).run()}unsetLink(){this.editor.chain().focus().unsetLink().run()}focus(){this.editor.chain().focus().run()}setValue(r){r===this.html||""===r&&"<p></p>"===this.html||(this.editor.commands.setContent(r),this.editor.view.updateState(w.yy.create({schema:this.editor.state.schema,doc:this.editor.state.doc,selection:this.editor.state.selection,storedMarks:this.editor.state.storedMarks,plugins:this.editor.state.plugins})))}destroy(){this.editor.destroy()}setCellColor(r){this.editor.chain().focus().setCellBackground(r).run()}selectClosest(){const r=this.editor.state.selection.anchor,{schema:g,doc:P}=this.editor.state,U=(0,Lt.Yz)(P.resolve(r),g.marks.link);U&&this.editor.chain().setTextSelection(U).run()}enter(){this.editor.commands.enter()}setDetails(){this.editor.commands.setDetails()}removeDetails(){this.editor.commands.removeDetails()}setGroup(){this.editor.commands.setGroup()}removeGroup(){this.editor.commands.removeGroup()}setGroupHilite(r){this.editor.commands.setGroupHilite(r)}setAnchor(r){this.editor.commands.setAnchor(r.replace("#",""))}removeAnchor(){this.editor.commands.removeAnchor()}setFileLink(r){this.editor.commands.setFileLink(r)}setYoutubeVideo(r){this.editor.commands.setYoutubeVideo(r)}setIframe(r){this.editor.commands.setIframe(r)}removeEmptyTextStyle(){this.editor.commands.removeEmptyTextStyle()}toggleMark(r,g,P){this.editor.commands.toggleMark(r,g,P)}}return c.\u0275fac=function(r){return new(r||c)(e.LFG(me))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac}),c})(),$=(()=>{class c{constructor(r,g,P,U,wt,oe){this.el=r,this.renderer=g,this.editor=P,this.editorContainer=U,this.editorLoaded$=wt,this.valueChange=this.editor.valueChange$,this.stateChange=this.editor.stateChange$,this.editorLoaded$.pipe((0,pt.R)(oe)).subscribe(()=>{this.renderer.appendChild(this.el.nativeElement,this.editorContainer)})}set value(r){this.editor.setValue(r)}set editable(r){this.editor.editable=r}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(L),e.Y36(Ce),e.Y36(me),e.Y36(Mt.a3,2))},c.\u0275dir=e.lG2({type:c,selectors:[["","tuiTiptapEditor",""]],inputs:{value:"value",editable:"editable"},outputs:{valueChange:"valueChange",stateChange:"stateChange"},features:[e._Bn([Mt.a3])]}),c})(),et=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({}),c})();function rt(c=""){if(c.startsWith(jt))return{prefix:jt,path:c.slice(1)};const[v="",r=""]=c.includes(ue)?ut(c):ft(c);if(r.includes(":")){const[g,P]=ft(r);if(g&&P)return{prefix:g,path:P}}return{prefix:v,path:""===v?c:r}}function ut(c=""){var v;const r=null!==(v=c.indexOf(ue))&&void 0!==v?v:-1,[g,P]=r>-1?[c.slice(0,r+ue.length),c.slice(r+ue.length,c.length)]:["",c],U=[g,P].filter(Boolean);return(null==P?void 0:P.includes("://"))&&U.length>1?ut(P):U}function ft(c=""){const[v,r]=c.split(/:/).slice(-2).filter(Boolean);return v&&r&&!(0,$t.lj)(c)?[`${v}:`,r]:[]}var kt=j(3633),Vt=j(5059),Ft=j(3213),Se=j(9013);const dn=["native"];function tn(c,v){1&c&&(e.TgZ(0,"span",4),e.Hsn(1),e.qZA())}const Te=["*"];let Ae=(()=>{class c extends R.M${constructor(r,g){super(r,g),this.maxLength=null,this.indent=-1}get nativeFocusableElement(){return this.native?this.native.nativeElement:null}get focused(){return(0,a.V8)(this.nativeFocusableElement)}get hasValue(){return""!==this.value}onValueChange(r){this.value=r}onFocused(r){this.updateFocused(r)}onScroll(){var r;const g=(null===(r=this.native)||void 0===r?void 0:r.nativeElement.scrollLeft)||0;this.indent=-1-g}getFallbackValue(){return""}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(gt.a5,10),e.Y36(e.sBO))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-input-inline"]],viewQuery:function(r,g){if(1&r&&e.Gf(dn,5),2&r){let P;e.iGM(P=e.CRH())&&(g.native=P.first)}},inputs:{maxLength:"maxLength"},features:[e._Bn([Ft.E2,(0,d.FT)(c)]),e.qOj],ngContentSelectors:Te,decls:4,vars:10,consts:[[1,"t-before",3,"textContent"],["automation-id","tui-input-inline__placeholder","class","t-placeholder",4,"ngIf"],["automation-id","tui-input-inline__native","type","text","tuiMaskAccessor","",1,"t-native",3,"id","disabled","readOnly","tuiFocusable","ngModel","ngModelChange","scroll","tuiFocusedChange"],["native",""],["automation-id","tui-input-inline__placeholder",1,"t-placeholder"]],template:function(r,g){1&r&&(e.F$t(),e._UZ(0,"span",0),e.YNc(1,tn,2,0,"span",1),e.TgZ(2,"input",2,3),e.NdJ("ngModelChange",function(U){return g.value=U})("scroll",function(){return g.onScroll()})("tuiFocusedChange",function(U){return g.onFocused(U)}),e.qZA()),2&r&&(e.Udp("text-indent",g.indent,"px"),e.Q6J("textContent",g.value),e.xp6(1),e.Q6J("ngIf",!g.hasValue),e.xp6(1),e.Q6J("id",g.id)("disabled",g.computedDisabled)("readOnly",g.readOnly)("tuiFocusable",g.focusable)("ngModel",g.value),e.uIk("maxLength",g.maxLength))},directives:[D.O5,Se.j,gt.Fj,kt.t,gt.JJ,gt.On,Vt.U],styles:["[_nghost-%COMP%]{position:relative;display:inline-block;overflow:hidden;white-space:nowrap;box-sizing:border-box}.t-before[_ngcontent-%COMP%]{display:block;padding-right:.02em;margin-left:1px;white-space:pre}.t-placeholder[_ngcontent-%COMP%]{display:inline-block;min-width:1px}.t-native[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background-color:transparent;padding:inherit;font:inherit;color:transparent;caret-color:#7d7d7d;box-sizing:border-box;width:100%;height:100%;border-width:0;text-align:inherit;letter-spacing:inherit;text-indent:inherit;text-transform:inherit;outline:none;mix-blend-mode:difference}"],changeDetection:0}),c})(),pn=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,gt.u5,kt.u,Vt.F,Se.c]]}),c})();var sn=j(134);let so=(()=>{class c{transform(r){return r.length<60?r:`${r.slice(0,Math.max(0,40))}...${r.slice(r.length-10)}`}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275pipe=e.Yjl({name:"tuiShortUrl",type:c,pure:!0}),c})(),lo=(()=>{class c{transform(r,g,P){return"#"===g?r.filter(U=>U!==P):r}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275pipe=e.Yjl({name:"tuiFilterAnchors",type:c,pure:!0}),c})();function Mn(c,v){1&c&&(e.ynx(0),e._uU(1," Edit anchor "),e.BQk())}function He(c,v){1&c&&(e.TgZ(0,"span"),e._uU(1," Link to anchor "),e.qZA())}function je(c,v){1&c&&(e.TgZ(0,"span"),e._uU(1,"URL"),e.qZA())}function $n(c,v){if(1&c&&(e.YNc(0,He,2,0,"span",1),e.YNc(1,je,2,0,"ng-template",null,12,e.W1O)),2&c){const r=e.MAs(2),g=e.oxw(2);e.Q6J("ngIf",g.prefixIsHashMode)("ngIfElse",r)}}function jn(c,v){if(1&c&&(e.ynx(0),e._uU(1),e.BQk()),2&c){const r=v.ngIf,g=e.oxw(2);e.xp6(1),e.hij(" ",g.prefixIsHashMode?r.anchorExample:r.urlExample," ")}}function In(c,v){if(1&c){const r=e.EpF();e.ynx(0),e.TgZ(1,"label",4),e.TgZ(2,"div",5),e.YNc(3,Mn,2,0,"ng-container",1),e.YNc(4,$n,3,2,"ng-template",null,6,e.W1O),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"div",8),e._uU(8),e.qZA(),e.TgZ(9,"tui-input-inline",9),e.NdJ("ngModelChange",function(P){return e.CHM(r),e.oxw().url=P})("input",function(P){let wt;return e.CHM(r),e.oxw().onChange(null==(wt=P.target)?null:wt.value)})("keydown.prevent.enter",function(){return e.CHM(r),e.oxw().onSave()})("keydown.backspace",function(){return e.CHM(r),e.oxw().onBackspace()}),e.YNc(10,jn,2,1,"ng-container",3),e.ALo(11,"async"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"tui-svg",10),e.NdJ("click",function(){return e.CHM(r),e.oxw().onClear()}),e.qZA(),e.TgZ(13,"button",11),e.NdJ("click",function(){return e.CHM(r),e.oxw().onSave()}),e.qZA(),e.BQk()}if(2&c){const r=e.MAs(5),g=e.oxw();e.xp6(3),e.Q6J("ngIf",g.anchorMode)("ngIfElse",r),e.xp6(5),e.Oqu(g.prefix),e.xp6(1),e.ekj("t-input_filled",g.hasUrl),e.Q6J("ngModel",g.url),e.xp6(1),e.Q6J("ngIf",e.lcZ(11,9,g.texts$)),e.xp6(2),e.ekj("t-cleaner_hidden",!g.hasUrl)}}function ln(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"a",13),e._uU(1),e.ALo(2,"tuiShortUrl"),e.qZA(),e.TgZ(3,"button",14),e.NdJ("click",function(){return e.CHM(r),e.oxw().onEdit()}),e.qZA(),e.TgZ(4,"button",15),e.NdJ("click",function(){return e.CHM(r),e.oxw().onRemove()}),e.qZA()}if(2&c){const r=e.oxw();e.Q6J("href",r.href,e.LSH)("icon",r.prefixIsHashMode?"tuiIconHash":"tuiIconExternalLink"),e.xp6(1),e.hij(" ",e.lcZ(2,3,r.url)," ")}}function wn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){const U=e.CHM(r).$implicit;return e.oxw(2).setAnchor(U)}),e._uU(1),e.qZA()}if(2&c){const r=v.$implicit;e.xp6(1),e.hij(" #",r," ")}}function gn(c,v){if(1&c&&(e.ynx(0),e._UZ(1,"hr",16),e.TgZ(2,"tui-scrollbar"),e.TgZ(3,"div",17),e.YNc(4,wn,2,1,"button",18),e.ALo(5,"tuiFilterAnchors"),e.qZA(),e.qZA(),e.BQk()),2&c){const r=e.oxw();e.xp6(4),e.Q6J("ngForOf",e.Dn7(5,1,r.anchorIds,r.prefix,r.url))}}let _n=(()=>{class c{constructor(r,g,P,U){this.doc=r,this.texts$=g,this.editor=P,this.options=U,this.isOnlyAnchorMode=this.detectAnchorMode(),this.addLink=new e.vpe,this.removeLink=new e.vpe,this.url=this.getHrefOrAnchorId(),this.edit=!this.url,this.prefix=this.makeDefaultPrefix(),this.anchorIds=this.getAllAnchorsIds()}get defaultProtocol(){var r,g;return null!==(g=null===(r=this.options.linkOptions)||void 0===r?void 0:r.protocol)&&void 0!==g?g:ye}set anchorMode(r){this.isOnlyAnchorMode=r,this.prefix=r?jt:this.makeDefaultPrefix()}get anchorMode(){return this.isOnlyAnchorMode}get prefixIsHashMode(){return this.prefix===jt}get hasUrl(){return!!this.url}get href(){return`${this.prefix}${this.url}`}get showAnchorsList(){return!this.anchorMode&&this.edit&&this.anchorIds.length>0}get isViewMode(){return!this.edit}onSelectionChange(){this.isViewMode&&(this.url=this.getHrefOrAnchorId(),this.anchorMode=this.detectAnchorMode())}onMouseDown(r){(0,_.ve)(r.target)&&!r.target.matches("a, button, input")&&r.preventDefault()}setAnchor(r){this.url=r,this.changePrefix(!0)}changePrefix(r){this.prefix=r?jt:this.defaultProtocol}onSave(){this.url?this.addLink.emit(this.href):this.removeLink.emit()}onBackspace(){this.url||(this.prefix=this.isOnlyAnchorMode?jt:this.defaultProtocol)}onEdit(){this.edit=!0}onRemove(){this.removeLink.emit()}onChange(r){this.url=this.removePrefix(r)}onClear(){this.url=""}makeDefaultPrefix(){var r,g;const P=this.getAnchorElement(),U=rt(null!==(r=null==P?void 0:P.getAttribute("href"))&&void 0!==r?r:"").prefix||this.defaultProtocol;return P&&(!P.getAttribute("href")&&P.getAttribute("id")||(null===(g=P.getAttribute("href"))||void 0===g?void 0:g.startsWith(jt)))?jt:U}detectAnchorMode(){const r=this.getAnchorElement();return!(null==r?void 0:r.href)&&!!(null==r?void 0:r.getAttribute("id"))}getFocusedParentElement(){var r,g;return(null===(g=null===(r=this.doc.getSelection())||void 0===r?void 0:r.focusNode)||void 0===g?void 0:g.parentElement)||null}getAnchorElement(){var r,g,P;const U=this.getFocusedParentElement();return null!==(P=null!==(r=null==U?void 0:U.closest("a"))&&void 0!==r?r:null===(g=null==U?void 0:U.querySelector("img"))||void 0===g?void 0:g.closest("a"))&&void 0!==P?P:null}getHrefOrAnchorId(){const r=this.getAnchorElement();return r?this.removePrefix(r.getAttribute("href")||r.getAttribute("id")||""):this.url}removePrefix(r){var g;const P=r.startsWith(jt)||this.prefix===jt?r:`${null!==(g=this.prefix)&&void 0!==g?g:""}${r}`,{prefix:U,path:wt}=rt(P);return this.prefix=this.isOnlyAnchorMode||U===jt||""===U&&this.prefix===jt?jt:""===U?this.defaultProtocol:U,wt}getAllAnchorsIds(){var r;const g=Array.from(null!==(r=this.editor.getOriginTiptapEditor().view.dom.querySelectorAll('[data-type="jump-anchor"]'))&&void 0!==r?r:[]);return Array.from(g).map(P=>P.getAttribute("id")||"").filter(Boolean)}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(D.K0),e.Y36(Le),e.Y36(L),e.Y36(de))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-edit-link"]],hostBindings:function(r,g){1&r&&e.NdJ("selectionchange",function(){return g.onSelectionChange()},!1,e.evT)("mousedown",function(U){return g.onMouseDown(U)})},inputs:{anchorMode:"anchorMode"},outputs:{addLink:"addLink",removeLink:"removeLink"},decls:5,vars:3,consts:[[1,"t-edit-link"],[4,"ngIf","ngIfElse"],["view",""],[4,"ngIf"],[1,"t-label"],[1,"t-label-properties"],["fullOptions",""],[1,"t-url"],[1,"t-prefix"],["tuiAutoFocus","",1,"t-input",3,"ngModel","ngModelChange","input","keydown.prevent.enter","keydown.backspace"],["src","tuiIconCloseLarge",1,"t-cleaner",3,"click"],["tuiIconButton","","type","button","size","s","title","Insert link","icon","tuiIconCheckCircleLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],["urlTitle",""],["tuiLink","","target","_blank","iconAlign","left",1,"t-link",3,"href","icon"],["tuiIconButton","","type","button","size","s","title","Change link","icon","tuiIconEdit2Large","shape","rounded","appearance","icon",1,"t-button","t-edit-button",3,"click"],["tuiIconButton","","type","button","size","s","title","Remove link","icon","tuiIconUnlinkLarge","shape","rounded","appearance","icon",1,"t-button",3,"click"],[1,"t-hr"],[1,"t-anchor-list"],["type","button","class","t-anchor",3,"click",4,"ngFor","ngForOf"],["type","button",1,"t-anchor",3,"click"]],template:function(r,g){if(1&r&&(e.TgZ(0,"div",0),e.YNc(1,In,14,11,"ng-container",1),e.YNc(2,ln,5,5,"ng-template",null,2,e.W1O),e.qZA(),e.YNc(4,gn,6,5,"ng-container",3)),2&r){const P=e.MAs(3);e.xp6(1),e.Q6J("ngIf",g.edit)("ngIfElse",P),e.xp6(3),e.Q6J("ngIf",g.showAnchorsList)}},directives:[D.O5,Ae,Xt.k,gt.JJ,gt.On,k.PN,Y.v0,qt.V,sn.IB,D.sg],pipes:[D.Ov,so,lo],styles:["[_nghost-%COMP%]{display:block;min-width:18.75rem}.t-edit-link[_ngcontent-%COMP%]{display:flex;min-height:4rem;align-items:center;padding-right:.75rem}.t-label[_ngcontent-%COMP%]{font:var(--tui-font-text-s);height:var(--tui-height-l);box-sizing:border-box;padding:.4375rem 1rem;min-width:12.5rem;max-width:25rem;width:100%}.t-label-properties[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:8.375rem;justify-content:space-between}.t-property_inactive[_ngcontent-%COMP%]{opacity:.5}.t-url[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-m);color:var(--tui-text-02)}.t-input[_ngcontent-%COMP%]{flex:1}.t-input_filled[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-button[_ngcontent-%COMP%]{width:2rem;height:2rem;margin:0 .25rem;transition:background .2s}.t-edit-button[_ngcontent-%COMP%]{margin-left:auto}.t-link[_ngcontent-%COMP%]{margin:0 1rem}.t-cleaner[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-base-06);cursor:pointer;margin-left:auto}.t-cleaner[_ngcontent-%COMP%]:hover{color:var(--tui-base-07)}.t-cleaner_hidden[_ngcontent-%COMP%]{visibility:hidden}.t-anchor-list[_ngcontent-%COMP%]{display:flex;max-height:12.5rem;flex-direction:column}.t-anchor[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;background:none;font-size:inherit;line-height:inherit;min-height:2.75rem;padding:.375rem .5rem;margin:.125rem .5rem;border-radius:var(--tui-radius-m);text-align:left}.t-anchor[_ngcontent-%COMP%]:hover{background:var(--tui-base-02);cursor:pointer}"],changeDetection:0}),c})();var Nn=j(5470);let Bn=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,gt.u5,Xt.Q7,Y.fN,k.EI,qt.j,pn,Nn.YM,sn.Jy]]}),c})();var Cn=j(3770),Kn=(j(8939),j(5257));let zn=(()=>{class c{constructor(r){this.el=r}get toolsContainers(){return Array.from(this.el.nativeElement.querySelectorAll("[tuiItem]"))}onHorizontalNavigation(r){const{toolsContainers:g}=this,P=g.findIndex(a.zb),wt=g[(0,Nt.Ki)(P+(r?-1:1),0,g.length-1)],oe=r?this.findPreviousTool(wt):this.findNextTool(wt);oe&&oe.focus()}findFirstFocusableTool(r=!1){const g=r?this.toolsContainers.slice().reverse():this.toolsContainers;for(const P of g){const U=(0,a._h)(P)?P:(0,a.BW)({initial:P,root:P,keyboard:!1});if(U)return U}return null}findPreviousTool(r){return(0,a._h)(r)?r:(0,a.BW)({initial:r,root:r,keyboard:!1})||(0,a.BW)({initial:r,root:this.el.nativeElement,previous:!0,keyboard:!1})}findNextTool(r){return(0,a._h)(r)?r:(0,a.BW)({initial:r,root:this.el.nativeElement,keyboard:!1})}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.SBq))},c.\u0275dir=e.lG2({type:c,selectors:[["","tuiToolbarNavigationManager",""]],hostBindings:function(r,g){1&r&&e.NdJ("keydown.arrowRight.prevent",function(){return g.onHorizontalNavigation(!1)})("keydown.arrowLeft.prevent",function(){return g.onHorizontalNavigation(!0)})}}),c})();var ao=j(6210);const Gn=function(){return{}};function co(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const U=e.CHM(r).$implicit;return e.oxw(2).setFontOption(U)}),e.ALo(1,"lowercase"),e._uU(2),e.qZA()}if(2&c){const r=v.$implicit;e.Udp("font-family",r.family)("font-size",r.px,"px")("font-weight",r.weight),e.Q6J("ngClass",(null==r?null:r.ngClass)||e.DdM(12,Gn))("ngStyle",(null==r?null:r.ngStyle)||e.DdM(13,Gn)),e.uIk("automation-id","tui_font__"+e.lcZ(1,10,r.name||"")),e.xp6(2),e.hij(" ",r.name," ")}}function no(c,v){if(1&c&&(e.TgZ(0,"tui-data-list"),e.YNc(1,co,3,14,"button",4),e.ALo(2,"async"),e.qZA()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,r.fontsOptions$))}}let Fo=(()=>{class c{constructor(r,g,P,U){this.options=r,this.editor=g,this.texts$=P,this.fontOptionsTexts$=U,this.fontsOptions$=this.fontOptionsTexts$.pipe((0,Pt.U)(wt=>this.options.fontOptions(wt))),this.fontText$=this.texts$.pipe((0,Pt.U)(wt=>wt.font))}onClick({headingLevel:r,px:g}){this.setFontOption({headingLevel:r,px:g})}setFontOption({headingLevel:r,px:g}){this.clearPreviousTextStyles(),r?this.editor.setHeading(r):this.editor.setParagraph({fontSize:(0,m.O)(g||0)})}clearPreviousTextStyles(){this.editor.removeEmptyTextStyle(),this.editor.toggleMark("textStyle")}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(de),e.Y36(L),e.Y36(pe),e.Y36(qe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-font-size"]],decls:6,vars:6,consts:[[3,"content"],["fonts",""],["tuiIconButton","","type","button","size","s","appearance","icon","icon","tuiIconFontLarge","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["fontsDropdown",""],["tuiOption","",3,"fontFamily","fontSize","fontWeight","ngClass","ngStyle","click",4,"ngFor","ngForOf"],["tuiOption","",3,"ngClass","ngStyle","click"]],template:function(r,g){if(1&r&&(e.TgZ(0,"tui-hosted-dropdown",0,1),e._UZ(2,"button",2),e.ALo(3,"async"),e.YNc(4,no,3,3,"ng-template",null,3,e.W1O),e.qZA()),2&r){const P=e.MAs(1),U=e.MAs(5);e.Q6J("content",U),e.xp6(2),e.Q6J("tuiHint",e.lcZ(3,4,g.fontText$))("pseudoActive",P.open)("focusable",P.open)}},directives:[Yt.o1,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM,M.qi,D.sg,M.vK,D.mk,D.PC],pipes:[D.Ov,D.i8],encapsulation:2,changeDetection:0}),c})();var qn=j(9112);function Xn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(r),e.oxw(4).editor.toggleBold()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf,g=e.oxw().ngIf;e.Q6J("tuiHint",g.bold)("pseudoActive",r.bold)}}function Co(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){return e.CHM(r),e.oxw(4).editor.toggleItalic()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf,g=e.oxw().ngIf;e.Q6J("tuiHint",g.italic)("pseudoActive",r.italic)}}function uo(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(r),e.oxw(4).editor.toggleUnderline()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf,g=e.oxw().ngIf;e.Q6J("tuiHint",g.underline)("pseudoActive",r.underline)}}function po(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(r),e.oxw(4).editor.toggleStrike()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf,g=e.oxw().ngIf;e.Q6J("tuiHint",g.strikeThrough)("pseudoActive",r.strike)}}function To(c,v){if(1&c&&(e.TgZ(0,"div",6),e.YNc(1,Xn,1,2,"button",7),e.YNc(2,Co,1,2,"button",8),e.YNc(3,uo,1,2,"button",9),e.YNc(4,po,1,2,"button",10),e.qZA()),2&c){const r=e.oxw(3);e.xp6(1),e.Q6J("ngIf",r.isEnabled(r.TuiEditorTool.Bold)),e.xp6(1),e.Q6J("ngIf",r.isEnabled(r.TuiEditorTool.Italic)),e.xp6(1),e.Q6J("ngIf",r.isEnabled(r.TuiEditorTool.Underline)),e.xp6(1),e.Q6J("ngIf",r.isEnabled(r.TuiEditorTool.Strikethrough))}}function ho(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",2,3),e._UZ(2,"button",4),e.YNc(3,To,5,4,"ng-template",null,5,e.W1O),e.qZA()),2&c){const r=v.ngIf,g=e.MAs(1),P=e.MAs(4),U=e.oxw().ngIf;e.Q6J("content",P),e.xp6(2),e.Q6J("tuiHint",U.fontStyle)("pseudoActive",g.open||r.bold||r.italic||r.underline||r.strike)("focusable",g.open)}}function xo(c,v){if(1&c&&(e.ynx(0),e.YNc(1,ho,5,4,"tui-hosted-dropdown",1),e.ALo(2,"async"),e.BQk()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,r.fontStyleState$))}}let Zo=(()=>{class c{constructor(r,g){this.editor=r,this.texts$=g,this.toolsSet=new Set(St),this.TuiEditorTool=st,this.fontStyleState$=(0,qn.aj)([this.editor.isActive$("bold"),this.editor.isActive$("italic"),this.editor.isActive$("underline"),this.editor.isActive$("strike")]).pipe((0,Pt.U)(([P,U,wt,oe])=>({bold:P,italic:U,underline:wt,strike:oe})))}set enabledTools(r){this.toolsSet=new Set(r)}isEnabled(r){return this.toolsSet.has(r)}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-font-style"]],inputs:{enabledTools:"enabledTools"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"ngIf"],[3,"content"],["format",""],["tuiIconButton","","type","button","size","s","icon","tuiIconFormatLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__font-style-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["formatDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon","class","t-option t-option_margin",3,"tuiHint","pseudoActive","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconBoldLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconItalicLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconUnderlineLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconStrikeThroughLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"]],template:function(r,g){1&r&&(e.YNc(0,xo,3,3,"ng-container",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,g.texts$))},directives:[D.O5,Yt.o1,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM],pipes:[D.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),c})();var en=j(2668);function fo(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",7),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).editor.onAlign("left")}),e.qZA(),e.TgZ(2,"button",8),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).editor.onAlign("center")}),e.qZA(),e.TgZ(3,"button",9),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).editor.onAlign("right")}),e.qZA(),e.TgZ(4,"button",10),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).editor.onAlign("justify")}),e.qZA(),e.qZA()}if(2&c){const r=e.oxw().tuiLet,g=e.oxw().ngIf;e.xp6(1),e.Q6J("pseudoActive",!(null==r||!r.left))("tuiHint",g.justifyLeft),e.xp6(1),e.Q6J("pseudoActive",!(null==r||!r.center))("tuiHint",g.justifyCenter),e.xp6(1),e.Q6J("pseudoActive",!(null==r||!r.right))("tuiHint",g.justifyRight),e.xp6(1),e.Q6J("pseudoActive",!(null==r||!r.justify))("tuiHint",g.justifyFull)}}function Tn(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",2,3),e._UZ(2,"button",4),e.YNc(3,fo,5,8,"ng-template",null,5,e.W1O),e.qZA()),2&c){const r=e.MAs(1),g=e.MAs(4),P=e.oxw().ngIf;e.Q6J("content",g),e.xp6(2),e.Q6J("tuiHint",P.justify)("pseudoActive",r.open)("focusable",r.open)}}function oo(c,v){if(1&c&&(e.ynx(0),e.YNc(1,Tn,5,4,"tui-hosted-dropdown",1),e.ALo(2,"async"),e.BQk()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("tuiLet",e.lcZ(2,1,r.alignState$))}}let vo=(()=>{class c{constructor(r,g){this.editor=r,this.texts$=g,this.alignState$=(0,qn.aj)([this.editor.isActive$({textAlign:"left"}),this.editor.isActive$({textAlign:"right"}),this.editor.isActive$({textAlign:"center"}),this.editor.isActive$({textAlign:"justify"})]).pipe((0,Pt.U)(([P,U,wt,oe])=>({left:P,right:U,center:wt,justify:oe})))}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-align-content"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["align",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["alignDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignLeftLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignCenterLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignRightLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconAlignJustifyLarge","appearance","icon",1,"t-option","t-option_margin",3,"pseudoActive","tuiHint","click"]],template:function(r,g){1&r&&(e.YNc(0,oo,3,3,"ng-container",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,g.texts$))},directives:[D.O5,en.Ls,Yt.o1,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM],pipes:[D.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),c})();function Fn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",7),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).editor.toggleUnorderedList()}),e.qZA(),e.TgZ(2,"button",8),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).editor.toggleOrderedList()}),e.qZA(),e.TgZ(3,"button",9),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).sinkListItem()}),e.qZA(),e.TgZ(4,"button",10),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).liftListItem()}),e.qZA(),e.qZA()}if(2&c){const r=e.oxw().tuiLet,g=e.oxw().ngIf;e.xp6(1),e.Q6J("tuiHint",g.unorderedList)("pseudoActive",!(null==r||!r.unordered)),e.xp6(1),e.Q6J("tuiHint",g.orderedList)("pseudoActive",!(null==r||!r.ordered)),e.xp6(1),e.Q6J("tuiHint",g.indent)("disabled",!(null!=r&&r.ordered||null!=r&&r.unordered)),e.xp6(1),e.Q6J("tuiHint",g.outdent)("disabled",!(null!=r&&r.ordered||null!=r&&r.unordered))}}function ko(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",2,3),e._UZ(2,"button",4),e.YNc(3,Fn,5,8,"ng-template",null,5,e.W1O),e.qZA()),2&c){const r=v.tuiLet,g=e.MAs(1),P=e.MAs(4),U=e.oxw().ngIf;e.Q6J("content",P),e.xp6(2),e.Q6J("tuiHint",U.list)("pseudoActive",(null==g?null:g.open)||(null==r?null:r.unordered)||(null==r?null:r.ordered)||!1)("focusable",g.open)}}function Mo(c,v){if(1&c&&(e.ynx(0),e.YNc(1,ko,5,4,"tui-hosted-dropdown",1),e.ALo(2,"async"),e.BQk()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("tuiLet",e.lcZ(2,1,r.listState$))}}let to=(()=>{class c{constructor(r,g){this.editor=r,this.texts$=g,this.listState$=(0,qn.aj)([this.editor.isActive$("orderedList"),this.editor.isActive$("bulletList")]).pipe((0,Pt.U)(([P,U])=>({ordered:P,unordered:U})))}sinkListItem(){this.editor.sinkListItem()}liftListItem(){this.editor.liftListItem()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-list-configs"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content",4,"tuiLet"],[3,"content"],["list",""],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__ordering-list-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["listDropdown",""],[1,"t-dropdown"],["tuiIconButton","","type","button","size","s","icon","tuiIconListLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOLLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","pseudoActive","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconIndentLarge","appearance","icon",1,"t-option","t-option_margin",3,"tuiHint","disabled","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconOutdentLarge","appearance","icon",1,"t-option",3,"tuiHint","disabled","click"]],template:function(r,g){1&r&&(e.YNc(0,Mo,3,3,"ng-container",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,g.texts$))},directives:[D.O5,en.Ls,Yt.o1,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM],pipes:[D.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),c})();var bn=j(221);function Dn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-palette",6),e.NdJ("selectedColor",function(P){return e.CHM(r),e.oxw(2).editor.setFontColor(P)}),e.qZA()}if(2&c){const r=v.$implicit,g=e.oxw(2);e.Q6J("tuiActiveZoneParent",r)("colors",g.colors)}}function mo(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",1,2),e._UZ(2,"button",3),e.ALo(3,"async"),e._UZ(4,"div",4),e.YNc(5,Dn,1,2,"ng-template",null,5,e.W1O),e.qZA()),2&c){const r=v.tuiLet,g=e.MAs(1),P=e.MAs(6),U=e.oxw();e.Q6J("content",P)("tuiDropdownMaxHeight",999),e.xp6(2),e.Q6J("tuiHint",e.lcZ(3,7,U.foreColorText$))("pseudoActive",g.open)("focusable",g.open),e.xp6(2),e.Udp("background",r)}}let hn=(()=>{class c{constructor(r,g,P){this.defaultOptions=r,this.editor=g,this.texts$=P,this.colors=this.defaultOptions.colors,this.fontColor$=this.editor.stateChange$.pipe((0,Pt.U)(()=>this.editor.getFontColor()||this.defaultOptions.blankColor),(0,N.x)()),this.foreColorText$=this.texts$.pipe((0,Pt.U)(U=>U.foreColor))}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(de),e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-text-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["color",""],["tuiIconButton","","type","button","size","s","icon","tuiIconColorLarge","appearance","icon","tuiHintDirection","top-left","automation-id","toolbar__color-button","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],[1,"t-plate"],["colorDropdown",""],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(r,g){1&r&&(e.YNc(0,mo,7,9,"tui-hosted-dropdown",0),e.ALo(1,"async")),2&r&&e.Q6J("tuiLet",e.lcZ(1,1,g.fontColor$))},directives:[en.Ls,Yt.o1,Ct.Ek,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM,ie,bn.e],pipes:[D.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),c})();function Un(c,v){if(1&c&&e._UZ(0,"div",6),2&c){const r=e.oxw().tuiLet;e.Udp("background",r)}}function Zn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-palette",7),e.NdJ("selectedColor",function(P){return e.CHM(r),e.oxw(2).editor.setBackgroundColor(P)}),e.qZA()}if(2&c){const r=v.$implicit,g=e.oxw(2);e.Q6J("tuiActiveZoneParent",r)("colors",g.colors)}}function Qe(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",1,2),e._UZ(2,"button",3),e.ALo(3,"async"),e.YNc(4,Un,1,2,"div",4),e.YNc(5,Zn,1,2,"ng-template",null,5,e.W1O),e.qZA()),2&c){const r=v.tuiLet,g=e.MAs(1),P=e.MAs(6),U=e.oxw();e.Q6J("content",P)("tuiDropdownMaxHeight",999),e.xp6(2),e.Q6J("tuiHint",e.lcZ(3,6,U.backColorText$))("pseudoActive",g.open)("focusable",g.open),e.xp6(2),e.Q6J("ngIf",!U.isBlankColor(r||""))}}let on=(()=>{class c{constructor(r,g,P){this.editor=r,this.texts$=g,this.defaultOptions=P,this.colors=this.defaultOptions.colors,this.backgroundColor$=this.editor.stateChange$.pipe((0,Pt.U)(()=>this.editor.getBackgroundColor()||this.defaultOptions.blankColor),(0,N.x)()),this.backColorText$=this.texts$.pipe((0,Pt.U)(U=>U.backColor))}isBlankColor(r){return r===this.defaultOptions.blankColor}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe),e.Y36(de))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-highlight-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[3,"content","tuiDropdownMaxHeight",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight"],["hilite",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconHiliteLarge","automation-id","toolbar__hilite-button","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["class","t-plate",3,"background",4,"ngIf"],["hiliteDropdown",""],[1,"t-plate"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(r,g){1&r&&(e.YNc(0,Qe,7,8,"tui-hosted-dropdown",0),e.ALo(1,"async")),2&r&&e.Q6J("tuiLet",e.lcZ(1,1,g.backgroundColor$))},directives:[en.Ls,Yt.o1,Ct.Ek,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM,D.O5,ie,bn.e],pipes:[D.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),c})();function Pn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const U=e.CHM(r).index;return e.oxw(2).onCode(!!U)}),e._uU(1),e.qZA()}if(2&c){const r=v.$implicit;e.xp6(1),e.hij(" ",r," ")}}function Jo(c,v){if(1&c&&(e.TgZ(0,"tui-data-list"),e.YNc(1,Pn,2,1,"button",4),e.ALo(2,"async"),e.qZA()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,r.codeOptionsTexts$))}}let io=(()=>{class c{constructor(r,g,P){this.editor=r,this.texts$=g,this.codeOptionsTexts$=P,this.hintText$=this.texts$.pipe((0,Pt.U)(U=>U.code)),this.insideCode$=this.editor.stateChange$.pipe((0,Pt.U)(()=>this.editor.isActive("code")||this.editor.isActive("codeBlock")),(0,N.x)())}onCode(r){r?this.editor.toggleCodeBlock():this.editor.toggleCode()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe),e.Y36(an))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-code"]],decls:7,vars:8,consts:[[3,"content"],["codes",""],["tuiIconButton","","type","button","size","s","icon","tuiIconCodeLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable"],["codesDropdown",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(r,g){if(1&r&&(e.TgZ(0,"tui-hosted-dropdown",0,1),e._UZ(2,"button",2),e.ALo(3,"async"),e.ALo(4,"async"),e.YNc(5,Jo,3,3,"ng-template",null,3,e.W1O),e.qZA()),2&r){const P=e.MAs(1),U=e.MAs(6);e.Q6J("content",U),e.xp6(2),e.Q6J("tuiHint",e.lcZ(3,4,g.hintText$))("pseudoActive",P.open||e.lcZ(4,6,g.insideCode$))("focusable",P.open)}},directives:[Yt.o1,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM,M.qi,D.sg,M.vK],pipes:[D.Ov],encapsulation:2,changeDetection:0}),c})();function go(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){return e.CHM(r),e.oxw().setDetails()}),e.qZA()}2&c&&e.Q6J("tuiHint",v.ngIf.setDetails)("focusable",!1)}let $o=(()=>{class c{constructor(r,g){this.editor=r,this.texts$=g}setDetails(){this.editor.setDetails()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-details"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","click"]],template:function(r,g){1&r&&(e.YNc(0,go,1,2,"button",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,g.texts$))},directives:[D.O5,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM],pipes:[D.Ov],encapsulation:2,changeDetection:0}),c})();function jo(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){return e.CHM(r),e.oxw().removeDetails()}),e.ALo(1,"async"),e.qZA()}if(2&c){const r=v.ngIf,g=e.oxw();e.Q6J("tuiHint",r.removeDetails)("focusable",!1)("disabled",!!e.lcZ(1,3,g.disabled$))}}let bo=(()=>{class c{constructor(r,g){this.editor=r,this.texts$=g,this.disabled$=this.editor.stateChange$.pipe((0,Pt.U)(()=>!this.editor.isActive("details")),(0,N.x)())}removeDetails(){this.editor.removeDetails()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-details-remove"]],decls:2,vars:3,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","icon","tuiIconSpoilerDeleteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled","click"]],template:function(r,g){1&r&&(e.YNc(0,jo,2,5,"button",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,g.texts$))},directives:[D.O5,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM],pipes:[D.Ov],encapsulation:2,changeDetection:0}),c})(),Vn=(()=>{class c{constructor(r,g){this.editor=r,this.texts$=g,this.insertGroupText$=this.texts$.pipe((0,Pt.U)(P=>P.insertGroup)),this.removeGroupText$=this.texts$.pipe((0,Pt.U)(P=>P.removeGroup)),this.disabled$=this.editor.stateChange$.pipe((0,Pt.U)(()=>!this.editor.isActive("group")),(0,N.x)())}addGroup(){this.editor.setGroup()}removeGroup(){this.editor.removeGroup()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-editor-group-tool"]],decls:5,vars:11,consts:[["tuiIconButton","","type","button","size","s","icon","tuiIconPlusLarge","appearance","icon","tuiHintDescribe","",3,"focusable","tuiHint","click"],["tuiIconButton","","type","button","size","s","icon","tuiIconCloseLarge","appearance","icon","tuiHintDescribe","",3,"focusable","disabled","tuiHint","click"]],template:function(r,g){1&r&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return g.addGroup()}),e.ALo(1,"async"),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return g.removeGroup()}),e.ALo(3,"async"),e.ALo(4,"async"),e.qZA()),2&r&&(e.Q6J("focusable",!1)("tuiHint",e.lcZ(1,5,g.insertGroupText$)),e.xp6(2),e.Q6J("focusable",!1)("disabled",!!e.lcZ(3,7,g.disabled$))("tuiHint",e.lcZ(4,9,g.removeGroupText$)))},directives:[Y.v0,x.$o,x.D,x.xn,x.t6,x.DM],pipes:[D.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),c})();function wo(c,v){if(1&c&&e._UZ(0,"div",7),2&c){const r=e.oxw(2).tuiLet;e.Udp("background",r)}}function Uo(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-palette",8),e.NdJ("selectedColor",function(P){e.CHM(r),e.oxw();const U=e.MAs(1);return e.oxw(2).setCellColor(P),U.close()}),e.qZA()}if(2&c){const r=v.$implicit,g=e.oxw(3);e.Q6J("tuiActiveZoneParent",r)("colors",g.colors)}}function So(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",2,3),e._UZ(2,"button",4),e.ALo(3,"async"),e.YNc(4,wo,1,2,"div",5),e.YNc(5,Uo,1,2,"ng-template",null,6,e.W1O),e.qZA()),2&c){const r=v.tuiLet,g=e.MAs(1),P=e.MAs(6),U=e.oxw().tuiLet,wt=e.oxw();e.Q6J("content",P)("tuiDropdownMaxHeight",999)("canOpen",!!r),e.xp6(2),e.Q6J("tuiHint",e.lcZ(3,8,wt.colorText$))("pseudoActive",g.open)("focusable",g.open)("disabled",!r),e.xp6(2),e.Q6J("ngIf",!wt.isBlankColor(U||""))}}function oi(c,v){if(1&c&&(e.ynx(0),e.YNc(1,So,7,10,"tui-hosted-dropdown",1),e.ALo(2,"async"),e.BQk()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("tuiLet",e.lcZ(2,1,r.isActive$))}}let ii=(()=>{class c{constructor(r,g,P){this.defaultOptions=r,this.editor=g,this.texts$=P,this.colors=this.defaultOptions.colors,this.colorText$=this.texts$.pipe((0,Pt.U)(U=>this.editor.isActive("group")&&U.hiliteGroup||this.editor.isActive("table")&&U.cellColor||"")),this.isActive$=(0,qn.aj)([this.editor.isActive$("table"),this.editor.isActive$("group")]).pipe((0,Pt.U)(([U,wt])=>U||wt)),this.color$=this.editor.stateChange$.pipe((0,Pt.U)(()=>this.editor.getCellColor()||this.editor.getGroupColor()||this.defaultOptions.blankColor),(0,N.x)())}isBlankColor(r){return r===this.defaultOptions.blankColor}setCellColor(r){this.editor.isActive("group")?this.editor.setGroupHilite(r):this.editor.isActive("table")&&this.editor.setCellColor(r)}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(de),e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-table-cell-color"]],inputs:{colors:"colors"},decls:2,vars:3,consts:[[4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen",4,"tuiLet"],[3,"content","tuiDropdownMaxHeight","canOpen"],["colorSelect",""],["tuiIconButton","","type","button","size","s","tuiHintDirection","top-left","appearance","icon","icon","tuiIconPaintLarge","tuiHintDescribe","",3,"tuiHint","pseudoActive","focusable","disabled"],["class","t-plate t-plate_paint",3,"background",4,"ngIf"],["cellColorDropdown",""],[1,"t-plate","t-plate_paint"],[1,"t-color-picker",3,"tuiActiveZoneParent","colors","selectedColor"]],template:function(r,g){1&r&&(e.YNc(0,oi,3,3,"ng-container",0),e.ALo(1,"async")),2&r&&e.Q6J("tuiLet",e.lcZ(1,1,g.color$))},directives:[en.Ls,Yt.o1,Ct.Ek,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM,D.O5,ie,bn.e],pipes:[D.Ov],styles:[".t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-option[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-option[_ngcontent-%COMP%]:hover{background:var(--tui-secondary-hover)}.t-option_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-color-picker[_ngcontent-%COMP%]{box-sizing:border-box;max-width:22.6rem}"],changeDetection:0}),c})();var ri=j(2579),Vo=j(7766);class Oo{constructor(v){this.$implicit=v}}let Yo=(()=>{class c{constructor(r,g){this.viewContainer=r,this.templateRef=g}set tuiRepeatTimesOf(r){const g=Math.floor((0,Nt.Ki)(r,0,65536)),{length:P}=this.viewContainer;r<P?this.removeContainers(P-r):this.addContainers(g)}addContainers(r){for(let g=this.viewContainer.length;g<r;g++)this.viewContainer.createEmbeddedView(this.templateRef,new Oo(g))}removeContainers(r){for(let g=0;g<r;g++)this.viewContainer.remove()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.s_b),e.Y36(e.Rgc))},c.\u0275dir=e.lG2({type:c,selectors:[["","tuiRepeatTimes","","tuiRepeatTimesOf",""]],inputs:{tuiRepeatTimesOf:"tuiRepeatTimesOf"}}),c})(),Wo=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({}),c})();function Qo(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"div",4),e.NdJ("mouseenter",function(P){const wt=e.CHM(r).$implicit,oe=e.oxw().$implicit;return e.oxw().updateCurrentSize(wt+1,oe+1,P)})("click",function(){return e.CHM(r),e.oxw(2).select()}),e.qZA()}if(2&c){const r=v.$implicit,g=e.oxw().$implicit,P=e.oxw();e.ekj("t-cell_hovered",P.tableSelectHovered(r,g))}}function Eo(c,v){if(1&c&&(e.TgZ(0,"div",2),e.YNc(1,Qo,1,2,"div",3),e.qZA()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("tuiRepeatTimesOf",r.rowsNumber)}}let Go=(()=>{class c{constructor(r){this.win=r,this.selectSize=new e.vpe,this.onSelectSize=this.selectSize,this.tableSize={rows:1,cols:1}}get columnsNumber(){return Math.min(Math.max(3,this.tableSize.cols+1),15)}get rowsNumber(){return Math.min(Math.max(3,this.tableSize.rows+1),15)}tableSelectHovered(r,g){return r<this.tableSize.rows&&g<this.tableSize.cols}updateCurrentSize(r,g,P){(0,Vo.ic)(this.win)-P.clientX>70&&(this.tableSize={rows:r,cols:g})}onClick(){this.select()}select(){this.selectSize.emit(this.tableSize)}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(ri.m9))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-table-size-selector"]],outputs:{selectSize:"selectSize",onSelectSize:"onSelectSize"},decls:3,vars:3,consts:[["class","t-column",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-description"],[1,"t-column"],["class","t-cell",3,"t-cell_hovered","mouseenter","click",4,"tuiRepeatTimes","tuiRepeatTimesOf"],[1,"t-cell",3,"mouseenter","click"]],template:function(r,g){1&r&&(e.YNc(0,Eo,2,1,"div",0),e.TgZ(1,"div",1),e._uU(2),e.qZA()),2&r&&(e.Q6J("tuiRepeatTimesOf",g.columnsNumber),e.xp6(2),e.AsE("",g.tableSize.cols,"\xd7",g.tableSize.rows,""))},directives:[Yo],styles:["[_nghost-%COMP%]{display:block;padding:.75rem}.t-cell[_ngcontent-%COMP%]{display:inline-block;background-color:var(--tui-base-01);width:1.25rem;height:1.25rem;border-radius:.25rem;margin:.125rem;border:1px solid var(--tui-base-04);cursor:pointer}.t-cell_hovered[_ngcontent-%COMP%]{background-color:var(--tui-base-02)}.t-column[_ngcontent-%COMP%]{white-space:nowrap}.t-description[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),c})();function qo(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-table-size-selector",4),e.NdJ("onSelectSize",function(P){return e.CHM(r),e.oxw().addTable(P)}),e.qZA()}}let yo=(()=>{class c{constructor(r,g){this.editor=r,this.texts$=g,this.insertTableText$=this.texts$.pipe((0,Pt.U)(P=>P.insertTable))}addTable({rows:r,cols:g}){this.editor.enter();const P=this.editor.state.selection.anchor;this.editor.enter(),this.editor.enter(),this.editor.setTextSelection(P),this.editor.insertTable(r,g)}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-table-create"]],decls:6,vars:5,consts:[["tuiDropdownAlign","left","tuiDropdownDirection","bottom",3,"content"],["table",""],["tuiIconButton","","type","button","size","s","icon","tuiIconTableLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable"],["tableDropdown",""],[3,"onSelectSize"]],template:function(r,g){if(1&r&&(e.TgZ(0,"tui-hosted-dropdown",0,1),e._UZ(2,"button",2),e.ALo(3,"async"),e.qZA(),e.YNc(4,qo,1,0,"ng-template",null,3,e.W1O)),2&r){const P=e.MAs(1),U=e.MAs(5);e.Q6J("content",U),e.xp6(2),e.Q6J("tuiHint",e.lcZ(3,3,g.insertTableText$))("focusable",P.open)}},directives:[Yt.o1,Ct.Ek,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM,Go],pipes:[D.Ov],encapsulation:2,changeDetection:0}),c})();function Xo(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",2,3),e._UZ(2,"button",4),e.ALo(3,"async"),e.qZA()),2&c){const r=v.tuiLet,g=e.MAs(1),P=e.oxw(),U=e.MAs(3);e.Q6J("content",U)("canOpen",!!r),e.xp6(2),e.Q6J("tuiHint",e.lcZ(3,5,P.rowsColumnsManagingText$))("focusable",g.open)("disabled",!r)}}function si(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){const U=e.CHM(r).index,wt=e.oxw().index;return e.oxw(2).onTableOption(2*wt+U)}),e._uU(1),e.qZA()}if(2&c){const r=v.$implicit;e.xp6(1),e.hij(" ",r," ")}}function ro(c,v){if(1&c&&(e.TgZ(0,"tui-opt-group"),e.YNc(1,si,2,1,"button",6),e.qZA()),2&c){const r=v.$implicit;e.xp6(1),e.Q6J("ngForOf",r)}}function _o(c,v){if(1&c&&(e.TgZ(0,"tui-data-list"),e.YNc(1,ro,2,1,"tui-opt-group",5),e.ALo(2,"async"),e.qZA()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,r.tableCommandTexts$))}}var Sn=(()=>{return(c=Sn||(Sn={}))[c.InsertColumnBefore=0]="InsertColumnBefore",c[c.InsertColumnAfter=1]="InsertColumnAfter",c[c.InsertRowBefore=2]="InsertRowBefore",c[c.InsertRowAfter=3]="InsertRowAfter",c[c.DeleteColumn=4]="DeleteColumn",c[c.DeleteRow=5]="DeleteRow",Sn;var c})();let Do=(()=>{class c{constructor(r,g,P){this.editor=r,this.texts$=g,this.tableCommandTexts$=P,this.commandsRegistry={[Sn.InsertColumnAfter]:()=>this.editor.addColumnAfter(),[Sn.InsertColumnBefore]:()=>this.editor.addColumnBefore(),[Sn.InsertRowAfter]:()=>this.editor.addRowAfter(),[Sn.InsertRowBefore]:()=>this.editor.addRowBefore(),[Sn.DeleteColumn]:()=>this.editor.deleteColumn(),[Sn.DeleteRow]:()=>this.editor.deleteRow()},this.isActive$=this.editor.isActive$("table"),this.rowsColumnsManagingText$=this.texts$.pipe((0,Pt.U)(U=>U.rowsColumnsManaging))}onTableOption(r){this.commandsRegistry[r]()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe),e.Y36(ke))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-table-row-column-manager"]],decls:4,vars:3,consts:[[3,"content","canOpen",4,"tuiLet"],["tableOptionsDropdown",""],[3,"content","canOpen"],["tableCommand",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAddRowLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"tuiHint","focusable","disabled"],[4,"ngFor","ngForOf"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"]],template:function(r,g){1&r&&(e.YNc(0,Xo,4,7,"tui-hosted-dropdown",0),e.ALo(1,"async"),e.YNc(2,_o,3,3,"ng-template",null,1,e.W1O)),2&r&&e.Q6J("tuiLet",e.lcZ(1,1,g.isActive$))},directives:[en.Ls,Yt.o1,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM,M.qi,D.sg,M.Rs,M.vK],pipes:[D.Ov],encapsulation:2,changeDetection:0}),c})();function Po(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){e.CHM(r);const P=e.oxw().tuiLet,U=e.oxw();return P.mergeCells?U.mergeCells():U.splitCell()}),e.qZA()}if(2&c){const r=v.ngIf,g=e.oxw().tuiLet;e.Q6J("icon",g.mergeCells?"tuiIconTableMergeLarge":"tuiIconTableSplitLarge")("tuiHint",g.mergeCells?r.mergeCells:r.splitCells)("focusable",!1)("disabled",!g.mergeCells&&!g.splitCells)}}function Lo(c,v){if(1&c&&(e.ynx(0),e.YNc(1,Po,1,4,"button",1),e.ALo(2,"async"),e.BQk()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,r.texts$))}}const ti=function(c,v){return{mergeCells:c,splitCells:v}};let Ro=(()=>{class c{constructor(r,g){this.editor=r,this.texts$=g,this.canMergeCells$=this.editor.stateChange$.pipe((0,Pt.U)(()=>this.editor.canMergeCells()),(0,N.x)()),this.canSplitCells$=this.editor.stateChange$.pipe((0,Pt.U)(()=>this.editor.canSplitCells()),(0,N.x)())}mergeCells(){this.editor.mergeCells()}splitCell(){this.editor.splitCell()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(L),e.Y36(pe))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-table-merge-cells"]],decls:3,vars:8,consts:[[4,"tuiLet"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click",4,"ngIf"],["tuiIconButton","","type","button","size","s","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",3,"icon","tuiHint","focusable","disabled","click"]],template:function(r,g){1&r&&(e.YNc(0,Lo,3,3,"ng-container",0),e.ALo(1,"async"),e.ALo(2,"async")),2&r&&e.Q6J("tuiLet",e.WLB(5,ti,e.lcZ(1,1,g.canMergeCells$),e.lcZ(2,3,g.canSplitCells$)))},directives:[en.Ls,D.O5,Y.v0,x.$o,x.D,x.xn,x.t6,x.DM],pipes:[D.Ov],encapsulation:2,changeDetection:0}),c})();const ei=["dropdown"];function p(c,v){1&c&&e.GkF(0)}function n(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",7),e.NdJ("click",function(){return e.CHM(r),e.oxw(2).undo()}),e.qZA(),e.TgZ(2,"button",8),e.NdJ("click",function(){return e.CHM(r),e.oxw(2).redo()}),e.qZA(),e.qZA()}if(2&c){const r=e.oxw().ngIf,g=e.oxw();e.xp6(1),e.Q6J("tuiHint",r.undo)("disabled",g.undoDisabled)("focusable",!1),e.xp6(1),e.Q6J("tuiHint",r.redo)("disabled",g.redoDisabled)("focusable",!1)}}function t(c,v){1&c&&(e.TgZ(0,"div",6),e._UZ(1,"tui-font-size",9),e.qZA())}function o(c,v){if(1&c&&e._UZ(0,"tui-font-style",15),2&c){const r=e.oxw(3);e.Q6J("enabledTools",r.toolsSet)}}function i(c,v){1&c&&e._UZ(0,"tui-align-content",9)}function s(c,v){1&c&&e._UZ(0,"tui-list-configs",9)}function l(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",16,17),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).toggleQuote()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf,g=e.oxw();e.Q6J("tuiHint",r.quote)("pseudoActive",g.blockquote)("disabled",g.unorderedList||g.orderedList)("focusable",!1)}}function u(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-edit-link",22,23),e.NdJ("addLink",function(P){e.CHM(r),e.oxw();const U=e.MAs(1);return e.oxw(3).onLink(U,P)})("removeLink",function(){e.CHM(r),e.oxw();const P=e.MAs(1);return e.oxw(3).onLink(P)}),e.qZA()}}function h(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",18,19),e._UZ(2,"button",20,17),e.YNc(4,u,2,0,"ng-template",null,21,e.W1O),e.qZA()),2&c){const r=e.MAs(1),g=e.MAs(5),P=e.oxw(2).ngIf,U=e.oxw();e.Q6J("canOpen",U.canOpenAnchor)("content",g),e.xp6(2),e.Q6J("tuiHint",P.link)("pseudoActive",r.open||U.a)("focusable",r.open)}}function y(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-edit-link",28),e.NdJ("addLink",function(P){e.CHM(r),e.oxw();const U=e.MAs(1);return e.oxw(3).setAnchor(U,P)})("removeLink",function(){return e.CHM(r),e.oxw(4).removeAnchor()}),e.qZA()}2&c&&e.Q6J("anchorMode",!0)}function A(c,v){if(1&c&&(e.TgZ(0,"tui-hosted-dropdown",24,25),e._UZ(2,"button",26),e.YNc(3,y,1,1,"ng-template",null,27,e.W1O),e.qZA()),2&c){const r=e.MAs(1),g=e.MAs(4),P=e.oxw(2).ngIf,U=e.oxw();e.Q6J("canOpen",U.canOpenAnchor)("content",g),e.xp6(2),e.Q6J("focusable",!1)("pseudoActive",r.open||U.jumpAnchor)("tuiHint",P.insertAnchor)}}function E(c,v){if(1&c){const r=e.EpF();e.ynx(0),e.TgZ(1,"button",29,17),e.NdJ("click",function(){return e.CHM(r),e.MAs(4).click()}),e.qZA(),e.TgZ(3,"input",30,31),e.NdJ("change",function(){e.CHM(r);const P=e.MAs(4);return e.oxw(3).onAttach(P)}),e.qZA(),e.BQk()}if(2&c){const r=e.oxw(2).ngIf,g=e.oxw();e.xp6(1),e.Q6J("tuiHint",r.attach)("focusable",!1),e.xp6(2),e.Q6J("accept",g.attachOptions.accept)("multiple",g.attachOptions.multiple)("tuiFocusable",!1)}}function F(c,v){if(1&c&&(e.TgZ(0,"div",6),e.YNc(1,o,1,1,"tui-font-style",10),e.YNc(2,i,1,0,"tui-align-content",11),e.YNc(3,s,1,0,"tui-list-configs",11),e.YNc(4,l,2,4,"button",12),e.YNc(5,h,6,5,"tui-hosted-dropdown",13),e.YNc(6,A,5,5,"tui-hosted-dropdown",14),e.YNc(7,E,5,5,"ng-container",1),e.qZA()),2&c){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.formatEnabled),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Align)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.List)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Quote)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Link)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Anchor)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Attach))}}function V(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",34,17),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).toggleSubscript()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf,g=e.oxw();e.Q6J("tuiHint",r.subscript)("pseudoActive",g.subscript)("focusable",!1)}}function Q(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",35,17),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).toggleSuperscript()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf,g=e.oxw();e.Q6J("tuiHint",r.superscript)("pseudoActive",g.superscript)("focusable",!1)}}function nt(c,v){if(1&c&&(e.TgZ(0,"div",6),e.YNc(1,V,2,3,"button",32),e.YNc(2,Q,2,3,"button",33),e.qZA()),2&c){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Sub)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Sup))}}function mt(c,v){if(1&c&&e._UZ(0,"tui-text-color",37),2&c){const r=e.oxw(3);e.Q6J("colors",r.colors)}}function Tt(c,v){if(1&c&&e._UZ(0,"tui-highlight-color",37),2&c){const r=e.oxw(3);e.Q6J("colors",r.colors)}}function Kt(c,v){if(1&c&&(e.TgZ(0,"div",6),e.YNc(1,mt,1,1,"tui-text-color",36),e.YNc(2,Tt,1,1,"tui-highlight-color",36),e.qZA()),2&c){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Color)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Hilite))}}function Oe(c,v){1&c&&e._UZ(0,"tui-code",9)}function ze(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",41,17),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).onTeX()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf;e.Q6J("tuiHint",r.tex)("focusable",!1)}}function Ke(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"button",43,17),e.NdJ("click",function(){return e.CHM(r),e.MAs(4).click()}),e.qZA(),e.TgZ(3,"input",44,45),e.NdJ("change",function(){e.CHM(r);const P=e.MAs(4);return e.oxw(3).onImage(P)}),e.qZA(),e.qZA()}if(2&c){const r=e.oxw(2).ngIf;e.xp6(1),e.Q6J("tuiHint",r.image)("focusable",!1),e.xp6(2),e.Q6J("tuiFocusable",!1)}}function Fe(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"button",46,17),e.NdJ("click",function(){return e.CHM(r),e.oxw(3).insertHorizontalRule()}),e.qZA()}if(2&c){const r=e.oxw(2).ngIf;e.Q6J("tuiHint",r.insertHorizontalRule)("focusable",!1)}}function xn(c,v){if(1&c&&(e.TgZ(0,"div",6),e.YNc(1,Oe,1,0,"tui-code",11),e.YNc(2,ze,2,2,"button",38),e.YNc(3,Ke,5,3,"div",39),e.YNc(4,Fe,2,2,"button",40),e.qZA()),2&c){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Code)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Tex)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Img)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.HR))}}function Yn(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",47,17),e.NdJ("click",function(){return e.CHM(r),e.oxw(2).removeFormat()}),e.qZA(),e.qZA()}if(2&c){const r=e.oxw().ngIf;e.xp6(1),e.Q6J("tuiHint",r.clear)("focusable",!1)}}function ge(c,v){1&c&&(e.TgZ(0,"div",6),e._UZ(1,"tui-details",48),e._UZ(2,"tui-details-remove",48),e.qZA())}function Wn(c,v){if(1&c&&e._UZ(0,"tui-table-cell-color",37),2&c){const r=e.oxw(3);e.Q6J("colors",r.colors)}}function Ho(c,v){if(1&c&&(e.TgZ(0,"div",6),e._UZ(1,"tui-editor-group-tool",48),e.YNc(2,Wn,1,1,"tui-table-cell-color",36),e.qZA()),2&c){const r=e.oxw(2);e.xp6(2),e.Q6J("ngIf",!r.enabled(r.TuiEditorTool.Table))}}function ci(c,v){if(1&c&&(e.TgZ(0,"div",6),e._UZ(1,"tui-table-create",48),e._UZ(2,"tui-table-row-column-manager",48),e._UZ(3,"tui-table-merge-cells",48),e._UZ(4,"tui-table-cell-color",37),e.qZA()),2&c){const r=e.oxw(2);e.xp6(4),e.Q6J("colors",r.colors)}}function Ti(c,v){if(1&c&&(e.TgZ(0,"section",4),e.YNc(1,n,3,6,"div",5),e.YNc(2,t,2,0,"div",5),e.YNc(3,F,8,7,"div",5),e.YNc(4,nt,3,2,"div",5),e.YNc(5,Kt,3,2,"div",5),e.YNc(6,xn,5,4,"div",5),e.YNc(7,Yn,3,2,"div",5),e.YNc(8,ge,3,0,"div",5),e.YNc(9,Ho,3,1,"div",5),e.YNc(10,ci,5,1,"div",5),e.TgZ(11,"div",6),e.Hsn(12),e.qZA(),e.qZA()),2&c){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Undo)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Size)),e.xp6(1),e.Q6J("ngIf",r.firstBigBlockEnabled),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Sub)||r.enabled(r.TuiEditorTool.Sup)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Color)||r.enabled(r.TuiEditorTool.Hilite)),e.xp6(1),e.Q6J("ngIf",r.secondBigBlockEnabled),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Clear)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Details)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Group)),e.xp6(1),e.Q6J("ngIf",r.enabled(r.TuiEditorTool.Table))}}const xi=["*"];let ui=(()=>{class c{constructor(r,g,P,U,wt,oe,Ze,cn){this.el=r,this.editor=g,this.imageLoader=P,this.attachOptions=U,this.filesLoader=wt,this.texts$=oe,this.defaultOptions=Ze,this.destroy$=cn,this.dropdowns=Cn.Mm,this.colors=this.defaultOptions.colors,this.disabled=!1,this.linkAdded=new e.vpe,this.texClicked=new e.vpe,this.fileAttached=new e.vpe,this.TuiEditorTool=st,this.toolsSet=new Set(St)}set tools(r){this.toolsSet=new Set(r)}get focused(){return(0,a.zb)(this.el.nativeElement)||!!this.dropdowns.find(({nativeElement:r})=>(0,a.zb)(r))}get focusable(){return!this.focused&&!this.disabled}get unorderedList(){return this.editor.isActive("bulletList")}get orderedList(){return this.editor.isActive("orderedList")}get blockquote(){return this.editor.isActive("blockquote")}get a(){return this.editor.isActive("link")}get jumpAnchor(){return this.editor.isActive("jumpAnchor")}get canOpenAnchor(){return!this.a&&!this.jumpAnchor}get undoDisabled(){return this.editor.undoDisabled()}get redoDisabled(){return this.editor.redoDisabled()}get subscript(){return this.editor.isActive("subscript")}get superscript(){return this.editor.isActive("superscript")}get formatEnabled(){return this.enabled(st.Bold)||this.enabled(st.Italic)||this.enabled(st.Underline)||this.enabled(st.Strikethrough)}get firstBigBlockEnabled(){return this.formatEnabled||this.enabled(st.Align)||this.enabled(st.List)||this.enabled(st.Quote)||this.enabled(st.Link)||this.enabled(st.Anchor)||this.enabled(st.Attach)}get secondBigBlockEnabled(){return this.enabled(st.Code)||this.enabled(st.Tex)||this.enabled(st.Img)||this.enabled(st.HR)}onMouseDown(r,g){g.closest("button")||(r.preventDefault(),this.editor.focus())}onBottomFocus(){this.focusLast()}onTopFocus(){this.focusFirst()}onImage(r){var g;const P=null===(g=r.files)||void 0===g?void 0:g[0];r.value="",P&&this.imageLoader(P).pipe((0,Kn.q)(1),(0,pt.R)(this.destroy$)).subscribe(U=>this.addImage(U))}onAttach(r){var g;const P=Array.from(r.files||[]);r.value="",P&&(null===(g=this.filesLoader)||void 0===g||g.call(this,P).pipe((0,Kn.q)(1),(0,pt.R)(this.destroy$)).subscribe(U=>this.fileAttached.emit(U)))}onTeX(){this.texClicked.emit()}onLink(r,g){r.open=!1,g&&this.editor.toggleLink(g)}setAnchor(r,g){r.open=!1,g&&(this.editor.setAnchor(g),this.editor.selectClosest())}removeAnchor(){this.editor.removeAnchor()}enabled(r){return this.toolsSet.has(r)}undo(){this.editor.undo()}redo(){this.editor.redo()}insertHorizontalRule(){this.editor.setHorizontalRule()}removeFormat(){this.editor.removeFormat()}toggleOrderedList(){this.editor.toggleOrderedList()}toggleQuote(){this.editor.toggleBlockquote()}toggleSubscript(){this.editor.toggleSubscript()}toggleSuperscript(){this.editor.toggleSuperscript()}addImage(r){this.editor.setImage(r)}focusFirst(){var r;const g=null===(r=this.navigationManager)||void 0===r?void 0:r.findFirstFocusableTool();g&&g.focus()}focusLast(){var r;const g=null===(r=this.navigationManager)||void 0===r?void 0:r.findFirstFocusableTool(!0);g&&g.focus()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.SBq,8),e.Y36(L),e.Y36(Re),e.Y36(Me),e.Y36(Ge,8),e.Y36(pe),e.Y36(de),e.Y36(Mt.a3,2))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-toolbar"]],viewQuery:function(r,g){if(1&r&&(e.Gf(zn,5),e.Gf(ei,5,e.SBq)),2&r){let P;e.iGM(P=e.CRH())&&(g.navigationManager=P.first),e.iGM(P=e.CRH())&&(g.dropdowns=P)}},hostAttrs:["role","toolbar"],hostVars:2,hostBindings:function(r,g){1&r&&e.NdJ("mousedown",function(U){return g.onMouseDown(U,U.target)}),2&r&&e.ekj("_disabled",g.disabled)},inputs:{colors:"colors",disabled:"disabled",tools:"tools"},outputs:{linkAdded:"linkAdded",texClicked:"texClicked",fileAttached:"fileAttached"},features:[e._Bn([Mt.a3])],ngContentSelectors:xi,decls:7,vars:8,consts:[["type","button",1,"t-prevent-parent-label-behavior"],[4,"ngIf"],[3,"tuiFocusable","focus"],["tuiToolbarNavigationManager","","class","t-tools-wrapper",4,"ngIf"],["tuiToolbarNavigationManager","",1,"t-tools-wrapper"],["class","t-block",4,"ngIf"],[1,"t-block"],["tuiItem","","tuiIconButton","","type","button","size","s","icon","tuiIconUndoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconRedoLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","disabled","focusable","click"],["tuiItem","",1,"t-tool","t-wrapper"],["tuiItem","","class","t-tool t-wrapper",3,"enabledTools",4,"ngIf"],["tuiItem","","class","t-tool t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",3,"canOpen","content",4,"ngIf"],["class","t-wrapper",3,"canOpen","content",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"enabledTools"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconQuoteLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","disabled","focusable","click"],["button",""],["tuiItem","",1,"t-wrapper",3,"canOpen","content"],["link",""],["tuiIconButton","","type","button","size","s","icon","tuiIconLinkLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","pseudoActive","focusable"],["linkDropdown",""],[3,"addLink","removeLink"],["dropdown",""],[1,"t-wrapper",3,"canOpen","content"],["anchor",""],["tuiIconButton","","type","button","size","s","icon","tuiIconAnchorLarge","tuiHintDirection","top-left","appearance","icon","tuiHintDescribe","",3,"focusable","pseudoActive","tuiHint"],["anchorDropdown",""],[3,"anchorMode","addLink","removeLink"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconPaperclipLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["type","file",1,"t-file-upload",3,"accept","multiple","tuiFocusable","change"],["fileUpload",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","pseudoActive","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSubscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconSuperscriptLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","pseudoActive","focusable","click"],["tuiItem","","class","t-tool t-wrapper",3,"colors",4,"ngIf"],["tuiItem","",1,"t-tool","t-wrapper",3,"colors"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool",3,"tuiHint","focusable","click",4,"ngIf"],["tuiItem","","class","t-wrapper",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","","class","t-tool t-tool_margin",3,"tuiHint","focusable","click",4,"ngIf"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconTeXLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-wrapper"],["tuiIconButton","","type","button","size","s","icon","tuiIconImageLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool",3,"tuiHint","focusable","click"],["type","file","accept","image/*",1,"t-image",3,"tuiFocusable","change"],["image",""],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconHrLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiIconButton","","tuiItem","","type","button","size","s","icon","tuiIconClearFormatLarge","appearance","icon","tuiHintDirection","top-left","tuiHintDescribe","",1,"t-tool","t-tool_margin",3,"tuiHint","focusable","click"],["tuiItem","",1,"t-tool","t-tool_margin"]],template:function(r,g){1&r&&(e.F$t(),e._UZ(0,"button",0),e.YNc(1,p,1,0,"ng-container",1),e.ALo(2,"async"),e.TgZ(3,"div",2),e.NdJ("focus",function(){return g.onTopFocus()}),e.qZA(),e.TgZ(4,"div",2),e.NdJ("focus",function(){return g.onBottomFocus()}),e.qZA(),e.YNc(5,Ti,13,10,"section",3),e.ALo(6,"async")),2&r&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,4,g.editor.stateChange$)),e.xp6(2),e.Q6J("tuiFocusable",g.focusable),e.xp6(1),e.Q6J("tuiFocusable",g.focusable),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,6,g.texts$)))},directives:[D.O5,kt.t,zn,Y.v0,ao.w,x.$o,x.D,x.xn,x.t6,x.DM,Fo,Zo,vo,to,Yt.o1,_n,hn,on,io,$o,bo,Vn,ii,yo,Do,Ro],pipes:[D.Ov],styles:['.t-tools-wrapper[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;padding:.25rem .75rem;overflow:auto;flex-wrap:wrap;box-shadow:0 .125rem .1875rem rgba(0,0,0,.1)}.t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, .t-tools-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-tools-wrapper._disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:var(--tui-disabled-opacity)}.t-block[_ngcontent-%COMP%]{display:flex;padding:.25rem 0}.t-block[_ngcontent-%COMP%]:not(:last-child):after{content:"";display:block;margin:0 .25rem;width:1px;background:var(--tui-secondary-active)}.t-tool[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}button.t-tool[_ngcontent-%COMP%]:hover, .t-tool[_ngcontent-%COMP%]     button:hover{background:var(--tui-secondary-hover)}.t-tool_margin[_ngcontent-%COMP%]{margin:0 .25rem}.t-dropdown[_ngcontent-%COMP%]{padding:.75rem}.t-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 .25rem}.t-plate[_ngcontent-%COMP%]{position:absolute;top:1.375rem;left:.25rem;width:1.5rem;height:.25rem;pointer-events:none}.t-plate_paint[_ngcontent-%COMP%]{left:.375rem;width:1.25rem}.t-font[_ngcontent-%COMP%]{padding:.3em 0;outline:none;width:100%;pointer-events:none}.t-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;font-size:0;opacity:0;cursor:pointer}.t-image[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.t-file-upload[_ngcontent-%COMP%]{display:none}.t-color-picker[_ngcontent-%COMP%]     tui-hosted-dropdown, .t-color-picker[_ngcontent-%COMP%]     tui-color-picker, .t-color-picker[_ngcontent-%COMP%]     tui-color-edit{display:none}.t-prevent-parent-label-behavior[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),c})(),vi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,Y.fN,x.go,en.WD]]}),c})(),ki=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,Y.fN,x.go,M.pc]]}),c})(),Mi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Y.fN,x.go]]}),c})(),wi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,Y.fN,x.go,M.pc]]}),c})(),Si=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,Y.fN,x.go]]}),c})(),Ai=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Y.fN,x.go]]}),c})(),Oi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,Y.fN,b,x.go,Ct.dp,bn.A,en.WD]]}),c})(),Ei=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,Y.fN,x.go,en.WD]]}),c})(),Ii=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,b,Y.fN,x.go,bn.A,Ct.dp,en.WD]]}),c})(),Ni=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Wo]]}),c})(),Di=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,Ct.dp,Y.fN,x.go,Ni]]}),c})(),Pi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Y.fN,x.go,en.WD]]}),c})(),Li=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Yt.jh,x.go,Y.fN,M.pc,en.WD]]}),c})(),Ri=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Y.fN,Yt.jh,Ct.dp,x.go,b,bn.A,en.WD]]}),c})(),Hi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,x.go,kt.u,Y.fN,Yt.jh,Bn,Pi,Ii,Li,Di,wi,Si,vi,Ei,Ri,Oi,ki,Mi,ao.H,Ai]]}),c})();var Bi=j(7874),zi=j(7349);let di=(()=>{class c extends R.N9{}return c.\u0275fac=function(){let v;return function(g){return(v||(v=e.n5z(c)))(g||c)}}(),c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac}),c})();const Fi=[{provide:z,deps:[ht],useFactory:c=>{const v=new Ye.t(1);return Promise.all(c).then(r=>v.next(r)),v}},{provide:Ce,deps:[e.Qsj],useFactory:c=>c.createElement("div")},{provide:me,deps:[Ce,z,$e],useFactory:(c,v,r)=>(0,qn.aj)([r,v]).pipe((0,Kn.q)(1),(0,Pt.U)(([g,P])=>new g({element:c,extensions:P})),(0,zi.d)({bufferSize:1,refCount:!0}))},L,di];var pi=j(1489),hi=j(5122);let Zi=(()=>{class c extends I.O4{constructor(r){super(),this.el=r,this.type="viewport"}getClientRect(){return this.el.nativeElement.getBoundingClientRect()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.SBq))},c.\u0275dir=e.lG2({type:c,selectors:[["","tuiEditorPortal",""]],features:[e._Bn([{provide:hi.ae,useExisting:di},(0,S.ck)(c)]),e.qOj]}),c})(),fi=(()=>{class c{constructor(r,g,P,U,wt,oe){this.el=r,this.renderer=g,this.sanitizer=P,this.tuiSanitizer=U,this.document=wt,this.editor=oe}set content(r){this.renderer.setProperty(this.el.nativeElement,"innerHTML",this.tuiSanitizer?this.tuiSanitizer.sanitize(e.q3G.HTML,r.replace(/colwidth/g,"width")):this.sanitizer.sanitize(e.q3G.HTML,r))}click(r){var g,P;if(this.editor||!(0,_.ve)(r.target))return;const U=(null===(P=null===(g=r.target)||void 0===g?void 0:g.closest("a"))||void 0===P?void 0:P.getAttribute("href"))||"";!U.startsWith("#")||(this.document.location.hash=U.replace("#",""),r.preventDefault())}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.Tiy),e.Y36(S.hm,8),e.Y36(D.K0),e.Y36($,8))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-editor-socket"]],hostAttrs:[1,"tui-editor-socket"],hostBindings:function(r,g){1&r&&e.NdJ("click",function(U){return g.click(U)})},inputs:{content:"content"},decls:0,vars:0,template:function(r,g){},styles:['.tui-editor-socket{display:block;margin:0;color:var(--tui-text-01);font:var(--tui-font-text-m)}.tui-editor-socket[tuiTiptapEditor]{overflow:hidden}.tui-editor-socket .ProseMirror{min-height:5.375rem;padding:.2rem 1rem;outline:none;white-space:pre-wrap}.tui-editor-socket .resize-cursor{cursor:ew-resize;cursor:col-resize}.tui-editor-socket h1,.tui-editor-socket h2,.tui-editor-socket h3,.tui-editor-socket h4,.tui-editor-socket h5,.tui-editor-socket h6{word-break:break-word;line-height:normal}.tui-editor-socket h1:first-child,.tui-editor-socket h2:first-child,.tui-editor-socket p:last-child{margin-bottom:0}.tui-editor-socket p:last-child,.tui-editor-socket pre:last-child{margin-bottom:0}.tui-editor-socket p:empty:after{content:" ";white-space:pre}.tui-editor-socket p:first-child{margin-top:0}.tui-editor-socket p{margin:1rem 0}.tui-editor-socket p>span{line-height:normal;line-height:initial}.tui-editor-socket blockquote{margin:1.25rem 0 1.25rem 1.5rem;padding-left:1.0625rem;border-left:1px solid var(--tui-base-04)}.tui-editor-socket hr{border:none;border-top:1px solid var(--tui-base-03);margin:1rem 0}.tui-editor-socket mark{background:unset;color:inherit}.tui-editor-socket font[face="Courier New"]{display:inline-block;padding:.25rem .5rem;border-radius:.25rem;background-color:#ecf1f7;word-break:break-word}.tui-editor-socket a:not([data-type="jump-anchor"]){color:var(--tui-link);text-decoration:none;outline:none}.tui-editor-socket a:not([data-type="jump-anchor"]):hover{color:var(--tui-link-hover);text-decoration:underline}.tui-editor-socket a:not([data-type="jump-anchor"]):active{color:var(--tui-primary-active)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]{text-decoration:underline;-webkit-text-decoration-color:var(--tui-link);text-decoration-color:var(--tui-link)}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:before{content:"#"}.tui-editor-socket .ProseMirror a[data-type=jump-anchor]:hover{color:var(--tui-link)}.tui-editor-socket .ProseMirror a:hover img[contenteditable=false]{cursor:pointer;outline:.25rem solid var(--tui-link)}.tui-editor-socket ul,.tui-editor-socket ol{list-style-type:none;margin:1rem 1rem 1rem 1.5rem;padding:0}.tui-editor-socket li{margin:1rem 0}.tui-editor-socket li>p{display:inline;margin:0 auto;word-break:break-word}.tui-editor-socket ul li>p{display:block}.tui-editor-socket li:before{unicode-bidi:-webkit-isolate;unicode-bidi:isolate;font-feature-settings:"tnum";font-variant-numeric:tabular-nums;text-transform:none;text-indent:0;text-align:start;text-align-last:start}.tui-editor-socket ul>li:before{content:"";display:inline-block;width:.5rem;height:.5rem;border-radius:100%;margin:.5rem .875rem .0625rem -1.375rem;background-color:var(--tui-primary);vertical-align:top;box-sizing:border-box;float:left}.tui-editor-socket li ul>li:before{background:none;border:.125rem solid var(--tui-primary)}.tui-editor-socket li ul>li>ul>li:before{background:var(--tui-primary);border-radius:0;width:.375rem;height:.375rem}.tui-editor-socket ol{counter-reset:item}.tui-editor-socket ol>li:before{content:counters(item,".") ".";display:block;margin:0 .75rem 0 -1.5rem;counter-increment:item;color:var(--tui-base-05);vertical-align:top;float:left;white-space:nowrap}.tui-editor-socket._preview-image img{cursor:pointer}.tui-editor-socket .ProseMirror video,.tui-editor-socket .ProseMirror audio{pointer-events:none}.tui-editor-socket img.ProseMirror-selectednode{outline:.25rem solid var(--tui-primary-hover)}.tui-editor-socket .t-editor-placeholder:before{content:attr(data-placeholder);float:left;color:var(--tui-base-05);pointer-events:none;height:0}.tui-editor-socket table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tui-editor-socket table .tableWrapper{overflow-x:auto}.tui-editor-socket .tableWrapper,.tui-editor-socket .tui-table-wrapper{overflow-x:auto}.tui-editor-socket table td{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word}.tui-editor-socket table th{position:relative;min-width:1em;height:2rem;border:2px solid var(--tui-base-03);padding:3px 5px;vertical-align:top;box-sizing:border-box;word-break:break-word;font-weight:bold;text-align:left;background-color:var(--tui-base-02);min-height:2rem}.tui-editor-socket table .column-resize-handle{position:absolute;right:-2px;top:0;bottom:-2px;width:4px;background-color:#adf;pointer-events:none}.tui-editor-socket table td>*{margin-top:0;margin-bottom:0}.tui-editor-socket table th>*{margin-top:0;margin-bottom:0}.tui-editor-socket .selectedCell:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:var(--tui-selection);pointer-events:none}.tui-editor-socket summary{display:flex;align-items:center;min-height:3.5rem;width:100%;padding:0 1.25rem;box-sizing:border-box;border-radius:var(--tui-radius-l);pointer-events:none;outline:none}.tui-editor-socket summary:focus-visible{outline:2px solid var(--tui-link)}.tui-editor-socket summary p{min-width:1px;margin:0}.tui-editor-socket summary::-webkit-details-marker{display:none}.tui-editor-socket details[open] summary{border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-editor-socket .details-arrow,.tui-editor-socket .t-details-arrow{position:absolute;top:1.5rem;right:1.25rem;height:.575rem;width:.575rem;border:1px solid var(--tui-base-06);border-width:0 2px 2px 0;transform:rotate(45deg);transition:var(--tui-duration, .3s);-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;padding:0;background:none;cursor:pointer;outline:none}.tui-editor-socket details{width:100%;border:1px solid var(--tui-base-04);border-radius:var(--tui-radius-l)}.tui-editor-socket div[data-type=details-content]{padding:1.25rem;min-height:3rem;border:1px solid var(--tui-base-04);border-width:1px 0 0}.tui-editor-socket div[data-type=details-content] h1:first-child,.tui-editor-socket div[data-type=details-content] h2:first-child,.tui-editor-socket div[data-type=details-content] pre:first-child,.tui-editor-socket div[data-type=details-content] ul:first-child,.tui-editor-socket div[data-type=details-content] ol:first-child,.tui-editor-socket div[data-type=details-content] ol li:first-child,.tui-editor-socket div[data-type=details-content] ul li:first-child{margin-top:0}.tui-editor-socket .details-wrapper,.tui-editor-socket .t-details-wrapper{margin-bottom:.5rem;position:relative;display:flex}.tui-editor-socket .details-wrapper_rendered .details-arrow,.tui-editor-socket .t-details-wrapper_rendered .details-arrow,.tui-editor-socket .details-wrapper_rendered .t-details-arrow,.tui-editor-socket .t-details-wrapper_rendered .t-details-arrow{pointer-events:none}.tui-editor-socket .details-wrapper_rendered summary,.tui-editor-socket .t-details-wrapper_rendered summary{transition:transform var(--tui-duration, .3s);cursor:pointer;pointer-events:auto}.tui-editor-socket .details-wrapper_rendered summary:hover,.tui-editor-socket .t-details-wrapper_rendered summary:hover{background:var(--tui-base-02)}.tui-editor-socket details[open]+.details-arrow,.tui-editor-socket details[open]+.t-details-arrow{top:1.75rem;transform:rotate(225deg)}.tui-editor-socket pre{white-space:pre-wrap;word-break:break-word;border-radius:.25rem;margin:1rem 0;padding:.75rem 1rem;font-family:Courier,monospace;color:var(--tui-text-02);background:var(--tui-base-02)}.tui-editor-socket .tui-group-node{display:flex;flex-direction:row}.tui-editor-socket .tui-group-node:hover>.tui-group-pointer{pointer-events:auto;opacity:1}.tui-editor-socket .tui-group-pointer{opacity:0;min-height:.8125rem;max-height:.8125rem;min-width:.8125rem;max-width:.8125rem;margin:.3125rem .3125rem 0 0;cursor:-webkit-grab;cursor:grab;background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="black" /></svg>\');background-repeat:no-repeat;background-size:contain;background-position:center}.tui-editor-socket [data-mode=onDark] .tui-group-pointer{background-image:url(\'data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 14c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" fill-opacity="0.2" fill="white" /></svg>\')}\n'],encapsulation:2,changeDetection:0}),c})(),Ji=(()=>{class c extends R.Er{}return c.\u0275fac=function(){let v;return function(g){return(v||(v=e.n5z(c)))(g||c)}}(),c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-editor-portal-host"]],features:[e._Bn([{provide:R.N9,useExisting:hi.ae},{provide:R.Er,useExisting:c}]),e.qOj],decls:2,vars:0,consts:[["viewContainer",""]],template:function(r,g){1&r&&e.GkF(0,null,0)},styles:["[_nghost-%COMP%]{position:relative;z-index:1;display:block;height:100%}"],changeDetection:0}),c})();function $i(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-toolbar",7),e.NdJ("fileAttached",function(P){return e.CHM(r),e.oxw(2).fileAttached.emit(P)}),e.Hsn(1,1),e.qZA()}if(2&c){const r=e.oxw(2);e.Q6J("tools",r.tools)("disabled",!r.interactive)}}function ji(c,v){if(1&c&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&c){const r=e.oxw(2);e.xp6(1),e.hij(" ",r.exampleText," ")}}function Ui(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-edit-link",13,14),e.NdJ("addLink",function(P){e.CHM(r);const U=e.MAs(1),wt=e.oxw(3);return U.anchorMode?wt.addAnchor(P):wt.addLink(P)})("removeLink",function(){e.CHM(r);const P=e.MAs(1),U=e.oxw(3);return P.anchorMode?U.removeAnchor():U.removeLink()}),e.qZA()}}function Vi(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-scrollbar",9),e.NdJ("mousedown",function(P){return e.CHM(r),e.oxw(2).focus(P)}),e.TgZ(1,"div",10),e.TgZ(2,"tui-editor-socket",11),e.NdJ("valueChange",function(P){return e.CHM(r),e.oxw(2).onModelChange(P)})("stateChange",function(){return 0}),e.qZA(),e.qZA(),e.YNc(3,Ui,2,0,"ng-template",null,12,e.W1O),e._UZ(5,"tui-editor-portal-host"),e.qZA()}if(2&c){const r=e.MAs(4),g=e.oxw(2);e.xp6(1),e.Q6J("tuiDropdownSelection",g.dropdownSelectionHandler)("tuiDropdown",r),e.xp6(1),e.Q6J("value",g.value)("editable",g.interactive)}}function Yi(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"div",1),e.NdJ("tuiActiveZoneChange",function(P){return e.CHM(r),e.oxw().onActiveZone(P)}),e.TgZ(1,"div",2),e.YNc(2,$i,2,2,"tui-toolbar",3),e.TgZ(3,"div",4),e.Hsn(4),e.qZA(),e.YNc(5,ji,2,1,"div",5),e.qZA(),e.YNc(6,Vi,6,4,"tui-scrollbar",6),e.qZA()}if(2&c){const r=v.ngIf,g=e.oxw();e.Q6J("readOnly",g.readOnly)("disabled",g.disabled)("focus",g.computedFocused)("hover",g.pseudoHover)("invalid",g.computedInvalid),e.xp6(2),e.Q6J("ngIf",r),e.xp6(1),e.ekj("t-placeholder_raised",g.placeholderRaised),e.xp6(2),e.Q6J("ngIf",g.hasExampleText),e.xp6(1),e.Q6J("ngIf",r)}}const Wi=["*",[["tools"]]],Qi=["*","tools"];let Ki=(()=>{class c extends R.M${constructor(r,g,P,U,wt,oe,Ze,cn){super(r,g,Ze),this.editorLoaded$=P,this.editorService=U,this.contentProcessor=wt,this.doc=oe,this.options=cn,this.exampleText="",this.tools=St,this.fileAttached=new e.vpe,this.focused=!1,this.isSelectionLink=An=>this.currentFocusedNodeIsTextAnchor(An)||this.currentFocusedNodeIsImageAnchor,this.editorLoaded$.pipe((0,Bi.g)(0),(0,pt.R)(this.destroy$)).subscribe(()=>this.patchContentEditableElement())}get nativeFocusableElement(){var r,g;return this.computedDisabled?null:(null===(g=null===(r=this.el)||void 0===r?void 0:r.nativeElement)||void 0===g?void 0:g.querySelector("[contenteditable].ProseMirror"))||null}get dropdownSelectionHandler(){return this.focused?this.isSelectionLink:Cn.Iy}get editor(){return this.editorService.getOriginTiptapEditor()?this.editorService:null}get placeholderRaised(){return this.computedFocused&&!this.readOnly||this.hasValue}get hasExampleText(){return!!this.exampleText&&this.computedFocused&&!this.hasValue&&!this.readOnly}writeValue(r){var g;if(r===this.value)return;const P=this.contentProcessor(r||"");super.writeValue(P),P!==r&&(null===(g=this.control)||void 0===g||g.setValue(P,{onlySelf:!1,emitEvent:!1,emitModelToViewChange:!1,emitViewToModelChange:!1}))}onActiveZone(r){var g;this.focused=r,this.updateFocused(r),null===(g=this.control)||void 0===g||g.updateValueAndValidity()}onModelChange(r){this.value=r}addAnchor(r){var g;null===(g=this.editor)||void 0===g||g.setAnchor(r)}removeAnchor(){var r;null===(r=this.editor)||void 0===r||r.removeAnchor()}addLink(r){var g,P;null===(g=this.editor)||void 0===g||g.selectClosest(),null===(P=this.editor)||void 0===P||P.setLink(r)}removeLink(){var r;null===(r=this.editor)||void 0===r||r.unsetLink()}focus(r){var g,P;(null===(g=this.nativeFocusableElement)||void 0===g?void 0:g.contains(r.target))||(r.preventDefault(),null===(P=this.nativeFocusableElement)||void 0===P||P.focus())}ngOnDestroy(){var r;null===(r=this.editor)||void 0===r||r.destroy()}getFallbackValue(){return""}currentFocusedNodeIsTextAnchor(r){var g,P;return!!(null===(P=null===(g=r.startContainer.parentElement)||void 0===g?void 0:g.closest("a"))||void 0===P?void 0:P.contains(this.focusNode))&&(0,Lt.nC)(r)}get focusNode(){var r,g;return null!==(g=null===(r=this.doc.getSelection())||void 0===r?void 0:r.focusNode)&&void 0!==g?g:null}get hasValue(){return!!this.value}get currentFocusedNodeIsImageAnchor(){var r,g,P;return"A"===(null===(r=this.focusNode)||void 0===r?void 0:r.nodeName)&&["IMG","TUI-IMAGE-EDITOR"].includes(null===(P=null===(g=this.focusNode)||void 0===g?void 0:g.childNodes[0])||void 0===P?void 0:P.nodeName)}patchContentEditableElement(){var r,g;null===(r=this.nativeFocusableElement)||void 0===r||r.setAttribute("translate",this.options.translate),null===(g=this.nativeFocusableElement)||void 0===g||g.setAttribute("spellcheck",String(this.options.spellcheck))}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(gt.a5,10),e.Y36(e.sBO),e.Y36(me),e.Y36(L),e.Y36(rn),e.Y36(D.K0),e.Y36(ve,8),e.Y36(de))},c.\u0275cmp=e.Xpm({type:c,selectors:[["tui-editor"]],viewQuery:function(r,g){if(1&r&&(e.Gf($,5,e.SBq),e.Gf(ui,5)),2&r){let P;e.iGM(P=e.CRH())&&(g.el=P.first),e.iGM(P=e.CRH())&&(g.toolbar=P.first)}},inputs:{exampleText:"exampleText",tools:"tools"},outputs:{fileAttached:"fileAttached"},features:[e._Bn([(0,d.FT)(c),(0,Xt.f$)({delay:S.Gc}),Fi]),e.qOj],ngContentSelectors:Qi,decls:2,vars:3,consts:[["tuiWrapper","","appearance","textfield","class","t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange",4,"ngIf"],["tuiWrapper","","appearance","textfield",1,"t-wrapper",3,"readOnly","disabled","focus","hover","invalid","tuiActiveZoneChange"],[1,"t-toolbar-wrapper"],[3,"tools","disabled","fileAttached",4,"ngIf"],[1,"t-placeholder"],["class","t-example-text",4,"ngIf"],["tuiEditorPortal","","class","t-scrollbar",3,"mousedown",4,"ngIf"],[3,"tools","disabled","fileAttached"],[1,"t-example-text"],["tuiEditorPortal","",1,"t-scrollbar",3,"mousedown"],["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","tag",3,"tuiDropdownSelection","tuiDropdown"],["tuiTiptapEditor","",1,"tui-editor-socket",3,"value","editable","valueChange","stateChange"],["dropdown",""],[3,"addLink","removeLink"],["link",""]],template:function(r,g){1&r&&(e.F$t(Wi),e.YNc(0,Yi,7,10,"div",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,g.editorLoaded$))},directives:[D.O5,pi.o,bn.e,ui,sn.IB,Zi,Ct.Ek,Ct.td,Ct.VC,Ct.A9,Ct.yd,fi,$,Ji,_n],pipes:[D.Ov],styles:["[_nghost-%COMP%]{position:relative;z-index:0;display:block;font:var(--tui-font-text-m);border-radius:var(--tui-radius-m);max-height:inherit;min-height:10rem;box-sizing:border-box}.t-wrapper[_ngcontent-%COMP%]{display:flex;max-height:inherit;min-height:inherit;cursor:text;overflow:hidden;flex-direction:column;border-radius:inherit}.t-placeholder[_ngcontent-%COMP%]{transition-property:transform,font-size,color,letter-spacing;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none;will-change:transform;transform:translateY(0);margin:1rem 1rem -1rem;min-height:1.625rem;width:95%;font-size:.9375rem}.t-placeholder_raised[_ngcontent-%COMP%]{transform:translateY(-.625rem)}[data-size=m][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);line-height:1.25rem;transform:translateY(-.5rem);letter-spacing:.025rem}._invalid[_nghost-%COMP%]:not(._focused)   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill)}._invalid[_nghost-%COMP%]:not(._focused)   [tuiWrapper][data-mode=onDark][_ngcontent-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%], ._invalid[_nghost-%COMP%]:not(._focused):hover   [tuiWrapper][data-mode=onDark][_ngcontent-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{color:var(--tui-error-fill-night)}._focused[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-size=l][_nghost-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{font:var(--tui-font-text-m);line-height:1.25rem}[data-size=l][_nghost-%COMP%]   .t-placeholder_raised[_ngcontent-%COMP%]{font-size:.8156rem}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01)}[tuiWrapper][data-mode=onDark][_ngcontent-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}[data-size=m]._focused[_nghost-%COMP%]:not(._label-outside)   [tuiWrapper][data-mode=onDark][_ngcontent-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused[_nghost-%COMP%]:not(._label-outside)   [tuiWrapper][data-mode=onDark][_ngcontent-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}._focused[_nghost-%COMP%]   [tuiWrapper][data-mode=onDark][_ngcontent-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=m]._focused._label-outside[_nghost-%COMP%]   [tuiWrapper][data-mode=onDark][_ngcontent-%COMP%]   .t-placeholder[_ngcontent-%COMP%], [data-size=l]._focused._label-outside[_nghost-%COMP%]   [tuiWrapper][data-mode=onDark][_ngcontent-%COMP%]   .t-placeholder[_ngcontent-%COMP%]{color:var(--tui-text-02-night)}@supports (-webkit-hyphens: none){.t-placeholder[_ngcontent-%COMP%]{will-change:unset;transition-property:transform,color,letter-spacing}}.t-placeholder_raised[_ngcontent-%COMP%]{width:110%}.t-placeholder[_ngcontent-%COMP%]:empty{min-height:.8rem}.t-example-text[_ngcontent-%COMP%]{position:absolute;left:1rem;margin-top:1.6rem;color:var(--tui-base-06);letter-spacing:normal;text-transform:none}.t-example-text_light[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}.t-example-text_dark[_ngcontent-%COMP%]{color:var(--tui-text-03)}.t-scrollbar[_ngcontent-%COMP%]{display:flex;border-bottom:.3125rem solid transparent;padding-bottom:1.3125rem;box-sizing:border-box;flex:1}"],changeDetection:0}),c})(),mi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({}),c})(),Gi=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,Hi,pi.W,sn.Jy,Bn,bn.A,Ct.dp,et,mi]]}),c})();function qi(c,v){if(1&c&&e._UZ(0,"div",4),2&c){const r=e.oxw();e.Udp("background",r.background)}}function Xi(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-color-selector",5),e.NdJ("colorChange",function(P){return e.CHM(r),e.oxw().value=P}),e.qZA()}if(2&c){const r=v.$implicit,g=e.oxw();e.Q6J("tuiActiveZoneParent",r)("colors",g.colors)("color",g.value)}}class ni extends R.M${constructor(v,r,g){super(v,r),this.domSanitizer=g,this.colors=new Map,this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return!!this.dropdown&&this.dropdown.focused}get background(){return this.sanitize(this.value,this.domSanitizer)}onClick(){this.open=!this.open}onValueChange(v){this.value=v}onFocused(v){this.updateFocused(v)}getFallbackValue(){return"#000000"}sanitize(v,r){return v.startsWith("linear-gradient(")?r.bypassSecurityTrustStyle((0,Lt.CH)((0,Lt._N)((0,Lt.U5)(v)))):v}}ni.\u0275fac=function(v){return new(v||ni)(e.Y36(gt.a5,10),e.Y36(e.sBO),e.Y36(Ne.H7))},ni.\u0275cmp=e.Xpm({type:ni,selectors:[["tui-input-color"]],viewQuery:function(v,r){if(1&v&&(e.Gf(Ut.yc,5),e.Gf(Yt.o1,5)),2&v){let g;e.iGM(g=e.CRH())&&(r.textfield=g.first),e.iGM(g=e.CRH())&&(r.dropdown=g.first)}},hostBindings:function(v,r){1&v&&e.NdJ("click",function(){return r.onClick()})},inputs:{colors:"colors"},features:[e._Bn([],[(0,Ct.fx)({maxHeight:600})]),e.qOj],ngContentSelectors:["*"],decls:7,vars:12,consts:[[1,"t-wrapper",3,"content","open","openChange"],[1,"t-textfield",3,"tuiTextfieldIconLeft","pseudoFocus","pseudoHover","pseudoActive","invalid","focusable","nativeId","disabled","readOnly","value","valueChange","focusedChange"],["color",""],["picker",""],[1,"t-color"],[3,"tuiActiveZoneParent","colors","color","colorChange"]],template:function(v,r){if(1&v&&(e.F$t(),e.TgZ(0,"tui-hosted-dropdown",0),e.NdJ("openChange",function(P){return r.open=P}),e.TgZ(1,"tui-primitive-textfield",1),e.NdJ("valueChange",function(P){return r.value=P})("focusedChange",function(P){return r.onFocused(P)}),e.Hsn(2),e.qZA(),e.qZA(),e.YNc(3,qi,1,2,"ng-template",null,2,e.W1O),e.YNc(5,Xi,1,3,"ng-template",null,3,e.W1O)),2&v){const g=e.MAs(4),P=e.MAs(6);e.Q6J("content",P)("open",r.open),e.xp6(1),e.Q6J("tuiTextfieldIconLeft",g)("pseudoFocus",r.computedFocused)("pseudoHover",r.pseudoHover)("pseudoActive",r.pseudoActive)("invalid",r.computedInvalid)("focusable",r.focusable)("nativeId",r.nativeId)("disabled",r.disabled)("readOnly",r.readOnly)("value",r.value)}},directives:[Yt.o1,Ut.yc,Ut.B1,C.aR,We,bn.e],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-wrapper[_ngcontent-%COMP%]{display:flex;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-color[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;box-shadow:inset 0 0 0 1px var(--tui-base-03-dark);border-radius:.125rem}"],changeDetection:0}),(0,Gt.gn)([Dt.UM],ni.prototype,"sanitize",null),j(3511);const er=[Promise.resolve().then(j.bind(j,922)).then(({StarterKit:c})=>c).then(c=>c.configure({heading:{levels:[1,2,3,4,5,6]}})),j.e(336).then(j.bind(j,3336)).then(({default:c})=>c.configure({types:["heading","paragraph"]})),Promise.resolve().then(j.bind(j,4402)).then(({default:c})=>c),j.e(991).then(j.bind(j,7991)).then(({default:c})=>c),j.e(147).then(j.bind(j,7147)).then(({default:c})=>c),j.e(34).then(j.bind(j,5034)).then(({default:c})=>c),Promise.resolve().then(j.bind(j,7841)).then(({FontColor:c})=>c),Promise.resolve().then(j.bind(j,4632)).then(({default:c})=>c.configure({inline:!0,allowBase64:!0})),Promise.resolve().then(j.bind(j,822)).then(({TuiLink:c})=>c),j.e(629).then(j.bind(j,8629)).then(({TuiJumpAnchor:c})=>c),Promise.resolve().then(j.bind(j,1131)).then(({TuiFileLink:c})=>c),Promise.resolve().then(j.bind(j,3511)).then(({BackgroundColor:c})=>c),Promise.resolve().then(j.bind(j,4739)).then(({TuiTable:c})=>c.configure({resizable:!0})),j.e(213).then(j.bind(j,5213)).then(({default:c})=>c),j.e(397).then(j.bind(j,1397)).then(({default:c})=>c),j.e(840).then(j.bind(j,8840)).then(({TableHeader:c})=>c),Promise.resolve().then(j.bind(j,3757)).then(({TuiTabExtension:c})=>c),Promise.resolve().then(j.bind(j,8676)).then(({TableCellBackground:c})=>c),j.e(95).then(j.bind(j,7095)).then(({TuiDetailsContent:c})=>c),j.e(95).then(j.bind(j,7095)).then(({TuiDetails:c})=>c),j.e(95).then(j.bind(j,7095)).then(({TuiSummary:c})=>c),Promise.resolve().then(j.bind(j,3120)).then(({TuiFontSize:c})=>c)];j(1131),j(7841),j(3120),new e.OlP("[TUI_IFRAME_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0,minHeight:100,maxHeight:1/0})}),new e.OlP("[TUI_EDITOR_MIN_IMAGE_WIDTH]",{factory:()=>null}),new e.OlP("[TUI_EDITOR_MAX_IMAGE_WIDTH]",{factory:()=>null}),new e.OlP("[TUI_IMAGE_EDITOR_OPTIONS]",{factory:()=>({minWidth:100,maxWidth:1/0})}),j(4632),j(3757),j(822);var li=j(1046);li.Node.create({name:"audio",group:"block",content:"source+",addAttributes:()=>(0,Lt.x6)(ne),parseHTML:()=>[{tag:"audio"}],renderHTML:({node:c,HTMLAttributes:v})=>["audio",v,...(0,Lt.YX)(c)]}),li.Node.create({name:"source",addAttributes:()=>(0,Lt.x6)(["src","type","width","height","media","sizes","srcset"]),parseHTML:()=>[{tag:"source"}],renderHTML:({HTMLAttributes:c})=>["source",(0,li.mergeAttributes)(c)]}),li.Node.create({name:"video",group:"block",content:"source+",addAttributes:()=>(0,Lt.x6)(ne),parseHTML:()=>[{tag:"video"}],renderHTML:({node:c,HTMLAttributes:v})=>["video",v,...(0,Lt.YX)(c)]}),j(922),j(4739),j(8676),new e.OlP("HIGHLIGHT_OPTIONS");let rr=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({}),c})();var Bo=j(4040);function sr(c,v){1&c&&(e._uU(0," Disabled state (use "),e.TgZ(1,"code"),e._uU(2,"formControl.disable()"),e.qZA(),e._uU(3," ) "))}function lr(c,v){1&c&&e._uU(0," Example pass HTML code ")}function ar(c,v){1&c&&e._uU(0," Example text shown on empty focused input ")}function cr(c,v){1&c&&e._uU(0," Allowed edit tools ")}function ur(c,v){1&c&&e._uU(0,' Value of CSS-property "min-height" ')}function dr(c,v){1&c&&e._uU(0,' Value of CSS-property "max-height" ')}function pr(c,v){if(1&c){const r=e.EpF();e.TgZ(0,"tui-doc-demo",2),e.TgZ(1,"tui-editor",3),e._uU(2," Start typing "),e.qZA(),e.TgZ(3,"h4"),e._uU(4,"HTML:"),e.qZA(),e._UZ(5,"tui-editor-socket",4),e.TgZ(6,"h4"),e._uU(7,"Text:"),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"tui-doc-documentation"),e.YNc(11,sr,4,0,"ng-template",5),e.NdJ("documentationPropertyValueChange",function(P){return e.CHM(r),e.oxw().disabled=P}),e.YNc(12,lr,1,0,"ng-template",6),e.NdJ("documentationPropertyValueChange",function(P){return e.CHM(r),e.oxw().control.setValue(P)}),e.YNc(13,ar,1,0,"ng-template",7),e.NdJ("documentationPropertyValueChange",function(P){return e.CHM(r),e.oxw().exampleText=P}),e.YNc(14,cr,1,0,"ng-template",8),e.NdJ("documentationPropertyValueChange",function(P){return e.CHM(r),e.oxw().tools=P}),e.qZA(),e.TgZ(15,"tui-doc-documentation",9),e.YNc(16,ur,1,0,"ng-template",10),e.NdJ("documentationPropertyValueChange",function(P){return e.CHM(r),e.oxw().minHeight=P}),e.YNc(17,dr,1,0,"ng-template",11),e.NdJ("documentationPropertyValueChange",function(P){return e.CHM(r),e.oxw().maxHeight=P}),e.qZA(),e.TgZ(18,"tui-doc-documentation",12),e.TgZ(19,"ol",13),e.TgZ(20,"li"),e.TgZ(21,"p"),e._uU(22," Import an Angular module for forms and "),e.TgZ(23,"code"),e._uU(24,"TuiEditorModule"),e.qZA(),e._uU(25," in the same module where you want to use our component: "),e.qZA(),e._UZ(26,"tui-doc-code",14),e.qZA(),e.TgZ(27,"li"),e.TgZ(28,"p"),e._uU(29,"Add to the template:"),e.qZA(),e._UZ(30,"tui-doc-code",15),e.qZA(),e.TgZ(31,"li"),e.TgZ(32,"p"),e._uU(33," Provide the required extensions or use the default ones: "),e.qZA(),e._UZ(34,"tui-doc-code",16),e.qZA(),e.qZA(),e.TgZ(35,"h2"),e._uU(36,"TUI_EDITOR_OPTIONS"),e.qZA(),e._uU(37," You can configure some editor's params via DI-token "),e.TgZ(38,"code"),e._uU(39,"TUI_EDITOR_OPTIONS"),e.qZA(),e._uU(40," . "),e.TgZ(41,"p"),e.TgZ(42,"strong"),e._uU(43,"Usage:"),e.qZA(),e.qZA(),e._UZ(44,"tui-doc-code",17),e.TgZ(45,"p"),e.TgZ(46,"strong"),e._uU(47,"Description of the available configurations:"),e.qZA(),e.qZA(),e.TgZ(48,"dl"),e.TgZ(49,"dt"),e.TgZ(50,"code"),e._uU(51,"colors"),e.qZA(),e.qZA(),e.TgZ(52,"dd",18),e._uU(53," map of colors in toolbar's dropdowns with color-selection. "),e.TgZ(54,"p"),e._uU(55," It accepts "),e._UZ(56,"code",19),e._uU(57," : the "),e.TgZ(58,"strong"),e._uU(59,"key"),e.qZA(),e._uU(60," is the name of the color (used only for hint and accessibility), the "),e.TgZ(61,"strong"),e._uU(62,"value"),e.qZA(),e._uU(63," \u2013 HTML color code. "),e.qZA(),e.qZA(),e.TgZ(64,"dt"),e.TgZ(65,"code"),e._uU(66,"blankColor"),e.qZA(),e.qZA(),e.TgZ(67,"dd",18),e._uU(68," Null color. It is used in situations when there is no color selected. "),e.TgZ(69,"p"),e._uU(70," it accepts "),e.TgZ(71,"code"),e._uU(72,"string"),e.qZA(),e._uU(73," (HTML color code). "),e.qZA(),e.qZA(),e.TgZ(74,"dt"),e.TgZ(75,"code"),e._uU(76,"fontOptions"),e.qZA(),e.qZA(),e.TgZ(77,"dd",18),e._uU(78," You can customize your own list of font sizes in editor. "),e.qZA(),e.TgZ(79,"dt"),e.TgZ(80,"code"),e._uU(81,"translate"),e.qZA(),e.qZA(),e.TgZ(82,"dd",18),e._uU(83," Although not all browsers recognize this attribute, it is respected by automatic translation systems such as Google Translate, and may also be respected by tools used by human translators. As such it's important that web authors use this attribute to mark content that should not be translated.. "),e.qZA(),e.TgZ(84,"dt"),e.TgZ(85,"code"),e._uU(86,"spellcheck"),e.qZA(),e.qZA(),e.TgZ(87,"dd",18),e._uU(88," Defines whether the editor may be checked for spelling errors. "),e.qZA(),e.qZA(),e.qZA()}if(2&c){const r=e.oxw();e.Q6J("sticky",!1),e.xp6(1),e.Udp("min-height",r.minHeight,"px")("max-height",r.maxHeight,"px"),e.Q6J("tuiAutoFocus",!r.isCypress)("formControl",r.control)("focusable",r.focusable)("exampleText",r.exampleText)("readOnly",r.readOnly)("tools",r.tools)("pseudoInvalid",r.pseudoInvalid)("pseudoFocus",r.pseudoFocused)("pseudoHover",r.pseudoHovered),e.xp6(4),e.Q6J("content",r.control.value),e.xp6(4),e.Oqu(r.control.value),e.xp6(2),e.Q6J("documentationPropertyValue",r.disabled),e.xp6(1),e.Q6J("documentationPropertyValue",r.control.value),e.xp6(1),e.Q6J("documentationPropertyValue",r.exampleText),e.xp6(1),e.Q6J("documentationPropertyValues",r.toolsVariants)("documentationPropertyValue",r.tools),e.xp6(2),e.Q6J("documentationPropertyValue",r.minHeight),e.xp6(1),e.Q6J("documentationPropertyValue",r.maxHeight),e.xp6(9),e.Q6J("code",r.exampleModule),e.xp6(4),e.Q6J("code",r.exampleHtml),e.xp6(4),e.Q6J("code",r.provideExtensions),e.xp6(10),e.Q6J("code",r.exampleEditorOptionsToken)}}let hr=(()=>{class c{constructor(r){this.isCypress=r,this.exampleModule=j.e(714).then(j.t.bind(j,7714,17)),this.exampleHtml=j.e(843).then(j.t.bind(j,7843,17)),this.provideExtensions=j.e(501).then(j.t.bind(j,2501,17)),this.exampleEditorOptionsToken=j.e(58).then(j.t.bind(j,4058,17)),this.control=new gt.NI,this.exampleText="",this.minHeight=null,this.maxHeight=null,this.readOnly=!1,this.focusable=!0,this.pseudoInvalid=null,this.pseudoFocused=null,this.pseudoHovered=null,this.toolsVariants=[St,[st.Bold,st.Italic,st.Strikethrough,st.HR]],this.tools=this.toolsVariants[0]}get disabled(){return this.control.disabled}set disabled(r){r?this.control.disable():this.control.enable()}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(d.B4))},c.\u0275cmp=e.Xpm({type:c,selectors:[["editor-starter-page"]],features:[e._Bn([{provide:ht,useValue:er}])],decls:2,vars:0,consts:[["header","Editor","package","TUI-EDITOR","type","components"],["pageTab","API"],[3,"sticky"],[3,"tuiAutoFocus","formControl","focusable","exampleText","readOnly","tools","pseudoInvalid","pseudoFocus","pseudoHover"],[1,"tui-example",3,"content"],["documentationPropertyName","disabled","documentationPropertyType","boolean",3,"documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","ngModel","documentationPropertyMode","input","documentationPropertyType","string",3,"documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","exampleText","documentationPropertyMode","input","documentationPropertyType","string",3,"documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","tools","documentationPropertyMode","input","documentationPropertyType","ReadonlyArray<TuiEditorTool>",3,"documentationPropertyValues","documentationPropertyValue","documentationPropertyValueChange"],["heading","CSS customization"],["documentationPropertyName","style.minHeight.px","documentationPropertyMode","input","documentationPropertyType","number",3,"documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","style.maxHeight.px","documentationPropertyMode","input","documentationPropertyType","number",3,"documentationPropertyValue","documentationPropertyValueChange"],["heading","Setup"],[1,"b-demo-steps"],["filename","myComponent.module.ts",3,"code"],["filename","myComponent.template.html",3,"code"],["filename","myComponent.component.ts",3,"code"],[3,"code"],[1,"tui-space_bottom-5"],["tuiText","ReadonlyMap<string, string>"]],template:function(r,g){1&r&&(e.TgZ(0,"tui-doc-page",0),e.YNc(1,pr,89,27,"ng-template",1),e.qZA())},directives:[Bo.qo,Bo.nj,Bo.FU,Ki,Xt.k,gt.JJ,gt.oH,fi,Bo.zb,Bo.B7,Bo.c0,dt.v_],styles:[""],changeDetection:0}),c})(),fr=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[D.ez,at.fV,rr,Rt.y,qt.j,ae.z,dt.Zp,Gi,Xt.Q7,gt.UX,Ht.Bz.forChild((0,re.Ve)(hr)),mi]]}),c})()},3511:(be,zt,j)=>{j.r(zt),j.d(zt,{BackgroundColor:()=>Ht}),j(4402);const Ht=j(1046).Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,renderHTML:({backgroundColor:at})=>at?{style:`background-color: ${at}`}:{},parseHTML:({style:at})=>at.backgroundColor.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setBackgroundColor:at=>({chain:dt})=>dt().setMark("textStyle",{backgroundColor:at}).run(),unsetBackgroundColor:()=>({chain:at})=>at().setMark("textStyle",{backgroundColor:null}).run()})})},1131:(be,zt,j)=>{j.r(zt),j.d(zt,{TuiFileLink:()=>gt});const gt=j(1046).Extension.create({name:"fileLink",addCommands:()=>({setFileLink:Ht=>({state:at,chain:dt})=>{const{selection:re}=at,qt='<span style="font-size: 15px"> </span>';return(Math.abs(re.to-re.from)>0?dt().toggleMark("link",{href:Ht.link},{extendEmptyMarkRange:!0}).setTextSelection(re.to).insertContent(qt):dt().insertContent(`<a href="${Ht.link}">${Ht.name}</a>${qt}`)).setTextSelection(re.to).run()}})})},7841:(be,zt,j)=>{j.r(zt),j.d(zt,{FontColor:()=>Ht}),j(4402);const Ht=j(1046).Extension.create({name:"fontColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontColor:{default:null,renderHTML:({fontColor:at})=>at?{style:`color: ${at}`}:{},parseHTML:({style:at})=>at.color.replace(/['"]+/g,""),keepOnSplit:!1}}}]},addCommands:()=>({setFontColor:at=>({chain:dt})=>dt().setMark("textStyle",{fontColor:at}).run(),unsetFontColor:()=>({chain:at})=>at().setMark("textStyle",{fontColor:null}).run()})})},3120:(be,zt,j)=>{j.r(zt),j.d(zt,{TuiFontSize:()=>Ht}),j(4402);const Ht=j(1046).Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:({style:at})=>at.fontSize,renderHTML:({fontSize:at})=>at?{style:`font-size: ${at}`}:{}}}}]},addCommands:()=>({setFontSize:at=>({chain:dt})=>dt().setMark("textStyle",{fontSize:at}).run(),unsetFontSize:()=>({chain:at})=>at().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},3757:(be,zt,j)=>{function gt(at){return at.isActive("bulletList")||at.isActive("orderedList")}j.r(zt),j.d(zt,{TuiTabExtension:()=>Ht,tuiIsOrderedOrBulletList:()=>gt});const Ht=j(1046).Extension.create({name:"indent",addKeyboardShortcuts(){return{Tab:()=>gt(this.editor)?null:this.editor.commands.insertContent("\t")}}})},822:(be,zt,j)=>{j.r(zt),j.d(zt,{TuiLink:()=>_});var D=j(1233),gt=j(1046);const dt=(m,f)=>{for(const T in f)m[T]=f[T];return m},re="numeric",Xt="ascii",qt="alpha",Rt="asciinumeric",ae="alphanumeric",Gt="domain",e="emoji",Nt="whitespace";function Dt(m,f){return m in f||(f[m]=[]),f[m]}function Mt(m,f,T){f[re]&&(f[Rt]=!0,f[ae]=!0),f[Xt]&&(f[Rt]=!0,f[qt]=!0),f[Rt]&&(f[ae]=!0),f[qt]&&(f[ae]=!0),f[ae]&&(f[Gt]=!0),f[e]&&(f[Gt]=!0);for(const w in f){const N=Dt(w,T);N.indexOf(m)<0&&N.push(m)}}function Lt(m){void 0===m&&(m=null),this.j={},this.jr=[],this.jd=null,this.t=m}Lt.groups={},Lt.prototype={accepts(){return!!this.t},go(m){const f=this,T=f.j[m];if(T)return T;for(let w=0;w<f.jr.length;w++){const N=f.jr[w][0],Z=f.jr[w][1];if(Z&&N.test(m))return Z}return f.jd},has(m,f){return void 0===f&&(f=!1),f?m in this.j:!!this.go(m)},ta(m,f,T,w){for(let N=0;N<m.length;N++)this.tt(m[N],f,T,w)},tr(m,f,T,w){let N;return w=w||Lt.groups,f&&f.j?N=f:(N=new Lt(f),T&&w&&Mt(f,T,w)),this.jr.push([m,N]),N},ts(m,f,T,w){let N=this;const Z=m.length;if(!Z)return N;for(let L=0;L<Z-1;L++)N=N.tt(m[L]);return N.tt(m[Z-1],f,T,w)},tt(m,f,T,w){w=w||Lt.groups;const N=this;if(f&&f.j)return N.j[m]=f,f;const Z=f;let L,$=N.go(m);if($?(L=new Lt,dt(L.j,$.j),L.jr.push.apply(L.jr,$.jr),L.jd=$.jd,L.t=$.t):L=new Lt,Z){if(w)if(L.t&&"string"==typeof L.t){const et=dt(function(m,f){const T={};for(const w in f)f[w].indexOf(m)>=0&&(T[w]=!0);return T}(L.t,w),T);Mt(Z,et,w)}else T&&Mt(Z,T,w);L.t=Z}return N.j[m]=L,L}};const xt=(m,f,T,w,N)=>m.ta(f,T,w,N),Jt=(m,f,T,w,N)=>m.tr(f,T,w,N),Pt=(m,f,T,w,N)=>m.ts(f,T,w,N),pt=(m,f,T,w,N)=>m.tt(f,T,w,N),Qt="WORD",fe="UWORD",le="LOCALHOST",vt="UTLD",$t="SCHEME",ht="SLASH_SCHEME",z="NUM",q="NL",st="OPENBRACE",St="OPENBRACKET",Zt="OPENANGLEBRACKET",ne="OPENPAREN",jt="CLOSEBRACE",Ee="CLOSEBRACKET",ye="CLOSEANGLEBRACKET",Pe="CLOSEPAREN",ue="AMPERSAND",nn="APOSTROPHE",Ue="ASTERISK",de="AT",Je="BACKSLASH",Ie="BACKTICK",rn="CARET",ve="COLON",Me="COMMA",Ge="DOLLAR",_e="DOT",Ve="EQUALS",pe="EXCLAMATION",ke="HYPHEN",Le="PERCENT",an="PIPE",qe="PLUS",Re="POUND",Ye="QUERY",me="QUOTE",$e="SEMI",Ce="SLASH",Yt="TILDE",Y="UNDERSCORE",k="EMOJI",M="SYM";var x=Object.freeze({__proto__:null,WORD:Qt,UWORD:fe,LOCALHOST:le,TLD:"TLD",UTLD:vt,SCHEME:$t,SLASH_SCHEME:ht,NUM:z,WS:"WS",NL:q,OPENBRACE:st,OPENBRACKET:St,OPENANGLEBRACKET:Zt,OPENPAREN:ne,CLOSEBRACE:jt,CLOSEBRACKET:Ee,CLOSEANGLEBRACKET:ye,CLOSEPAREN:Pe,AMPERSAND:ue,APOSTROPHE:nn,ASTERISK:Ue,AT:de,BACKSLASH:Je,BACKTICK:Ie,CARET:rn,COLON:ve,COMMA:Me,DOLLAR:Ge,DOT:_e,EQUALS:Ve,EXCLAMATION:pe,HYPHEN:ke,PERCENT:Le,PIPE:an,PLUS:qe,POUND:Re,QUERY:Ye,QUOTE:me,SEMI:$e,SLASH:Ce,TILDE:Yt,UNDERSCORE:Y,EMOJI:k,SYM:M});const J=/[a-z]/,G=/\p{L}/u,X=/\p{Emoji}/u,_t=/\d/,R=/\s/;let I=null,H=null;function Et(m,f,T,w,N){let Z;const L=f.length;for(let $=0;$<L-1;$++){const et=f[$];m.j[et]?Z=m.j[et]:(Z=new Lt(w),Z.jr=N.slice(),m.j[et]=Z),m=Z}return Z=new Lt(T),Z.jr=N.slice(),m.j[f[L-1]]=Z,Z}function De(m){const f=[],T=[];let w=0;for(;w<m.length;){let Z=0;for(;"0123456789".indexOf(m[w+Z])>=0;)Z++;if(Z>0){f.push(T.join(""));for(let L=parseInt(m.substring(w,w+Z),10);L>0;L--)T.pop();w+=Z}else T.push(m[w]),w++}return f}const B={defaultProtocol:"http",events:null,format:W,formatHref:W,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function O(m,f){void 0===f&&(f=null);let T=dt({},B);m&&(T=dt(T,m instanceof O?m.o:m));const w=T.ignoreTags,N=[];for(let Z=0;Z<w.length;Z++)N.push(w[Z].toUpperCase());this.o=T,f&&(this.defaultRender=f),this.ignoreTags=N}function W(m){return m}function ot(m,f){this.t="token",this.v=m,this.tk=f}function bt(m,f){class T extends ot{constructor(N,Z){super(N,Z),this.t=m}}for(const w in f)T.prototype[w]=f[w];return T.t=m,T}O.prototype={o:B,ignoreTags:[],defaultRender:m=>m,check(m){return this.get("validate",m.toString(),m)},get(m,f,T){const w=null!=f;let N=this.o[m];return N&&("object"==typeof N?(N=T.t in N?N[T.t]:B[m],"function"==typeof N&&w&&(N=N(f,T))):"function"==typeof N&&w&&(N=N(f,T.t,T)),N)},getObj(m,f,T){let w=this.o[m];return"function"==typeof w&&null!=f&&(w=w(f,T.t,T)),w},render(m){const f=m.render(this);return(this.get("render",null,m)||this.defaultRender)(f,m.t,m)}},ot.prototype={isLink:!1,toString(){return this.v},toHref(m){return this.toString()},toFormattedString(m){const f=this.toString(),T=m.get("truncate",f,this),w=m.get("format",f,this);return T&&w.length>T?w.substring(0,T)+"\u2026":w},toFormattedHref(m){return m.get("formatHref",this.toHref(m.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(m){return void 0===m&&(m=B.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(m),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(m){return{type:this.t,value:this.toFormattedString(m),isLink:this.isLink,href:this.toFormattedHref(m),start:this.startIndex(),end:this.endIndex()}},validate(m){return m.get("validate",this.toString(),this)},render(m){const f=this,T=this.toHref(m.get("defaultProtocol")),w=m.get("formatHref",T,this),N=m.get("tagName",T,f),Z=this.toFormattedString(m),L={},$=m.get("className",T,f),et=m.get("target",T,f),rt=m.get("rel",T,f),ut=m.getObj("attributes",T,f),ft=m.getObj("events",T,f);return L.href=w,$&&(L.class=$),et&&(L.target=et),rt&&(L.rel=rt),ut&&dt(L,ut),{tagName:N,attributes:L,content:Z,eventListeners:ft}}};const yt=bt("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ct=bt("text"),Ut=bt("nl"),te=bt("url",{isLink:!0,toHref(m){return void 0===m&&(m=B.defaultProtocol),this.hasProtocol()?this.v:`${m}://${this.v}`},hasProtocol(){const m=this.tk;return m.length>=2&&m[0].t!==le&&m[1].t===ve}}),Wt=m=>new Lt(m);function Xe(m,f,T){return new m(f.slice(T[0].s,T[T.length-1].e),T)}const Be="undefined"!=typeof console&&console&&console.warn||(()=>{}),ie={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Ln(m,f){if(void 0===f&&(f=!1),ie.initialized&&Be(`linkifyjs: already initialized - will not register custom scheme "${m}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(m))throw new Error('linkifyjs: incorrect scheme format.\n 1. Must only contain digits, lowercase ASCII letters or "-"\n 2. Cannot start or end with "-"\n 3. "-" cannot repeat');ie.customSchemes.push([m,f])}function En(m){return ie.initialized||function(){ie.scanner=function(m){void 0===m&&(m=[]);const f={};Lt.groups=f;const T=new Lt;null==I&&(I=De("aaa1rp3barth4b0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re2s2c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y0eats7k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking0channel11l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t0isalat7u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0at2delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d0network8tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0eles2s3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster5ia3d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0cys3drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7serati6ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic3tual5v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rthwesternmutual14on4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cher3ks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w0time7i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0channel7ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u0elos6wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==H&&(H=De("\u03b5\u03bb1\u03c52\u0431\u04331\u0435\u043b3\u0434\u0435\u0442\u04384\u0435\u044e2\u043a\u0430\u0442\u043e\u043b\u0438\u043a6\u043e\u043c3\u043c\u043a\u04342\u043e\u043d1\u0441\u043a\u0432\u04306\u043e\u043d\u043b\u0430\u0439\u043d5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043a\u04403\u049b\u0430\u04373\u0570\u0561\u05753\u05d9\u05e9\u05e8\u05d0\u05dc5\u05e7\u05d5\u05dd3\u0627\u0628\u0648\u0638\u0628\u064a5\u062a\u0635\u0627\u0644\u0627\u062a6\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062f\u06464\u0628\u062d\u0631\u064a\u06465\u062c\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062f\u064a\u06296\u0639\u0644\u064a\u0627\u06465\u0645\u063a\u0631\u06285\u0645\u0627\u0631\u0627\u062a5\u06cc\u0631\u0627\u06465\u0628\u0627\u0631\u062a2\u0632\u0627\u06314\u064a\u062a\u06433\u06be\u0627\u0631\u062a5\u062a\u0648\u0646\u06334\u0633\u0648\u062f\u0627\u06463\u0631\u064a\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064a\u06466\u0642\u0637\u06313\u0643\u0627\u062b\u0648\u0644\u064a\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064a\u0633\u064a\u06275\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067e\u0627\u06a9\u0633\u062a\u0627\u06467\u0680\u0627\u0631\u062a4\u0915\u0949\u092e3\u0928\u0947\u091f3\u092d\u093e\u0930\u09240\u092e\u094d3\u094b\u09245\u0938\u0902\u0917\u0920\u09285\u09ac\u09be\u0982\u09b2\u09be5\u09ad\u09be\u09b0\u09a42\u09f0\u09a44\u0a2d\u0a3e\u0a30\u0a244\u0aad\u0abe\u0ab0\u0aa44\u0b2d\u0b3e\u0b30\u0b244\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe6\u0bb2\u0b99\u0bcd\u0b95\u0bc86\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd11\u0c2d\u0c3e\u0c30\u0c24\u0c4d5\u0cad\u0cbe\u0cb0\u0ca44\u0d2d\u0d3e\u0d30\u0d24\u0d025\u0dbd\u0d82\u0d9a\u0dcf4\u0e04\u0e2d\u0e213\u0e44\u0e17\u0e223\u0ea5\u0eb2\u0ea73\u10d2\u10d42\u307f\u3093\u306a3\u30a2\u30de\u30be\u30f34\u30af\u30e9\u30a6\u30c94\u30b0\u30fc\u30b0\u30eb4\u30b3\u30e02\u30b9\u30c8\u30a23\u30bb\u30fc\u30eb3\u30d5\u30a1\u30c3\u30b7\u30e7\u30f36\u30dd\u30a4\u30f3\u30c84\u4e16\u754c2\u4e2d\u4fe11\u56fd1\u570b1\u6587\u7f513\u4e9a\u9a6c\u900a3\u4f01\u4e1a2\u4f5b\u5c712\u4fe1\u606f2\u5065\u5eb72\u516b\u53662\u516c\u53f81\u76ca2\u53f0\u6e7e1\u70632\u5546\u57ce1\u5e971\u68072\u5609\u91cc0\u5927\u9152\u5e975\u5728\u7ebf2\u5927\u62ff2\u5929\u4e3b\u65593\u5a31\u4e502\u5bb6\u96fb2\u5e7f\u4e1c2\u5fae\u535a2\u6148\u55842\u6211\u7231\u4f603\u624b\u673a2\u62db\u80582\u653f\u52a11\u5e9c2\u65b0\u52a0\u57612\u95fb2\u65f6\u5c1a2\u66f8\u7c4d2\u673a\u67842\u6de1\u9a6c\u95213\u6e38\u620f2\u6fb3\u95802\u70b9\u770b2\u79fb\u52a82\u7ec4\u7ec7\u673a\u67844\u7f51\u57401\u5e971\u7ad91\u7edc2\u8054\u901a2\u8c37\u6b4c2\u8d2d\u72692\u901a\u8ca92\u96c6\u56e22\u96fb\u8a0a\u76c8\u79d14\u98de\u5229\u6d663\u98df\u54c12\u9910\u53852\u9999\u683c\u91cc\u62c93\u6e2f2\ub2f7\ub1371\ucef42\uc0bc\uc1312\ud55c\uad6d2")),pt(T,"'",nn),pt(T,"{",st),pt(T,"[",St),pt(T,"<",Zt),pt(T,"(",ne),pt(T,"}",jt),pt(T,"]",Ee),pt(T,">",ye),pt(T,")",Pe),pt(T,"&",ue),pt(T,"*",Ue),pt(T,"@",de),pt(T,"`",Ie),pt(T,"^",rn),pt(T,":",ve),pt(T,",",Me),pt(T,"$",Ge),pt(T,".",_e),pt(T,"=",Ve),pt(T,"!",pe),pt(T,"-",ke),pt(T,"%",Le),pt(T,"|",an),pt(T,"+",qe),pt(T,"#",Re),pt(T,"?",Ye),pt(T,'"',me),pt(T,"/",Ce),pt(T,";",$e),pt(T,"~",Yt),pt(T,"_",Y),pt(T,"\\",Je);const w=Jt(T,_t,z,{[re]:!0});Jt(w,_t,w);const N=Jt(T,J,Qt,{[Xt]:!0});Jt(N,J,N);const Z=Jt(T,G,fe,{[qt]:!0});Jt(Z,J),Jt(Z,G,Z);const L=Jt(T,R,"WS",{[Nt]:!0});pt(T,"\n",q,{[Nt]:!0}),pt(L,"\n"),Jt(L,R,L);const $=Jt(T,X,k,{[e]:!0});Jt($,X,$),pt($,"\ufe0f",$);const et=pt($,"\u200d");Jt(et,X,$);const rt=[[J,N]],ut=[[J,null],[G,Z]];for(let ft=0;ft<I.length;ft++)Et(T,I[ft],"TLD",Qt,rt);for(let ft=0;ft<H.length;ft++)Et(T,H[ft],vt,fe,ut);Mt("TLD",{tld:!0,ascii:!0},f),Mt(vt,{utld:!0,alpha:!0},f),Et(T,"file",$t,Qt,rt),Et(T,"mailto",$t,Qt,rt),Et(T,"http",ht,Qt,rt),Et(T,"https",ht,Qt,rt),Et(T,"ftp",ht,Qt,rt),Et(T,"ftps",ht,Qt,rt),Mt($t,{scheme:!0,ascii:!0},f),Mt(ht,{slashscheme:!0,ascii:!0},f),m=m.sort((ft,kt)=>ft[0]>kt[0]?1:-1);for(let ft=0;ft<m.length;ft++){const kt=m[ft][0],Ft=m[ft][1]?{scheme:!0}:{slashscheme:!0};kt.indexOf("-")>=0?Ft[Gt]=!0:J.test(kt)?_t.test(kt)?Ft[Rt]=!0:Ft[Xt]=!0:Ft[re]=!0,Pt(T,kt,kt,Ft)}return Pt(T,"localhost",le,{ascii:!0}),T.jd=new Lt(M),{start:T,tokens:dt({groups:f},x)}}(ie.customSchemes);for(let m=0;m<ie.tokenQueue.length;m++)ie.tokenQueue[m][1]({scanner:ie.scanner});ie.parser=function(m){let{groups:f}=m;const T=f.domain.concat([ue,Ue,de,Je,Ie,rn,Ge,Ve,ke,z,Le,an,qe,Re,Ce,M,Yt,Y]),w=[nn,ye,jt,Ee,Pe,ve,Me,_e,pe,Zt,st,St,ne,Ye,me,$e],N=[ue,nn,Ue,Je,Ie,rn,jt,Ge,Ve,ke,st,Le,an,qe,Re,Ye,Ce,M,Yt,Y],Z=Wt(),L=pt(Z,Yt);xt(L,N,L),xt(L,f.domain,L);const $=Wt(),et=Wt(),rt=Wt();xt(Z,f.domain,$),xt(Z,f.scheme,et),xt(Z,f.slashscheme,rt),xt($,N,L),xt($,f.domain,$);const ut=pt($,de);pt(L,de,ut),pt(et,de,ut),pt(rt,de,ut);const ft=pt(L,_e);xt(ft,N,L),xt(ft,f.domain,L);const kt=Wt();xt(ut,f.domain,kt),xt(kt,f.domain,kt);const Vt=pt(kt,_e);xt(Vt,f.domain,kt);const Ft=Wt(yt);xt(Vt,f.tld,Ft),xt(Vt,f.utld,Ft),pt(ut,le,Ft);const Se=pt(kt,ke);xt(Se,f.domain,kt),xt(Ft,f.domain,kt),pt(Ft,_e,Vt),pt(Ft,ke,Se);const dn=pt(Ft,ve);xt(dn,f.numeric,yt);const tn=pt($,ke),Te=pt($,_e);xt(tn,f.domain,$),xt(Te,N,L),xt(Te,f.domain,$);const Ae=Wt(te);xt(Te,f.tld,Ae),xt(Te,f.utld,Ae),xt(Ae,f.domain,$),xt(Ae,N,L),pt(Ae,_e,Te),pt(Ae,ke,tn),pt(Ae,de,ut);const pn=pt(Ae,ve),sn=Wt(te);xt(pn,f.numeric,sn);const ee=Wt(te),un=Wt();xt(ee,T,ee),xt(ee,w,un),xt(un,T,ee),xt(un,w,un),pt(Ae,Ce,ee),pt(sn,Ce,ee);const Hn=pt(et,ve),so=pt(rt,ve),lo=pt(so,Ce),Mn=pt(lo,Ce);xt(et,f.domain,$),pt(et,_e,Te),pt(et,ke,tn),xt(rt,f.domain,$),pt(rt,_e,Te),pt(rt,ke,tn),xt(Hn,f.domain,ee),pt(Hn,Ce,ee),xt(Mn,f.domain,ee),xt(Mn,T,ee),pt(Mn,Ce,ee);const He=pt(ee,st),je=pt(ee,St),$n=pt(ee,Zt),jn=pt(ee,ne);pt(un,st,He),pt(un,St,je),pt(un,Zt,$n),pt(un,ne,jn),pt(He,jt,ee),pt(je,Ee,ee),pt($n,ye,ee),pt(jn,Pe,ee),pt(He,jt,ee);const In=Wt(te),ln=Wt(te),wn=Wt(te),gn=Wt(te);xt(He,T,In),xt(je,T,ln),xt($n,T,wn),xt(jn,T,gn);const _n=Wt(),Nn=Wt(),Bn=Wt(),Cn=Wt();return xt(He,w),xt(je,w),xt($n,w),xt(jn,w),xt(In,T,In),xt(ln,T,ln),xt(wn,T,wn),xt(gn,T,gn),xt(In,w,In),xt(ln,w,ln),xt(wn,w,wn),xt(gn,w,gn),xt(_n,T,_n),xt(Nn,T,ln),xt(Bn,T,wn),xt(Cn,T,gn),xt(_n,w,_n),xt(Nn,w,Nn),xt(Bn,w,Bn),xt(Cn,w,Cn),pt(ln,Ee,ee),pt(wn,ye,ee),pt(gn,Pe,ee),pt(In,jt,ee),pt(Nn,Ee,ee),pt(Bn,ye,ee),pt(Cn,Pe,ee),pt(_n,Pe,ee),pt(Z,le,Ae),pt(Z,q,Ut),{start:Z,tokens:x}}(ie.scanner.tokens);for(let m=0;m<ie.pluginQueue.length;m++)ie.pluginQueue[m][1]({scanner:ie.scanner,parser:ie.parser});ie.initialized=!0}(),function(m,f,T){let w=T.length,N=0,Z=[],L=[];for(;N<w;){let $=m,et=null,rt=null,ut=0,ft=null,kt=-1;for(;N<w&&!(et=$.go(T[N].t));)L.push(T[N++]);for(;N<w&&(rt=et||$.go(T[N].t));)et=null,$=rt,$.accepts()?(kt=0,ft=$):kt>=0&&kt++,N++,ut++;if(kt<0)N-=ut,N<w&&(L.push(T[N]),N++);else{L.length>0&&(Z.push(Xe(Ct,f,L)),L=[]),N-=kt,ut-=kt;const Vt=ft.t,Ft=T.slice(N-ut,N);Z.push(Xe(Vt,f,Ft))}}return L.length>0&&Z.push(Xe(Ct,f,L)),Z}(ie.parser.start,m,function(m,f){const T=function(m){const f=[],T=m.length;let w=0;for(;w<T;){let Z,N=m.charCodeAt(w),L=N<55296||N>56319||w+1===T||(Z=m.charCodeAt(w+1))<56320||Z>57343?m[w]:m.slice(w,w+2);f.push(L),w+=L.length}return f}(f.replace(/[A-Z]/g,$=>$.toLowerCase())),w=T.length,N=[];let Z=0,L=0;for(;L<w;){let $=m,et=null,rt=0,ut=null,ft=-1,kt=-1;for(;L<w&&(et=$.go(T[L]));)$=et,$.accepts()?(ft=0,kt=0,ut=$):ft>=0&&(ft+=T[L].length,kt++),rt+=T[L].length,Z+=T[L].length,L++;Z-=ft,L-=kt,rt-=ft,N.push({t:ut.t,v:f.slice(Z-rt,Z),s:Z-rt,e:Z})}return N}(ie.scanner.start,m))}function vn(m,f,T){if(void 0===f&&(f=null),void 0===T&&(T=null),f&&"object"==typeof f){if(T)throw Error(`linkifyjs: Invalid link type ${f}; must be a string`);T=f,f=null}const w=new O(T),N=En(m),Z=[];for(let L=0;L<N.length;L++){const $=N[L];$.isLink&&(!f||$.t===f)&&Z.push($.toFormattedObject(w))}return Z}function Rn(m,f){void 0===f&&(f=null);const T=En(m);return 1===T.length&&T[0].isLink&&(!f||T[0].t===f)}var mn=j(2463);const _=gt.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,onCreate(){this.options.protocols.forEach(m=>{"string"!=typeof m?Ln(m.scheme,m.optionalSlashes):Ln(m)})},onDestroy(){Lt.groups={},ie.scanner=null,ie.parser=null,ie.tokenQueue=[],ie.pluginQueue=[],ie.customSchemes=[],ie.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:void 0}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target},class:{default:this.options.HTMLAttributes.class}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:m}){return["a",(0,gt.mergeAttributes)(this.options.HTMLAttributes,m),0]},addCommands(){return{setLink:m=>({chain:f})=>f().setMark(this.name,m).setMeta("preventAutolink",!0).run(),toggleLink:m=>({chain:f})=>f().toggleMark(this.name,m,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:m})=>m().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,gt.markPasteRule)({find:m=>vn(m).filter(f=>!this.options.validate||this.options.validate(f.value)).filter(f=>f.isLink).map(f=>({text:f.value,index:f.start,data:f})),type:this.type,getAttributes:m=>{var f;return{href:null===(f=m.data)||void 0===f?void 0:f.href}}})]},addProseMirrorPlugins(){const m=[];return this.options.autolink&&m.push(function(m){return new mn.Sy({key:new mn.H$("autolink"),appendTransaction:(f,T,w)=>{const N=f.some(ut=>ut.docChanged)&&!T.doc.eq(w.doc),Z=f.some(ut=>ut.getMeta("preventAutolink"));if(!N||Z)return;const{tr:L}=w,$=(0,gt.combineTransactionSteps)(T.doc,[...f]),{mapping:et}=$;return(0,gt.getChangedRanges)($).forEach(({oldRange:ut,newRange:ft})=>{(0,gt.getMarksBetween)(ut.from,ut.to,T.doc).filter(Se=>Se.mark.type===m.type).forEach(Se=>{const dn=et.map(Se.from),tn=et.map(Se.to),Te=(0,gt.getMarksBetween)(dn,tn,w.doc).filter(Hn=>Hn.mark.type===m.type);if(!Te.length)return;const Ae=Te[0],pn=T.doc.textBetween(Se.from,Se.to,void 0," "),sn=w.doc.textBetween(Ae.from,Ae.to,void 0," "),ee=Rn(pn),un=Rn(sn);ee&&!un&&L.removeMark(Ae.from,Ae.to,m.type)});const kt=(0,gt.findChildrenInRange)(w.doc,ft,Se=>Se.isTextblock);let Vt,Ft;if(kt.length>1?(Vt=kt[0],Ft=w.doc.textBetween(Vt.pos,Vt.pos+Vt.node.nodeSize,void 0," ")):kt.length&&w.doc.textBetween(ft.from,ft.to," "," ").endsWith(" ")&&(Vt=kt[0],Ft=w.doc.textBetween(Vt.pos,ft.to,void 0," ")),Vt&&Ft){const Se=Ft.split(" ").filter(Te=>""!==Te);if(Se.length<=0)return!1;const dn=Se[Se.length-1],tn=Vt.pos+Ft.lastIndexOf(dn);if(!dn)return!1;vn(dn).filter(Te=>Te.isLink).filter(Te=>!m.validate||m.validate(Te.value)).map(Te=>xe(At({},Te),{from:tn+Te.start+1,to:tn+Te.end+1})).forEach(Te=>{L.addMark(Te.from,Te.to,m.type.create({href:Te.href}))})}}),L.steps.length?L:void 0}})}({type:this.type,validate:this.options.validate})),this.options.openOnClick&&m.push(function(m){return new mn.Sy({key:new mn.H$("handleClickLink"),props:{handleClick:(f,T,w)=>{var N,Z,L;if(0!==w.button)return!1;const $=(0,gt.getAttributes)(f.state,m.type.name),et=null===(N=w.target)||void 0===N?void 0:N.closest("a"),rt=null!==(Z=null==et?void 0:et.href)&&void 0!==Z?Z:$.href,ut=null!==(L=null==et?void 0:et.target)&&void 0!==L?L:$.target;return!(!et||!rt||(window.open(rt,ut),0))}}})}({type:this.type})),this.options.linkOnPaste&&m.push(function(m){return new mn.Sy({key:new mn.H$("handlePasteLink"),props:{handlePaste:(f,T,w)=>{const{state:N}=f,{selection:Z}=N,{empty:L}=Z;if(L)return!1;let $="";w.content.forEach(rt=>{$+=rt.textContent});const et=vn($).find(rt=>rt.isLink&&rt.value===$);return!(!$||!et||(m.editor.commands.setMark(m.type,{href:et.href}),0))}}})}({editor:this.editor,type:this.type})),m}}).extend({addAttributes(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),(0,D.x6)(["download"]))},addCommands(){var m;return Object.assign(Object.assign({},null===(m=this.parent)||void 0===m?void 0:m.call(this)),{toggleLink:f=>({chain:T,state:w})=>{{const{selection:N,doc:Z}=w,L=Z.cut(N.to,N.to+1),et=" "===(0,gt.getHTMLFromFragment)(L.content,w.schema).replace(/<\/?[^>]+(>|$)/g,""),rt=T().toggleMark(this.name,f,{extendEmptyMarkRange:!0});return(et?rt.setTextSelection(N.to+1):rt.setTextSelection(N.to).insertContent('<span style="font-size: 15px"> </span>')).run()}}})}}).configure({openOnClick:!1})},922:(be,zt,j)=>{j.r(zt),j.d(zt,{StarterKit:()=>De});var D=j(1046);const gt=/^\s*>\s$/,Ht=D.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:B}){return["blockquote",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{setBlockquote:()=>({commands:B})=>B.wrapIn(this.name),toggleBlockquote:()=>({commands:B})=>B.toggleWrap(this.name),unsetBlockquote:()=>({commands:B})=>B.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,D.wrappingInputRule)({find:gt,type:this.type})]}}),at=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,dt=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,re=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Xt=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,qt=D.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:B=>"normal"!==B.style.fontWeight&&null},{style:"font-weight",getAttrs:B=>/^(bold(er)?|[5-9]\d{2,})$/.test(B)&&null}],renderHTML({HTMLAttributes:B}){return["strong",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{setBold:()=>({commands:B})=>B.setMark(this.name),toggleBold:()=>({commands:B})=>B.toggleMark(this.name),unsetBold:()=>({commands:B})=>B.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,D.markInputRule)({find:at,type:this.type}),(0,D.markInputRule)({find:re,type:this.type})]},addPasteRules(){return[(0,D.markPasteRule)({find:dt,type:this.type}),(0,D.markPasteRule)({find:Xt,type:this.type})]}}),Rt=D.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:B}){return["li",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ae=D.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:B=>!!B.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:B}){return["span",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:B,commands:O})=>{const W=(0,D.getMarkAttributes)(B,this.type);return!!Object.entries(W).some(([,ot])=>!!ot)||O.unsetMark(this.name)}}}}),Gt=/^\s*([-+*])\s$/,e=D.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:B}){return["ul",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{toggleBulletList:()=>({commands:B,chain:O})=>this.options.keepAttributes?O().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Rt.name,this.editor.getAttributes(ae.name)).run():B.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let B=(0,D.wrappingInputRule)({find:Gt,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(B=(0,D.wrappingInputRule)({find:Gt,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ae.name),editor:this.editor})),[B]}}),Ne=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,se=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Nt=D.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:B}){return["code",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{setCode:()=>({commands:B})=>B.setMark(this.name),toggleCode:()=>({commands:B})=>B.toggleMark(this.name),unsetCode:()=>({commands:B})=>B.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,D.markInputRule)({find:Ne,type:this.type})]},addPasteRules(){return[(0,D.markPasteRule)({find:se,type:this.type})]}});var Dt=j(2463);const Mt=/^```([a-z]+)?[\s\n]$/,Bt=/^~~~([a-z]+)?[\s\n]$/,Lt=D.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:B=>{var O;const{languageClassPrefix:W}=this.options;return[...(null===(O=B.firstElementChild)||void 0===O?void 0:O.classList)||[]].filter(yt=>yt.startsWith(W)).map(yt=>yt.replace(W,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:B,HTMLAttributes:O}){return["pre",(0,D.mergeAttributes)(this.options.HTMLAttributes,O),["code",{class:B.attrs.language?this.options.languageClassPrefix+B.attrs.language:null},0]]},addCommands(){return{setCodeBlock:B=>({commands:O})=>O.setNode(this.name,B),toggleCodeBlock:B=>({commands:O})=>O.toggleNode(this.name,"paragraph",B)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:B,$anchor:O}=this.editor.state.selection;return!(!B||O.parent.type.name!==this.name)&&!(1!==O.pos&&O.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:B})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:O}=B,{selection:W}=O,{$from:it,empty:ot}=W;if(!ot||it.parent.type!==this.type)return!1;const bt=it.parentOffset===it.parent.nodeSize-2,yt=it.parent.textContent.endsWith("\n\n");return!(!bt||!yt)&&B.chain().command(({tr:Ct})=>(Ct.delete(it.pos-2,it.pos),!0)).exitCode().run()},ArrowDown:({editor:B})=>{if(!this.options.exitOnArrowDown)return!1;const{state:O}=B,{selection:W,doc:it}=O,{$from:ot,empty:bt}=W;if(!bt||ot.parent.type!==this.type||ot.parentOffset!==ot.parent.nodeSize-2)return!1;const Ct=ot.after();return void 0!==Ct&&!it.nodeAt(Ct)&&B.commands.exitCode()}}},addInputRules(){return[(0,D.textblockTypeInputRule)({find:Mt,type:this.type,getAttributes:B=>({language:B[1]})}),(0,D.textblockTypeInputRule)({find:Bt,type:this.type,getAttributes:B=>({language:B[1]})})]},addProseMirrorPlugins(){return[new Dt.Sy({key:new Dt.H$("codeBlockVSCodeHandler"),props:{handlePaste:(B,O)=>{if(!O.clipboardData||this.editor.isActive(this.type.name))return!1;const W=O.clipboardData.getData("text/plain"),it=O.clipboardData.getData("vscode-editor-data"),ot=it?JSON.parse(it):void 0,bt=null==ot?void 0:ot.mode;if(!W||!bt)return!1;const{tr:yt}=B.state;return yt.replaceSelectionWith(this.type.create({language:bt})),yt.setSelection(Dt.Bs.near(yt.doc.resolve(Math.max(0,yt.selection.from-2)))),yt.insertText(W.replace(/\r\n?/g,"\n")),yt.setMeta("paste",!0),B.dispatch(yt),!0}}})]}}),xt=D.Node.create({name:"doc",topNode:!0,content:"block+"});var Jt=j(8480);function Pt(B={}){return new Dt.Sy({view:O=>new pt(O,B)})}class pt{constructor(O,W){var it;this.editorView=O,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(it=W.width)&&void 0!==it?it:1,this.color=!1===W.color?void 0:W.color||"black",this.class=W.class,this.handlers=["dragover","dragend","drop","dragleave"].map(ot=>{let bt=yt=>{this[ot](yt)};return O.dom.addEventListener(ot,bt),{name:ot,handler:bt}})}destroy(){this.handlers.forEach(({name:O,handler:W})=>this.editorView.dom.removeEventListener(O,W))}update(O,W){null!=this.cursorPos&&W.doc!=O.state.doc&&(this.cursorPos>O.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(O){O!=this.cursorPos&&(this.cursorPos=O,null==O?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let it,O=this.editorView.state.doc.resolve(this.cursorPos),W=!O.parent.inlineContent;if(W){let Ct=O.nodeBefore,Ut=O.nodeAfter;if(Ct||Ut){let te=this.editorView.nodeDOM(this.cursorPos-(Ct?Ct.nodeSize:0));if(te){let we=te.getBoundingClientRect(),Wt=Ct?we.bottom:we.top;Ct&&Ut&&(Wt=(Wt+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),it={left:we.left,right:we.right,top:Wt-this.width/2,bottom:Wt+this.width/2}}}}if(!it){let Ct=this.editorView.coordsAtPos(this.cursorPos);it={left:Ct.left-this.width/2,right:Ct.left+this.width/2,top:Ct.top,bottom:Ct.bottom}}let bt,yt,ot=this.editorView.dom.offsetParent;if(this.element||(this.element=ot.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",W),this.element.classList.toggle("prosemirror-dropcursor-inline",!W),!ot||ot==document.body&&"static"==getComputedStyle(ot).position)bt=-pageXOffset,yt=-pageYOffset;else{let Ct=ot.getBoundingClientRect();bt=Ct.left-ot.scrollLeft,yt=Ct.top-ot.scrollTop}this.element.style.left=it.left-bt+"px",this.element.style.top=it.top-yt+"px",this.element.style.width=it.right-it.left+"px",this.element.style.height=it.bottom-it.top+"px"}scheduleRemoval(O){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),O)}dragover(O){if(!this.editorView.editable)return;let W=this.editorView.posAtCoords({left:O.clientX,top:O.clientY}),it=W&&W.inside>=0&&this.editorView.state.doc.nodeAt(W.inside),ot=it&&it.type.spec.disableDropCursor,bt="function"==typeof ot?ot(this.editorView,W,O):ot;if(W&&!bt){let yt=W.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Ct=(0,Jt.nj)(this.editorView.state.doc,yt,this.editorView.dragging.slice);null!=Ct&&(yt=Ct)}this.setCursor(yt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(O){(O.target==this.editorView.dom||!this.editorView.dom.contains(O.relatedTarget))&&this.setCursor(null)}}const Qt=D.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[Pt(this.options)]}});var fe=j(1690),le=j(7439),Ot=j(3594);class vt extends Dt.Y1{constructor(O){super(O,O)}map(O,W){let it=O.resolve(W.map(this.head));return vt.valid(it)?new vt(it):Dt.Y1.near(it)}content(){return le.p2.empty}eq(O){return O instanceof vt&&O.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(O,W){if("number"!=typeof W.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new vt(O.resolve(W.pos))}getBookmark(){return new $t(this.anchor)}static valid(O){let W=O.parent;if(W.isTextblock||!function(B){for(let O=B.depth;O>=0;O--){let W=B.index(O),it=B.node(O);if(0!=W)for(let ot=it.child(W-1);;ot=ot.lastChild){if(0==ot.childCount&&!ot.inlineContent||ot.isAtom||ot.type.spec.isolating)return!0;if(ot.inlineContent)return!1}else if(it.type.spec.isolating)return!0}return!0}(O)||!function(B){for(let O=B.depth;O>=0;O--){let W=B.indexAfter(O),it=B.node(O);if(W!=it.childCount)for(let ot=it.child(W);;ot=ot.firstChild){if(0==ot.childCount&&!ot.inlineContent||ot.isAtom||ot.type.spec.isolating)return!0;if(ot.inlineContent)return!1}else if(it.type.spec.isolating)return!0}return!0}(O))return!1;let it=W.type.spec.allowGapCursor;if(null!=it)return it;let ot=W.contentMatchAt(O.index()).defaultType;return ot&&ot.isTextblock}static findGapCursorFrom(O,W,it=!1){t:for(;;){if(!it&&vt.valid(O))return O;let ot=O.pos,bt=null;for(let yt=O.depth;;yt--){let Ct=O.node(yt);if(W>0?O.indexAfter(yt)<Ct.childCount:O.index(yt)>0){bt=Ct.child(W>0?O.indexAfter(yt):O.index(yt)-1);break}if(0==yt)return null;ot+=W;let Ut=O.doc.resolve(ot);if(vt.valid(Ut))return Ut}for(;;){let yt=W>0?bt.firstChild:bt.lastChild;if(!yt){if(bt.isAtom&&!bt.isText&&!Dt.qv.isSelectable(bt)){O=O.doc.resolve(ot+bt.nodeSize*W),it=!1;continue t}break}bt=yt,ot+=W;let Ct=O.doc.resolve(ot);if(vt.valid(Ct))return Ct}return null}}}vt.prototype.visible=!1,vt.findFrom=vt.findGapCursorFrom,Dt.Y1.jsonID("gapcursor",vt);class $t{constructor(O){this.pos=O}map(O){return new $t(O.map(this.pos))}resolve(O){let W=O.resolve(this.pos);return vt.valid(W)?new vt(W):Dt.Y1.near(W)}}const q=(0,fe.$)({ArrowLeft:st("horiz",-1),ArrowRight:st("horiz",1),ArrowUp:st("vert",-1),ArrowDown:st("vert",1)});function st(B,O){const W="vert"==B?O>0?"down":"up":O>0?"right":"left";return function(it,ot,bt){let yt=it.selection,Ct=O>0?yt.$to:yt.$from,Ut=yt.empty;if(yt instanceof Dt.Bs){if(!bt.endOfTextblock(W)||0==Ct.depth)return!1;Ut=!1,Ct=it.doc.resolve(O>0?Ct.after():Ct.before())}let te=vt.findGapCursorFrom(Ct,O,Ut);return!!te&&(ot&&ot(it.tr.setSelection(new vt(te))),!0)}}function St(B,O,W){if(!B||!B.editable)return!1;let it=B.state.doc.resolve(O);if(!vt.valid(it))return!1;let ot=B.posAtCoords({left:W.clientX,top:W.clientY});return!(ot&&ot.inside>-1&&Dt.qv.isSelectable(B.state.doc.nodeAt(ot.inside))||(B.dispatch(B.state.tr.setSelection(new vt(it))),0))}function Zt(B,O){if("insertCompositionText"!=O.inputType||!(B.state.selection instanceof vt))return!1;let{$from:W}=B.state.selection,it=W.parent.contentMatchAt(W.index()).findWrapping(B.state.schema.nodes.text);if(!it)return!1;let ot=le.HY.empty;for(let yt=it.length-1;yt>=0;yt--)ot=le.HY.from(it[yt].createAndFill(null,ot));let bt=B.state.tr.replace(W.pos,W.pos,new le.p2(ot,0,0));return bt.setSelection(Dt.Bs.near(bt.doc.resolve(W.pos+1))),B.dispatch(bt),!1}function ne(B){if(!(B.selection instanceof vt))return null;let O=document.createElement("div");return O.className="ProseMirror-gapcursor",Ot.EH.create(B.doc,[Ot.p.widget(B.selection.head,O,{key:"gapcursor"})])}const jt=D.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[new Dt.Sy({props:{decorations:ne,createSelectionBetween:(B,O,W)=>O.pos==W.pos&&vt.valid(W)?new vt(W):null,handleClick:St,handleKeyDown:q,handleDOMEvents:{beforeinput:Zt}}})],extendNodeSchema(B){var O;return{allowGapCursor:null!==(O=(0,D.callOrReturn)((0,D.getExtensionField)(B,"allowGapCursor",{name:B.name,options:B.options,storage:B.storage})))&&void 0!==O?O:null}}}),Ee=D.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:B}){return["br",(0,D.mergeAttributes)(this.options.HTMLAttributes,B)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:B,chain:O,state:W,editor:it})=>B.first([()=>B.exitCode(),()=>B.command(()=>{const{selection:ot,storedMarks:bt}=W;if(ot.$from.parent.type.spec.isolating)return!1;const{keepMarks:yt}=this.options,{splittableMarks:Ct}=it.extensionManager,Ut=bt||ot.$to.parentOffset&&ot.$from.marks();return O().insertContent({type:this.name}).command(({tr:te,dispatch:we})=>{if(we&&Ut&&yt){const Wt=Ut.filter(he=>Ct.includes(he.type.name));te.ensureMarks(Wt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ye=D.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(B=>({tag:`h${B}`,attrs:{level:B}}))},renderHTML({node:B,HTMLAttributes:O}){return[`h${this.options.levels.includes(B.attrs.level)?B.attrs.level:this.options.levels[0]}`,(0,D.mergeAttributes)(this.options.HTMLAttributes,O),0]},addCommands(){return{setHeading:B=>({commands:O})=>!!this.options.levels.includes(B.level)&&O.setNode(this.name,B),toggleHeading:B=>({commands:O})=>!!this.options.levels.includes(B.level)&&O.toggleNode(this.name,"paragraph",B)}},addKeyboardShortcuts(){return this.options.levels.reduce((B,O)=>xe(At({},B),{[`Mod-Alt-${O}`]:()=>this.editor.commands.toggleHeading({level:O})}),{})},addInputRules(){return this.options.levels.map(B=>(0,D.textblockTypeInputRule)({find:new RegExp(`^(#{1,${B}})\\s$`),type:this.type,getAttributes:{level:B}}))}});var ue=function(){};ue.prototype.append=function(O){return O.length?(O=ue.from(O),!this.length&&O||O.length<200&&this.leafAppend(O)||this.length<200&&O.leafPrepend(this)||this.appendInner(O)):this},ue.prototype.prepend=function(O){return O.length?ue.from(O).append(this):this},ue.prototype.appendInner=function(O){return new Ue(this,O)},ue.prototype.slice=function(O,W){return void 0===O&&(O=0),void 0===W&&(W=this.length),O>=W?ue.empty:this.sliceInner(Math.max(0,O),Math.min(this.length,W))},ue.prototype.get=function(O){if(!(O<0||O>=this.length))return this.getInner(O)},ue.prototype.forEach=function(O,W,it){void 0===W&&(W=0),void 0===it&&(it=this.length),W<=it?this.forEachInner(O,W,it,0):this.forEachInvertedInner(O,W,it,0)},ue.prototype.map=function(O,W,it){void 0===W&&(W=0),void 0===it&&(it=this.length);var ot=[];return this.forEach(function(bt,yt){return ot.push(O(bt,yt))},W,it),ot},ue.from=function(O){return O instanceof ue?O:O&&O.length?new nn(O):ue.empty};var nn=function(B){function O(it){B.call(this),this.values=it}B&&(O.__proto__=B),(O.prototype=Object.create(B&&B.prototype)).constructor=O;var W={length:{configurable:!0},depth:{configurable:!0}};return O.prototype.flatten=function(){return this.values},O.prototype.sliceInner=function(ot,bt){return 0==ot&&bt==this.length?this:new O(this.values.slice(ot,bt))},O.prototype.getInner=function(ot){return this.values[ot]},O.prototype.forEachInner=function(ot,bt,yt,Ct){for(var Ut=bt;Ut<yt;Ut++)if(!1===ot(this.values[Ut],Ct+Ut))return!1},O.prototype.forEachInvertedInner=function(ot,bt,yt,Ct){for(var Ut=bt-1;Ut>=yt;Ut--)if(!1===ot(this.values[Ut],Ct+Ut))return!1},O.prototype.leafAppend=function(ot){if(this.length+ot.length<=200)return new O(this.values.concat(ot.flatten()))},O.prototype.leafPrepend=function(ot){if(this.length+ot.length<=200)return new O(ot.flatten().concat(this.values))},W.length.get=function(){return this.values.length},W.depth.get=function(){return 0},Object.defineProperties(O.prototype,W),O}(ue);ue.empty=new nn([]);var Ue=function(B){function O(W,it){B.call(this),this.left=W,this.right=it,this.length=W.length+it.length,this.depth=Math.max(W.depth,it.depth)+1}return B&&(O.__proto__=B),(O.prototype=Object.create(B&&B.prototype)).constructor=O,O.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},O.prototype.getInner=function(it){return it<this.left.length?this.left.get(it):this.right.get(it-this.left.length)},O.prototype.forEachInner=function(it,ot,bt,yt){var Ct=this.left.length;if(ot<Ct&&!1===this.left.forEachInner(it,ot,Math.min(bt,Ct),yt)||bt>Ct&&!1===this.right.forEachInner(it,Math.max(ot-Ct,0),Math.min(this.length,bt)-Ct,yt+Ct))return!1},O.prototype.forEachInvertedInner=function(it,ot,bt,yt){var Ct=this.left.length;if(ot>Ct&&!1===this.right.forEachInvertedInner(it,ot-Ct,Math.max(bt,Ct)-Ct,yt+Ct)||bt<Ct&&!1===this.left.forEachInvertedInner(it,Math.min(ot,Ct),bt,yt))return!1},O.prototype.sliceInner=function(it,ot){if(0==it&&ot==this.length)return this;var bt=this.left.length;return ot<=bt?this.left.slice(it,ot):it>=bt?this.right.slice(it-bt,ot-bt):this.left.slice(it,bt).append(this.right.slice(0,ot-bt))},O.prototype.leafAppend=function(it){var ot=this.right.leafAppend(it);if(ot)return new O(this.left,ot)},O.prototype.leafPrepend=function(it){var ot=this.left.leafPrepend(it);if(ot)return new O(ot,this.right)},O.prototype.appendInner=function(it){return this.left.depth>=Math.max(this.right.depth,it.depth)+1?new O(this.left,new O(this.right,it)):new O(this,it)},O}(ue);const de=ue;class Ie{constructor(O,W){this.items=O,this.eventCount=W}popEvent(O,W){if(0==this.eventCount)return null;let ot,bt,it=this.items.length;for(;;it--)if(this.items.get(it-1).selection){--it;break}W&&(ot=this.remapping(it,this.items.length),bt=ot.maps.length);let Ct,Ut,yt=O.tr,te=[],we=[];return this.items.forEach((Wt,he)=>{if(!Wt.step)return ot||(ot=this.remapping(it,he+1),bt=ot.maps.length),bt--,void we.push(Wt);if(ot){we.push(new ve(Wt.map));let Xe,ce=Wt.step.map(ot.slice(bt));ce&&yt.maybeStep(ce).doc&&(Xe=yt.mapping.maps[yt.mapping.maps.length-1],te.push(new ve(Xe,void 0,void 0,te.length+we.length))),bt--,Xe&&ot.appendMap(Xe,bt)}else yt.maybeStep(Wt.step);return Wt.selection?(Ct=ot?Wt.selection.map(ot.slice(bt)):Wt.selection,Ut=new Ie(this.items.slice(0,it).append(we.reverse().concat(te)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:Ut,transform:yt,selection:Ct}}addTransform(O,W,it,ot){let bt=[],yt=this.eventCount,Ct=this.items,Ut=!ot&&Ct.length?Ct.get(Ct.length-1):null;for(let we=0;we<O.steps.length;we++){let ce,Wt=O.steps[we].invert(O.docs[we]),he=new ve(O.mapping.maps[we],Wt,W);(ce=Ut&&Ut.merge(he))&&(he=ce,we?bt.pop():Ct=Ct.slice(0,Ct.length-1)),bt.push(he),W&&(yt++,W=void 0),ot||(Ut=he)}let te=yt-it.depth;return te>Ge&&(Ct=function(B,O){let W;return B.forEach((it,ot)=>{if(it.selection&&0==O--)return W=ot,!1}),B.slice(W)}(Ct,te),yt-=te),new Ie(Ct.append(bt),yt)}remapping(O,W){let it=new Jt.vs;return this.items.forEach((ot,bt)=>{it.appendMap(ot.map,null!=ot.mirrorOffset&&bt-ot.mirrorOffset>=O?it.maps.length-ot.mirrorOffset:void 0)},O,W),it}addMaps(O){return 0==this.eventCount?this:new Ie(this.items.append(O.map(W=>new ve(W))),this.eventCount)}rebased(O,W){if(!this.eventCount)return this;let it=[],ot=Math.max(0,this.items.length-W),bt=O.mapping,yt=O.steps.length,Ct=this.eventCount;this.items.forEach(he=>{he.selection&&Ct--},ot);let Ut=W;this.items.forEach(he=>{let ce=bt.getMirror(--Ut);if(null==ce)return;yt=Math.min(yt,ce);let Xe=bt.maps[ce];if(he.step){let Be=O.steps[ce].invert(O.docs[ce]),fn=he.selection&&he.selection.map(bt.slice(Ut+1,ce));fn&&Ct++,it.push(new ve(Xe,Be,fn))}else it.push(new ve(Xe))},ot);let te=[];for(let he=W;he<yt;he++)te.push(new ve(bt.maps[he]));let we=this.items.slice(0,ot).append(te).append(it),Wt=new Ie(we,Ct);return Wt.emptyItemCount()>500&&(Wt=Wt.compress(this.items.length-it.length)),Wt}emptyItemCount(){let O=0;return this.items.forEach(W=>{W.step||O++}),O}compress(O=this.items.length){let W=this.remapping(0,O),it=W.maps.length,ot=[],bt=0;return this.items.forEach((yt,Ct)=>{if(Ct>=O)ot.push(yt),yt.selection&&bt++;else if(yt.step){let Ut=yt.step.map(W.slice(it)),te=Ut&&Ut.getMap();if(it--,te&&W.appendMap(te,it),Ut){let we=yt.selection&&yt.selection.map(W.slice(it));we&&bt++;let he,Wt=new ve(te.invert(),Ut,we),ce=ot.length-1;(he=ot.length&&ot[ce].merge(Wt))?ot[ce]=he:ot.push(Wt)}}else yt.map&&it--},this.items.length,0),new Ie(de.from(ot.reverse()),bt)}}Ie.empty=new Ie(de.empty,0);class ve{constructor(O,W,it,ot){this.map=O,this.step=W,this.selection=it,this.mirrorOffset=ot}merge(O){if(this.step&&O.step&&!O.selection){let W=O.step.merge(this.step);if(W)return new ve(W.getMap().invert(),W,this.selection)}}}class Me{constructor(O,W,it,ot,bt){this.done=O,this.undone=W,this.prevRanges=it,this.prevTime=ot,this.prevComposition=bt}}const Ge=20;function pe(B){let O=[];return B.forEach((W,it,ot,bt)=>O.push(ot,bt)),O}function ke(B,O){if(!B)return null;let W=[];for(let it=0;it<B.length;it+=2){let ot=O.map(B[it],1),bt=O.map(B[it+1],-1);ot<=bt&&W.push(ot,bt)}return W}function Le(B,O,W,it){let ot=Re(O),bt=me.get(O).spec.config,yt=(it?B.undone:B.done).popEvent(O,ot);if(!yt)return;let Ct=yt.selection.resolve(yt.transform.doc),Ut=(it?B.done:B.undone).addTransform(yt.transform,O.selection.getBookmark(),bt,ot),te=new Me(it?Ut:yt.remaining,it?yt.remaining:Ut,null,0,-1);W(yt.transform.setSelection(Ct).setMeta(me,{redo:it,historyState:te}).scrollIntoView())}let an=!1,qe=null;function Re(B){let O=B.plugins;if(qe!=O){an=!1,qe=O;for(let W=0;W<O.length;W++)if(O[W].spec.historyPreserveItems){an=!0;break}}return an}const me=new Dt.H$("history"),$e=new Dt.H$("closeHistory");function Ce(B={}){return new Dt.Sy({key:me,state:{init:()=>new Me(Ie.empty,Ie.empty,null,0,-1),apply:(O,W,it)=>function(B,O,W,it){let bt,ot=W.getMeta(me);if(ot)return ot.historyState;W.getMeta($e)&&(B=new Me(B.done,B.undone,null,0,-1));let yt=W.getMeta("appendedTransaction");if(0==W.steps.length)return B;if(yt&&yt.getMeta(me))return yt.getMeta(me).redo?new Me(B.done.addTransform(W,void 0,it,Re(O)),B.undone,pe(W.mapping.maps[W.steps.length-1]),B.prevTime,B.prevComposition):new Me(B.done,B.undone.addTransform(W,void 0,it,Re(O)),null,B.prevTime,B.prevComposition);if(!1===W.getMeta("addToHistory")||yt&&!1===yt.getMeta("addToHistory"))return(bt=W.getMeta("rebased"))?new Me(B.done.rebased(W,bt),B.undone.rebased(W,bt),ke(B.prevRanges,W.mapping),B.prevTime,B.prevComposition):new Me(B.done.addMaps(W.mapping.maps),B.undone.addMaps(W.mapping.maps),ke(B.prevRanges,W.mapping),B.prevTime,B.prevComposition);{let Ct=W.getMeta("composition"),Ut=0==B.prevTime||!yt&&B.prevComposition!=Ct&&(B.prevTime<(W.time||0)-it.newGroupDelay||!function(B,O){if(!O)return!1;if(!B.docChanged)return!0;let W=!1;return B.mapping.maps[0].forEach((it,ot)=>{for(let bt=0;bt<O.length;bt+=2)it<=O[bt+1]&&ot>=O[bt]&&(W=!0)}),W}(W,B.prevRanges)),te=yt?ke(B.prevRanges,W.mapping):pe(W.mapping.maps[W.steps.length-1]);return new Me(B.done.addTransform(W,Ut?O.selection.getBookmark():void 0,it,Re(O)),Ie.empty,te,W.time,null==Ct?B.prevComposition:Ct)}}(W,it,O,B)},config:B={depth:B.depth||100,newGroupDelay:B.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(O,W){let it=W.inputType,ot="historyUndo"==it?Yt:"historyRedo"==it?Y:null;return!!ot&&(W.preventDefault(),ot(O.state,O.dispatch))}}}})}const Yt=(B,O)=>{let W=me.getState(B);return!(!W||0==W.done.eventCount||(O&&Le(W,B,O,!1),0))},Y=(B,O)=>{let W=me.getState(B);return!(!W||0==W.undone.eventCount||(O&&Le(W,B,O,!0),0))},x=D.Extension.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:B,dispatch:O})=>Yt(B,O),redo:()=>({state:B,dispatch:O})=>Y(B,O)}),addProseMirrorPlugins(){return[Ce(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),J=D.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:B}){return["hr",(0,D.mergeAttributes)(this.options.HTMLAttributes,B)]},addCommands(){return{setHorizontalRule:()=>({chain:B})=>B().insertContent({type:this.name}).command(({tr:O,dispatch:W})=>{var it;if(W){const{$to:ot}=O.selection,bt=ot.end();if(ot.nodeAfter)O.setSelection(Dt.Bs.create(O.doc,ot.pos));else{const yt=null===(it=ot.parent.type.contentMatch.defaultType)||void 0===it?void 0:it.create();yt&&(O.insert(bt,yt),O.setSelection(Dt.Bs.create(O.doc,bt)))}O.scrollIntoView()}return!0}).run()}},addInputRules(){return[(0,D.nodeInputRule)({find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type})]}}),G=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,X=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,ct=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,_t=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,R=D.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:B=>"normal"!==B.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:B}){return["em",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{setItalic:()=>({commands:B})=>B.setMark(this.name),toggleItalic:()=>({commands:B})=>B.toggleMark(this.name),unsetItalic:()=>({commands:B})=>B.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,D.markInputRule)({find:G,type:this.type}),(0,D.markInputRule)({find:ct,type:this.type})]},addPasteRules(){return[(0,D.markPasteRule)({find:X,type:this.type}),(0,D.markPasteRule)({find:_t,type:this.type})]}}),a=D.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:B}){return["li",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),d=D.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:B}){return["li",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),C=D.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:B=>!!B.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:B}){return["span",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:B,commands:O})=>{const W=(0,D.getMarkAttributes)(B,this.type);return!!Object.entries(W).some(([,ot])=>!!ot)||O.unsetMark(this.name)}}}}),S=/^(\d+)\.\s$/,I=D.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:B=>B.hasAttribute("start")?parseInt(B.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:B}){const it=B,{start:O}=it,W=Ci(it,["start"]);return 1===O?["ol",(0,D.mergeAttributes)(this.options.HTMLAttributes,W),0]:["ol",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{toggleOrderedList:()=>({commands:B,chain:O})=>this.options.keepAttributes?O().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(d.name,this.editor.getAttributes(C.name)).run():B.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let B=(0,D.wrappingInputRule)({find:S,type:this.type,getAttributes:O=>({start:+O[1]}),joinPredicate:(O,W)=>W.childCount+W.attrs.start===+O[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(B=(0,D.wrappingInputRule)({find:S,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:O=>At({start:+O[1]},this.editor.getAttributes(C.name)),joinPredicate:(O,W)=>W.childCount+W.attrs.start===+O[1],editor:this.editor})),[B]}}),H=D.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:B}){return["p",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{setParagraph:()=>({commands:B})=>B.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),K=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,lt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,It=D.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:B=>!!B.includes("line-through")&&{}}],renderHTML({HTMLAttributes:B}){return["s",(0,D.mergeAttributes)(this.options.HTMLAttributes,B),0]},addCommands(){return{setStrike:()=>({commands:B})=>B.setMark(this.name),toggleStrike:()=>({commands:B})=>B.toggleMark(this.name),unsetStrike:()=>({commands:B})=>B.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,D.markInputRule)({find:K,type:this.type})]},addPasteRules(){return[(0,D.markPasteRule)({find:lt,type:this.type})]}}),Et=D.Node.create({name:"text",group:"inline"}),De=D.Extension.create({name:"starterKit",addExtensions(){const B=[],O=this.options;return!1!==(null==O?void 0:O.blockquote)&&B.push(Ht.configure(null==O?void 0:O.blockquote)),!1!==(null==O?void 0:O.bold)&&B.push(qt.configure(null==O?void 0:O.bold)),!1!==(null==O?void 0:O.bulletList)&&B.push(e.configure(null==O?void 0:O.bulletList)),!1!==(null==O?void 0:O.code)&&B.push(Nt.configure(null==O?void 0:O.code)),!1!==(null==O?void 0:O.codeBlock)&&B.push(Lt.configure(null==O?void 0:O.codeBlock)),!1!==(null==O?void 0:O.document)&&B.push(xt.configure(null==O?void 0:O.document)),!1!==(null==O?void 0:O.dropcursor)&&B.push(Qt.configure(null==O?void 0:O.dropcursor)),!1!==(null==O?void 0:O.gapcursor)&&B.push(jt.configure(null==O?void 0:O.gapcursor)),!1!==(null==O?void 0:O.hardBreak)&&B.push(Ee.configure(null==O?void 0:O.hardBreak)),!1!==(null==O?void 0:O.heading)&&B.push(ye.configure(null==O?void 0:O.heading)),!1!==(null==O?void 0:O.history)&&B.push(x.configure(Object.assign({depth:10,newGroupDelay:100},null==O?void 0:O.history))),!1!==(null==O?void 0:O.horizontalRule)&&B.push(J.configure(null==O?void 0:O.horizontalRule)),!1!==(null==O?void 0:O.italic)&&B.push(R.configure(null==O?void 0:O.italic)),!1!==(null==O?void 0:O.listItem)&&B.push(a.configure(null==O?void 0:O.listItem)),!1!==(null==O?void 0:O.orderedList)&&B.push(I.configure(null==O?void 0:O.orderedList)),!1!==(null==O?void 0:O.paragraph)&&B.push(H.configure(null==O?void 0:O.paragraph)),!1!==(null==O?void 0:O.strike)&&B.push(It.configure(null==O?void 0:O.strike)),!1!==(null==O?void 0:O.text)&&B.push(Et.configure(null==O?void 0:O.text)),B}})},8676:(be,zt,j)=>{j.r(zt),j.d(zt,{TableCellBackground:()=>gt});const gt=j(1046).Extension.create({addGlobalAttributes:()=>[{types:["tableCell","tableHeader"],attributes:{background:{default:null,renderHTML:({background:Ht})=>Ht?{style:`background: ${Ht}`}:null,parseHTML:({style:Ht})=>Ht.background,keepOnSplit:!1}}}],addCommands:()=>({setCellBackground:Ht=>({chain:at})=>at().updateAttributes("tableCell",{background:Ht}).updateAttributes("tableHeader",{background:Ht}).run(),unsetCellBackground:()=>({chain:Ht})=>Ht().updateAttributes("tableCell",{background:null}).updateAttributes("tableHeader",{background:null}).run()})})},4739:(be,zt,j)=>{j.r(zt),j.d(zt,{TuiTable:()=>We});var Xt,qt,D=j(1046),gt=j(2463),Ht=j(7439),at=j(3594),dt=j(1690),re=j(8480);if("undefined"!=typeof WeakMap){let b=new WeakMap;Xt=_=>b.get(_),qt=(_,m)=>(b.set(_,m),m)}else{const b=[],_=10;let m=0;Xt=f=>{for(let T=0;T<b.length;T+=2)if(b[T]==f)return b[T+1]},qt=(f,T)=>(m==_&&(m=0),b[m++]=f,b[m++]=T)}var Rt=class{constructor(b,_,m,f){this.width=b,this.height=_,this.map=m,this.problems=f}findCell(b){for(let _=0;_<this.map.length;_++){const m=this.map[_];if(m!=b)continue;const f=_%this.width,T=_/this.width|0;let w=f+1,N=T+1;for(let Z=1;w<this.width&&this.map[_+Z]==m;Z++)w++;for(let Z=1;N<this.height&&this.map[_+this.width*Z]==m;Z++)N++;return{left:f,top:T,right:w,bottom:N}}throw new RangeError(`No cell with offset ${b} found`)}colCount(b){for(let _=0;_<this.map.length;_++)if(this.map[_]==b)return _%this.width;throw new RangeError(`No cell with offset ${b} found`)}nextCell(b,_,m){const{left:f,right:T,top:w,bottom:N}=this.findCell(b);return"horiz"==_?(m<0?0==f:T==this.width)?null:this.map[w*this.width+(m<0?f-1:T)]:(m<0?0==w:N==this.height)?null:this.map[f+this.width*(m<0?w-1:N)]}rectBetween(b,_){const{left:m,right:f,top:T,bottom:w}=this.findCell(b),{left:N,right:Z,top:L,bottom:$}=this.findCell(_);return{left:Math.min(m,N),top:Math.min(T,L),right:Math.max(f,Z),bottom:Math.max(w,$)}}cellsInRect(b){const _=[],m={};for(let f=b.top;f<b.bottom;f++)for(let T=b.left;T<b.right;T++){const w=f*this.width+T,N=this.map[w];m[N]||(m[N]=!0,!(T==b.left&&T&&this.map[w-1]==N||f==b.top&&f&&this.map[w-this.width]==N)&&_.push(N))}return _}positionAt(b,_,m){for(let f=0,T=0;;f++){const w=T+m.child(f).nodeSize;if(f==b){let N=_+b*this.width;const Z=(b+1)*this.width;for(;N<Z&&this.map[N]<T;)N++;return N==Z?w-1:this.map[N]}T=w}}static get(b){return Xt(b)||qt(b,function(b){if("table"!=b.type.spec.tableRole)throw new RangeError("Not a table node: "+b.type.name);const _=function(b){let _=-1,m=!1;for(let f=0;f<b.childCount;f++){const T=b.child(f);let w=0;if(m)for(let N=0;N<f;N++){const Z=b.child(N);for(let L=0;L<Z.childCount;L++){const $=Z.child(L);N+$.attrs.rowspan>f&&(w+=$.attrs.colspan)}}for(let N=0;N<T.childCount;N++){const Z=T.child(N);w+=Z.attrs.colspan,Z.attrs.rowspan>1&&(m=!0)}-1==_?_=w:_!=w&&(_=Math.max(_,w))}return _}(b),m=b.childCount,f=[];let T=0,w=null;const N=[];for(let $=0,et=_*m;$<et;$++)f[$]=0;for(let $=0,et=0;$<m;$++){const rt=b.child($);et++;for(let kt=0;;kt++){for(;T<f.length&&0!=f[T];)T++;if(kt==rt.childCount)break;const Vt=rt.child(kt),{colspan:Ft,rowspan:Se,colwidth:dn}=Vt.attrs;for(let tn=0;tn<Se;tn++){if(tn+$>=m){(w||(w=[])).push({type:"overlong_rowspan",pos:et,n:Se-tn});break}const Te=T+tn*_;for(let Ae=0;Ae<Ft;Ae++){0==f[Te+Ae]?f[Te+Ae]=et:(w||(w=[])).push({type:"collision",row:$,pos:et,n:Ft-Ae});const pn=dn&&dn[Ae];if(pn){const sn=(Te+Ae)%_*2,ee=N[sn];null==ee||ee!=pn&&1==N[sn+1]?(N[sn]=pn,N[sn+1]=1):ee==pn&&N[sn+1]++}}}T+=Ft,et+=Vt.nodeSize}const ut=($+1)*_;let ft=0;for(;T<ut;)0==f[T++]&&ft++;ft&&(w||(w=[])).push({type:"missing",row:$,n:ft}),et++}const Z=new Rt(_,m,f,w);let L=!1;for(let $=0;!L&&$<N.length;$+=2)null!=N[$]&&N[$+1]<m&&(L=!0);return L&&function(b,_,m){b.problems||(b.problems=[]);const f={};for(let T=0;T<b.map.length;T++){const w=b.map[T];if(f[w])continue;f[w]=!0;const N=m.nodeAt(w);if(!N)throw new RangeError(`No cell with offset ${w} found`);let Z=null;const L=N.attrs;for(let $=0;$<L.colspan;$++){const rt=_[(T+$)%b.width*2];null!=rt&&(!L.colwidth||L.colwidth[$]!=rt)&&((Z||(Z=Ne(L)))[$]=rt)}Z&&b.problems.unshift({type:"colwidth mismatch",pos:w,colwidth:Z})}}(Z,N,b),Z}(b))}};function Ne(b){if(b.colwidth)return b.colwidth.slice();const _=[];for(let m=0;m<b.colspan;m++)_.push(0);return _}function Mt(b){let _=b.cached.tableNodeTypes;if(!_){_=b.cached.tableNodeTypes={};for(const m in b.nodes){const f=b.nodes[m],T=f.spec.tableRole;T&&(_[T]=f)}}return _}var Bt=new gt.H$("selectingCells");function Lt(b){for(let _=b.depth-1;_>0;_--)if("row"==b.node(_).type.spec.tableRole)return b.node(0).resolve(b.before(_+1));return null}function Jt(b){const _=b.selection.$head;for(let m=_.depth;m>0;m--)if("row"==_.node(m).type.spec.tableRole)return!0;return!1}function Pt(b){const _=b.selection;if("$anchorCell"in _&&_.$anchorCell)return _.$anchorCell.pos>_.$headCell.pos?_.$anchorCell:_.$headCell;if("node"in _&&_.node&&"cell"==_.node.type.spec.tableRole)return _.$anchor;const m=Lt(_.$head)||function(b){for(let _=b.nodeAfter,m=b.pos;_;_=_.firstChild,m++){const f=_.type.spec.tableRole;if("cell"==f||"header_cell"==f)return b.doc.resolve(m)}for(let _=b.nodeBefore,m=b.pos;_;_=_.lastChild,m--){const f=_.type.spec.tableRole;if("cell"==f||"header_cell"==f)return b.doc.resolve(m-_.nodeSize)}}(_.$head);if(m)return m;throw new RangeError(`No cell found around position ${_.head}`)}function Qt(b){return"row"==b.parent.type.spec.tableRole&&!!b.nodeAfter}function le(b,_){return b.depth==_.depth&&b.pos>=_.start(-1)&&b.pos<=_.end(-1)}function $t(b,_,m){const f=b.node(-1),T=Rt.get(f),w=b.start(-1),N=T.nextCell(b.pos-w,_,m);return null==N?null:b.node(0).resolve(w+N)}function ht(b,_,m=1){const f=xe(At({},b),{colspan:b.colspan-m});return f.colwidth&&(f.colwidth=f.colwidth.slice(),f.colwidth.splice(_,m),f.colwidth.some(T=>T>0)||(f.colwidth=null)),f}function z(b,_,m=1){const f=xe(At({},b),{colspan:b.colspan+m});if(f.colwidth){f.colwidth=f.colwidth.slice();for(let T=0;T<m;T++)f.colwidth.splice(_,0,0)}return f}var q=class extends gt.Y1{constructor(b,_=b){const m=b.node(-1),f=Rt.get(m),T=b.start(-1),w=f.rectBetween(b.pos-T,_.pos-T),N=b.node(0),Z=f.cellsInRect(w).filter($=>$!=_.pos-T);Z.unshift(_.pos-T);const L=Z.map($=>{const et=m.nodeAt($);if(!et)throw RangeError(`No cell with offset ${$} found`);const rt=T+$+1;return new gt.xm(N.resolve(rt),N.resolve(rt+et.content.size))});super(L[0].$from,L[0].$to,L),this.$anchorCell=b,this.$headCell=_}map(b,_){const m=b.resolve(_.map(this.$anchorCell.pos)),f=b.resolve(_.map(this.$headCell.pos));if(Qt(m)&&Qt(f)&&le(m,f)){const T=this.$anchorCell.node(-1)!=m.node(-1);return T&&this.isRowSelection()?q.rowSelection(m,f):T&&this.isColSelection()?q.colSelection(m,f):new q(m,f)}return gt.Bs.between(m,f)}content(){const b=this.$anchorCell.node(-1),_=Rt.get(b),m=this.$anchorCell.start(-1),f=_.rectBetween(this.$anchorCell.pos-m,this.$headCell.pos-m),T={},w=[];for(let Z=f.top;Z<f.bottom;Z++){const L=[];for(let $=Z*_.width+f.left,et=f.left;et<f.right;et++,$++){const rt=_.map[$];if(T[rt])continue;T[rt]=!0;const ut=_.findCell(rt);let ft=b.nodeAt(rt);if(!ft)throw RangeError(`No cell with offset ${rt} found`);const kt=f.left-ut.left,Vt=ut.right-f.right;if(kt>0||Vt>0){let Ft=ft.attrs;if(kt>0&&(Ft=ht(Ft,0,kt)),Vt>0&&(Ft=ht(Ft,Ft.colspan-Vt,Vt)),ut.left<f.left){if(ft=ft.type.createAndFill(Ft),!ft)throw RangeError(`Could not create cell with attrs ${JSON.stringify(Ft)}`)}else ft=ft.type.create(Ft,ft.content)}if(ut.top<f.top||ut.bottom>f.bottom){const Ft=xe(At({},ft.attrs),{rowspan:Math.min(ut.bottom,f.bottom)-Math.max(ut.top,f.top)});ft=ut.top<f.top?ft.type.createAndFill(Ft):ft.type.create(Ft,ft.content)}L.push(ft)}w.push(b.child(Z).copy(Ht.HY.from(L)))}const N=this.isColSelection()&&this.isRowSelection()?b:w;return new Ht.p2(Ht.HY.from(N),1,1)}replace(b,_=Ht.p2.empty){const m=b.steps.length,f=this.ranges;for(let w=0;w<f.length;w++){const{$from:N,$to:Z}=f[w],L=b.mapping.slice(m);b.replace(L.map(N.pos),L.map(Z.pos),w?Ht.p2.empty:_)}const T=gt.Y1.findFrom(b.doc.resolve(b.mapping.slice(m).map(this.to)),-1);T&&b.setSelection(T)}replaceWith(b,_){this.replace(b,new Ht.p2(Ht.HY.from(_),0,0))}forEachCell(b){const _=this.$anchorCell.node(-1),m=Rt.get(_),f=this.$anchorCell.start(-1),T=m.cellsInRect(m.rectBetween(this.$anchorCell.pos-f,this.$headCell.pos-f));for(let w=0;w<T.length;w++)b(_.nodeAt(T[w]),f+T[w])}isColSelection(){const b=this.$anchorCell.index(-1),_=this.$headCell.index(-1);return!(Math.min(b,_)>0)&&Math.max(b+this.$anchorCell.nodeAfter.attrs.rowspan,_+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(b,_=b){const m=b.node(-1),f=Rt.get(m),T=b.start(-1),w=f.findCell(b.pos-T),N=f.findCell(_.pos-T),Z=b.node(0);return w.top<=N.top?(w.top>0&&(b=Z.resolve(T+f.map[w.left])),N.bottom<f.height&&(_=Z.resolve(T+f.map[f.width*(f.height-1)+N.right-1]))):(N.top>0&&(_=Z.resolve(T+f.map[N.left])),w.bottom<f.height&&(b=Z.resolve(T+f.map[f.width*(f.height-1)+w.right-1]))),new q(b,_)}isRowSelection(){const b=this.$anchorCell.node(-1),_=Rt.get(b),m=this.$anchorCell.start(-1),f=_.colCount(this.$anchorCell.pos-m),T=_.colCount(this.$headCell.pos-m);return!(Math.min(f,T)>0)&&Math.max(f+this.$anchorCell.nodeAfter.attrs.colspan,T+this.$headCell.nodeAfter.attrs.colspan)==_.width}eq(b){return b instanceof q&&b.$anchorCell.pos==this.$anchorCell.pos&&b.$headCell.pos==this.$headCell.pos}static rowSelection(b,_=b){const m=b.node(-1),f=Rt.get(m),T=b.start(-1),w=f.findCell(b.pos-T),N=f.findCell(_.pos-T),Z=b.node(0);return w.left<=N.left?(w.left>0&&(b=Z.resolve(T+f.map[w.top*f.width])),N.right<f.width&&(_=Z.resolve(T+f.map[f.width*(N.top+1)-1]))):(N.left>0&&(_=Z.resolve(T+f.map[N.top*f.width])),w.right<f.width&&(b=Z.resolve(T+f.map[f.width*(w.top+1)-1]))),new q(b,_)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(b,_){return new q(b.resolve(_.anchor),b.resolve(_.head))}static create(b,_,m=_){return new q(b.resolve(_),b.resolve(m))}getBookmark(){return new st(this.$anchorCell.pos,this.$headCell.pos)}};q.prototype.visible=!1,gt.Y1.jsonID("cell",q);var st=class{constructor(b,_){this.anchor=b,this.head=_}map(b){return new st(b.map(this.anchor),b.map(this.head))}resolve(b){const _=b.resolve(this.anchor),m=b.resolve(this.head);return"row"==_.parent.type.spec.tableRole&&"row"==m.parent.type.spec.tableRole&&_.index()<_.parent.childCount&&m.index()<m.parent.childCount&&le(_,m)?new q(_,m):gt.Y1.near(m,1)}};function St(b){if(!(b.selection instanceof q))return null;const _=[];return b.selection.forEachCell((m,f)=>{_.push(at.p.node(f,f+m.nodeSize,{class:"selectedCell"}))}),at.EH.create(b.doc,_)}var Ee=new gt.H$("fix-tables");function ye(b,_,m,f){const T=b.childCount,w=_.childCount;t:for(let N=0,Z=0;N<w;N++){const L=_.child(N);for(let $=Z,et=Math.min(T,N+3);$<et;$++)if(b.child($)==L){Z=$+1,m+=L.nodeSize;continue t}f(L,m),Z<T&&b.child(Z).sameMarkup(L)?ye(b.child(Z),L,m+1,f):L.nodesBetween(0,L.content.size,f,m+1),m+=L.nodeSize}}function Pe(b,_){let m;const f=(T,w)=>{"table"==T.type.spec.tableRole&&(m=function(b,_,m,f){const T=Rt.get(_);if(!T.problems)return f;f||(f=b.tr);const w=[];for(let L=0;L<T.height;L++)w.push(0);for(let L=0;L<T.problems.length;L++){const $=T.problems[L];if("collision"==$.type){const et=_.nodeAt($.pos);if(!et)continue;const rt=et.attrs;for(let ut=0;ut<rt.rowspan;ut++)w[$.row+ut]+=$.n;f.setNodeMarkup(f.mapping.map(m+1+$.pos),null,ht(rt,rt.colspan-$.n,$.n))}else if("missing"==$.type)w[$.row]+=$.n;else if("overlong_rowspan"==$.type){const et=_.nodeAt($.pos);if(!et)continue;f.setNodeMarkup(f.mapping.map(m+1+$.pos),null,xe(At({},et.attrs),{rowspan:et.attrs.rowspan-$.n}))}else if("colwidth mismatch"==$.type){const et=_.nodeAt($.pos);if(!et)continue;f.setNodeMarkup(f.mapping.map(m+1+$.pos),null,xe(At({},et.attrs),{colwidth:$.colwidth}))}}let N,Z;for(let L=0;L<w.length;L++)w[L]&&(null==N&&(N=L),Z=L);for(let L=0,$=m+1;L<T.height;L++){const et=_.child(L),rt=$+et.nodeSize,ut=w[L];if(ut>0){let ft="cell";et.firstChild&&(ft=et.firstChild.type.spec.tableRole);const kt=[];for(let Ft=0;Ft<ut;Ft++){const Se=Mt(b.schema)[ft].createAndFill();Se&&kt.push(Se)}f.insert(f.mapping.map(0!=L&&N!=L-1||Z!=L?rt-1:$+1),kt)}$=rt}return f.setMeta(Ee,{fixTables:!0})}(b,T,w,m))};return _?_.doc!=b.doc&&ye(_.doc,b.doc,0,f):b.doc.descendants(f),m}function de(b,_){const m=b.createAndFill();return new re.wx(m).replace(0,m.content.size,_).doc}function rn(b,_,m,f,T,w,N,Z){if(0==N||N==_.height)return!1;let L=!1;for(let $=T;$<w;$++){const et=N*_.width+$,rt=_.map[et];if(_.map[et-_.width]==rt){L=!0;const ut=m.nodeAt(rt),{top:ft,left:kt}=_.findCell(rt);b.setNodeMarkup(b.mapping.slice(Z).map(rt+f),null,xe(At({},ut.attrs),{rowspan:N-ft})),b.insert(b.mapping.slice(Z).map(_.positionAt(N,kt,m)),ut.type.createAndFill(xe(At({},ut.attrs),{rowspan:ft+ut.attrs.rowspan-N}))),$+=ut.attrs.colspan-1}}return L}function ve(b,_,m,f,T,w,N,Z){if(0==N||N==_.width)return!1;let L=!1;for(let $=T;$<w;$++){const et=$*_.width+N,rt=_.map[et];if(_.map[et-1]==rt){L=!0;const ut=m.nodeAt(rt),ft=_.colCount(rt),kt=b.mapping.slice(Z).map(rt+f);b.setNodeMarkup(kt,null,ht(ut.attrs,N-ft,ut.attrs.colspan-(N-ft))),b.insert(kt+ut.nodeSize,ut.type.createAndFill(ht(ut.attrs,0,N-ft))),$+=ut.attrs.rowspan-1}}return L}function Me(b,_,m,f,T){let w=m?b.doc.nodeAt(m-1):b.doc;if(!w)throw new Error("No table found");let N=Rt.get(w);const{top:Z,left:L}=f,$=L+T.width,et=Z+T.height,rt=b.tr;let ut=0;function ft(){if(w=m?rt.doc.nodeAt(m-1):rt.doc,!w)throw new Error("No table found");N=Rt.get(w),ut=rt.mapping.maps.length}(function(b,_,m,f,T,w,N){const L=Mt(b.doc.type.schema);let $,et;if(T>_.width)for(let rt=0,ut=0;rt<_.height;rt++){const ft=m.child(rt);ut+=ft.nodeSize;const kt=[];let Vt;Vt=null==ft.lastChild||ft.lastChild.type==L.cell?$||($=L.cell.createAndFill()):et||(et=L.header_cell.createAndFill());for(let Ft=_.width;Ft<T;Ft++)kt.push(Vt);b.insert(b.mapping.slice(N).map(ut-1+f),kt)}if(w>_.height){const rt=[];for(let kt=0,Vt=(_.height-1)*_.width;kt<Math.max(_.width,T);kt++){const Ft=!(kt>=_.width)&&m.nodeAt(_.map[Vt+kt]).type==L.header_cell;rt.push(Ft?et||(et=L.header_cell.createAndFill()):$||($=L.cell.createAndFill()))}const ut=L.row.create(null,Ht.HY.from(rt)),ft=[];for(let kt=_.height;kt<w;kt++)ft.push(ut);b.insert(b.mapping.slice(N).map(f+m.nodeSize-2),ft)}return!(!$&&!et)})(rt,N,w,m,$,et,ut)&&ft(),rn(rt,N,w,m,L,$,Z,ut)&&ft(),rn(rt,N,w,m,L,$,et,ut)&&ft(),ve(rt,N,w,m,Z,et,L,ut)&&ft(),ve(rt,N,w,m,Z,et,$,ut)&&ft();for(let kt=Z;kt<et;kt++){const Vt=N.positionAt(kt,L,w),Ft=N.positionAt(kt,$,w);rt.replace(rt.mapping.slice(ut).map(Vt+m),rt.mapping.slice(ut).map(Ft+m),new Ht.p2(T.rows[kt-Z],0,0))}ft(),rt.setSelection(new q(rt.doc.resolve(m+N.positionAt(Z,L,w)),rt.doc.resolve(m+N.positionAt(et-1,$-1,w)))),_(rt)}var Ge=(0,dt.$)({ArrowLeft:Ve("horiz",-1),ArrowRight:Ve("horiz",1),ArrowUp:Ve("vert",-1),ArrowDown:Ve("vert",1),"Shift-ArrowLeft":pe("horiz",-1),"Shift-ArrowRight":pe("horiz",1),"Shift-ArrowUp":pe("vert",-1),"Shift-ArrowDown":pe("vert",1),Backspace:ke,"Mod-Backspace":ke,Delete:ke,"Mod-Delete":ke});function _e(b,_,m){return!m.eq(b.selection)&&(_&&_(b.tr.setSelection(m).scrollIntoView()),!0)}function Ve(b,_){return(m,f,T)=>{if(!T)return!1;const w=m.selection;if(w instanceof q)return _e(m,f,gt.Y1.near(w.$headCell,_));if("horiz"!=b&&!w.empty)return!1;const N=Re(T,b,_);if(null==N)return!1;if("horiz"==b)return _e(m,f,gt.Y1.near(m.doc.resolve(w.head+_),_));{const Z=m.doc.resolve(N),L=$t(Z,b,_);let $;return $=L?gt.Y1.near(L,1):_<0?gt.Y1.near(m.doc.resolve(Z.before(-1)),-1):gt.Y1.near(m.doc.resolve(Z.after(-1)),1),_e(m,f,$)}}}function pe(b,_){return(m,f,T)=>{if(!T)return!1;const w=m.selection;let N;if(w instanceof q)N=w;else{const L=Re(T,b,_);if(null==L)return!1;N=new q(m.doc.resolve(L))}const Z=$t(N.$headCell,b,_);return!!Z&&_e(m,f,new q(N.$anchorCell,Z))}}function ke(b,_){const m=b.selection;if(!(m instanceof q))return!1;if(_){const f=b.tr,T=Mt(b.schema).cell.createAndFill().content;m.forEachCell((w,N)=>{w.content.eq(T)||f.replace(f.mapping.map(N+1),f.mapping.map(N+w.nodeSize-1),new Ht.p2(T,0,0))}),f.docChanged&&_(f)}return!0}function Le(b,_){const f=Lt(b.state.doc.resolve(_));return!!f&&(b.dispatch(b.state.tr.setSelection(new q(f))),!0)}function an(b,_,m){if(!Jt(b.state))return!1;let f=function(b){if(!b.size)return null;let{content:_,openStart:m,openEnd:f}=b;for(;1==_.childCount&&(m>0&&f>0||"table"==_.child(0).type.spec.tableRole);)m--,f--,_=_.child(0).content;const T=_.child(0),w=T.type.spec.tableRole,N=T.type.schema,Z=[];if("row"==w)for(let L=0;L<_.childCount;L++){let $=_.child(L).content;const et=L?0:Math.max(0,m-1),rt=L<_.childCount-1?0:Math.max(0,f-1);(et||rt)&&($=de(Mt(N).row,new Ht.p2($,et,rt)).content),Z.push($)}else{if("cell"!=w&&"header_cell"!=w)return null;Z.push(m||f?de(Mt(N).row,new Ht.p2(_,m,f)).content:_)}return function(b,_){const m=[];for(let T=0;T<_.length;T++){const w=_[T];for(let N=w.childCount-1;N>=0;N--){const{rowspan:Z,colspan:L}=w.child(N).attrs;for(let $=T;$<T+Z;$++)m[$]=(m[$]||0)+L}}let f=0;for(let T=0;T<m.length;T++)f=Math.max(f,m[T]);for(let T=0;T<m.length;T++)if(T>=_.length&&_.push(Ht.HY.empty),m[T]<f){const w=Mt(b).cell.createAndFill(),N=[];for(let Z=m[T];Z<f;Z++)N.push(w);_[T]=_[T].append(Ht.HY.from(N))}return{height:_.length,width:f,rows:_}}(N,Z)}(m);const T=b.state.selection;if(T instanceof q){f||(f={width:1,height:1,rows:[Ht.HY.from(de(Mt(b.state.schema).cell,m))]});const w=T.$anchorCell.node(-1),N=T.$anchorCell.start(-1),Z=Rt.get(w).rectBetween(T.$anchorCell.pos-N,T.$headCell.pos-N);return f=function({width:b,height:_,rows:m},f,T){if(b!=f){const w=[],N=[];for(let Z=0;Z<m.length;Z++){const L=m[Z],$=[];for(let et=w[Z]||0,rt=0;et<f;rt++){let ut=L.child(rt%L.childCount);et+ut.attrs.colspan>f&&(ut=ut.type.createChecked(ht(ut.attrs,ut.attrs.colspan,et+ut.attrs.colspan-f),ut.content)),$.push(ut),et+=ut.attrs.colspan;for(let ft=1;ft<ut.attrs.rowspan;ft++)w[Z+ft]=(w[Z+ft]||0)+ut.attrs.colspan}N.push(Ht.HY.from($))}m=N,b=f}if(_!=T){const w=[];for(let N=0,Z=0;N<T;N++,Z++){const L=[],$=m[Z%_];for(let et=0;et<$.childCount;et++){let rt=$.child(et);N+rt.attrs.rowspan>T&&(rt=rt.type.create(xe(At({},rt.attrs),{rowspan:Math.max(1,T-rt.attrs.rowspan)}),rt.content)),L.push(rt)}w.push(Ht.HY.from(L))}m=w,_=T}return{width:b,height:_,rows:m}}(f,Z.right-Z.left,Z.bottom-Z.top),Me(b.state,b.dispatch,N,Z,f),!0}if(f){const w=Pt(b.state),N=w.start(-1);return Me(b.state,b.dispatch,N,Rt.get(w.node(-1)).findCell(w.pos-N),f),!0}return!1}function qe(b,_){var m;if(_.ctrlKey||_.metaKey)return;const f=Ye(b,_.target);let T;if(_.shiftKey&&b.state.selection instanceof q)w(b.state.selection.$anchorCell,_),_.preventDefault();else if(_.shiftKey&&f&&null!=(T=Lt(b.state.selection.$anchor))&&(null==(m=me(b,_))?void 0:m.pos)!=T.pos)w(T,_),_.preventDefault();else if(!f)return;function w(L,$){let et=me(b,$);const rt=null==Bt.getState(b.state);if(!et||!le(L,et)){if(!rt)return;et=L}const ut=new q(L,et);if(rt||!b.state.selection.eq(ut)){const ft=b.state.tr.setSelection(ut);rt&&ft.setMeta(Bt,L.pos),b.dispatch(ft)}}function N(){b.root.removeEventListener("mouseup",N),b.root.removeEventListener("dragstart",N),b.root.removeEventListener("mousemove",Z),null!=Bt.getState(b.state)&&b.dispatch(b.state.tr.setMeta(Bt,-1))}function Z(L){const $=L,et=Bt.getState(b.state);let rt;if(null!=et)rt=b.state.doc.resolve(et);else if(Ye(b,$.target)!=f&&(rt=me(b,_),!rt))return N();rt&&w(rt,$)}b.root.addEventListener("mouseup",N),b.root.addEventListener("dragstart",N),b.root.addEventListener("mousemove",Z)}function Re(b,_,m){if(!(b.state.selection instanceof gt.Bs))return null;const{$head:f}=b.state.selection;for(let T=f.depth-1;T>=0;T--){const w=f.node(T);if((m<0?f.index(T):f.indexAfter(T))!=(m<0?0:w.childCount))return null;if("cell"==w.type.spec.tableRole||"header_cell"==w.type.spec.tableRole){const Z=f.before(T);return b.endOfTextblock("vert"==_?m>0?"down":"up":m>0?"right":"left")?Z:null}}return null}function Ye(b,_){for(;_&&_!=b.dom;_=_.parentNode)if("TD"==_.nodeName||"TH"==_.nodeName)return _;return null}function me(b,_){const m=b.posAtCoords({left:_.clientX,top:_.clientY});return m&&m?Lt(b.state.doc.resolve(m.pos)):null}var $e=class{constructor(b,_){this.node=b,this.cellMinWidth=_,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ce(b,this.colgroup,this.table,_),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(b){return b.type==this.node.type&&(this.node=b,Ce(b,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(b){return"attributes"==b.type&&(b.target==this.table||this.colgroup.contains(b.target))}};function Ce(b,_,m,f,T,w){var N;let Z=0,L=!0,$=_.firstChild;const et=b.firstChild;if(et){for(let rt=0,ut=0;rt<et.childCount;rt++){const{colspan:ft,colwidth:kt}=et.child(rt).attrs;for(let Vt=0;Vt<ft;Vt++,ut++){const Ft=T==ut?w:kt&&kt[Vt],Se=Ft?Ft+"px":"";Z+=Ft||f,Ft||(L=!1),$?($.style.width!=Se&&($.style.width=Se),$=$.nextSibling):_.appendChild(document.createElement("col")).style.width=Se}}for(;$;){const rt=$.nextSibling;null==(N=$.parentNode)||N.removeChild($),$=rt}L?(m.style.width=Z+"px",m.style.minWidth=""):(m.style.width="",m.style.minWidth=Z+"px")}}var Yt=new gt.H$("tableColumnResizing");function Y({handleWidth:b=5,cellMinWidth:_=25,View:m=$e,lastColumnResizable:f=!0}={}){const T=new gt.Sy({key:Yt,state:{init:(w,N)=>(T.spec.props.nodeViews[Mt(N.schema).table.name]=(Z,L)=>new m(Z,_,L),new k(-1,!1)),apply:(w,N)=>N.apply(w)},props:{attributes:w=>{const N=Yt.getState(w);return N&&N.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(w,N)=>{!function(b,_,m,f,T){const w=Yt.getState(b.state);if(w&&!w.dragging){const N=function(b){for(;b&&"TD"!=b.nodeName&&"TH"!=b.nodeName;)b=b.classList&&b.classList.contains("ProseMirror")?null:b.parentNode;return b}(_.target);let Z=-1;if(N){const{left:L,right:$}=N.getBoundingClientRect();_.clientX-L<=m?Z=ct(b,_,"left",m):$-_.clientX<=m&&(Z=ct(b,_,"right",m))}if(Z!=w.activeHandle){if(!T&&-1!==Z){const L=b.state.doc.resolve(Z),$=L.node(-1),et=Rt.get($),rt=L.start(-1);if(et.colCount(L.pos-rt)+L.nodeAfter.attrs.colspan-1==et.width-1)return}R(b,Z)}}}(w,N,b,0,f)},mouseleave:w=>{!function(b){const _=Yt.getState(b.state);_&&_.activeHandle>-1&&!_.dragging&&R(b,-1)}(w)},mousedown:(w,N)=>{!function(b,_,m){const f=Yt.getState(b.state);if(!f||-1==f.activeHandle||f.dragging)return!1;const T=b.state.doc.nodeAt(f.activeHandle),w=function(b,_,{colspan:m,colwidth:f}){const T=f&&f[f.length-1];if(T)return T;const w=b.domAtPos(_);let Z=w.node.childNodes[w.offset].offsetWidth,L=m;if(f)for(let $=0;$<m;$++)f[$]&&(Z-=f[$],L--);return Z/L}(b,f.activeHandle,T.attrs);function N(L){window.removeEventListener("mouseup",N),window.removeEventListener("mousemove",Z);const $=Yt.getState(b.state);(null==$?void 0:$.dragging)&&(function(b,_,m){const f=b.state.doc.resolve(_),T=f.node(-1),w=Rt.get(T),N=f.start(-1),Z=w.colCount(f.pos-N)+f.nodeAfter.attrs.colspan-1,L=b.state.tr;for(let $=0;$<w.height;$++){const et=$*w.width+Z;if($&&w.map[et]==w.map[et-w.width])continue;const rt=w.map[et],ut=T.nodeAt(rt).attrs,ft=1==ut.colspan?0:Z-w.colCount(rt);if(ut.colwidth&&ut.colwidth[ft]==m)continue;const kt=ut.colwidth?ut.colwidth.slice():C(ut.colspan);kt[ft]=m,L.setNodeMarkup(N+rt,null,xe(At({},ut),{colwidth:kt}))}L.docChanged&&b.dispatch(L)}(b,$.activeHandle,_t($.dragging,L,m)),b.dispatch(b.state.tr.setMeta(Yt,{setDragging:null})))}function Z(L){if(!L.which)return N(L);const $=Yt.getState(b.state);if($&&$.dragging){const et=_t($.dragging,L,m);!function(b,_,m,f){const T=b.state.doc.resolve(_),w=T.node(-1),N=T.start(-1),Z=Rt.get(w).colCount(T.pos-N)+T.nodeAfter.attrs.colspan-1;let L=b.domAtPos(T.start(-1)).node;for(;L&&"TABLE"!=L.nodeName;)L=L.parentNode;!L||Ce(w,L.firstChild,L,f,Z,m)}(b,$.activeHandle,et,m)}}b.dispatch(b.state.tr.setMeta(Yt,{setDragging:{startX:_.clientX,startWidth:w}})),window.addEventListener("mouseup",N),window.addEventListener("mousemove",Z),_.preventDefault()}(w,N,_)}},decorations:w=>{const N=Yt.getState(w);if(N&&N.activeHandle>-1)return function(b,_){const m=[],f=b.doc.resolve(_),T=f.node(-1);if(!T)return at.EH.empty;const w=Rt.get(T),N=f.start(-1),Z=w.colCount(f.pos-N)+f.nodeAfter.attrs.colspan;for(let L=0;L<w.height;L++){const $=Z+L*w.width-1;if(!(Z!=w.width&&w.map[$]==w.map[$+1]||0!=L&&w.map[$]==w.map[$-w.width])){const et=w.map[$],rt=N+et+T.nodeAt(et).nodeSize-1,ut=document.createElement("div");ut.className="column-resize-handle",m.push(at.p.widget(rt,ut))}}return at.EH.create(b.doc,m)}(w,N.activeHandle)},nodeViews:{}}});return T}var k=class{constructor(b,_){this.activeHandle=b,this.dragging=_}apply(b){const _=this,m=b.getMeta(Yt);if(m&&null!=m.setHandle)return new k(m.setHandle,!1);if(m&&void 0!==m.setDragging)return new k(_.activeHandle,m.setDragging);if(_.activeHandle>-1&&b.docChanged){let f=b.mapping.map(_.activeHandle,-1);return Qt(b.doc.resolve(f))||(f=-1),new k(f,_.dragging)}return _}};function ct(b,_,m,f){const w=b.posAtCoords({left:_.clientX+("right"==m?-f:f),top:_.clientY});if(!w)return-1;const{pos:N}=w,Z=Lt(b.state.doc.resolve(N));if(!Z)return-1;if("right"==m)return Z.pos;const L=Rt.get(Z.node(-1)),$=Z.start(-1),et=L.map.indexOf(Z.pos-$);return et%L.width==0?-1:$+L.map[et-1]}function _t(b,_,m){return Math.max(m,b.startWidth+(_.clientX-b.startX))}function R(b,_){b.dispatch(b.state.tr.setMeta(Yt,{setHandle:_}))}function C(b){return Array(b).fill(0)}function I(b){const _=b.selection,m=Pt(b),f=m.node(-1),T=m.start(-1),w=Rt.get(f),N=_ instanceof q?w.rectBetween(_.$anchorCell.pos-T,_.$headCell.pos-T):w.findCell(m.pos-T);return xe(At({},N),{tableStart:T,map:w,table:f})}function H(b,{map:_,tableStart:m,table:f},T){let w=T>0?-1:0;(function(b,_,m){const f=Mt(_.type.schema).header_cell;for(let T=0;T<b.height;T++)if(_.nodeAt(b.map[m+T*b.width]).type!=f)return!1;return!0})(_,f,T+w)&&(w=0==T||T==_.width?null:0);for(let N=0;N<_.height;N++){const Z=N*_.width+T;if(T>0&&T<_.width&&_.map[Z-1]==_.map[Z]){const L=_.map[Z],$=f.nodeAt(L);b.setNodeMarkup(b.mapping.map(m+L),null,z($.attrs,T-_.colCount(L))),N+=$.attrs.rowspan-1}else{const L=null==w?Mt(f.type.schema).cell:f.nodeAt(_.map[Z+w]).type,$=_.positionAt(N,T,f);b.insert(b.mapping.map(m+$),L.createAndFill())}}return b}function It(b,{map:_,table:m,tableStart:f},T){const w=b.mapping.maps.length;for(let N=0;N<_.height;){const Z=N*_.width+T,L=_.map[Z],$=m.nodeAt(L),et=$.attrs;if(T>0&&_.map[Z-1]==L||T<_.width-1&&_.map[Z+1]==L)b.setNodeMarkup(b.mapping.slice(w).map(f+L),null,ht(et,T-_.colCount(L)));else{const rt=b.mapping.slice(w).map(f+L);b.delete(rt,rt+$.nodeSize)}N+=et.rowspan}}function B(b,{map:_,tableStart:m,table:f},T){var w;let N=m;for(let $=0;$<T;$++)N+=f.child($).nodeSize;const Z=[];let L=T>0?-1:0;(function(b,_,m){var f;const T=Mt(_.type.schema).header_cell;for(let w=0;w<b.width;w++)if((null==(f=_.nodeAt(b.map[w+m*b.width]))?void 0:f.type)!=T)return!1;return!0})(_,f,T+L)&&(L=0==T||T==_.height?null:0);for(let $=0,et=_.width*T;$<_.width;$++,et++)if(T>0&&T<_.height&&_.map[et]==_.map[et-_.width]){const rt=_.map[et],ut=f.nodeAt(rt).attrs;b.setNodeMarkup(m+rt,null,xe(At({},ut),{rowspan:ut.rowspan+1})),$+=ut.colspan-1}else{const rt=null==L?Mt(f.type.schema).cell:null==(w=f.nodeAt(_.map[et+L*_.width]))?void 0:w.type,ut=null==rt?void 0:rt.createAndFill();ut&&Z.push(ut)}return b.insert(N,Mt(f.type.schema).row.create(null,Z)),b}function it(b,{map:_,table:m,tableStart:f},T){let w=0;for(let L=0;L<T;L++)w+=m.child(L).nodeSize;const N=w+m.child(T).nodeSize,Z=b.mapping.maps.length;b.delete(w+f,N+f);for(let L=0,$=T*_.width;L<_.width;L++,$++){const et=_.map[$];if(T>0&&et==_.map[$-_.width]){const rt=m.nodeAt(et).attrs;b.setNodeMarkup(b.mapping.slice(Z).map(et+f),null,xe(At({},rt),{rowspan:rt.rowspan-1})),L+=rt.colspan-1}else if(T<_.width&&et==_.map[$+_.width]){const rt=m.nodeAt(et),ut=rt.attrs,ft=rt.type.create(xe(At({},ut),{rowspan:rt.attrs.rowspan-1}),rt.content),kt=_.positionAt(T+1,L,m);b.insert(b.mapping.slice(Z).map(f+kt),ft),L+=ut.colspan-1}}}function bt(b){const _=b.content;return 1==_.childCount&&_.child(0).isTextblock&&0==_.child(0).childCount}function Ct(b,_){const m=b.selection;if(!(m instanceof q)||m.$anchorCell.pos==m.$headCell.pos)return!1;const f=I(b),{map:T}=f;if(function({width:b,height:_,map:m},f){let T=f.top*b+f.left,w=T,N=(f.bottom-1)*b+f.left,Z=T+(f.right-f.left-1);for(let L=f.top;L<f.bottom;L++){if(f.left>0&&m[w]==m[w-1]||f.right<b&&m[Z]==m[Z+1])return!0;w+=b,Z+=b}for(let L=f.left;L<f.right;L++){if(f.top>0&&m[T]==m[T-b]||f.bottom<_&&m[N]==m[N+b])return!0;T++,N++}return!1}(T,f))return!1;if(_){const w=b.tr,N={};let L,$,Z=Ht.HY.empty;for(let et=f.top;et<f.bottom;et++)for(let rt=f.left;rt<f.right;rt++){const ut=T.map[et*T.width+rt],ft=f.table.nodeAt(ut);if(!N[ut]&&ft)if(N[ut]=!0,null==L)L=ut,$=ft;else{bt(ft)||(Z=Z.append(ft.content));const kt=w.mapping.map(ut+f.tableStart);w.delete(kt,kt+ft.nodeSize)}}if(null==L||null==$)return!0;if(w.setNodeMarkup(L+f.tableStart,null,xe(At({},z($.attrs,$.attrs.colspan,f.right-f.left-$.attrs.colspan)),{rowspan:f.bottom-f.top})),Z.size){const et=L+1+$.content.size,rt=bt($)?L+1:et;w.replaceWith(rt+f.tableStart,et+f.tableStart,Z)}w.setSelection(new q(w.doc.resolve(L+f.tableStart))),_(w)}return!0}function Ut(b,_){const m=Mt(b.schema);return function(b){return(_,m)=>{var f;const T=_.selection;let w,N;if(T instanceof q){if(T.$anchorCell.pos!=T.$headCell.pos)return!1;w=T.$anchorCell.nodeAfter,N=T.$anchorCell.pos}else{if(w=function(b){for(let _=b.depth;_>0;_--){const m=b.node(_).type.spec.tableRole;if("cell"===m||"header_cell"===m)return b.node(_)}return null}(T.$from),!w)return!1;N=null==(f=Lt(T.$from))?void 0:f.pos}if(null==w||null==N||1==w.attrs.colspan&&1==w.attrs.rowspan)return!1;if(m){let Z=w.attrs;const L=[],$=Z.colwidth;Z.rowspan>1&&(Z=xe(At({},Z),{rowspan:1})),Z.colspan>1&&(Z=xe(At({},Z),{colspan:1}));const et=I(_),rt=_.tr;for(let ft=0;ft<et.right-et.left;ft++)L.push($?xe(At({},Z),{colwidth:$&&$[ft]?[$[ft]]:null}):Z);let ut;for(let ft=et.top;ft<et.bottom;ft++){let kt=et.map.positionAt(ft,et.left,et.table);ft==et.top&&(kt+=w.nodeSize);for(let Vt=et.left,Ft=0;Vt<et.right;Vt++,Ft++)Vt==et.left&&ft==et.top||rt.insert(ut=rt.mapping.map(kt+et.tableStart,1),b({node:w,row:ft,col:Vt}).createAndFill(L[Ft]))}rt.setNodeMarkup(N,b({node:w,row:et.top,col:et.left}),L[0]),T instanceof q&&rt.setSelection(new q(rt.doc.resolve(T.$anchorCell.pos),ut?rt.doc.resolve(ut):void 0)),m(rt)}return!0}}(({node:f})=>m[f.type.spec.tableRole])(b,_)}function he(b,_,m){const f=_.map.cellsInRect({left:0,top:0,right:"row"==b?_.map.width:1,bottom:"column"==b?_.map.height:1});for(let T=0;T<f.length;T++){const w=_.table.nodeAt(f[T]);if(w&&w.type!==m.header_cell)return!1}return!0}function ce(b,_){return(_=_||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(b){return function(_,m){if(!Jt(_))return!1;if(m){const f=Mt(_.schema),T=I(_),w=_.tr,N=T.map.cellsInRect("column"==b?{left:T.left,top:0,right:T.right,bottom:T.map.height}:"row"==b?{left:0,top:T.top,right:T.map.width,bottom:T.bottom}:T),Z=N.map(L=>T.table.nodeAt(L));for(let L=0;L<N.length;L++)Z[L].type==f.header_cell&&w.setNodeMarkup(T.tableStart+N[L],f.cell,Z[L].attrs);if(0==w.steps.length)for(let L=0;L<N.length;L++)w.setNodeMarkup(T.tableStart+N[L],f.header_cell,Z[L].attrs);m(w)}return!0}}(b):function(m,f){if(!Jt(m))return!1;if(f){const T=Mt(m.schema),w=I(m),N=m.tr,Z=he("row",w,T),L=he("column",w,T),et=("column"===b?Z:"row"===b&&L)?1:0,ut="column"==b?L?T.cell:T.header_cell:"row"==b?Z?T.cell:T.header_cell:T.cell;w.map.cellsInRect("column"==b?{left:0,top:et,right:1,bottom:w.map.height}:"row"==b?{left:et,top:0,right:w.map.width,bottom:1}:w).forEach(ft=>{const kt=ft+w.tableStart,Vt=N.doc.nodeAt(kt);Vt&&N.setNodeMarkup(kt,ut,Vt.attrs)}),f(N)}return!0}}ce("row",{useDeprecatedLogic:!0}),ce("column",{useDeprecatedLogic:!0});var fn=ce("cell",{useDeprecatedLogic:!0});function On(b){return function(_,m){if(!Jt(_))return!1;const f=function(b,_){if(_<0){const m=b.nodeBefore;if(m)return b.pos-m.nodeSize;for(let f=b.index(-1)-1,T=b.before();f>=0;f--){const w=b.node(-1).child(f),N=w.lastChild;if(N)return T-1-N.nodeSize;T-=w.nodeSize}}else{if(b.index()<b.parent.childCount-1)return b.pos+b.nodeAfter.nodeSize;const m=b.node(-1);for(let f=b.indexAfter(-1),T=b.after();f<m.childCount;f++){const w=m.child(f);if(w.childCount)return T+1;T+=w.nodeSize}}return null}(Pt(_),b);if(null==f)return!1;if(m){const T=_.doc.resolve(f);m(_.tr.setSelection(gt.Bs.between(T,function(b){return b.node(0).resolve(b.pos+b.nodeAfter.nodeSize)}(T))).scrollIntoView())}return!0}}function eo({allowTableNodeSelection:b=!1}={}){return new gt.Sy({key:Bt,state:{init:()=>null,apply(_,m){const f=_.getMeta(Bt);if(null!=f)return-1==f?null:f;if(null==m||!_.docChanged)return m;const{deleted:T,pos:w}=_.mapping.mapResult(m);return T?null:w}},props:{decorations:St,handleDOMEvents:{mousedown:qe},createSelectionBetween:_=>null!=Bt.getState(_.state)?_.state.selection:null,handleTripleClick:Le,handleKeyDown:Ge,handlePaste:an},appendTransaction:(_,m,f)=>function(b,_,m){const f=(_||b).selection,T=(_||b).doc;let w,N;if(f instanceof gt.qv&&(N=f.node.type.spec.tableRole)){if("cell"==N||"header_cell"==N)w=q.create(T,f.from);else if("row"==N){const Z=T.resolve(f.from+1);w=q.rowSelection(Z,Z)}else if(!m){const Z=Rt.get(f.node),L=f.from+1;w=q.create(T,L+1,L+Z.map[Z.width*Z.height-1])}}else f instanceof gt.Bs&&function({$from:b,$to:_}){if(b.pos==_.pos||b.pos<b.pos-6)return!1;let m=b.pos,f=_.pos,T=b.depth;for(;T>=0&&!(b.after(T+1)<b.end(T));T--,m++);for(let w=_.depth;w>=0&&!(_.before(w+1)>_.start(w));w--,f--);return m==f&&/row|table/.test(b.node(T).type.spec.tableRole)}(f)?w=gt.Bs.create(T,f.from):f instanceof gt.Bs&&function({$from:b,$to:_}){let m,f;for(let T=b.depth;T>0;T--){const w=b.node(T);if("cell"===w.type.spec.tableRole||"header_cell"===w.type.spec.tableRole){m=w;break}}for(let T=_.depth;T>0;T--){const w=_.node(T);if("cell"===w.type.spec.tableRole||"header_cell"===w.type.spec.tableRole){f=w;break}}return m!==f&&0===_.parentOffset}(f)&&(w=gt.Bs.create(T,f.$from.start(),f.$from.end()));return w&&(_||(_=b.tr)).setSelection(w),_}(f,Pe(f,m),b)})}function Ln(b,_,m,f,T,w){let N=0,Z=!0,L=_.firstChild;const $=b.firstChild;for(let et=0,rt=0;et<$.childCount;et+=1){const{colspan:ut,colwidth:ft}=$.child(et).attrs;for(let kt=0;kt<ut;kt+=1,rt+=1){const Vt=T===rt?w:ft&&ft[kt],Ft=Vt?`${Vt}px`:"";N+=Vt||f,Vt||(Z=!1),L?(L.style.width!==Ft&&(L.style.width=Ft),L=L.nextSibling):_.appendChild(document.createElement("col")).style.width=Ft}}for(;L;){const et=L.nextSibling;L.parentNode.removeChild(L),L=et}Z?(m.style.width=`${N}px`,m.style.minWidth=""):(m.style.width="",m.style.minWidth=`${N}px`)}class Jn{constructor(_,m){this.node=_,this.cellMinWidth=m,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ln(_,this.colgroup,this.table,m),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(_){return _.type===this.node.type&&(this.node=_,Ln(_,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(_){return"attributes"===_.type&&(_.target===this.table||this.colgroup.contains(_.target))}}function En(b,_){return _?b.createChecked(null,_):b.createAndFill()}const kn=({editor:b})=>{const{selection:_}=b.state;if(!function(b){return b instanceof q}(_))return!1;let m=0;const f=(0,D.findParentNodeClosestToPos)(_.ranges[0].$from,w=>"table"===w.type.name);return null==f||f.node.descendants(w=>{if("table"===w.type.name)return!1;["tableCell","tableHeader"].includes(w.type.name)&&(m+=1)}),m===_.ranges.length&&(b.commands.deleteTable(),!0)},We=D.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Jn,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({HTMLAttributes:b}){return["table",(0,D.mergeAttributes)(this.options.HTMLAttributes,b),["tbody",0]]},addCommands:()=>({insertTable:({rows:b=3,cols:_=3,withHeaderRow:m=!0}={})=>({tr:f,dispatch:T,editor:w})=>{const N=function(b,_,m,f,T){const w=function(b){if(b.cached.tableNodeTypes)return b.cached.tableNodeTypes;const _={};return Object.keys(b.nodes).forEach(m=>{const f=b.nodes[m];f.spec.tableRole&&(_[f.spec.tableRole]=f)}),b.cached.tableNodeTypes=_,_}(b),N=[],Z=[];for(let $=0;$<m;$+=1){const et=En(w.cell,T);if(et&&Z.push(et),f){const rt=En(w.header_cell,T);rt&&N.push(rt)}}const L=[];for(let $=0;$<_;$+=1)L.push(w.row.createChecked(null,f&&0===$?N:Z));return w.table.createChecked(null,L)}(w.schema,b,_,m);if(T){const Z=f.selection.anchor+1;f.replaceSelectionWith(N).scrollIntoView().setSelection(gt.Bs.near(f.doc.resolve(Z)))}return!0},addColumnBefore:()=>({state:b,dispatch:_})=>function(b,_){if(!Jt(b))return!1;if(_){const m=I(b);_(H(b.tr,m,m.left))}return!0}(b,_),addColumnAfter:()=>({state:b,dispatch:_})=>function(b,_){if(!Jt(b))return!1;if(_){const m=I(b);_(H(b.tr,m,m.right))}return!0}(b,_),deleteColumn:()=>({state:b,dispatch:_})=>function(b,_){if(!Jt(b))return!1;if(_){const m=I(b),f=b.tr;if(0==m.left&&m.right==m.map.width)return!1;for(let T=m.right-1;It(f,m,T),T!=m.left;T--){const w=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!w)throw RangeError("No table found");m.table=w,m.map=Rt.get(w)}_(f)}return!0}(b,_),addRowBefore:()=>({state:b,dispatch:_})=>function(b,_){if(!Jt(b))return!1;if(_){const m=I(b);_(B(b.tr,m,m.top))}return!0}(b,_),addRowAfter:()=>({state:b,dispatch:_})=>function(b,_){if(!Jt(b))return!1;if(_){const m=I(b);_(B(b.tr,m,m.bottom))}return!0}(b,_),deleteRow:()=>({state:b,dispatch:_})=>function(b,_){if(!Jt(b))return!1;if(_){const m=I(b),f=b.tr;if(0==m.top&&m.bottom==m.map.height)return!1;for(let T=m.bottom-1;it(f,m,T),T!=m.top;T--){const w=m.tableStart?f.doc.nodeAt(m.tableStart-1):f.doc;if(!w)throw RangeError("No table found");m.table=w,m.map=Rt.get(m.table)}_(f)}return!0}(b,_),deleteTable:()=>({state:b,dispatch:_})=>function(b,_){const m=b.selection.$anchor;for(let f=m.depth;f>0;f--)if("table"==m.node(f).type.spec.tableRole)return _&&_(b.tr.delete(m.before(f),m.after(f)).scrollIntoView()),!0;return!1}(b,_),mergeCells:()=>({state:b,dispatch:_})=>Ct(b,_),splitCell:()=>({state:b,dispatch:_})=>Ut(b,_),toggleHeaderColumn:()=>({state:b,dispatch:_})=>ce("column")(b,_),toggleHeaderRow:()=>({state:b,dispatch:_})=>ce("row")(b,_),toggleHeaderCell:()=>({state:b,dispatch:_})=>fn(b,_),mergeOrSplit:()=>({state:b,dispatch:_})=>!!Ct(b,_)||Ut(b,_),setCellAttribute:(b,_)=>({state:m,dispatch:f})=>function(b,_){return function(m,f){if(!Jt(m))return!1;const T=Pt(m);if(T.nodeAfter.attrs[b]===_)return!1;if(f){const w=m.tr;m.selection instanceof q?m.selection.forEachCell((N,Z)=>{N.attrs[b]!==_&&w.setNodeMarkup(Z,null,xe(At({},N.attrs),{[b]:_}))}):w.setNodeMarkup(T.pos,null,xe(At({},T.nodeAfter.attrs),{[b]:_})),f(w)}return!0}}(b,_)(m,f),goToNextCell:()=>({state:b,dispatch:_})=>On(1)(b,_),goToPreviousCell:()=>({state:b,dispatch:_})=>On(-1)(b,_),fixTables:()=>({state:b,dispatch:_})=>(_&&Pe(b),!0),setCellSelection:b=>({tr:_,dispatch:m})=>{if(m){const f=q.create(_.doc,b.anchorCell,b.headCell);_.setSelection(f)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:kn,"Mod-Backspace":kn,Delete:kn,"Mod-Delete":kn}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Y({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],eo({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema:b=>({tableRole:(0,D.callOrReturn)((0,D.getExtensionField)(b,"tableRole",{name:b.name,options:b.options,storage:b.storage}))})}).extend({renderHTML({node:b,HTMLAttributes:_}){var m,f;let T=0,w=!0;try{const N=(null===(m=b.content)||void 0===m?void 0:m.content)[0];null===(f=null==N?void 0:N.content)||void 0===f||f.content.forEach(Z=>{Z.attrs.colwidth?Z.attrs.colwidth.forEach(L=>{L?T+=L:(w=!1,T+=this.options.cellMinWidth)}):(w=!1,T+=this.options.cellMinWidth*(Z.attrs.colspan||1))})}catch(N){w=!1}return _.style=w&&T>0?`width: ${T}px;`:T&&T>0?`min-width: ${T}px`:null,["div",{class:"tui-table-wrapper"},["table",(0,D.mergeAttributes)(this.options.HTMLAttributes,_),["tbody",0]]]}})},1233:(be,zt,j)=>{function D(Ot,vt,$t){const ht=Ot.selection.$anchor;for(let z=ht.depth;z>0;z--)if(ht.node(z).type.name===$t)return vt&&vt(Ot.tr.delete(ht.before(z),ht.after(z)).scrollIntoView()),!0;return!1}j.d(zt,{yU:()=>D,Ws:()=>Ht,U5:()=>at,Yz:()=>Xt,YX:()=>Rt,Ap:()=>Gt,nC:()=>Qt,_N:()=>xt,x6:()=>Pt,jx:()=>pt,CH:()=>le});var gt=j(5648);function Ht(Ot,vt,$t){const{left:ht,top:z,width:tt,height:q}=$t.getBoundingClientRect();return[(0,gt.Ki)(Ot-ht,0,tt)/tt,(0,gt.Ki)(vt-z,0,q)/q]}function at(Ot){return Ot.slice(0,Math.max(0,Ot.length-1)).replace("linear-gradient(","")}function re(Ot,vt,$t={}){return Ot.find(({attrs:ht,type:z})=>z===vt&&function(Ot,vt){const $t=Object.keys(vt);return!$t.length||!!$t.filter(ht=>vt[ht]===Ot[ht]).length}(ht,$t))||null}function Xt(Ot,vt,$t={}){if(!Ot||!vt)return null;const{node:ht,offset:z}=Ot.parent.childAfter(Ot.parentOffset);if(!ht)return null;const tt=re(ht.marks,vt,$t);if(!tt)return null;let q=Ot.index(),st=Ot.start()+z,St=q+1,Zt=st+ht.nodeSize;for(re(ht.marks,vt,$t);q>0&&tt.isInSet(Ot.parent.child(q-1).marks);)q-=1,st-=Ot.parent.child(q).nodeSize;for(;St<Ot.parent.childCount&&re(Ot.parent.child(St).marks,vt,$t);)Zt+=Ot.parent.child(St).nodeSize,St+=1;return{from:st,to:Zt}}var qt=j(7439);function Rt(Ot){const vt=[];return Ot.content.forEach($t=>{$t instanceof qt.NB&&vt.push([$t.type.name,$t.attrs])}),vt}var ae=j(1046);function Gt(Ot,vt){const $t=null!=vt?vt:Ot.selection.$head.parent.textContent,ht=Ot.doc.cut(Ot.selection.from,Ot.selection.to);return ht.content.size?(0,ae.getHTMLFromFragment)(ht.content,Ot.schema):$t}const Lt=["\\s*(","(?:","#(?:[a-f0-9]{6}|[a-f0-9]{3})","|","(?:rgb|hsl)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*\\)","|","(?:rgba|hsla)","\\(\\s*(?:\\d{1,3}\\s*,\\s*){2}\\d{1,3}\\s*,\\s*\\d*\\.?\\d+\\)","|","[_a-z-][_a-z0-9-]*",")",")","(?:\\s+","(","(?:[+-]?\\d*\\.?\\d+)(?:%|[a-z]+)?","))?","(?:","\\s*,\\s*","\\s*)?"];function xt(Ot){const vt=new RegExp(Lt.join(""),"gi"),$t=Ot.startsWith("to")||Ot.match(/^\d/)?Ot.slice(Math.max(0,Ot.indexOf(",")+1)).trim():Ot,ht=Ot.startsWith("to")?Ot.split(",")[0]:"to bottom";let z=[],tt=vt.exec($t);for(;null!==tt;)z=z.concat({color:tt[1],position:Jt(tt[2],z.length)}),tt=vt.exec($t);return z=z.filter(({color:q})=>q.startsWith("#")||q.startsWith("rgb")),{stops:z,side:ht}}function Jt(Ot,vt){const $t=1===vt?"100%":`${vt}%`;return(null==Ot?void 0:Ot.includes("%"))?Ot:$t}function Pt(Ot){return Ot.reduce((vt,$t)=>(vt[$t]={parseHTML:ht=>null==ht?void 0:ht.getAttribute(`${$t}`)},vt),{})}function pt(Ot){return Ot.split(";").reduce((vt,$t)=>{var ht;const[z,tt]=null!==(ht=$t.split(":"))&&void 0!==ht?ht:[];return z&&tt&&(vt[z.trim()]=tt.trim()),vt},{})}function Qt(Ot){var vt;const $t=(null===(vt=Ot.endContainer.nodeValue)||void 0===vt?void 0:vt.length)||0;return Ot.endOffset-Ot.startOffset>0||Ot.endOffset-Ot.startOffset==0&&1===$t||0!==Ot.startOffset&&$t>1&&Ot.endOffset!==$t}var fe=j(2330);function le({stops:Ot,side:vt}){return`linear-gradient(${vt}, ${Ot.map(({color:$t,position:ht})=>`rgba(${(0,fe.Mp)($t).join(", ")}) ${ht}`).join(", ")})`}},1046:(be,zt,j)=>{j.r(zt),j.d(zt,{CommandManager:()=>k,Editor:()=>No,Extension:()=>ce,InputRule:()=>De,Mark:()=>ro,Node:()=>_o,NodeView:()=>Sn,PasteRule:()=>ot,Tracker:()=>ei,callOrReturn:()=>a,combineTransactionSteps:()=>Cn,createChainableState:()=>Y,createDocument:()=>Nn,createNodeFromContent:()=>ft,createStyleTag:()=>Io,defaultBlockAt:()=>zo,deleteProps:()=>He,elementFromString:()=>ut,escapeForRegEx:()=>Po,extensions:()=>Eo,findChildren:()=>Kn,findChildrenInRange:()=>zn,findDuplicates:()=>Ut,findParentNode:()=>Gn,findParentNodeClosestToPos:()=>ao,fromString:()=>C,generateHTML:()=>Fo,generateJSON:()=>qn,generateText:()=>Co,getAttributes:()=>To,getAttributesFromExtensions:()=>G,getChangedRanges:()=>Zo,getDebugJSON:()=>en,getExtensionField:()=>x,getHTMLFromFragment:()=>co,getMarkAttributes:()=>uo,getMarkRange:()=>_,getMarkType:()=>m,getMarksBetween:()=>fo,getNodeAttributes:()=>po,getNodeType:()=>X,getRenderedAttributes:()=>_t,getSchema:()=>no,getSchemaByResolvedExtensions:()=>H,getSchemaTypeByName:()=>K,getSchemaTypeNameByName:()=>Mn,getSplittedAttributes:()=>Tn,getText:()=>Xn,getTextBetween:()=>Xe,getTextContentFromNodes:()=>It,getTextSerializersFromSchema:()=>Be,injectExtensionAttributesToParseRule:()=>S,inputRulesPlugin:()=>W,isActive:()=>vo,isEmptyObject:()=>d,isExtensionRulesEnabled:()=>lt,isFunction:()=>R,isList:()=>Fn,isMacOS:()=>Ae,isMarkActive:()=>oo,isNodeActive:()=>ee,isNodeEmpty:()=>ko,isNodeSelection:()=>Mo,isNumber:()=>it,isPlainObject:()=>Wt,isRegExp:()=>Et,isString:()=>Lo,isTextSelection:()=>w,isiOS:()=>L,markInputRule:()=>Go,markPasteRule:()=>Do,mergeAttributes:()=>ct,mergeDeep:()=>he,minMax:()=>N,nodeInputRule:()=>qo,nodePasteRule:()=>ti,objectIncludes:()=>yn,pasteRulesPlugin:()=>Ct,posToDOMRect:()=>to,removeDuplicates:()=>ho,resolveFocusPosition:()=>Z,selectionToInsertionEnd:()=>kt,splitExtensions:()=>J,textInputRule:()=>Xo,textPasteRule:()=>Ro,textblockTypeInputRule:()=>yo,wrappingInputRule:()=>si});var D=j(2463),gt=j(3594),Ht=j(1690),at=j(7439),dt=j(8480);const re=(p,n)=>!p.selection.empty&&(n&&n(p.tr.deleteSelection().scrollIntoView()),!0);const qt=(p,n,t)=>{let o=function(p,n){let{$cursor:t}=p.selection;return!t||(n?!n.endOfTextblock("backward",p):t.parentOffset>0)?null:t}(p,t);if(!o)return!1;let i=se(o);if(!i){let l=o.blockRange(),u=l&&(0,dt.k9)(l);return null!=u&&(n&&n(p.tr.lift(l,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&q(p,i,n))return!0;if(0==o.parent.content.size&&(e(s,"end")||D.qv.isSelectable(s))){let l=(0,dt.dR)(p.doc,o.before(),o.after(),at.p2.empty);if(l&&l.slice.size<l.to-l.from){if(n){let u=p.tr.step(l);u.setSelection(e(s,"end")?D.Y1.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):D.qv.create(u.doc,i.pos-s.nodeSize)),n(u.scrollIntoView())}return!0}}return!(!s.isAtom||i.depth!=o.depth-1||(n&&n(p.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),0))};function e(p,n,t=!1){for(let o=p;o;o="start"==n?o.firstChild:o.lastChild){if(o.isTextblock)return!0;if(t&&1!=o.childCount)return!1}return!1}const Ne=(p,n,t)=>{let{$head:o,empty:i}=p.selection,s=o;if(!i)return!1;if(o.parent.isTextblock){if(t?!t.endOfTextblock("backward",p):o.parentOffset>0)return!1;s=se(o)}let l=s&&s.nodeBefore;return!(!l||!D.qv.isSelectable(l)||(n&&n(p.tr.setSelection(D.qv.create(p.doc,s.pos-l.nodeSize)).scrollIntoView()),0))};function se(p){if(!p.parent.type.spec.isolating)for(let n=p.depth-1;n>=0;n--){if(p.index(n)>0)return p.doc.resolve(p.before(n+1));if(p.node(n).type.spec.isolating)break}return null}const Dt=(p,n,t)=>{let o=function(p,n){let{$cursor:t}=p.selection;return!t||(n?!n.endOfTextblock("forward",p):t.parentOffset<t.parent.content.size)?null:t}(p,t);if(!o)return!1;let i=Bt(o);if(!i)return!1;let s=i.nodeAfter;if(q(p,i,n))return!0;if(0==o.parent.content.size&&(e(s,"start")||D.qv.isSelectable(s))){let l=(0,dt.dR)(p.doc,o.before(),o.after(),at.p2.empty);if(l&&l.slice.size<l.to-l.from){if(n){let u=p.tr.step(l);u.setSelection(e(s,"start")?D.Y1.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):D.qv.create(u.doc,u.mapping.map(i.pos))),n(u.scrollIntoView())}return!0}}return!(!s.isAtom||i.depth!=o.depth-1||(n&&n(p.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),0))},Mt=(p,n,t)=>{let{$head:o,empty:i}=p.selection,s=o;if(!i)return!1;if(o.parent.isTextblock){if(t?!t.endOfTextblock("forward",p):o.parentOffset<o.parent.content.size)return!1;s=Bt(o)}let l=s&&s.nodeAfter;return!(!l||!D.qv.isSelectable(l)||(n&&n(p.tr.setSelection(D.qv.create(p.doc,s.pos)).scrollIntoView()),0))};function Bt(p){if(!p.parent.type.spec.isolating)for(let n=p.depth-1;n>=0;n--){let t=p.node(n);if(p.index(n)+1<t.childCount)return p.doc.resolve(p.after(n+1));if(t.type.spec.isolating)break}return null}const Pt=(p,n)=>{let{$head:t,$anchor:o}=p.selection;return!(!t.parent.type.spec.code||!t.sameParent(o)||(n&&n(p.tr.insertText("\n").scrollIntoView()),0))};function pt(p){for(let n=0;n<p.edgeCount;n++){let{type:t}=p.edge(n);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Qt=(p,n)=>{let{$head:t,$anchor:o}=p.selection;if(!t.parent.type.spec.code||!t.sameParent(o))return!1;let i=t.node(-1),s=t.indexAfter(-1),l=pt(i.contentMatchAt(s));if(!l||!i.canReplaceWith(s,s,l))return!1;if(n){let u=t.after(),h=p.tr.replaceWith(u,u,l.createAndFill());h.setSelection(D.Y1.near(h.doc.resolve(u),1)),n(h.scrollIntoView())}return!0},fe=(p,n)=>{let t=p.selection,{$from:o,$to:i}=t;if(t instanceof D.C1||o.parent.inlineContent||i.parent.inlineContent)return!1;let s=pt(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(n){let l=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,u=p.tr.insert(l,s.createAndFill());u.setSelection(D.Bs.create(u.doc,l+1)),n(u.scrollIntoView())}return!0},le=(p,n)=>{let{$cursor:t}=p.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if((0,dt.Ax)(p.doc,s))return n&&n(p.tr.split(s).scrollIntoView()),!0}let o=t.blockRange(),i=o&&(0,dt.k9)(o);return null!=i&&(n&&n(p.tr.lift(o,i).scrollIntoView()),!0)};var p;function q(p,n,t){let s,l,o=n.nodeBefore,i=n.nodeAfter;if(o.type.spec.isolating||i.type.spec.isolating)return!1;if(function(p,n,t){let o=n.nodeBefore,i=n.nodeAfter,s=n.index();return!(!(o&&i&&o.type.compatibleContent(i.type))||(!o.content.size&&n.parent.canReplace(s-1,s)?(t&&t(p.tr.delete(n.pos-o.nodeSize,n.pos).scrollIntoView()),0):!n.parent.canReplace(s,s+1)||!i.isTextblock&&!(0,dt.Mn)(p.doc,n.pos)||(t&&t(p.tr.clearIncompatible(n.pos,o.type,o.contentMatchAt(o.childCount)).join(n.pos).scrollIntoView()),0)))}(p,n,t))return!0;let u=n.parent.canReplace(n.index(),n.index()+1);if(u&&(s=(l=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&l.matchType(s[0]||i.type).validEnd){if(t){let E=n.pos+i.nodeSize,F=at.HY.empty;for(let nt=s.length-1;nt>=0;nt--)F=at.HY.from(s[nt].create(null,F));F=at.HY.from(o.copy(F));let V=p.tr.step(new dt.FC(n.pos-1,E,n.pos,E,new at.p2(F,1,0),s.length,!0)),Q=E+2*s.length;(0,dt.Mn)(V.doc,Q)&&V.join(Q),t(V.scrollIntoView())}return!0}let h=D.Y1.findFrom(n,1),y=h&&h.$from.blockRange(h.$to),A=y&&(0,dt.k9)(y);if(null!=A&&A>=n.depth)return t&&t(p.tr.lift(y,A).scrollIntoView()),!0;if(u&&e(i,"start",!0)&&e(o,"end")){let E=o,F=[];for(;F.push(E),!E.isTextblock;)E=E.lastChild;let V=i,Q=1;for(;!V.isTextblock;V=V.firstChild)Q++;if(E.canReplace(E.childCount,E.childCount,V.content)){if(t){let nt=at.HY.empty;for(let Tt=F.length-1;Tt>=0;Tt--)nt=at.HY.from(F[Tt].copy(nt));t(p.tr.step(new dt.FC(n.pos-F.length,n.pos+i.nodeSize,n.pos+Q,n.pos+i.nodeSize-Q,new at.p2(nt,F.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function st(p){return function(n,t){let o=n.selection,i=p<0?o.$from:o.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return!!i.node(s).isTextblock&&(t&&t(n.tr.setSelection(D.Bs.create(n.doc,p<0?i.start(s):i.end(s)))),!0)}}const St=st(-1),Zt=st(1);function jt(p,n=null){return function(t,o){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[s];t.doc.nodesBetween(l,u,(h,y)=>{if(i)return!1;if(h.isTextblock&&!h.hasMarkup(p,n))if(h.type==p)i=!0;else{let A=t.doc.resolve(y),E=A.index();i=A.parent.canReplaceWith(E,E+1,p)}})}if(!i)return!1;if(o){let s=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:h}}=t.selection.ranges[l];s.setBlockType(u,h,p,n)}o(s.scrollIntoView())}return!0}}function nn(...p){return function(n,t,o){for(let i=0;i<p.length;i++)if(p[i](n,t,o))return!0;return!1}}let Ue=nn(re,qt,Ne),de=nn(re,Dt,Mt);const Je={Enter:nn(Pt,fe,le,(n,t)=>{let{$from:o,$to:i}=n.selection;if(n.selection instanceof D.qv&&n.selection.node.isBlock)return!(!o.parentOffset||!(0,dt.Ax)(n.doc,o.pos)||(t&&t(n.tr.split(o.pos).scrollIntoView()),0));if(!o.parent.isBlock)return!1;if(t){let s=i.parentOffset==i.parent.content.size,l=n.tr;(n.selection instanceof D.Bs||n.selection instanceof D.C1)&&l.deleteSelection();let u=0==o.depth?null:pt(o.node(-1).contentMatchAt(o.indexAfter(-1))),h=p,y=h?[h]:s&&u?[{type:u}]:void 0,A=(0,dt.Ax)(l.doc,l.mapping.map(o.pos),1,y);if(!y&&!A&&(0,dt.Ax)(l.doc,l.mapping.map(o.pos),1,u?[{type:u}]:void 0)&&(u&&(y=[{type:u}]),A=!0),A&&(l.split(l.mapping.map(o.pos),1,y),!s&&!o.parentOffset&&o.parent.type!=u)){let E=l.mapping.map(o.before()),F=l.doc.resolve(E);u&&o.node(-1).canReplaceWith(F.index(),F.index()+1,u)&&l.setNodeMarkup(l.mapping.map(o.before()),u)}t(l.scrollIntoView())}return!0}),"Mod-Enter":Qt,Backspace:Ue,"Mod-Backspace":Ue,"Shift-Backspace":Ue,Delete:de,"Mod-Delete":de,"Mod-a":(p,n)=>(n&&n(p.tr.setSelection(new D.C1(p.doc))),!0)},Ie={"Ctrl-h":Je.Backspace,"Alt-Backspace":Je["Mod-Backspace"],"Ctrl-d":Je.Delete,"Ctrl-Alt-Backspace":Je["Mod-Delete"],"Alt-Delete":Je["Mod-Delete"],"Alt-d":Je["Mod-Delete"],"Ctrl-a":St,"Ctrl-e":Zt};for(let p in Je)Ie[p]=Je[p];function Y(p){const{state:n,transaction:t}=p;let{selection:o}=t,{doc:i}=t,{storedMarks:s}=t;return xe(At({},n),{apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),filterTransaction:n.filterTransaction,plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return s},get selection(){return o},get doc(){return i},get tr(){return o=t.selection,i=t.doc,s=t.storedMarks,t}})}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class k{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:t,state:o}=this,{view:i}=t,{tr:s}=o,l=this.buildProps(s);return Object.fromEntries(Object.entries(n).map(([u,h])=>[u,(...A)=>{const E=h(...A)(l);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),E}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,t=!0){const{rawCommands:o,editor:i,state:s}=this,{view:l}=i,u=[],h=!!n,y=n||s.tr,E=xe(At({},Object.fromEntries(Object.entries(o).map(([F,V])=>[F,(...nt)=>{const mt=this.buildProps(y,t),Tt=V(...nt)(mt);return u.push(Tt),E}]))),{run:()=>(!h&&t&&!y.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(y),u.every(F=>!0===F))});return E}createCan(n){const{rawCommands:t,state:o}=this,s=n||o.tr,l=this.buildProps(s,!1),u=Object.fromEntries(Object.entries(t).map(([h,y])=>[h,(...A)=>y(...A)(xe(At({},l),{dispatch:void 0}))]));return xe(At({},u),{chain:()=>this.createChain(s,!1)})}buildProps(n,t=!0){const{rawCommands:o,editor:i,state:s}=this,{view:l}=i;s.storedMarks&&n.setStoredMarks(s.storedMarks);const u={tr:n,editor:i,view:l,state:Y({state:s,transaction:n}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(n),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(o).map(([h,y])=>[h,(...A)=>y(...A)(u)]))}};return u}}function x(p,n,t){return void 0===p.config[n]&&p.parent?x(p.parent,n,t):"function"==typeof p.config[n]?p.config[n].bind(xe(At({},t),{parent:p.parent?x(p.parent,n,t):null})):p.config[n]}function J(p){return{baseExtensions:p.filter(i=>"extension"===i.type),nodeExtensions:p.filter(i=>"node"===i.type),markExtensions:p.filter(i=>"mark"===i.type)}}function G(p){const n=[],{nodeExtensions:t,markExtensions:o}=J(p),i=[...t,...o],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return p.forEach(l=>{const h=x(l,"addGlobalAttributes",{name:l.name,options:l.options,storage:l.storage});h&&h().forEach(A=>{A.types.forEach(E=>{Object.entries(A.attributes).forEach(([F,V])=>{n.push({type:E,name:F,attribute:At(At({},s),V)})})})})}),i.forEach(l=>{const h=x(l,"addAttributes",{name:l.name,options:l.options,storage:l.storage});if(!h)return;const y=h();Object.entries(y).forEach(([A,E])=>{const F=At(At({},s),E);"function"==typeof(null==F?void 0:F.default)&&(F.default=F.default()),(null==F?void 0:F.isRequired)&&void 0===(null==F?void 0:F.default)&&delete F.default,n.push({type:l.name,name:A,attribute:F})})}),n}function X(p,n){if("string"==typeof p){if(!n.nodes[p])throw Error(`There is no node type named '${p}'. Maybe you forgot to add the extension?`);return n.nodes[p]}return p}function ct(...p){return p.filter(n=>!!n).reduce((n,t)=>{const o=At({},n);return Object.entries(t).forEach(([i,s])=>{o[i]=o[i]?"class"===i?[o[i],s].join(" "):"style"===i?[o[i],s].join("; "):s:s}),o},{})}function _t(p,n){return n.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(p.attrs)||{}:{[t.name]:p.attrs[t.name]}).reduce((t,o)=>ct(t,o),{})}function R(p){return"function"==typeof p}function a(p,n,...t){return R(p)?n?p.bind(n)(...t):p(...t):p}function d(p={}){return 0===Object.keys(p).length&&p.constructor===Object}function C(p){return"string"!=typeof p?p:p.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(p):"true"===p||"false"!==p&&p}function S(p,n){return p.style?p:xe(At({},p),{getAttrs:t=>{const o=p.getAttrs?p.getAttrs(t):p.attrs;if(!1===o)return!1;const i=n.reduce((s,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(t):C(t.getAttribute(l.name));return null==u?s:xe(At({},s),{[l.name]:u})},{});return At(At({},o),i)}})}function I(p){return Object.fromEntries(Object.entries(p).filter(([n,t])=>("attrs"!==n||!d(t))&&null!=t))}function H(p,n){var t;const o=G(p),{nodeExtensions:i,markExtensions:s}=J(p),l=null===(t=i.find(y=>x(y,"topNode")))||void 0===t?void 0:t.name,u=Object.fromEntries(i.map(y=>{const A=o.filter(Tt=>Tt.type===y.name),E={name:y.name,options:y.options,storage:y.storage,editor:n},F=p.reduce((Tt,Kt)=>{const Oe=x(Kt,"extendNodeSchema",E);return At(At({},Tt),Oe?Oe(y):{})},{}),V=I(xe(At({},F),{content:a(x(y,"content",E)),marks:a(x(y,"marks",E)),group:a(x(y,"group",E)),inline:a(x(y,"inline",E)),atom:a(x(y,"atom",E)),selectable:a(x(y,"selectable",E)),draggable:a(x(y,"draggable",E)),code:a(x(y,"code",E)),defining:a(x(y,"defining",E)),isolating:a(x(y,"isolating",E)),attrs:Object.fromEntries(A.map(Tt=>{var Kt;return[Tt.name,{default:null===(Kt=null==Tt?void 0:Tt.attribute)||void 0===Kt?void 0:Kt.default}]}))})),Q=a(x(y,"parseHTML",E));Q&&(V.parseDOM=Q.map(Tt=>S(Tt,A)));const nt=x(y,"renderHTML",E);nt&&(V.toDOM=Tt=>nt({node:Tt,HTMLAttributes:_t(Tt,A)}));const mt=x(y,"renderText",E);return mt&&(V.toText=mt),[y.name,V]})),h=Object.fromEntries(s.map(y=>{const A=o.filter(mt=>mt.type===y.name),E={name:y.name,options:y.options,storage:y.storage,editor:n},F=p.reduce((mt,Tt)=>{const Kt=x(Tt,"extendMarkSchema",E);return At(At({},mt),Kt?Kt(y):{})},{}),V=I(xe(At({},F),{inclusive:a(x(y,"inclusive",E)),excludes:a(x(y,"excludes",E)),group:a(x(y,"group",E)),spanning:a(x(y,"spanning",E)),code:a(x(y,"code",E)),attrs:Object.fromEntries(A.map(mt=>{var Tt;return[mt.name,{default:null===(Tt=null==mt?void 0:mt.attribute)||void 0===Tt?void 0:Tt.default}]}))})),Q=a(x(y,"parseHTML",E));Q&&(V.parseDOM=Q.map(mt=>S(mt,A)));const nt=x(y,"renderHTML",E);return nt&&(V.toDOM=mt=>nt({mark:mt,HTMLAttributes:_t(mt,A)})),[y.name,V]}));return new at.V_({topNode:l,nodes:u,marks:h})}function K(p,n){return n.nodes[p]||n.marks[p]||null}function lt(p,n){return Array.isArray(n)?n.some(t=>("string"==typeof t?t:t.name)===p.name):n}const It=(p,n=500)=>{let t="";const o=p.parentOffset;return p.parent.nodesBetween(Math.max(0,o-n),o,(i,s,l,u)=>{var h,y;t+=((null===(y=(h=i.type.spec).toText)||void 0===y?void 0:y.call(h,{node:i,pos:s,parent:l,index:u}))||i.textContent||"%leaf%").slice(0,Math.max(0,o-s))}),t};function Et(p){return"[object RegExp]"===Object.prototype.toString.call(p)}class De{constructor(n){this.find=n.find,this.handler=n.handler}}function O(p){var n;const{editor:t,from:o,to:i,text:s,rules:l,plugin:u}=p,{view:h}=t;if(h.composing)return!1;const y=h.state.doc.resolve(o);if(y.parent.type.spec.code||(null===(n=y.nodeBefore||y.nodeAfter)||void 0===n?void 0:n.marks.find(F=>F.type.spec.code)))return!1;let A=!1;const E=It(y)+s;return l.forEach(F=>{if(A)return;const V=((p,n)=>{if(Et(n))return n.exec(p);const t=n(p);if(!t)return null;const o=[t.text];return o.index=t.index,o.input=p,o.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),o.push(t.replaceWith)),o})(E,F.find);if(!V)return;const Q=h.state.tr,nt=Y({state:h.state,transaction:Q}),mt={from:o-(V[0].length-s.length),to:i},{commands:Tt,chain:Kt,can:Oe}=new k({editor:t,state:nt});null===F.handler({state:nt,range:mt,match:V,commands:Tt,chain:Kt,can:Oe})||!Q.steps.length||(Q.setMeta(u,{transform:Q,from:o,to:i,text:s}),h.dispatch(Q),A=!0)}),A}function W(p){const{editor:n,rules:t}=p,o=new D.Sy({state:{init:()=>null,apply:(i,s)=>i.getMeta(o)||(i.selectionSet||i.docChanged?null:s)},props:{handleTextInput:(i,s,l,u)=>O({editor:n,from:s,to:l,text:u,rules:t,plugin:o}),handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&O({editor:n,from:s.pos,to:s.pos,text:"",rules:t,plugin:o})}),!1)},handleKeyDown(i,s){if("Enter"!==s.key)return!1;const{$cursor:l}=i.state.selection;return!!l&&O({editor:n,from:l.pos,to:l.pos,text:"\n",rules:t,plugin:o})}},isInputRules:!0});return o}function it(p){return"number"==typeof p}class ot{constructor(n){this.find=n.find,this.handler=n.handler}}function Ct(p){const{editor:n,rules:t}=p;let o=null,i=!1,s=!1;return t.map(u=>new D.Sy({view(h){const y=A=>{var E;o=(null===(E=h.dom.parentElement)||void 0===E?void 0:E.contains(A.target))?h.dom.parentElement:null};return window.addEventListener("dragstart",y),{destroy(){window.removeEventListener("dragstart",y)}}},props:{handleDOMEvents:{drop:h=>(s=o===h.dom.parentElement,!1),paste:(h,y)=>{var A;const E=null===(A=y.clipboardData)||void 0===A?void 0:A.getData("text/html");return i=!!(null==E?void 0:E.includes("data-pm-slice")),!1}}},appendTransaction:(h,y,A)=>{const E=h[0],F="paste"===E.getMeta("uiEvent")&&!i,V="drop"===E.getMeta("uiEvent")&&!s;if(!F&&!V)return;const Q=y.doc.content.findDiffStart(A.doc.content),nt=y.doc.content.findDiffEnd(A.doc.content);if(!it(Q)||!nt||Q===nt.b)return;const mt=A.tr,Tt=Y({state:A,transaction:mt});return function(p){const{editor:n,state:t,from:o,to:i,rule:s}=p,{commands:l,chain:u,can:h}=new k({editor:n,state:t}),y=[];return t.doc.nodesBetween(o,i,(E,F)=>{if(!E.isTextblock||E.type.spec.code)return;const V=Math.max(o,F),Q=Math.min(i,F+E.content.size);((p,n)=>{if(Et(n))return[...p.matchAll(n)];const t=n(p);return t?t.map(o=>{const i=[o.text];return i.index=o.index,i.input=p,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]})(E.textBetween(V-F,Q-F,void 0,"\ufffc"),s.find).forEach(Tt=>{if(void 0===Tt.index)return;const Kt=V+Tt.index+1,Oe=Kt+Tt[0].length,ze={from:t.tr.mapping.map(Kt),to:t.tr.mapping.map(Oe)},Ke=s.handler({state:t,range:ze,match:Tt,commands:l,chain:u,can:h});y.push(Ke)})}),y.every(E=>null!==E)}({editor:n,state:Tt,from:Math.max(Q-1,0),to:nt.b-1,rule:u})&&mt.steps.length?mt:void 0}}))}function Ut(p){const n=p.filter((t,o)=>p.indexOf(t)!==o);return[...new Set(n)]}class te{constructor(n,t){this.splittableMarks=[],this.editor=t,this.extensions=te.resolve(n),this.schema=H(this.extensions,t),this.extensions.forEach(o=>{var i;this.editor.extensionStorage[o.name]=o.storage;const s={name:o.name,options:o.options,storage:o.storage,editor:this.editor,type:K(o.name,this.schema)};"mark"===o.type&&(null===(i=a(x(o,"keepOnSplit",s)))||void 0===i||i)&&this.splittableMarks.push(o.name);const l=x(o,"onBeforeCreate",s);l&&this.editor.on("beforeCreate",l);const u=x(o,"onCreate",s);u&&this.editor.on("create",u);const h=x(o,"onUpdate",s);h&&this.editor.on("update",h);const y=x(o,"onSelectionUpdate",s);y&&this.editor.on("selectionUpdate",y);const A=x(o,"onTransaction",s);A&&this.editor.on("transaction",A);const E=x(o,"onFocus",s);E&&this.editor.on("focus",E);const F=x(o,"onBlur",s);F&&this.editor.on("blur",F);const V=x(o,"onDestroy",s);V&&this.editor.on("destroy",V)})}static resolve(n){const t=te.sort(te.flatten(n)),o=Ut(t.map(i=>i.name));return o.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${o.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(n){return n.map(t=>{const i=x(t,"addExtensions",{name:t.name,options:t.options,storage:t.storage});return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(n){return n.sort((o,i)=>{const s=x(o,"priority")||100,l=x(i,"priority")||100;return s>l?-1:s<l?1:0})}get commands(){return this.extensions.reduce((n,t)=>{const i=x(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:K(t.name,this.schema)});return i?At(At({},n),i()):n},{})}get plugins(){const{editor:n}=this,t=te.sort([...this.extensions].reverse()),o=[],i=[],s=t.map(l=>{const u={name:l.name,options:l.options,storage:l.storage,editor:n,type:K(l.name,this.schema)},h=[],y=x(l,"addKeyboardShortcuts",u);let A={};if("mark"===l.type&&l.config.exitable&&(A.ArrowRight=()=>ro.handleExit({editor:n,mark:l})),y){const nt=Object.fromEntries(Object.entries(y()).map(([mt,Tt])=>[mt,()=>Tt({editor:n})]));A=At(At({},A),nt)}const E=(0,Ht.h)(A);h.push(E);const F=x(l,"addInputRules",u);lt(l,n.options.enableInputRules)&&F&&o.push(...F());const V=x(l,"addPasteRules",u);lt(l,n.options.enablePasteRules)&&V&&i.push(...V());const Q=x(l,"addProseMirrorPlugins",u);if(Q){const nt=Q();h.push(...nt)}return h}).flat();return[W({editor:n,rules:o}),...Ct({editor:n,rules:i}),...s]}get attributes(){return G(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:t}=J(this.extensions);return Object.fromEntries(t.filter(o=>!!x(o,"addNodeView")).map(o=>{const i=this.attributes.filter(h=>h.type===o.name),s={name:o.name,options:o.options,storage:o.storage,editor:n,type:X(o.name,this.schema)},l=x(o,"addNodeView",s);return l?[o.name,(h,y,A,E)=>{const F=_t(h,i);return l()({editor:n,node:h,getPos:A,decorations:E,HTMLAttributes:F,extension:o})}]:[]}))}}function Wt(p){return"Object"===function(p){return Object.prototype.toString.call(p).slice(8,-1)}(p)&&p.constructor===Object&&Object.getPrototypeOf(p)===Object.prototype}function he(p,n){const t=At({},p);return Wt(p)&&Wt(n)&&Object.keys(n).forEach(o=>{Wt(n[o])?o in p?t[o]=he(p[o],n[o]):Object.assign(t,{[o]:n[o]}):Object.assign(t,{[o]:n[o]})}),t}class ce{constructor(n={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=At(At({},this.config),n),this.name=this.config.name,n.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(x(this,"addOptions",{name:this.name}))),this.storage=a(x(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new ce(n)}configure(n={}){const t=this.extend();return t.options=he(this.options,n),t.storage=a(x(t,"addStorage",{name:t.name,options:t.options})),t}extend(n={}){const t=new ce(n);return t.parent=this,this.child=t,t.name=n.name?n.name:t.parent.name,n.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=a(x(t,"addOptions",{name:t.name})),t.storage=a(x(t,"addStorage",{name:t.name,options:t.options})),t}}function Xe(p,n,t){const{from:o,to:i}=n,{blockSeparator:s="\n\n",textSerializers:l={}}=t||{};let u="",h=!0;return p.nodesBetween(o,i,(y,A,E,F)=>{var V;const Q=null==l?void 0:l[y.type.name];Q?(y.isBlock&&!h&&(u+=s,h=!0),E&&(u+=Q({node:y,pos:A,parent:E,index:F,range:n}))):y.isText?(u+=null===(V=null==y?void 0:y.text)||void 0===V?void 0:V.slice(Math.max(o,A)-A,i-A),h=!1):y.isBlock&&!h&&(u+=s,h=!0)}),u}function Be(p){return Object.fromEntries(Object.entries(p.nodes).filter(([,n])=>n.spec.toText).map(([n,t])=>[n,t.spec.toText]))}const fn=ce.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new D.Sy({key:new D.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:p}=this,{state:n,schema:t}=p,{doc:o,selection:i}=n,{ranges:s}=i;return Xe(o,{from:Math.min(...s.map(A=>A.$from.pos)),to:Math.max(...s.map(A=>A.$to.pos))},{textSerializers:Be(t)})}}})]}});function yn(p,n,t={strict:!0}){const o=Object.keys(n);return!o.length||o.every(i=>t.strict?n[i]===p[i]:Et(n[i])?n[i].test(p[i]):n[i]===p[i])}function We(p,n,t={}){return p.find(o=>o.type===n&&yn(o.attrs,t))}function b(p,n,t={}){return!!We(p,n,t)}function _(p,n,t={}){if(!p||!n)return;let o=p.parent.childAfter(p.parentOffset);if(p.parentOffset===o.offset&&0!==o.offset&&(o=p.parent.childBefore(p.parentOffset)),!o.node)return;const i=We([...o.node.marks],n,t);if(!i)return;let s=o.index,l=p.start()+o.offset,u=s+1,h=l+o.node.nodeSize;for(We([...o.node.marks],n,t);s>0&&i.isInSet(p.parent.child(s-1).marks);)s-=1,l-=p.parent.child(s).nodeSize;for(;u<p.parent.childCount&&b([...p.parent.child(u).marks],n,t);)h+=p.parent.child(u).nodeSize,u+=1;return{from:l,to:h}}function m(p,n){if("string"==typeof p){if(!n.marks[p])throw Error(`There is no mark type named '${p}'. Maybe you forgot to add the extension?`);return n.marks[p]}return p}function w(p){return p instanceof D.Bs}function N(p=0,n=0,t=0){return Math.min(Math.max(p,n),t)}function Z(p,n=null){if(!n)return null;const t=D.Y1.atStart(p),o=D.Y1.atEnd(p);if("start"===n||!0===n)return t;if("end"===n)return o;const i=t.from,s=o.to;return"all"===n?D.Bs.create(p,N(0,i,s),N(p.content.size,i,s)):D.Bs.create(p,N(n,i,s),N(n,i,s))}function L(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function ut(p){const n=`<body>${p}</body>`;return(new window.DOMParser).parseFromString(n,"text/html").body}function ft(p,n,t){if(t=At({slice:!0,parseOptions:{}},t),"object"==typeof p&&null!==p)try{return Array.isArray(p)&&p.length>0?at.HY.fromArray(p.map(o=>n.nodeFromJSON(o))):n.nodeFromJSON(p)}catch(o){return console.warn("[tiptap warn]: Invalid content.","Passed value:",p,"Error:",o),ft("",n,t)}if("string"==typeof p){const o=at.aw.fromSchema(n);return t.slice?o.parseSlice(ut(p),t.parseOptions).content:o.parse(ut(p),t.parseOptions)}return ft("",n,t)}function kt(p,n,t){const o=p.steps.length-1;if(o<n)return;const i=p.steps[o];if(!(i instanceof dt.Pu||i instanceof dt.FC))return;let l=0;p.mapping.maps[o].forEach((u,h,y,A)=>{0===l&&(l=A)}),p.setSelection(D.Y1.near(p.doc.resolve(l),t))}function Ae(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function ee(p,n,t={}){const{from:o,to:i,empty:s}=p.selection,l=n?X(n,p.schema):null,u=[];p.doc.nodesBetween(o,i,(E,F)=>{if(E.isText)return;const V=Math.max(o,F),Q=Math.min(i,F+E.nodeSize);u.push({node:E,from:V,to:Q})});const h=i-o,y=u.filter(E=>!l||l.name===E.node.type.name).filter(E=>yn(E.node.attrs,t,{strict:!1}));return s?!!y.length:y.reduce((E,F)=>E+F.to-F.from,0)>=h}function Mn(p,n){return n.nodes[p]?"node":n.marks[p]?"mark":null}function He(p,n){const t="string"==typeof n?[n]:n;return Object.keys(p).reduce((o,i)=>(t.includes(i)||(o[i]=p[i]),o),{})}function Nn(p,n,t={}){return ft(p,n,{slice:!1,parseOptions:t})}function Cn(p,n){const t=new dt.wx(p);return n.forEach(o=>{o.steps.forEach(i=>{t.step(i)})}),t}function zo(p){for(let n=0;n<p.edgeCount;n+=1){const{type:t}=p.edge(n);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Kn(p,n){const t=[];return p.descendants((o,i)=>{n(o)&&t.push({node:o,pos:i})}),t}function zn(p,n,t){const o=[];return p.nodesBetween(n.from,n.to,(i,s)=>{t(i)&&o.push({node:i,pos:s})}),o}function ao(p,n){for(let t=p.depth;t>0;t-=1){const o=p.node(t);if(n(o))return{pos:t>0?p.before(t):0,start:p.start(t),depth:t,node:o}}}function Gn(p){return n=>ao(n.$from,p)}function co(p,n){const t=at.PW.fromSchema(n).serializeFragment(p),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function no(p,n){return H(te.resolve(p),n)}function Fo(p,n){const t=no(n);return co(at.NB.fromJSON(t,p).content,t)}function qn(p,n){const t=no(n),o=ut(p);return at.aw.fromSchema(t).parse(o).toJSON()}function Xn(p,n){return Xe(p,{from:0,to:p.content.size},n)}function Co(p,n,t){const{blockSeparator:o="\n\n",textSerializers:i={}}=t||{},s=no(n);return Xn(at.NB.fromJSON(s,p),{blockSeparator:o,textSerializers:At(At({},Be(s)),i)})}function uo(p,n){const t=m(n,p.schema),{from:o,to:i,empty:s}=p.selection,l=[];s?(p.storedMarks&&l.push(...p.storedMarks),l.push(...p.selection.$head.marks())):p.doc.nodesBetween(o,i,h=>{l.push(...h.marks)});const u=l.find(h=>h.type.name===t.name);return u?At({},u.attrs):{}}function po(p,n){const t=X(n,p.schema),{from:o,to:i}=p.selection,s=[];p.doc.nodesBetween(o,i,u=>{s.push(u)});const l=s.reverse().find(u=>u.type.name===t.name);return l?At({},l.attrs):{}}function To(p,n){const t=Mn("string"==typeof n?n:n.name,p.schema);return"node"===t?po(p,n):"mark"===t?uo(p,n):{}}function ho(p,n=JSON.stringify){const t={};return p.filter(o=>{const i=n(o);return!Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=!0)})}function Zo(p){const{mapping:n,steps:t}=p,o=[];return n.maps.forEach((i,s)=>{const l=[];if(i.ranges.length)i.forEach((u,h)=>{l.push({from:u,to:h})});else{const{from:u,to:h}=t[s];if(void 0===u||void 0===h)return;l.push({from:u,to:h})}l.forEach(({from:u,to:h})=>{const y=n.slice(s).map(u,-1),A=n.slice(s).map(h),E=n.invert().map(y,-1),F=n.invert().map(A);o.push({oldRange:{from:E,to:F},newRange:{from:y,to:A}})})}),function(p){const n=ho(p);return 1===n.length?n:n.filter((t,o)=>!n.filter((s,l)=>l!==o).some(s=>t.oldRange.from>=s.oldRange.from&&t.oldRange.to<=s.oldRange.to&&t.newRange.from>=s.newRange.from&&t.newRange.to<=s.newRange.to))}(o)}function en(p,n=0){const o=p.type===p.type.schema.topNodeType?0:1,i=n,s=i+p.nodeSize,l=p.marks.map(y=>{const A={type:y.type.name};return Object.keys(y.attrs).length&&(A.attrs=At({},y.attrs)),A}),u=At({},p.attrs),h={type:p.type.name,from:i,to:s};return Object.keys(u).length&&(h.attrs=u),l.length&&(h.marks=l),p.content.childCount&&(h.content=[],p.forEach((y,A)=>{var E;null===(E=h.content)||void 0===E||E.push(en(y,n+A+o))})),p.text&&(h.text=p.text),h}function fo(p,n,t){const o=[];return p===n?t.resolve(p).marks().forEach(i=>{const l=_(t.resolve(p-1),i.type);!l||o.push(At({mark:i},l))}):t.nodesBetween(p,n,(i,s)=>{o.push(...i.marks.map(l=>({from:s,to:s+i.nodeSize,mark:l})))}),o}function Tn(p,n,t){return Object.fromEntries(Object.entries(t).filter(([o])=>{const i=p.find(s=>s.type===n&&s.name===o);return!!i&&i.attribute.keepOnSplit}))}function oo(p,n,t={}){const{empty:o,ranges:i}=p.selection,s=n?m(n,p.schema):null;if(o)return!!(p.storedMarks||p.selection.$from.marks()).filter(E=>!s||s.name===E.type.name).find(E=>yn(E.attrs,t,{strict:!1}));let l=0;const u=[];if(i.forEach(({$from:E,$to:F})=>{const V=E.pos,Q=F.pos;p.doc.nodesBetween(V,Q,(nt,mt)=>{if(!nt.isText&&!nt.marks.length)return;const Tt=Math.max(V,mt),Kt=Math.min(Q,mt+nt.nodeSize);l+=Kt-Tt,u.push(...nt.marks.map(ze=>({mark:ze,from:Tt,to:Kt})))})}),0===l)return!1;const h=u.filter(E=>!s||s.name===E.mark.type.name).filter(E=>yn(E.mark.attrs,t,{strict:!1})).reduce((E,F)=>E+F.to-F.from,0),y=u.filter(E=>!s||E.mark.type!==s&&E.mark.type.excludes(s)).reduce((E,F)=>E+F.to-F.from,0);return(h>0?h+y:h)>=l}function vo(p,n,t={}){if(!n)return ee(p,null,t)||oo(p,null,t);const o=Mn(n,p.schema);return"node"===o?ee(p,n,t):"mark"===o&&oo(p,n,t)}function Fn(p,n){const{nodeExtensions:t}=J(n),o=t.find(l=>l.name===p);if(!o)return!1;const s=a(x(o,"group",{name:o.name,options:o.options,storage:o.storage}));return"string"==typeof s&&s.split(" ").includes("list")}function ko(p){var n;const t=null===(n=p.type.createAndFill())||void 0===n?void 0:n.toJSON(),o=p.toJSON();return JSON.stringify(t)===JSON.stringify(o)}function Mo(p){return p instanceof D.qv}function to(p,n,t){const i=p.state.doc.content.size,s=N(n,0,i),l=N(t,0,i),u=p.coordsAtPos(s),h=p.coordsAtPos(l,-1),y=Math.min(u.top,h.top),A=Math.max(u.bottom,h.bottom),E=Math.min(u.left,h.left),F=Math.max(u.right,h.right),Tt={top:y,bottom:A,left:E,right:F,width:F-E,height:A-y,x:E,y};return xe(At({},Tt),{toJSON:()=>Tt})}function on(p,n){const t=p.storedMarks||p.selection.$to.parentOffset&&p.selection.$from.marks();if(t){const o=t.filter(i=>null==n?void 0:n.includes(i.type.name));p.tr.ensureMarks(o)}}const io=(p,n)=>{const t=Gn(l=>l.type===n)(p.selection);if(!t)return!0;const o=p.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(void 0===o)return!0;const i=p.doc.nodeAt(o);return t.node.type===(null==i?void 0:i.type)&&(0,dt.Mn)(p.doc,t.pos)&&p.join(t.pos),!0},go=(p,n)=>{const t=Gn(l=>l.type===n)(p.selection);if(!t)return!0;const o=p.doc.resolve(t.start).after(t.depth);if(void 0===o)return!0;const i=p.doc.nodeAt(o);return t.node.type===(null==i?void 0:i.type)&&(0,dt.Mn)(p.doc,o)&&p.join(o),!0};var Vo=Object.freeze({__proto__:null,blur:()=>({editor:p,view:n})=>(requestAnimationFrame(()=>{var t;p.isDestroyed||(n.dom.blur(),null===(t=null==window?void 0:window.getSelection())||void 0===t||t.removeAllRanges())}),!0),clearContent:(p=!1)=>({commands:n})=>n.setContent("",p),clearNodes:()=>({state:p,tr:n,dispatch:t})=>{const{selection:o}=n,{ranges:i}=o;return t&&i.forEach(({$from:s,$to:l})=>{p.doc.nodesBetween(s.pos,l.pos,(u,h)=>{if(u.type.isText)return;const{doc:y,mapping:A}=n,E=y.resolve(A.map(h)),F=y.resolve(A.map(h+u.nodeSize)),V=E.blockRange(F);if(!V)return;const Q=(0,dt.k9)(V);if(u.type.isTextblock){const{defaultType:nt}=E.parent.contentMatchAt(E.index());n.setNodeMarkup(V.start,nt)}(Q||0===Q)&&n.lift(V,Q)})}),!0},command:p=>n=>p(n),createParagraphNear:()=>({state:p,dispatch:n})=>fe(p,n),deleteCurrentNode:()=>({tr:p,dispatch:n})=>{const{selection:t}=p,o=t.$anchor.node();if(o.content.size>0)return!1;const i=p.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o.type){if(n){const u=i.before(s),h=i.after(s);p.delete(u,h).scrollIntoView()}return!0}return!1},deleteNode:p=>({tr:n,state:t,dispatch:o})=>{const i=X(p,t.schema),s=n.selection.$anchor;for(let l=s.depth;l>0;l-=1)if(s.node(l).type===i){if(o){const h=s.before(l),y=s.after(l);n.delete(h,y).scrollIntoView()}return!0}return!1},deleteRange:p=>({tr:n,dispatch:t})=>{const{from:o,to:i}=p;return t&&n.delete(o,i),!0},deleteSelection:()=>({state:p,dispatch:n})=>re(p,n),enter:()=>({commands:p})=>p.keyboardShortcut("Enter"),exitCode:()=>({state:p,dispatch:n})=>Qt(p,n),extendMarkRange:(p,n={})=>({tr:t,state:o,dispatch:i})=>{const s=m(p,o.schema),{doc:l,selection:u}=t,{$from:h,from:y,to:A}=u;if(i){const E=_(h,s,n);if(E&&E.from<=y&&E.to>=A){const F=D.Bs.create(l,E.from,E.to);t.setSelection(F)}}return!0},first:p=>n=>{const t="function"==typeof p?p(n):p;for(let o=0;o<t.length;o+=1)if(t[o](n))return!0;return!1},focus:(p=null,n={})=>({editor:t,view:o,tr:i,dispatch:s})=>{n=At({scrollIntoView:!0},n);const l=()=>{L()&&o.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(o.focus(),(null==n?void 0:n.scrollIntoView)&&t.commands.scrollIntoView())})};if(o.hasFocus()&&null===p||!1===p)return!0;if(s&&null===p&&!w(t.state.selection))return l(),!0;const u=Z(i.doc,p)||t.state.selection,h=t.state.selection.eq(u);return s&&(h||i.setSelection(u),h&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},forEach:(p,n)=>t=>p.every((o,i)=>n(o,xe(At({},t),{index:i}))),insertContent:(p,n)=>({tr:t,commands:o})=>o.insertContentAt({from:t.selection.from,to:t.selection.to},p,n),insertContentAt:(p,n,t)=>({tr:o,dispatch:i,editor:s})=>{if(i){t=At({parseOptions:{},updateSelection:!0},t);const l=ft(n,s.schema,{parseOptions:At({preserveWhitespace:"full"},t.parseOptions)});if("<>"===l.toString())return!0;let{from:u,to:h}="number"==typeof p?{from:p,to:p}:p,y=!0,A=!0;if(((p=>p.toString().startsWith("<"))(l)?l:[l]).forEach(F=>{F.check(),y=!!y&&F.isText&&0===F.marks.length,A=!!A&&F.isBlock}),u===h&&A){const{parent:F}=o.doc.resolve(u);F.isTextblock&&!F.type.spec.code&&!F.childCount&&(u-=1,h+=1)}y?Array.isArray(n)?o.insertText(n.map(F=>F.text||"").join(""),u,h):o.insertText("object"==typeof n&&n&&n.text?n.text:n,u,h):o.replaceWith(u,h,l),t.updateSelection&&kt(o,o.steps.length-1,-1)}return!0},joinUp:()=>({state:p,dispatch:n})=>((p,n)=>{let i,t=p.selection,o=t instanceof D.qv;if(o){if(t.node.isTextblock||!(0,dt.Mn)(p.doc,t.from))return!1;i=t.from}else if(i=(0,dt.GJ)(p.doc,t.from,-1),null==i)return!1;if(n){let s=p.tr.join(i);o&&s.setSelection(D.qv.create(s.doc,i-p.doc.resolve(i).nodeBefore.nodeSize)),n(s.scrollIntoView())}return!0})(p,n),joinDown:()=>({state:p,dispatch:n})=>((p,n)=>{let o,t=p.selection;if(t instanceof D.qv){if(t.node.isTextblock||!(0,dt.Mn)(p.doc,t.to))return!1;o=t.to}else if(o=(0,dt.GJ)(p.doc,t.to,1),null==o)return!1;return n&&n(p.tr.join(o).scrollIntoView()),!0})(p,n),joinBackward:()=>({state:p,dispatch:n})=>qt(p,n),joinForward:()=>({state:p,dispatch:n})=>Dt(p,n),keyboardShortcut:p=>({editor:n,view:t,tr:o,dispatch:i})=>{const s=function(p){const n=p.split(/-(?!$)/);let o,i,s,l,t=n[n.length-1];"Space"===t&&(t=" ");for(let u=0;u<n.length-1;u+=1){const h=n[u];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))o=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))s=!0;else{if(!/^mod$/i.test(h))throw new Error(`Unrecognized modifier name: ${h}`);L()||Ae()?l=!0:i=!0}}return o&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}(p).split(/-(?!$)/),l=s.find(y=>!["Alt","Ctrl","Meta","Shift"].includes(y)),u=new KeyboardEvent("keydown",{key:"Space"===l?" ":l,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),h=n.captureTransaction(()=>{t.someProp("handleKeyDown",y=>y(t,u))});return null==h||h.steps.forEach(y=>{const A=y.map(o.mapping);A&&i&&o.maybeStep(A)}),!0},lift:(p,n={})=>({state:t,dispatch:o})=>!!ee(t,X(p,t.schema),n)&&((p,n)=>{let{$from:t,$to:o}=p.selection,i=t.blockRange(o),s=i&&(0,dt.k9)(i);return null!=s&&(n&&n(p.tr.lift(i,s).scrollIntoView()),!0)})(t,o),liftEmptyBlock:()=>({state:p,dispatch:n})=>le(p,n),liftListItem:p=>({state:n,dispatch:t})=>function(p){return function(n,t){let{$from:o,$to:i}=n.selection,s=o.blockRange(i,l=>l.childCount>0&&l.firstChild.type==p);return!!s&&(!t||(o.node(s.depth-1).type==p?function(p,n,t,o){let i=p.tr,s=o.end,l=o.$to.end(o.depth);s<l&&(i.step(new dt.FC(s-1,l,s,l,new at.p2(at.HY.from(t.create(null,o.parent.copy())),1,0),1,!0)),o=new at.Ts(i.doc.resolve(o.$from.pos),i.doc.resolve(l),o.depth));const u=(0,dt.k9)(o);if(null==u)return!1;i.lift(o,u);let h=i.mapping.map(s,-1)-1;return(0,dt.Mn)(i.doc,h)&&i.join(h),n(i.scrollIntoView()),!0}(n,t,p,s):function(p,n,t){let o=p.tr,i=t.parent;for(let V=t.end,Q=t.endIndex-1,nt=t.startIndex;Q>nt;Q--)V-=i.child(Q).nodeSize,o.delete(V-1,V+1);let s=o.doc.resolve(t.start),l=s.nodeAfter;if(o.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let u=0==t.startIndex,h=t.endIndex==i.childCount,y=s.node(-1),A=s.index(-1);if(!y.canReplace(A+(u?0:1),A+1,l.content.append(h?at.HY.empty:at.HY.from(i))))return!1;let E=s.pos,F=E+l.nodeSize;return o.step(new dt.FC(E-(u?1:0),F+(h?1:0),E+1,F-1,new at.p2((u?at.HY.empty:at.HY.from(i.copy(at.HY.empty))).append(h?at.HY.empty:at.HY.from(i.copy(at.HY.empty))),u?0:1,h?0:1),u?0:1)),n(o.scrollIntoView()),!0}(n,t,s)))}}(X(p,n.schema))(n,t),newlineInCode:()=>({state:p,dispatch:n})=>Pt(p,n),resetAttributes:(p,n)=>({tr:t,state:o,dispatch:i})=>{let s=null,l=null;const u=Mn("string"==typeof p?p:p.name,o.schema);return!!u&&("node"===u&&(s=X(p,o.schema)),"mark"===u&&(l=m(p,o.schema)),i&&t.selection.ranges.forEach(h=>{o.doc.nodesBetween(h.$from.pos,h.$to.pos,(y,A)=>{s&&s===y.type&&t.setNodeMarkup(A,void 0,He(y.attrs,n)),l&&y.marks.length&&y.marks.forEach(E=>{l===E.type&&t.addMark(A,A+y.nodeSize,l.create(He(E.attrs,n)))})})}),!0)},scrollIntoView:()=>({tr:p,dispatch:n})=>(n&&p.scrollIntoView(),!0),selectAll:()=>({tr:p,commands:n})=>n.setTextSelection({from:0,to:p.doc.content.size}),selectNodeBackward:()=>({state:p,dispatch:n})=>Ne(p,n),selectNodeForward:()=>({state:p,dispatch:n})=>Mt(p,n),selectParentNode:()=>({state:p,dispatch:n})=>((p,n)=>{let i,{$from:t,to:o}=p.selection,s=t.sharedDepth(o);return 0!=s&&(i=t.before(s),n&&n(p.tr.setSelection(D.qv.create(p.doc,i))),!0)})(p,n),selectTextblockEnd:()=>({state:p,dispatch:n})=>Zt(p,n),selectTextblockStart:()=>({state:p,dispatch:n})=>St(p,n),setContent:(p,n=!1,t={})=>({tr:o,editor:i,dispatch:s})=>{const{doc:l}=o,u=Nn(p,i.schema,t);return s&&o.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!n),!0},setMark:(p,n={})=>({tr:t,state:o,dispatch:i})=>{const{selection:s}=t,{empty:l,ranges:u}=s,h=m(p,o.schema);if(i)if(l){const y=uo(o,h);t.addStoredMark(h.create(At(At({},y),n)))}else u.forEach(y=>{const A=y.$from.pos,E=y.$to.pos;o.doc.nodesBetween(A,E,(F,V)=>{const Q=Math.max(V,A),nt=Math.min(V+F.nodeSize,E);F.marks.find(Tt=>Tt.type===h)?F.marks.forEach(Tt=>{h===Tt.type&&t.addMark(Q,nt,h.create(At(At({},Tt.attrs),n)))}):t.addMark(Q,nt,h.create(n))})});return function(p,n,t){var o;const{selection:i}=n;let s=null;if(w(i)&&(s=i.$cursor),s){const u=null!==(o=p.storedMarks)&&void 0!==o?o:s.marks();return!!t.isInSet(u)||!u.some(h=>h.type.excludes(t))}const{ranges:l}=i;return l.some(({$from:u,$to:h})=>{let y=0===u.depth&&p.doc.inlineContent&&p.doc.type.allowsMarkType(t);return p.doc.nodesBetween(u.pos,h.pos,(A,E,F)=>{if(y)return!1;if(A.isInline){const V=!F||F.type.allowsMarkType(t),Q=!!t.isInSet(A.marks)||!A.marks.some(nt=>nt.type.excludes(t));y=V&&Q}return!y}),y})}(o,t,h)},setMeta:(p,n)=>({tr:t})=>(t.setMeta(p,n),!0),setNode:(p,n={})=>({state:t,dispatch:o,chain:i})=>{const s=X(p,t.schema);return s.isTextblock?i().command(({commands:l})=>!!jt(s,n)(t)||l.clearNodes()).command(({state:l})=>jt(s,n)(l,o)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:p=>({tr:n,dispatch:t})=>{if(t){const{doc:o}=n,i=N(p,0,o.content.size),s=D.qv.create(o,i);n.setSelection(s)}return!0},setTextSelection:p=>({tr:n,dispatch:t})=>{if(t){const{doc:o}=n,{from:i,to:s}="number"==typeof p?{from:p,to:p}:p,l=D.Bs.atStart(o).from,u=D.Bs.atEnd(o).to,h=N(i,l,u),y=N(s,l,u),A=D.Bs.create(o,h,y);n.setSelection(A)}return!0},sinkListItem:p=>({state:n,dispatch:t})=>function(p){return function(n,t){let{$from:o,$to:i}=n.selection,s=o.blockRange(i,y=>y.childCount>0&&y.firstChild.type==p);if(!s)return!1;let l=s.startIndex;if(0==l)return!1;let u=s.parent,h=u.child(l-1);if(h.type!=p)return!1;if(t){let y=h.lastChild&&h.lastChild.type==u.type,A=at.HY.from(y?p.create():null),E=new at.p2(at.HY.from(p.create(null,at.HY.from(u.type.create(null,A)))),y?3:1,0),F=s.start,V=s.end;t(n.tr.step(new dt.FC(F-(y?3:1),V,F,V,E,1,!0)).scrollIntoView())}return!0}}(X(p,n.schema))(n,t),splitBlock:({keepMarks:p=!0}={})=>({tr:n,state:t,dispatch:o,editor:i})=>{const{selection:s,doc:l}=n,{$from:u,$to:h}=s,A=Tn(i.extensionManager.attributes,u.node().type.name,u.node().attrs);if(s instanceof D.qv&&s.node.isBlock)return!(!u.parentOffset||!(0,dt.Ax)(l,u.pos)||(o&&(p&&on(t,i.extensionManager.splittableMarks),n.split(u.pos).scrollIntoView()),0));if(!u.parent.isBlock)return!1;if(o){const E=h.parentOffset===h.parent.content.size;s instanceof D.Bs&&n.deleteSelection();const F=0===u.depth?void 0:zo(u.node(-1).contentMatchAt(u.indexAfter(-1)));let V=E&&F?[{type:F,attrs:A}]:void 0,Q=(0,dt.Ax)(n.doc,n.mapping.map(u.pos),1,V);if(!V&&!Q&&(0,dt.Ax)(n.doc,n.mapping.map(u.pos),1,F?[{type:F}]:void 0)&&(Q=!0,V=F?[{type:F,attrs:A}]:void 0),Q&&(n.split(n.mapping.map(u.pos),1,V),F&&!E&&!u.parentOffset&&u.parent.type!==F)){const nt=n.mapping.map(u.before()),mt=n.doc.resolve(nt);u.node(-1).canReplaceWith(mt.index(),mt.index()+1,F)&&n.setNodeMarkup(n.mapping.map(u.before()),F)}p&&on(t,i.extensionManager.splittableMarks),n.scrollIntoView()}return!0},splitListItem:p=>({tr:n,state:t,dispatch:o,editor:i})=>{var s;const l=X(p,t.schema),{$from:u,$to:h}=t.selection,y=t.selection.node;if(y&&y.isBlock||u.depth<2||!u.sameParent(h))return!1;const A=u.node(-1);if(A.type!==l)return!1;const E=i.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(o){let mt=at.HY.empty;const Tt=u.index(-1)?1:u.index(-2)?2:3;for(let xn=u.depth-Tt;xn>=u.depth-3;xn-=1)mt=at.HY.from(u.node(xn).copy(mt));const Kt=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,Oe=Tn(E,u.node().type.name,u.node().attrs),ze=(null===(s=l.contentMatch.defaultType)||void 0===s?void 0:s.createAndFill(Oe))||void 0;mt=mt.append(at.HY.from(l.createAndFill(null,ze)||void 0));const Ke=u.before(u.depth-(Tt-1));n.replace(Ke,u.after(-Kt),new at.p2(mt,4-Tt,0));let Fe=-1;n.doc.nodesBetween(Ke,n.doc.content.size,(xn,Yn)=>{if(Fe>-1)return!1;xn.isTextblock&&0===xn.content.size&&(Fe=Yn+1)}),Fe>-1&&n.setSelection(D.Bs.near(n.doc.resolve(Fe))),n.scrollIntoView()}return!0}const F=h.pos===u.end()?A.contentMatchAt(0).defaultType:null,V=Tn(E,A.type.name,A.attrs),Q=Tn(E,u.node().type.name,u.node().attrs);n.delete(u.pos,h.pos);const nt=F?[{type:l,attrs:V},{type:F,attrs:Q}]:[{type:l,attrs:V}];if(!(0,dt.Ax)(n.doc,u.pos,2))return!1;if(o){const{selection:mt,storedMarks:Tt}=t,{splittableMarks:Kt}=i.extensionManager,Oe=Tt||mt.$to.parentOffset&&mt.$from.marks();if(n.split(u.pos,2,nt).scrollIntoView(),!Oe||!o)return!0;const ze=Oe.filter(Ke=>Kt.includes(Ke.type.name));n.ensureMarks(ze)}return!0},toggleList:(p,n,t,o={})=>({editor:i,tr:s,state:l,dispatch:u,chain:h,commands:y,can:A})=>{const{extensions:E,splittableMarks:F}=i.extensionManager,V=X(p,l.schema),Q=X(n,l.schema),{selection:nt,storedMarks:mt}=l,{$from:Tt,$to:Kt}=nt,Oe=Tt.blockRange(Kt),ze=mt||nt.$to.parentOffset&&nt.$from.marks();if(!Oe)return!1;const Ke=Gn(Fe=>Fn(Fe.type.name,E))(nt);if(Oe.depth>=1&&Ke&&Oe.depth-Ke.depth<=1){if(Ke.node.type===V)return y.liftListItem(Q);if(Fn(Ke.node.type.name,E)&&V.validContent(Ke.node.content)&&u)return h().command(()=>(s.setNodeMarkup(Ke.pos,V),!0)).command(()=>io(s,V)).command(()=>go(s,V)).run()}return t&&ze&&u?h().command(()=>{const Fe=A().wrapInList(V,o),xn=ze.filter(Yn=>F.includes(Yn.type.name));return s.ensureMarks(xn),!!Fe||y.clearNodes()}).wrapInList(V,o).command(()=>io(s,V)).command(()=>go(s,V)).run():h().command(()=>!!A().wrapInList(V,o)||y.clearNodes()).wrapInList(V,o).command(()=>io(s,V)).command(()=>go(s,V)).run()},toggleMark:(p,n={},t={})=>({state:o,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,l=m(p,o.schema);return oo(o,l,n)?i.unsetMark(l,{extendEmptyMarkRange:s}):i.setMark(l,n)},toggleNode:(p,n,t={})=>({state:o,commands:i})=>{const s=X(p,o.schema),l=X(n,o.schema);return ee(o,s,t)?i.setNode(l):i.setNode(s,t)},toggleWrap:(p,n={})=>({state:t,commands:o})=>{const i=X(p,t.schema);return ee(t,i,n)?o.lift(i):o.wrapIn(i,n)},undoInputRule:()=>({state:p,dispatch:n})=>{const t=p.plugins;for(let o=0;o<t.length;o+=1){const i=t[o];let s;if(i.spec.isInputRules&&(s=i.getState(p))){if(n){const l=p.tr,u=s.transform;for(let h=u.steps.length-1;h>=0;h-=1)l.step(u.steps[h].invert(u.docs[h]));if(s.text){const h=l.doc.resolve(s.from).marks();l.replaceWith(s.from,s.to,p.schema.text(s.text,h))}else l.delete(s.from,s.to)}return!0}}return!1},unsetAllMarks:()=>({tr:p,dispatch:n})=>{const{selection:t}=p,{empty:o,ranges:i}=t;return o||n&&i.forEach(s=>{p.removeMark(s.$from.pos,s.$to.pos)}),!0},unsetMark:(p,n={})=>({tr:t,state:o,dispatch:i})=>{var s;const{extendEmptyMarkRange:l=!1}=n,{selection:u}=t,h=m(p,o.schema),{$from:y,empty:A,ranges:E}=u;if(!i)return!0;if(A&&l){let{from:F,to:V}=u;const Q=null===(s=y.marks().find(mt=>mt.type===h))||void 0===s?void 0:s.attrs,nt=_(y,h,Q);nt&&(F=nt.from,V=nt.to),t.removeMark(F,V,h)}else E.forEach(F=>{t.removeMark(F.$from.pos,F.$to.pos,h)});return t.removeStoredMark(h),!0},updateAttributes:(p,n={})=>({tr:t,state:o,dispatch:i})=>{let s=null,l=null;const u=Mn("string"==typeof p?p:p.name,o.schema);return!!u&&("node"===u&&(s=X(p,o.schema)),"mark"===u&&(l=m(p,o.schema)),i&&t.selection.ranges.forEach(h=>{const y=h.$from.pos,A=h.$to.pos;o.doc.nodesBetween(y,A,(E,F)=>{s&&s===E.type&&t.setNodeMarkup(F,void 0,At(At({},E.attrs),n)),l&&E.marks.length&&E.marks.forEach(V=>{if(l===V.type){const Q=Math.max(F,y),nt=Math.min(F+E.nodeSize,A);t.addMark(Q,nt,l.create(At(At({},V.attrs),n)))}})})}),!0)},wrapIn:(p,n={})=>({state:t,dispatch:o})=>function(p,n=null){return function(t,o){let{$from:i,$to:s}=t.selection,l=i.blockRange(s),u=l&&(0,dt.nd)(l,p,n);return!!u&&(o&&o(t.tr.wrap(l,u).scrollIntoView()),!0)}}(X(p,t.schema),n)(t,o),wrapInList:(p,n={})=>({state:t,dispatch:o})=>function(p,n=null){return function(t,o){let{$from:i,$to:s}=t.selection,l=i.blockRange(s),u=!1,h=l;if(!l)return!1;if(l.depth>=2&&i.node(l.depth-1).type.compatibleContent(p)&&0==l.startIndex){if(0==i.index(l.depth-1))return!1;let A=t.doc.resolve(l.start-2);h=new at.Ts(A,A,l.depth),l.endIndex<l.parent.childCount&&(l=new at.Ts(i,t.doc.resolve(s.end(l.depth)),l.depth)),u=!0}let y=(0,dt.nd)(h,p,n,l);return!!y&&(o&&o(function(p,n,t,o,i){let s=at.HY.empty;for(let A=t.length-1;A>=0;A--)s=at.HY.from(t[A].type.create(t[A].attrs,s));p.step(new dt.FC(n.start-(o?2:0),n.end,n.start,n.end,new at.p2(s,0,0),t.length,!0));let l=0;for(let A=0;A<t.length;A++)t[A].type==i&&(l=A+1);let u=t.length-l,h=n.start+t.length-(o?2:0),y=n.parent;for(let A=n.startIndex,E=n.endIndex,F=!0;A<E;A++,F=!1)!F&&(0,dt.Ax)(p.doc,h,u)&&(p.split(h,u),h+=2*u),h+=y.child(A).nodeSize;return p}(t.tr,l,y,u,p).scrollIntoView()),!0)}}(X(p,t.schema),n)(t,o)});const Ao=ce.create({name:"commands",addCommands:()=>At({},Vo)}),Oo=ce.create({name:"editable",addProseMirrorPlugins(){return[new D.Sy({key:new D.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Yo=ce.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:p}=this;return[new D.Sy({key:new D.H$("focusEvents"),props:{handleDOMEvents:{focus:(n,t)=>{p.isFocused=!0;const o=p.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return n.dispatch(o),!1},blur:(n,t)=>{p.isFocused=!1;const o=p.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return n.dispatch(o),!1}}}})]}}),Wo=ce.create({name:"keymap",addKeyboardShortcuts(){const p=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:h,doc:y}=u,{empty:A,$anchor:E}=h,{pos:F,parent:V}=E,Q=D.Y1.atStart(y).from===F;return!(!(A&&Q&&V.type.isTextblock)||V.textContent.length)&&l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),n=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),o={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:p,"Mod-Backspace":p,"Shift-Backspace":p,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},i=At({},o),s=xe(At({},o),{"Ctrl-h":p,"Alt-Backspace":p,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return L()||Ae()?s:i},addProseMirrorPlugins(){return[new D.Sy({key:new D.H$("clearDocument"),appendTransaction:(p,n,t)=>{if(!p.some(Q=>Q.docChanged)||n.doc.eq(t.doc))return;const{empty:i,from:s,to:l}=n.selection,u=D.Y1.atStart(n.doc).from,h=D.Y1.atEnd(n.doc).to;if(i||s!==u||l!==h||0!==t.doc.textBetween(0,t.doc.content.size," "," ").length)return;const E=t.tr,F=Y({state:t,transaction:E}),{commands:V}=new k({editor:this.editor,state:F});return V.clearNodes(),E.steps.length?E:void 0}})]}}),Qo=ce.create({name:"tabindex",addProseMirrorPlugins(){return[new D.Sy({key:new D.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Eo=Object.freeze({__proto__:null,ClipboardTextSerializer:fn,Commands:Ao,Editable:Oo,FocusEvents:Yo,Keymap:Wo,Tabindex:Qo});function Io(p,n){const t=document.querySelector("style[data-tiptap-style]");if(null!==t)return t;const o=document.createElement("style");return n&&o.setAttribute("nonce",n),o.setAttribute("data-tiptap-style",""),o.innerHTML=p,document.getElementsByTagName("head")[0].appendChild(o),o}class No extends class{constructor(){this.callbacks={}}on(n,t){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(t),this}emit(n,...t){const o=this.callbacks[n];return o&&o.forEach(i=>i.apply(this,t)),this}off(n,t){const o=this.callbacks[n];return o&&(t?this.callbacks[n]=o.filter(i=>i!==t):delete this.callbacks[n]),this}removeAllListeners(){this.callbacks={}}}{constructor(n={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Io('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(n={}){this.options=At(At({},this.options),n),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,t=!0){this.setOptions({editable:n}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(n,t){const o=R(t)?t(n,[...this.state.plugins]):[...this.state.plugins,n],i=this.state.reconfigure({plugins:o});this.view.updateState(i)}unregisterPlugin(n){if(this.isDestroyed)return;const t="string"==typeof n?`${n}$`:n.key,o=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(o)}createExtensionManager(){const t=[...this.options.enableCoreExtensions?Object.values(Eo):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(null==o?void 0:o.type));this.extensionManager=new te(t,this)}createCommandManager(){this.commandManager=new k({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const n=Nn(this.options.content,this.schema,this.options.parseOptions),t=Z(n,this.options.autofocus);this.view=new gt.tk(this.options.element,xe(At({},this.options.editorProps),{dispatchTransaction:this.dispatchTransaction.bind(this),state:D.yy.create({doc:n,selection:t||void 0})}));const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void n.steps.forEach(l=>{var u;return null===(u=this.capturedTransaction)||void 0===u?void 0:u.step(l)}):void(this.capturedTransaction=n);const t=this.state.apply(n),o=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:n}),o&&this.emit("selectionUpdate",{editor:this,transaction:n});const i=n.getMeta("focus"),s=n.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:n}),s&&this.emit("blur",{editor:this,event:s.event,transaction:n}),n.docChanged&&!n.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:n})}getAttributes(n){return To(this.state,n)}isActive(n,t){return vo(this.state,"string"==typeof n?n:null,"string"==typeof n?t:n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return co(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:t="\n\n",textSerializers:o={}}=n||{};return Xn(this.state.doc,{blockSeparator:t,textSerializers:At(At({},Be(this.schema)),o)})}get isEmpty(){return ko(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var n;return!(null===(n=this.view)||void 0===n?void 0:n.docView)}}function Go(p){return new De({find:p.find,handler:({state:n,range:t,match:o})=>{const i=a(p.getAttributes,void 0,o);if(!1===i||null===i)return null;const{tr:s}=n,l=o[o.length-1],u=o[0];let h=t.to;if(l){const y=u.search(/\S/),A=t.from+u.indexOf(l),E=A+l.length;if(fo(t.from,t.to,n.doc).filter(V=>V.mark.type.excluded.find(nt=>nt===p.type&&nt!==V.mark.type)).filter(V=>V.to>A).length)return null;E<t.to&&s.delete(E,t.to),A>t.from&&s.delete(t.from+y,A),h=t.from+y+l.length,s.addMark(t.from+y,h,p.type.create(i||{})),s.removeStoredMark(p.type)}}})}function qo(p){return new De({find:p.find,handler:({state:n,range:t,match:o})=>{const i=a(p.getAttributes,void 0,o)||{},{tr:s}=n,l=t.from;let u=t.to;if(o[1]){let y=l+o[0].lastIndexOf(o[1]);y>u?y=u:u=y+o[1].length,s.insertText(o[0][o[0].length-1],l+o[0].length-1),s.replaceWith(y,u,p.type.create(i))}else o[0]&&s.replaceWith(l,u,p.type.create(i))}})}function yo(p){return new De({find:p.find,handler:({state:n,range:t,match:o})=>{const i=n.doc.resolve(t.from),s=a(p.getAttributes,void 0,o)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),p.type))return null;n.tr.delete(t.from,t.to).setBlockType(t.from,t.from,p.type,s)}})}function Xo(p){return new De({find:p.find,handler:({state:n,range:t,match:o})=>{let i=p.replace,s=t.from;const l=t.to;if(o[1]){const u=o[0].lastIndexOf(o[1]);i+=o[0].slice(u+o[1].length),s+=u;const h=s-l;h>0&&(i=o[0].slice(u-h,u)+i,s=l)}n.tr.insertText(i,s,l)}})}function si(p){return new De({find:p.find,handler:({state:n,range:t,match:o,chain:i})=>{const s=a(p.getAttributes,void 0,o)||{},l=n.tr.delete(t.from,t.to),h=l.doc.resolve(t.from).blockRange(),y=h&&(0,dt.nd)(h,p.type,s);if(!y)return null;if(l.wrap(h,y),p.keepMarks&&p.editor){const{selection:E,storedMarks:F}=n,{splittableMarks:V}=p.editor.extensionManager,Q=F||E.$to.parentOffset&&E.$from.marks();if(Q){const nt=Q.filter(mt=>V.includes(mt.type.name));l.ensureMarks(nt)}}if(p.keepAttributes){const E="bulletList"===p.type.name||"orderedList"===p.type.name?"listItem":"taskList";i().updateAttributes(E,s).run()}const A=l.doc.resolve(t.from-1).nodeBefore;A&&A.type===p.type&&(0,dt.Mn)(l.doc,t.from-1)&&(!p.joinPredicate||p.joinPredicate(o,A))&&l.join(t.from-1)}})}class ro{constructor(n={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=At(At({},this.config),n),this.name=this.config.name,n.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(x(this,"addOptions",{name:this.name}))),this.storage=a(x(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new ro(n)}configure(n={}){const t=this.extend();return t.options=he(this.options,n),t.storage=a(x(t,"addStorage",{name:t.name,options:t.options})),t}extend(n={}){const t=new ro(n);return t.parent=this,this.child=t,t.name=n.name?n.name:t.parent.name,n.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=a(x(t,"addOptions",{name:t.name})),t.storage=a(x(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:n,mark:t}){const{tr:o}=n.state,i=n.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!l.find(y=>(null==y?void 0:y.type.name)===t.name))return!1;const h=l.find(y=>(null==y?void 0:y.type.name)===t.name);return h&&o.removeStoredMark(h),o.insertText(" ",i.pos),n.view.dispatch(o),!0}return!1}}class _o{constructor(n={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=At(At({},this.config),n),this.name=this.config.name,n.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=a(x(this,"addOptions",{name:this.name}))),this.storage=a(x(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(n={}){return new _o(n)}configure(n={}){const t=this.extend();return t.options=he(this.options,n),t.storage=a(x(t,"addStorage",{name:t.name,options:t.options})),t}extend(n={}){const t=new _o(n);return t.parent=this,this.child=t,t.name=n.name?n.name:t.parent.name,n.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=a(x(t,"addOptions",{name:t.name})),t.storage=a(x(t,"addStorage",{name:t.name,options:t.options})),t}}class Sn{constructor(n,t,o){this.isDragging=!1,this.component=n,this.editor=t.editor,this.options=At({stopEvent:null,ignoreMutation:null},o),this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(n){var t,o,i,s,l,u,h;const{view:y}=this.editor,A=n.target,E=3===A.nodeType?null===(t=A.parentElement)||void 0===t?void 0:t.closest("[data-drag-handle]"):A.closest("[data-drag-handle]");if(!this.dom||(null===(o=this.contentDOM)||void 0===o?void 0:o.contains(A))||!E)return;let F=0,V=0;if(this.dom!==E){const mt=this.dom.getBoundingClientRect(),Tt=E.getBoundingClientRect(),Kt=null!==(i=n.offsetX)&&void 0!==i?i:null===(s=n.nativeEvent)||void 0===s?void 0:s.offsetX,Oe=null!==(l=n.offsetY)&&void 0!==l?l:null===(u=n.nativeEvent)||void 0===u?void 0:u.offsetY;F=Tt.x-mt.x+Kt,V=Tt.y-mt.y+Oe}null===(h=n.dataTransfer)||void 0===h||h.setDragImage(this.dom,F,V);const Q=D.qv.create(y.state.doc,this.getPos()),nt=y.state.tr.setSelection(Q);y.dispatch(nt)}stopEvent(n){var t;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:n});const o=n.target;if(!this.dom.contains(o)||(null===(t=this.contentDOM)||void 0===t?void 0:t.contains(o)))return!1;const s=n.type.startsWith("drag"),l="drop"===n.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(o.tagName)||o.isContentEditable)&&!l&&!s)return!0;const{isEditable:h}=this.editor,{isDragging:y}=this,A=!!this.node.type.spec.draggable,E=D.qv.isSelectable(this.node),F="copy"===n.type,V="paste"===n.type,Q="cut"===n.type,nt="mousedown"===n.type;if(!A&&E&&s&&n.preventDefault(),A&&s&&!y)return n.preventDefault(),!1;if(A&&h&&!y&&nt){const mt=o.closest("[data-drag-handle]");mt&&(this.dom===mt||this.dom.contains(mt))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(y||l||F||V||Q||nt&&E)}ignoreMutation(n){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:n}):!(!this.node.isLeaf&&!this.node.isAtom&&("selection"===n.type||this.dom.contains(n.target)&&"childList"===n.type&&L()&&this.editor.isFocused&&[...Array.from(n.addedNodes),...Array.from(n.removedNodes)].every(o=>o.isContentEditable)||(this.contentDOM!==n.target||"attributes"!==n.type)&&this.contentDOM.contains(n.target))))}updateAttributes(n){this.editor.commands.command(({tr:t})=>{const o=this.getPos();return t.setNodeMarkup(o,void 0,At(At({},this.node.attrs),n)),!0})}deleteNode(){const n=this.getPos();this.editor.commands.deleteRange({from:n,to:n+this.node.nodeSize})}}function Do(p){return new ot({find:p.find,handler:({state:n,range:t,match:o})=>{const i=a(p.getAttributes,void 0,o);if(!1===i||null===i)return null;const{tr:s}=n,l=o[o.length-1],u=o[0];let h=t.to;if(l){const y=u.search(/\S/),A=t.from+u.indexOf(l),E=A+l.length;if(fo(t.from,t.to,n.doc).filter(V=>V.mark.type.excluded.find(nt=>nt===p.type&&nt!==V.mark.type)).filter(V=>V.to>A).length)return null;E<t.to&&s.delete(E,t.to),A>t.from&&s.delete(t.from+y,A),h=t.from+y+l.length,s.addMark(t.from+y,h,p.type.create(i||{})),s.removeStoredMark(p.type)}}})}function Po(p){return p.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Lo(p){return"string"==typeof p}function ti(p){return new ot({find:p.find,handler({match:n,chain:t,range:o}){const i=a(p.getAttributes,void 0,n);if(!1===i||null===i)return null;n.input&&t().deleteRange(o).insertContentAt(o.from,{type:p.type.name,attrs:i})}})}function Ro(p){return new ot({find:p.find,handler:({state:n,range:t,match:o})=>{let i=p.replace,s=t.from;const l=t.to;if(o[1]){const u=o[0].lastIndexOf(o[1]);i+=o[0].slice(u+o[1].length),s+=u;const h=s-l;h>0&&(i=o[0].slice(u-h,u)+i,s=l)}n.tr.insertText(i,s,l)}})}class ei{constructor(n){this.transaction=n,this.currentStep=this.transaction.steps.length}map(n){let t=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((i,s)=>{const l=s.getMap().mapResult(i);return l.deleted&&(t=!0),l.pos},n),deleted:t}}}},4632:(be,zt,j)=>{j.r(zt),j.d(zt,{Image:()=>Ht,default:()=>Ht,inputRegex:()=>gt});var D=j(1046);const gt=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Ht=D.Node.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:at}){return["img",(0,D.mergeAttributes)(this.options.HTMLAttributes,at)]},addCommands(){return{setImage:at=>({commands:dt})=>dt.insertContent({type:this.name,attrs:at})}},addInputRules(){return[(0,D.nodeInputRule)({find:gt,type:this.type,getAttributes:at=>{const[,,dt,re,Xt]=at;return{src:re,alt:dt,title:Xt}}})]}})},4402:(be,zt,j)=>{j.r(zt),j.d(zt,{TextStyle:()=>gt,default:()=>gt});var D=j(1046);const gt=D.Mark.create({name:"textStyle",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:Ht=>!!Ht.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:Ht}){return["span",(0,D.mergeAttributes)(this.options.HTMLAttributes,Ht),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:Ht,commands:at})=>{const dt=(0,D.getMarkAttributes)(Ht,this.type);return!!Object.entries(dt).some(([,Xt])=>!!Xt)||at.unsetMark(this.name)}}}})},1690:(be,zt,j)=>{j.d(zt,{$:()=>se,h:()=>Ne});for(var D={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gt={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ht="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),at="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),dt=0;dt<10;dt++)D[48+dt]=D[96+dt]=String(dt);for(dt=1;dt<=24;dt++)D[dt+111]="F"+dt;for(dt=65;dt<=90;dt++)D[dt]=String.fromCharCode(dt+32),gt[dt]=String.fromCharCode(dt);for(var re in D)gt.hasOwnProperty(re)||(gt[re]=D[re]);var qt=j(2463);const Rt="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function ae(Nt){let Bt,Lt,xt,Jt,Dt=Nt.split(/-(?!$)/),Mt=Dt[Dt.length-1];"Space"==Mt&&(Mt=" ");for(let Pt=0;Pt<Dt.length-1;Pt++){let pt=Dt[Pt];if(/^(cmd|meta|m)$/i.test(pt))Jt=!0;else if(/^a(lt)?$/i.test(pt))Bt=!0;else if(/^(c|ctrl|control)$/i.test(pt))Lt=!0;else if(/^s(hift)?$/i.test(pt))xt=!0;else{if(!/^mod$/i.test(pt))throw new Error("Unrecognized modifier name: "+pt);Rt?Jt=!0:Lt=!0}}return Bt&&(Mt="Alt-"+Mt),Lt&&(Mt="Ctrl-"+Mt),Jt&&(Mt="Meta-"+Mt),xt&&(Mt="Shift-"+Mt),Mt}function e(Nt,Dt,Mt=!0){return Dt.altKey&&(Nt="Alt-"+Nt),Dt.ctrlKey&&(Nt="Ctrl-"+Nt),Dt.metaKey&&(Nt="Meta-"+Nt),Mt&&Dt.shiftKey&&(Nt="Shift-"+Nt),Nt}function Ne(Nt){return new qt.Sy({props:{handleKeyDown:se(Nt)}})}function se(Nt){let Dt=function(Nt){let Dt=Object.create(null);for(let Mt in Nt)Dt[ae(Mt)]=Nt[Mt];return Dt}(Nt);return function(Mt,Bt){let xt,Lt=function(Nt){var Mt=!(Ht&&Nt.metaKey&&Nt.shiftKey&&!Nt.ctrlKey&&!Nt.altKey||at&&Nt.shiftKey&&Nt.key&&1==Nt.key.length||"Unidentified"==Nt.key)&&Nt.key||(Nt.shiftKey?gt:D)[Nt.keyCode]||Nt.key||"Unidentified";return"Esc"==Mt&&(Mt="Escape"),"Del"==Mt&&(Mt="Delete"),"Left"==Mt&&(Mt="ArrowLeft"),"Up"==Mt&&(Mt="ArrowUp"),"Right"==Mt&&(Mt="ArrowRight"),"Down"==Mt&&(Mt="ArrowDown"),Mt}(Bt),Jt=Dt[e(Lt,Bt)];if(Jt&&Jt(Mt.state,Mt.dispatch,Mt))return!0;if(1==Lt.length&&" "!=Lt){if(Bt.shiftKey){let Pt=Dt[e(Lt,Bt,!1)];if(Pt&&Pt(Mt.state,Mt.dispatch,Mt))return!0}if((Bt.shiftKey||Bt.altKey||Bt.metaKey||Lt.charCodeAt(0)>127)&&(xt=D[Bt.keyCode])&&xt!=Lt){let Pt=Dt[e(xt,Bt)];if(Pt&&Pt(Mt.state,Mt.dispatch,Mt))return!0}}return!1}}},7439:(be,zt,j)=>{function D(R){this.content=R}j.d(zt,{aw:()=>ke,PW:()=>X,HY:()=>dt,vc:()=>Rt,ZU:()=>_e,NB:()=>ht,Ts:()=>vt,e4:()=>ae,V_:()=>Ve,p2:()=>Gt}),D.prototype={constructor:D,find:function(R){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===R)return a;return-1},get:function(R){var a=this.find(R);return-1==a?void 0:this.content[a+1]},update:function(R,a,d){var C=d&&d!=R?this.remove(d):this,S=C.find(R),I=C.content.slice();return-1==S?I.push(d||R,a):(I[S+1]=a,d&&(I[S]=d)),new D(I)},remove:function(R){var a=this.find(R);if(-1==a)return this;var d=this.content.slice();return d.splice(a,2),new D(d)},addToStart:function(R,a){return new D([R,a].concat(this.remove(R).content))},addToEnd:function(R,a){var d=this.remove(R).content.slice();return d.push(R,a),new D(d)},addBefore:function(R,a,d){var C=this.remove(a),S=C.content.slice(),I=C.find(R);return S.splice(-1==I?S.length:I,0,a,d),new D(S)},forEach:function(R){for(var a=0;a<this.content.length;a+=2)R(this.content[a],this.content[a+1])},prepend:function(R){return(R=D.from(R)).size?new D(R.content.concat(this.subtract(R).content)):this},append:function(R){return(R=D.from(R)).size?new D(this.subtract(R).content.concat(R.content)):this},subtract:function(R){var a=this;R=D.from(R);for(var d=0;d<R.content.length;d+=2)a=a.remove(R.content[d]);return a},toObject:function(){var R={};return this.forEach(function(a,d){R[a]=d}),R},get size(){return this.content.length>>1}},D.from=function(R){if(R instanceof D)return R;var a=[];if(R)for(var d in R)a.push(d,R[d]);return new D(a)};const gt=D;function Ht(R,a,d){for(let C=0;;C++){if(C==R.childCount||C==a.childCount)return R.childCount==a.childCount?null:d;let S=R.child(C),I=a.child(C);if(S!=I){if(!S.sameMarkup(I))return d;if(S.isText&&S.text!=I.text){for(let H=0;S.text[H]==I.text[H];H++)d++;return d}if(S.content.size||I.content.size){let H=Ht(S.content,I.content,d+1);if(null!=H)return H}d+=S.nodeSize}else d+=S.nodeSize}}function at(R,a,d,C){for(let S=R.childCount,I=a.childCount;;){if(0==S||0==I)return S==I?null:{a:d,b:C};let H=R.child(--S),K=a.child(--I),lt=H.nodeSize;if(H!=K){if(!H.sameMarkup(K))return{a:d,b:C};if(H.isText&&H.text!=K.text){let It=0,Et=Math.min(H.text.length,K.text.length);for(;It<Et&&H.text[H.text.length-It-1]==K.text[K.text.length-It-1];)It++,d--,C--;return{a:d,b:C}}if(H.content.size||K.content.size){let It=at(H.content,K.content,d-1,C-1);if(It)return It}d-=lt,C-=lt}else d-=lt,C-=lt}}class dt{constructor(a,d){if(this.content=a,this.size=d||0,null==d)for(let C=0;C<a.length;C++)this.size+=a[C].nodeSize}nodesBetween(a,d,C,S=0,I){for(let H=0,K=0;K<d;H++){let lt=this.content[H],It=K+lt.nodeSize;if(It>a&&!1!==C(lt,S+K,I||null,H)&&lt.content.size){let Et=K+1;lt.nodesBetween(Math.max(0,a-Et),Math.min(lt.content.size,d-Et),C,S+Et)}K=It}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,d,C,S){let I="",H=!0;return this.nodesBetween(a,d,(K,lt)=>{K.isText?(I+=K.text.slice(Math.max(a,lt)-lt,d-lt),H=!C):K.isLeaf?(S?I+="function"==typeof S?S(K):S:K.type.spec.leafText&&(I+=K.type.spec.leafText(K)),H=!C):!H&&K.isBlock&&(I+=C,H=!0)},0),I}append(a){if(!a.size)return this;if(!this.size)return a;let d=this.lastChild,C=a.firstChild,S=this.content.slice(),I=0;for(d.isText&&d.sameMarkup(C)&&(S[S.length-1]=d.withText(d.text+C.text),I=1);I<a.content.length;I++)S.push(a.content[I]);return new dt(S,this.size+a.size)}cut(a,d=this.size){if(0==a&&d==this.size)return this;let C=[],S=0;if(d>a)for(let I=0,H=0;H<d;I++){let K=this.content[I],lt=H+K.nodeSize;lt>a&&((H<a||lt>d)&&(K=K.isText?K.cut(Math.max(0,a-H),Math.min(K.text.length,d-H)):K.cut(Math.max(0,a-H-1),Math.min(K.content.size,d-H-1))),C.push(K),S+=K.nodeSize),H=lt}return new dt(C,S)}cutByIndex(a,d){return a==d?dt.empty:0==a&&d==this.content.length?this:new dt(this.content.slice(a,d))}replaceChild(a,d){let C=this.content[a];if(C==d)return this;let S=this.content.slice(),I=this.size+d.nodeSize-C.nodeSize;return S[a]=d,new dt(S,I)}addToStart(a){return new dt([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new dt(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let d=0;d<this.content.length;d++)if(!this.content[d].eq(a.content[d]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let d=this.content[a];if(!d)throw new RangeError("Index "+a+" out of range for "+this);return d}maybeChild(a){return this.content[a]||null}forEach(a){for(let d=0,C=0;d<this.content.length;d++){let S=this.content[d];a(S,C,d),C+=S.nodeSize}}findDiffStart(a,d=0){return Ht(this,a,d)}findDiffEnd(a,d=this.size,C=a.size){return at(this,a,d,C)}findIndex(a,d=-1){if(0==a)return Xt(0,a);if(a==this.size)return Xt(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let C=0,S=0;;C++){let H=S+this.child(C).nodeSize;if(H>=a)return H==a||d>0?Xt(C+1,H):Xt(C,S);S=H}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,d){if(!d)return dt.empty;if(!Array.isArray(d))throw new RangeError("Invalid input for Fragment.fromJSON");return new dt(d.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return dt.empty;let d,C=0;for(let S=0;S<a.length;S++){let I=a[S];C+=I.nodeSize,S&&I.isText&&a[S-1].sameMarkup(I)?(d||(d=a.slice(0,S)),d[d.length-1]=I.withText(d[d.length-1].text+I.text)):d&&d.push(I)}return new dt(d||a,C)}static from(a){if(!a)return dt.empty;if(a instanceof dt)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new dt([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}dt.empty=new dt([],0);const re={index:0,offset:0};function Xt(R,a){return re.index=R,re.offset=a,re}function qt(R,a){if(R===a)return!0;if(!R||"object"!=typeof R||!a||"object"!=typeof a)return!1;let d=Array.isArray(R);if(Array.isArray(a)!=d)return!1;if(d){if(R.length!=a.length)return!1;for(let C=0;C<R.length;C++)if(!qt(R[C],a[C]))return!1}else{for(let C in R)if(!(C in a)||!qt(R[C],a[C]))return!1;for(let C in a)if(!(C in R))return!1}return!0}let Rt=(()=>{class R{constructor(d,C){this.type=d,this.attrs=C}addToSet(d){let C,S=!1;for(let I=0;I<d.length;I++){let H=d[I];if(this.eq(H))return d;if(this.type.excludes(H.type))C||(C=d.slice(0,I));else{if(H.type.excludes(this.type))return d;!S&&H.type.rank>this.type.rank&&(C||(C=d.slice(0,I)),C.push(this),S=!0),C&&C.push(H)}}return C||(C=d.slice()),S||C.push(this),C}removeFromSet(d){for(let C=0;C<d.length;C++)if(this.eq(d[C]))return d.slice(0,C).concat(d.slice(C+1));return d}isInSet(d){for(let C=0;C<d.length;C++)if(this.eq(d[C]))return!0;return!1}eq(d){return this==d||this.type==d.type&&qt(this.attrs,d.attrs)}toJSON(){let d={type:this.type.name};for(let C in this.attrs){d.attrs=this.attrs;break}return d}static fromJSON(d,C){if(!C)throw new RangeError("Invalid input for Mark.fromJSON");let S=d.marks[C.type];if(!S)throw new RangeError(`There is no mark type ${C.type} in this schema`);return S.create(C.attrs)}static sameSet(d,C){if(d==C)return!0;if(d.length!=C.length)return!1;for(let S=0;S<d.length;S++)if(!d[S].eq(C[S]))return!1;return!0}static setFrom(d){if(!d||Array.isArray(d)&&0==d.length)return R.none;if(d instanceof R)return[d];let C=d.slice();return C.sort((S,I)=>S.type.rank-I.type.rank),C}}return R.none=[],R})();class ae extends Error{}class Gt{constructor(a,d,C){this.content=a,this.openStart=d,this.openEnd=C}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,d){let C=Ne(this.content,a+this.openStart,d);return C&&new Gt(C,this.openStart,this.openEnd)}removeBetween(a,d){return new Gt(e(this.content,a+this.openStart,d+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,d){if(!d)return Gt.empty;let C=d.openStart||0,S=d.openEnd||0;if("number"!=typeof C||"number"!=typeof S)throw new RangeError("Invalid input for Slice.fromJSON");return new Gt(dt.fromJSON(a,d.content),C,S)}static maxOpen(a,d=!0){let C=0,S=0;for(let I=a.firstChild;I&&!I.isLeaf&&(d||!I.type.spec.isolating);I=I.firstChild)C++;for(let I=a.lastChild;I&&!I.isLeaf&&(d||!I.type.spec.isolating);I=I.lastChild)S++;return new Gt(a,C,S)}}function e(R,a,d){let{index:C,offset:S}=R.findIndex(a),I=R.maybeChild(C),{index:H,offset:K}=R.findIndex(d);if(S==a||I.isText){if(K!=d&&!R.child(H).isText)throw new RangeError("Removing non-flat range");return R.cut(0,a).append(R.cut(d))}if(C!=H)throw new RangeError("Removing non-flat range");return R.replaceChild(C,I.copy(e(I.content,a-S-1,d-S-1)))}function Ne(R,a,d,C){let{index:S,offset:I}=R.findIndex(a),H=R.maybeChild(S);if(I==a||H.isText)return C&&!C.canReplace(S,S,d)?null:R.cut(0,a).append(d).append(R.cut(a));let K=Ne(H.content,a-I-1,d);return K&&R.replaceChild(S,H.copy(K))}function se(R,a,d){if(d.openStart>R.depth)throw new ae("Inserted content deeper than insertion position");if(R.depth-d.openStart!=a.depth-d.openEnd)throw new ae("Inconsistent open depths");return Nt(R,a,d,0)}function Nt(R,a,d,C){let S=R.index(C),I=R.node(C);if(S==a.index(C)&&C<R.depth-d.openStart){let H=Nt(R,a,d,C+1);return I.copy(I.content.replaceChild(S,H))}if(d.content.size){if(d.openStart||d.openEnd||R.depth!=C||a.depth!=C){let{start:H,end:K}=function(R,a){let d=a.depth-R.openStart,S=a.node(d).copy(R.content);for(let I=d-1;I>=0;I--)S=a.node(I).copy(dt.from(S));return{start:S.resolveNoCache(R.openStart+d),end:S.resolveNoCache(S.content.size-R.openEnd-d)}}(d,R);return xt(I,Jt(R,H,K,a,C))}{let H=R.parent,K=H.content;return xt(H,K.cut(0,R.parentOffset).append(d.content).append(K.cut(a.parentOffset)))}}return xt(I,Pt(R,a,C))}function Dt(R,a){if(!a.type.compatibleContent(R.type))throw new ae("Cannot join "+a.type.name+" onto "+R.type.name)}function Mt(R,a,d){let C=R.node(d);return Dt(C,a.node(d)),C}function Bt(R,a){let d=a.length-1;d>=0&&R.isText&&R.sameMarkup(a[d])?a[d]=R.withText(a[d].text+R.text):a.push(R)}function Lt(R,a,d,C){let S=(a||R).node(d),I=0,H=a?a.index(d):S.childCount;R&&(I=R.index(d),R.depth>d?I++:R.textOffset&&(Bt(R.nodeAfter,C),I++));for(let K=I;K<H;K++)Bt(S.child(K),C);a&&a.depth==d&&a.textOffset&&Bt(a.nodeBefore,C)}function xt(R,a){return R.type.checkContent(a),R.copy(a)}function Jt(R,a,d,C,S){let I=R.depth>S&&Mt(R,a,S+1),H=C.depth>S&&Mt(d,C,S+1),K=[];return Lt(null,R,S,K),I&&H&&a.index(S)==d.index(S)?(Dt(I,H),Bt(xt(I,Jt(R,a,d,C,S+1)),K)):(I&&Bt(xt(I,Pt(R,a,S+1)),K),Lt(a,d,S,K),H&&Bt(xt(H,Pt(d,C,S+1)),K)),Lt(C,null,S,K),new dt(K)}function Pt(R,a,d){let C=[];return Lt(null,R,d,C),R.depth>d&&Bt(xt(Mt(R,a,d+1),Pt(R,a,d+1)),C),Lt(a,null,d,C),new dt(C)}Gt.empty=new Gt(dt.empty,0,0);class Qt{constructor(a,d,C){this.pos=a,this.path=d,this.parentOffset=C,this.depth=d.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,d=this.index(this.depth);if(d==a.childCount)return null;let C=this.pos-this.path[this.path.length-1],S=a.child(d);return C?a.child(d).cut(C):S}get nodeBefore(){let a=this.index(this.depth),d=this.pos-this.path[this.path.length-1];return d?this.parent.child(a).cut(0,d):0==a?null:this.parent.child(a-1)}posAtIndex(a,d){d=this.resolveDepth(d);let C=this.path[3*d],S=0==d?0:this.path[3*d-1]+1;for(let I=0;I<a;I++)S+=C.child(I).nodeSize;return S}marks(){let a=this.parent,d=this.index();if(0==a.content.size)return Rt.none;if(this.textOffset)return a.child(d).marks;let C=a.maybeChild(d-1),S=a.maybeChild(d);if(!C){let K=C;C=S,S=K}let I=C.marks;for(var H=0;H<I.length;H++)!1===I[H].type.spec.inclusive&&(!S||!I[H].isInSet(S.marks))&&(I=I[H--].removeFromSet(I));return I}marksAcross(a){let d=this.parent.maybeChild(this.index());if(!d||!d.isInline)return null;let C=d.marks,S=a.parent.maybeChild(a.index());for(var I=0;I<C.length;I++)!1===C[I].type.spec.inclusive&&(!S||!C[I].isInSet(S.marks))&&(C=C[I--].removeFromSet(C));return C}sharedDepth(a){for(let d=this.depth;d>0;d--)if(this.start(d)<=a&&this.end(d)>=a)return d;return 0}blockRange(a=this,d){if(a.pos<this.pos)return a.blockRange(this);for(let C=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);C>=0;C--)if(a.pos<=this.end(C)&&(!d||d(this.node(C))))return new vt(this,a,C);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let d=1;d<=this.depth;d++)a+=(a?"/":"")+this.node(d).type.name+"_"+this.index(d-1);return a+":"+this.parentOffset}static resolve(a,d){if(!(d>=0&&d<=a.content.size))throw new RangeError("Position "+d+" out of range");let C=[],S=0,I=d;for(let H=a;;){let{index:K,offset:lt}=H.content.findIndex(I),It=I-lt;if(C.push(H,K,S+lt),!It||(H=H.child(K),H.isText))break;I=It-1,S+=lt+1}return new Qt(d,C,I)}static resolveCached(a,d){for(let S=0;S<fe.length;S++){let I=fe[S];if(I.pos==d&&I.doc==a)return I}let C=fe[le]=Qt.resolve(a,d);return le=(le+1)%Ot,C}}let fe=[],le=0,Ot=12;class vt{constructor(a,d,C){this.$from=a,this.$to=d,this.depth=C}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const $t=Object.create(null);class ht{constructor(a,d,C,S=Rt.none){this.type=a,this.attrs=d,this.marks=S,this.content=C||dt.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,d,C,S=0){this.content.nodesBetween(a,d,C,S,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,d,C,S){return this.content.textBetween(a,d,C,S)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,d,C){return this.type==a&&qt(this.attrs,d||a.defaultAttrs||$t)&&Rt.sameSet(this.marks,C||Rt.none)}copy(a=null){return a==this.content?this:new ht(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new ht(this.type,this.attrs,this.content,a)}cut(a,d=this.content.size){return 0==a&&d==this.content.size?this:this.copy(this.content.cut(a,d))}slice(a,d=this.content.size,C=!1){if(a==d)return Gt.empty;let S=this.resolve(a),I=this.resolve(d),H=C?0:S.sharedDepth(d),K=S.start(H),It=S.node(H).content.cut(S.pos-K,I.pos-K);return new Gt(It,S.depth-H,I.depth-H)}replace(a,d,C){return se(this.resolve(a),this.resolve(d),C)}nodeAt(a){for(let d=this;;){let{index:C,offset:S}=d.content.findIndex(a);if(d=d.maybeChild(C),!d)return null;if(S==a||d.isText)return d;a-=S+1}}childAfter(a){let{index:d,offset:C}=this.content.findIndex(a);return{node:this.content.maybeChild(d),index:d,offset:C}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:d,offset:C}=this.content.findIndex(a);if(C<a)return{node:this.content.child(d),index:d,offset:C};let S=this.content.child(d-1);return{node:S,index:d-1,offset:C-S.nodeSize}}resolve(a){return Qt.resolveCached(this,a)}resolveNoCache(a){return Qt.resolve(this,a)}rangeHasMark(a,d,C){let S=!1;return d>a&&this.nodesBetween(a,d,I=>(C.isInSet(I.marks)&&(S=!0),!S)),S}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),tt(this.marks,a)}contentMatchAt(a){let d=this.type.contentMatch.matchFragment(this.content,0,a);if(!d)throw new Error("Called contentMatchAt on a node with invalid content");return d}canReplace(a,d,C=dt.empty,S=0,I=C.childCount){let H=this.contentMatchAt(a).matchFragment(C,S,I),K=H&&H.matchFragment(this.content,d);if(!K||!K.validEnd)return!1;for(let lt=S;lt<I;lt++)if(!this.type.allowsMarks(C.child(lt).marks))return!1;return!0}canReplaceWith(a,d,C,S){if(S&&!this.type.allowsMarks(S))return!1;let I=this.contentMatchAt(a).matchType(C),H=I&&I.matchFragment(this.content,d);return!!H&&H.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=Rt.none;for(let d=0;d<this.marks.length;d++)a=this.marks[d].addToSet(a);if(!Rt.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(d=>d.type.name)}`);this.content.forEach(d=>d.check())}toJSON(){let a={type:this.type.name};for(let d in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(d=>d.toJSON())),a}static fromJSON(a,d){if(!d)throw new RangeError("Invalid input for Node.fromJSON");let C=null;if(d.marks){if(!Array.isArray(d.marks))throw new RangeError("Invalid mark data for Node.fromJSON");C=d.marks.map(a.markFromJSON)}if("text"==d.type){if("string"!=typeof d.text)throw new RangeError("Invalid text node in JSON");return a.text(d.text,C)}let S=dt.fromJSON(a,d.content);return a.nodeType(d.type).create(d.attrs,S,C)}}ht.prototype.text=void 0;class z extends ht{constructor(a,d,C,S){if(super(a,d,null,S),!C)throw new RangeError("Empty text nodes are not allowed");this.text=C}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):tt(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,d){return this.text.slice(a,d)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new z(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new z(this.type,this.attrs,a,this.marks)}cut(a=0,d=this.text.length){return 0==a&&d==this.text.length?this:this.withText(this.text.slice(a,d))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function tt(R,a){for(let d=R.length-1;d>=0;d--)a=R[d].type.name+"("+a+")";return a}class q{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,d){let C=new st(a,d);if(null==C.next)return q.empty;let S=St(C);C.next&&C.err("Unexpected trailing text");let I=function(R){let a=Object.create(null);return function d(C){let S=[];C.forEach(H=>{R[H].forEach(({term:K,to:lt})=>{if(!K)return;let It;for(let Et=0;Et<S.length;Et++)S[Et][0]==K&&(It=S[Et][1]);Ue(R,lt).forEach(Et=>{It||S.push([K,It=[]]),-1==It.indexOf(Et)&&It.push(Et)})})});let I=a[C.join(",")]=new q(C.indexOf(R.length-1)>-1);for(let H=0;H<S.length;H++){let K=S[H][1].sort(nn);I.next.push({type:S[H][0],next:a[K.join(",")]||d(K)})}return I}(Ue(R,0))}(function(R){let a=[[]];return S(function I(H,K){if("choice"==H.type)return H.exprs.reduce((lt,It)=>lt.concat(I(It,K)),[]);if("seq"!=H.type){if("star"==H.type){let lt=d();return C(K,lt),S(I(H.expr,lt),lt),[C(lt)]}if("plus"==H.type){let lt=d();return S(I(H.expr,K),lt),S(I(H.expr,lt),lt),[C(lt)]}if("opt"==H.type)return[C(K)].concat(I(H.expr,K));if("range"==H.type){let lt=K;for(let It=0;It<H.min;It++){let Et=d();S(I(H.expr,lt),Et),lt=Et}if(-1==H.max)S(I(H.expr,lt),lt);else for(let It=H.min;It<H.max;It++){let Et=d();C(lt,Et),S(I(H.expr,lt),Et),lt=Et}return[C(lt)]}if("name"==H.type)return[C(K,void 0,H.value)];throw new Error("Unknown expr type")}for(let lt=0;;lt++){let It=I(H.exprs[lt],K);if(lt==H.exprs.length-1)return It;S(It,K=d())}}(R,0),d()),a;function d(){return a.push([])-1}function C(H,K,lt){let It={term:lt,to:K};return a[H].push(It),It}function S(H,K){H.forEach(lt=>lt.to=K)}}(S));return function(R,a){for(let d=0,C=[R];d<C.length;d++){let S=C[d],I=!S.validEnd,H=[];for(let K=0;K<S.next.length;K++){let{type:lt,next:It}=S.next[K];H.push(lt.name),I&&!(lt.isText||lt.hasRequiredAttrs())&&(I=!1),-1==C.indexOf(It)&&C.push(It)}I&&a.err("Only non-generatable nodes ("+H.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(I,C),I}matchType(a){for(let d=0;d<this.next.length;d++)if(this.next[d].type==a)return this.next[d].next;return null}matchFragment(a,d=0,C=a.childCount){let S=this;for(let I=d;S&&I<C;I++)S=S.matchType(a.child(I).type);return S}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:d}=this.next[a];if(!d.isText&&!d.hasRequiredAttrs())return d}return null}compatible(a){for(let d=0;d<this.next.length;d++)for(let C=0;C<a.next.length;C++)if(this.next[d].type==a.next[C].type)return!0;return!1}fillBefore(a,d=!1,C=0){let S=[this];return function I(H,K){let lt=H.matchFragment(a,C);if(lt&&(!d||lt.validEnd))return dt.from(K.map(It=>It.createAndFill()));for(let It=0;It<H.next.length;It++){let{type:Et,next:De}=H.next[It];if(!Et.isText&&!Et.hasRequiredAttrs()&&-1==S.indexOf(De)){S.push(De);let B=I(De,K.concat(Et));if(B)return B}}return null}(this,[])}findWrapping(a){for(let C=0;C<this.wrapCache.length;C+=2)if(this.wrapCache[C]==a)return this.wrapCache[C+1];let d=this.computeWrapping(a);return this.wrapCache.push(a,d),d}computeWrapping(a){let d=Object.create(null),C=[{match:this,type:null,via:null}];for(;C.length;){let S=C.shift(),I=S.match;if(I.matchType(a)){let H=[];for(let K=S;K.type;K=K.via)H.push(K.type);return H.reverse()}for(let H=0;H<I.next.length;H++){let{type:K,next:lt}=I.next[H];!K.isLeaf&&!K.hasRequiredAttrs()&&!(K.name in d)&&(!S.type||lt.validEnd)&&(C.push({match:K.contentMatch,type:K,via:S}),d[K.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function d(C){a.push(C);for(let S=0;S<C.next.length;S++)-1==a.indexOf(C.next[S].next)&&d(C.next[S].next)}(this),a.map((C,S)=>{let I=S+(C.validEnd?"*":" ")+" ";for(let H=0;H<C.next.length;H++)I+=(H?", ":"")+C.next[H].type.name+"->"+a.indexOf(C.next[H].next);return I}).join("\n")}}q.empty=new q(!0);class st{constructor(a,d){this.string=a,this.nodeTypes=d,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function St(R){let a=[];do{a.push(Zt(R))}while(R.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function Zt(R){let a=[];do{a.push(ne(R))}while(R.next&&")"!=R.next&&"|"!=R.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function ne(R){let a=function(R){if(R.eat("(")){let a=St(R);return R.eat(")")||R.err("Missing closing paren"),a}if(!/\W/.test(R.next)){let a=function(R,a){let d=R.nodeTypes,C=d[a];if(C)return[C];let S=[];for(let I in d){let H=d[I];H.groups.indexOf(a)>-1&&S.push(H)}return 0==S.length&&R.err("No node type or group '"+a+"' found"),S}(R,R.next).map(d=>(null==R.inline?R.inline=d.isInline:R.inline!=d.isInline&&R.err("Mixing inline and block content"),{type:"name",value:d}));return R.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}R.err("Unexpected token '"+R.next+"'")}(R);for(;;)if(R.eat("+"))a={type:"plus",expr:a};else if(R.eat("*"))a={type:"star",expr:a};else if(R.eat("?"))a={type:"opt",expr:a};else{if(!R.eat("{"))break;a=Ee(R,a)}return a}function jt(R){/\D/.test(R.next)&&R.err("Expected number, got '"+R.next+"'");let a=Number(R.next);return R.pos++,a}function Ee(R,a){let d=jt(R),C=d;return R.eat(",")&&(C="}"!=R.next?jt(R):-1),R.eat("}")||R.err("Unclosed braced range"),{type:"range",min:d,max:C,expr:a}}function nn(R,a){return a-R}function Ue(R,a){let d=[];return function C(S){let I=R[S];if(1==I.length&&!I[0].term)return C(I[0].to);d.push(S);for(let H=0;H<I.length;H++){let{term:K,to:lt}=I[H];!K&&-1==d.indexOf(lt)&&C(lt)}}(a),d.sort(nn)}function Ie(R){let a=Object.create(null);for(let d in R){let C=R[d];if(!C.hasDefault)return null;a[d]=C.default}return a}function rn(R,a){let d=Object.create(null);for(let C in R){let S=a&&a[C];if(void 0===S){let I=R[C];if(!I.hasDefault)throw new RangeError("No value supplied for attribute "+C);S=I.default}d[C]=S}return d}function ve(R){let a=Object.create(null);if(R)for(let d in R)a[d]=new Ge(R[d]);return a}class Me{constructor(a,d,C){this.name=a,this.schema=d,this.spec=C,this.markSet=null,this.groups=C.group?C.group.split(" "):[],this.attrs=ve(C.attrs),this.defaultAttrs=Ie(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(C.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==q.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:rn(this.attrs,a)}create(a=null,d,C){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ht(this,this.computeAttrs(a),dt.from(d),Rt.setFrom(C))}createChecked(a=null,d,C){return d=dt.from(d),this.checkContent(d),new ht(this,this.computeAttrs(a),d,Rt.setFrom(C))}createAndFill(a=null,d,C){if(a=this.computeAttrs(a),(d=dt.from(d)).size){let H=this.contentMatch.fillBefore(d);if(!H)return null;d=H.append(d)}let S=this.contentMatch.matchFragment(d),I=S&&S.fillBefore(dt.empty,!0);return I?new ht(this,a,d.append(I),Rt.setFrom(C)):null}validContent(a){let d=this.contentMatch.matchFragment(a);if(!d||!d.validEnd)return!1;for(let C=0;C<a.childCount;C++)if(!this.allowsMarks(a.child(C).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let d=0;d<a.length;d++)if(!this.allowsMarkType(a[d].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let d;for(let C=0;C<a.length;C++)this.allowsMarkType(a[C].type)?d&&d.push(a[C]):d||(d=a.slice(0,C));return d?d.length?d:Rt.none:a}static compile(a,d){let C=Object.create(null);a.forEach((I,H)=>C[I]=new Me(I,d,H));let S=d.spec.topNode||"doc";if(!C[S])throw new RangeError("Schema is missing its top node type ('"+S+"')");if(!C.text)throw new RangeError("Every schema needs a 'text' type");for(let I in C.text.attrs)throw new RangeError("The text node type should not have attributes");return C}}class Ge{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class _e{constructor(a,d,C,S){this.name=a,this.rank=d,this.schema=C,this.spec=S,this.attrs=ve(S.attrs),this.excluded=null;let I=Ie(this.attrs);this.instance=I?new Rt(this,I):null}create(a=null){return!a&&this.instance?this.instance:new Rt(this,rn(this.attrs,a))}static compile(a,d){let C=Object.create(null),S=0;return a.forEach((I,H)=>C[I]=new _e(I,S++,d,H)),C}removeFromSet(a){for(var d=0;d<a.length;d++)a[d].type==this&&(a=a.slice(0,d).concat(a.slice(d+1)),d--);return a}isInSet(a){for(let d=0;d<a.length;d++)if(a[d].type==this)return a[d]}excludes(a){return this.excluded.indexOf(a)>-1}}class Ve{constructor(a){this.cached=Object.create(null);let d=this.spec={};for(let S in a)d[S]=a[S];d.nodes=gt.from(a.nodes),d.marks=gt.from(a.marks||{}),this.nodes=Me.compile(this.spec.nodes,this),this.marks=_e.compile(this.spec.marks,this);let C=Object.create(null);for(let S in this.nodes){if(S in this.marks)throw new RangeError(S+" can not be both a node and a mark");let I=this.nodes[S],H=I.spec.content||"",K=I.spec.marks;I.contentMatch=C[H]||(C[H]=q.parse(H,this.nodes)),I.inlineContent=I.contentMatch.inlineContent,I.markSet="_"==K?null:K?pe(this,K.split(" ")):""!=K&&I.inlineContent?null:[]}for(let S in this.marks){let I=this.marks[S],H=I.spec.excludes;I.excluded=null==H?[I]:""==H?[]:pe(this,H.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,d=null,C,S){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof Me))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(d,C,S)}text(a,d){let C=this.nodes.text;return new z(C,C.defaultAttrs,a,Rt.setFrom(d))}mark(a,d){return"string"==typeof a&&(a=this.marks[a]),a.create(d)}nodeFromJSON(a){return ht.fromJSON(this,a)}markFromJSON(a){return Rt.fromJSON(this,a)}nodeType(a){let d=this.nodes[a];if(!d)throw new RangeError("Unknown node type: "+a);return d}}function pe(R,a){let d=[];for(let C=0;C<a.length;C++){let S=a[C],I=R.marks[S],H=I;if(I)d.push(I);else for(let K in R.marks){let lt=R.marks[K];("_"==S||lt.spec.group&&lt.spec.group.split(" ").indexOf(S)>-1)&&d.push(H=lt)}if(!H)throw new SyntaxError("Unknown mark type: '"+a[C]+"'")}return d}class ke{constructor(a,d){this.schema=a,this.rules=d,this.tags=[],this.styles=[],d.forEach(C=>{C.tag?this.tags.push(C):C.style&&this.styles.push(C)}),this.normalizeLists=!this.tags.some(C=>{if(!/^(ul|ol)\b/.test(C.tag)||!C.node)return!1;let S=a.nodes[C.node];return S.contentMatch.matchType(S)})}parse(a,d={}){let C=new Yt(this,d,!1);return C.addAll(a,d.from,d.to),C.finish()}parseSlice(a,d={}){let C=new Yt(this,d,!0);return C.addAll(a,d.from,d.to),Gt.maxOpen(C.finish())}matchTag(a,d,C){for(let S=C?this.tags.indexOf(C)+1:0;S<this.tags.length;S++){let I=this.tags[S];if(k(a,I.tag)&&(void 0===I.namespace||a.namespaceURI==I.namespace)&&(!I.context||d.matchesContext(I.context))){if(I.getAttrs){let H=I.getAttrs(a);if(!1===H)continue;I.attrs=H||void 0}return I}}}matchStyle(a,d,C,S){for(let I=S?this.styles.indexOf(S)+1:0;I<this.styles.length;I++){let H=this.styles[I],K=H.style;if(!(0!=K.indexOf(a)||H.context&&!C.matchesContext(H.context)||K.length>a.length&&(61!=K.charCodeAt(a.length)||K.slice(a.length+1)!=d))){if(H.getAttrs){let lt=H.getAttrs(d);if(!1===lt)continue;H.attrs=lt||void 0}return H}}}static schemaRules(a){let d=[];function C(S){let I=null==S.priority?50:S.priority,H=0;for(;H<d.length;H++){let K=d[H];if((null==K.priority?50:K.priority)<I)break}d.splice(H,0,S)}for(let S in a.marks){let I=a.marks[S].spec.parseDOM;I&&I.forEach(H=>{C(H=x(H)),H.mark||H.ignore||H.clearMark||(H.mark=S)})}for(let S in a.nodes){let I=a.nodes[S].spec.parseDOM;I&&I.forEach(H=>{C(H=x(H)),H.node||H.ignore||H.mark||(H.node=S)})}return d}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new ke(a,ke.schemaRules(a)))}}const Le={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},an={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},qe={ol:!0,ul:!0};function $e(R,a,d){return null!=a?(a?1:0)|("full"===a?2:0):R&&"pre"==R.whitespace?3:-5&d}class Ce{constructor(a,d,C,S,I,H,K){this.type=a,this.attrs=d,this.marks=C,this.pendingMarks=S,this.solid=I,this.options=K,this.content=[],this.activeMarks=Rt.none,this.stashMarks=[],this.match=H||(4&K?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let d=this.type.contentMatch.fillBefore(dt.from(a));if(!d){let S,C=this.type.contentMatch;return(S=C.findWrapping(a.type))?(this.match=C,S):null}this.match=this.type.contentMatch.matchFragment(d)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let S,C=this.content[this.content.length-1];if(C&&C.isText&&(S=/[ \t\r\n\u000c]+$/.exec(C.text))){let I=C;C.text.length==S[0].length?this.content.pop():this.content[this.content.length-1]=I.withText(I.text.slice(0,I.text.length-S[0].length))}}let d=dt.from(this.content);return!a&&this.match&&(d=d.append(this.match.fillBefore(dt.empty,!0))),this.type?this.type.create(this.attrs,d,this.marks):d}popFromStashMark(a){for(let d=this.stashMarks.length-1;d>=0;d--)if(a.eq(this.stashMarks[d]))return this.stashMarks.splice(d,1)[0]}applyPending(a){for(let d=0,C=this.pendingMarks;d<C.length;d++){let S=C[d];(this.type?this.type.allowsMarkType(S.type):J(S.type,a))&&!S.isInSet(this.activeMarks)&&(this.activeMarks=S.addToSet(this.activeMarks),this.pendingMarks=S.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!Le.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class Yt{constructor(a,d,C){this.parser=a,this.options=d,this.isOpen=C,this.open=0;let I,S=d.topNode,H=$e(null,d.preserveWhitespace,0)|(C?4:0);I=S?new Ce(S.type,S.attrs,Rt.none,Rt.none,!0,d.topMatch||S.type.contentMatch,H):new Ce(C?null:a.schema.topNodeType,null,Rt.none,Rt.none,!0,null,H),this.nodes=[I],this.find=d.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){if(3==a.nodeType)this.addTextNode(a);else if(1==a.nodeType){let d=a.getAttribute("style");if(d){let C=this.readStyles(function(R){let d,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,C=[];for(;d=a.exec(R);)C.push(d[1],d[2].trim());return C}(d));if(!C)return;let[S,I]=C,H=this.top;for(let K=0;K<I.length;K++)this.removePendingMark(I[K],H);for(let K=0;K<S.length;K++)this.addPendingMark(S[K]);this.addElement(a);for(let K=0;K<S.length;K++)this.removePendingMark(S[K],H);for(let K=0;K<I.length;K++)this.addPendingMark(I[K])}else this.addElement(a)}}addTextNode(a){let d=a.nodeValue,C=this.top;if(2&C.options||C.inlineContext(a)||/[^ \t\r\n\u000c]/.test(d)){if(1&C.options)d=2&C.options?d.replace(/\r\n?/g,"\n"):d.replace(/\r?\n|\r/g," ");else if(d=d.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(d)&&this.open==this.nodes.length-1){let S=C.content[C.content.length-1],I=a.previousSibling;(!S||I&&"BR"==I.nodeName||S.isText&&/[ \t\r\n\u000c]$/.test(S.text))&&(d=d.slice(1))}d&&this.insertNode(this.parser.schema.text(d)),this.findInText(a)}else this.findInside(a)}addElement(a,d){let S,C=a.nodeName.toLowerCase();qe.hasOwnProperty(C)&&this.parser.normalizeLists&&function(R){for(let a=R.firstChild,d=null;a;a=a.nextSibling){let C=1==a.nodeType?a.nodeName.toLowerCase():null;C&&qe.hasOwnProperty(C)&&d?(d.appendChild(a),a=d):"li"==C?d=a:C&&(d=null)}}(a);let I=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(S=this.parser.matchTag(a,this,d));if(I?I.ignore:an.hasOwnProperty(C))this.findInside(a),this.ignoreFallback(a);else if(!I||I.skip||I.closeParent){I&&I.closeParent?this.open=Math.max(0,this.open-1):I&&I.skip.nodeType&&(a=I.skip);let H,K=this.top,lt=this.needsBlock;if(Le.hasOwnProperty(C))K.content.length&&K.content[0].isInline&&this.open&&(this.open--,K=this.top),H=!0,K.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);this.addAll(a),H&&this.sync(K),this.needsBlock=lt}else this.addElementByRule(a,I,!1===I.consuming?S:void 0)}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let d=Rt.none,C=Rt.none;for(let S=0;S<a.length;S+=2)for(let I;;){let H=this.parser.matchStyle(a[S],a[S+1],this,I);if(!H)break;if(H.ignore)return null;if(H.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(K=>{H.clearMark(K)&&(C=K.addToSet(C))}):d=this.parser.schema.marks[H.mark].create(H.attrs).addToSet(d),!1!==H.consuming)break;I=H}return[d,C]}addElementByRule(a,d,C){let S,I,H;d.node?(I=this.parser.schema.nodes[d.node],I.isLeaf?this.insertNode(I.create(d.attrs))||this.leafFallback(a):S=this.enter(I,d.attrs||null,d.preserveWhitespace)):(H=this.parser.schema.marks[d.mark].create(d.attrs),this.addPendingMark(H));let K=this.top;if(I&&I.isLeaf)this.findInside(a);else if(C)this.addElement(a,C);else if(d.getContent)this.findInside(a),d.getContent(a,this.parser.schema).forEach(lt=>this.insertNode(lt));else{let lt=a;"string"==typeof d.contentElement?lt=a.querySelector(d.contentElement):"function"==typeof d.contentElement?lt=d.contentElement(a):d.contentElement&&(lt=d.contentElement),this.findAround(a,lt,!0),this.addAll(lt)}S&&this.sync(K)&&this.open--,H&&this.removePendingMark(H,K)}addAll(a,d,C){let S=d||0;for(let I=d?a.childNodes[d]:a.firstChild,H=null==C?null:a.childNodes[C];I!=H;I=I.nextSibling,++S)this.findAtPoint(a,S),this.addDOM(I);this.findAtPoint(a,S)}findPlace(a){let d,C;for(let S=this.open;S>=0;S--){let I=this.nodes[S],H=I.findWrapping(a);if(H&&(!d||d.length>H.length)&&(d=H,C=I,!H.length)||I.solid)break}if(!d)return!1;this.sync(C);for(let S=0;S<d.length;S++)this.enterInner(d[S],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let d=this.textblockFromContext();d&&this.enterInner(d)}if(this.findPlace(a)){this.closeExtra();let d=this.top;d.applyPending(a.type),d.match&&(d.match=d.match.matchType(a.type));let C=d.activeMarks;for(let S=0;S<a.marks.length;S++)(!d.type||d.type.allowsMarkType(a.marks[S].type))&&(C=a.marks[S].addToSet(C));return d.content.push(a.mark(C)),!0}return!1}enter(a,d,C){let S=this.findPlace(a.create(d));return S&&this.enterInner(a,d,!0,C),S}enterInner(a,d=null,C=!1,S){this.closeExtra();let I=this.top;I.applyPending(a),I.match=I.match&&I.match.matchType(a);let H=$e(a,S,I.options);4&I.options&&0==I.content.length&&(H|=4),this.nodes.push(new Ce(a,d,I.activeMarks,I.pendingMarks,C,null,H)),this.open++}closeExtra(a=!1){let d=this.nodes.length-1;if(d>this.open){for(;d>this.open;d--)this.nodes[d-1].content.push(this.nodes[d].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let d=this.open;d>=0;d--)if(this.nodes[d]==a)return this.open=d,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let d=this.open;d>=0;d--){let C=this.nodes[d].content;for(let S=C.length-1;S>=0;S--)a+=C[S].nodeSize;d&&a++}return a}findAtPoint(a,d){if(this.find)for(let C=0;C<this.find.length;C++)this.find[C].node==a&&this.find[C].offset==d&&(this.find[C].pos=this.currentPos)}findInside(a){if(this.find)for(let d=0;d<this.find.length;d++)null==this.find[d].pos&&1==a.nodeType&&a.contains(this.find[d].node)&&(this.find[d].pos=this.currentPos)}findAround(a,d,C){if(a!=d&&this.find)for(let S=0;S<this.find.length;S++)null==this.find[S].pos&&1==a.nodeType&&a.contains(this.find[S].node)&&d.compareDocumentPosition(this.find[S].node)&(C?2:4)&&(this.find[S].pos=this.currentPos)}findInText(a){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].node==a&&(this.find[d].pos=this.currentPos-(a.nodeValue.length-this.find[d].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let d=a.split("/"),C=this.options.context,S=!(this.isOpen||C&&C.parent.type!=this.nodes[0].type),I=(S?0:1)-(C?C.depth+1:0),H=(K,lt)=>{for(;K>=0;K--){let It=d[K];if(""==It){if(K==d.length-1||0==K)continue;for(;lt>=I;lt--)if(H(K-1,lt))return!0;return!1}{let Et=lt>0||0==lt&&S?this.nodes[lt].type:C&&lt>=I?C.node(lt-I).type:null;if(!Et||Et.name!=It&&-1==Et.groups.indexOf(It))return!1;lt--}}return!0};return H(d.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let d=a.depth;d>=0;d--){let C=a.node(d).contentMatchAt(a.indexAfter(d)).defaultType;if(C&&C.isTextblock&&C.defaultAttrs)return C}for(let d in this.parser.schema.nodes){let C=this.parser.schema.nodes[d];if(C.isTextblock&&C.defaultAttrs)return C}}addPendingMark(a){let d=function(R,a){for(let d=0;d<a.length;d++)if(R.eq(a[d]))return a[d]}(a,this.top.pendingMarks);d&&this.top.stashMarks.push(d),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,d){for(let C=this.open;C>=0;C--){let S=this.nodes[C];if(S.pendingMarks.lastIndexOf(a)>-1)S.pendingMarks=a.removeFromSet(S.pendingMarks);else{S.activeMarks=a.removeFromSet(S.activeMarks);let H=S.popFromStashMark(a);H&&S.type&&S.type.allowsMarkType(H.type)&&(S.activeMarks=H.addToSet(S.activeMarks))}if(S==d)break}}}function k(R,a){return(R.matches||R.msMatchesSelector||R.webkitMatchesSelector||R.mozMatchesSelector).call(R,a)}function x(R){let a={};for(let d in R)a[d]=R[d];return a}function J(R,a){let d=a.schema.nodes;for(let C in d){let S=d[C];if(!S.allowsMarkType(R))continue;let I=[],H=K=>{I.push(K);for(let lt=0;lt<K.edgeCount;lt++){let{type:It,next:Et}=K.edge(lt);if(It==a||I.indexOf(Et)<0&&H(Et))return!0}};if(H(S.contentMatch))return!0}}class X{constructor(a,d){this.nodes=a,this.marks=d}serializeFragment(a,d={},C){C||(C=_t(d).createDocumentFragment());let S=C,I=[];return a.forEach(H=>{if(I.length||H.marks.length){let K=0,lt=0;for(;K<I.length&&lt<H.marks.length;){let It=H.marks[lt];if(this.marks[It.type.name]){if(!It.eq(I[K][0])||!1===It.type.spec.spanning)break;K++,lt++}else lt++}for(;K<I.length;)S=I.pop()[1];for(;lt<H.marks.length;){let It=H.marks[lt++],Et=this.serializeMark(It,H.isInline,d);Et&&(I.push([It,S]),S.appendChild(Et.dom),S=Et.contentDOM||Et.dom)}}S.appendChild(this.serializeNodeInner(H,d))}),C}serializeNodeInner(a,d){let{dom:C,contentDOM:S}=X.renderSpec(_t(d),this.nodes[a.type.name](a));if(S){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,d,S)}return C}serializeNode(a,d={}){let C=this.serializeNodeInner(a,d);for(let S=a.marks.length-1;S>=0;S--){let I=this.serializeMark(a.marks[S],a.isInline,d);I&&((I.contentDOM||I.dom).appendChild(C),C=I.dom)}return C}serializeMark(a,d,C={}){let S=this.marks[a.type.name];return S&&X.renderSpec(_t(C),S(a,d))}static renderSpec(a,d,C=null){if("string"==typeof d)return{dom:a.createTextNode(d)};if(null!=d.nodeType)return{dom:d};if(d.dom&&null!=d.dom.nodeType)return d;let S=d[0],I=S.indexOf(" ");I>0&&(C=S.slice(0,I),S=S.slice(I+1));let H,K=C?a.createElementNS(C,S):a.createElement(S),lt=d[1],It=1;if(lt&&"object"==typeof lt&&null==lt.nodeType&&!Array.isArray(lt)){It=2;for(let Et in lt)if(null!=lt[Et]){let De=Et.indexOf(" ");De>0?K.setAttributeNS(Et.slice(0,De),Et.slice(De+1),lt[Et]):K.setAttribute(Et,lt[Et])}}for(let Et=It;Et<d.length;Et++){let De=d[Et];if(0===De){if(Et<d.length-1||Et>It)throw new RangeError("Content hole must be the only child of its parent node");return{dom:K,contentDOM:K}}{let{dom:B,contentDOM:O}=X.renderSpec(a,De,C);if(K.appendChild(B),O){if(H)throw new RangeError("Multiple content holes");H=O}}}return{dom:K,contentDOM:H}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new X(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let d=ct(a.nodes);return d.text||(d.text=C=>C.text),d}static marksFromSchema(a){return ct(a.marks)}}function ct(R){let a={};for(let d in R){let C=R[d].spec.toDOM;C&&(a[d]=C)}return a}function _t(R){return R.document||window.document}},2463:(be,zt,j)=>{j.d(zt,{C1:()=>e,yy:()=>Qt,qv:()=>ae,Sy:()=>le,H$:()=>$t,Y1:()=>at,xm:()=>dt,Bs:()=>qt});var D=j(7439),gt=j(8480);const Ht=Object.create(null);class at{constructor(z,tt,q){this.$anchor=z,this.$head=tt,this.ranges=q||[new dt(z.min(tt),z.max(tt))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let z=this.ranges;for(let tt=0;tt<z.length;tt++)if(z[tt].$from.pos!=z[tt].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(z,tt=D.p2.empty){let q=tt.content.lastChild,st=null;for(let ne=0;ne<tt.openEnd;ne++)st=q,q=q.lastChild;let St=z.steps.length,Zt=this.ranges;for(let ne=0;ne<Zt.length;ne++){let{$from:jt,$to:Ee}=Zt[ne],ye=z.mapping.slice(St);z.replaceRange(ye.map(jt.pos),ye.map(Ee.pos),ne?D.p2.empty:tt),0==ne&&Nt(z,St,(q?q.isInline:st&&st.isTextblock)?-1:1)}}replaceWith(z,tt){let q=z.steps.length,st=this.ranges;for(let St=0;St<st.length;St++){let{$from:Zt,$to:ne}=st[St],jt=z.mapping.slice(q),Ee=jt.map(Zt.pos),ye=jt.map(ne.pos);St?z.deleteRange(Ee,ye):(z.replaceRangeWith(Ee,ye,tt),Nt(z,q,tt.isInline?-1:1))}}static findFrom(z,tt,q=!1){let st=z.parent.inlineContent?new qt(z):se(z.node(0),z.parent,z.pos,z.index(),tt,q);if(st)return st;for(let St=z.depth-1;St>=0;St--){let Zt=tt<0?se(z.node(0),z.node(St),z.before(St+1),z.index(St),tt,q):se(z.node(0),z.node(St),z.after(St+1),z.index(St)+1,tt,q);if(Zt)return Zt}return null}static near(z,tt=1){return this.findFrom(z,tt)||this.findFrom(z,-tt)||new e(z.node(0))}static atStart(z){return se(z,z,0,0,1)||new e(z)}static atEnd(z){return se(z,z,z.content.size,z.childCount,-1)||new e(z)}static fromJSON(z,tt){if(!tt||!tt.type)throw new RangeError("Invalid input for Selection.fromJSON");let q=Ht[tt.type];if(!q)throw new RangeError(`No selection type ${tt.type} defined`);return q.fromJSON(z,tt)}static jsonID(z,tt){if(z in Ht)throw new RangeError("Duplicate use of selection JSON ID "+z);return Ht[z]=tt,tt.prototype.jsonID=z,tt}getBookmark(){return qt.between(this.$anchor,this.$head).getBookmark()}}at.prototype.visible=!0;class dt{constructor(z,tt){this.$from=z,this.$to=tt}}let re=!1;function Xt(ht){!re&&!ht.parent.inlineContent&&(re=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+ht.parent.type.name+")"))}class qt extends at{constructor(z,tt=z){Xt(z),Xt(tt),super(z,tt)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(z,tt){let q=z.resolve(tt.map(this.head));if(!q.parent.inlineContent)return at.near(q);let st=z.resolve(tt.map(this.anchor));return new qt(st.parent.inlineContent?st:q,q)}replace(z,tt=D.p2.empty){if(super.replace(z,tt),tt==D.p2.empty){let q=this.$from.marksAcross(this.$to);q&&z.ensureMarks(q)}}eq(z){return z instanceof qt&&z.anchor==this.anchor&&z.head==this.head}getBookmark(){return new Rt(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(z,tt){if("number"!=typeof tt.anchor||"number"!=typeof tt.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new qt(z.resolve(tt.anchor),z.resolve(tt.head))}static create(z,tt,q=tt){let st=z.resolve(tt);return new this(st,q==tt?st:z.resolve(q))}static between(z,tt,q){let st=z.pos-tt.pos;if((!q||st)&&(q=st>=0?1:-1),!tt.parent.inlineContent){let St=at.findFrom(tt,q,!0)||at.findFrom(tt,-q,!0);if(!St)return at.near(tt,q);tt=St.$head}return z.parent.inlineContent||(0==st||(z=(at.findFrom(z,-q,!0)||at.findFrom(z,q,!0)).$anchor).pos<tt.pos!=st<0)&&(z=tt),new qt(z,tt)}}at.jsonID("text",qt);class Rt{constructor(z,tt){this.anchor=z,this.head=tt}map(z){return new Rt(z.map(this.anchor),z.map(this.head))}resolve(z){return qt.between(z.resolve(this.anchor),z.resolve(this.head))}}class ae extends at{constructor(z){let tt=z.nodeAfter,q=z.node(0).resolve(z.pos+tt.nodeSize);super(z,q),this.node=tt}map(z,tt){let{deleted:q,pos:st}=tt.mapResult(this.anchor),St=z.resolve(st);return q?at.near(St):new ae(St)}content(){return new D.p2(D.HY.from(this.node),0,0)}eq(z){return z instanceof ae&&z.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Gt(this.anchor)}static fromJSON(z,tt){if("number"!=typeof tt.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ae(z.resolve(tt.anchor))}static create(z,tt){return new ae(z.resolve(tt))}static isSelectable(z){return!z.isText&&!1!==z.type.spec.selectable}}ae.prototype.visible=!1,at.jsonID("node",ae);class Gt{constructor(z){this.anchor=z}map(z){let{deleted:tt,pos:q}=z.mapResult(this.anchor);return tt?new Rt(q,q):new Gt(q)}resolve(z){let tt=z.resolve(this.anchor),q=tt.nodeAfter;return q&&ae.isSelectable(q)?new ae(tt):at.near(tt)}}class e extends at{constructor(z){super(z.resolve(0),z.resolve(z.content.size))}replace(z,tt=D.p2.empty){if(tt==D.p2.empty){z.delete(0,z.doc.content.size);let q=at.atStart(z.doc);q.eq(z.selection)||z.setSelection(q)}else super.replace(z,tt)}toJSON(){return{type:"all"}}static fromJSON(z){return new e(z)}map(z){return new e(z)}eq(z){return z instanceof e}getBookmark(){return Ne}}at.jsonID("all",e);const Ne={map(){return this},resolve:ht=>new e(ht)};function se(ht,z,tt,q,st,St=!1){if(z.inlineContent)return qt.create(ht,tt);for(let Zt=q-(st>0?0:1);st>0?Zt<z.childCount:Zt>=0;Zt+=st){let ne=z.child(Zt);if(ne.isAtom){if(!St&&ae.isSelectable(ne))return ae.create(ht,tt-(st<0?ne.nodeSize:0))}else{let jt=se(ht,ne,tt+st,st<0?ne.childCount:0,st,St);if(jt)return jt}tt+=ne.nodeSize*st}return null}function Nt(ht,z,tt){let q=ht.steps.length-1;if(q<z)return;let Zt,st=ht.steps[q];(st instanceof gt.Pu||st instanceof gt.FC)&&(ht.mapping.maps[q].forEach((ne,jt,Ee,ye)=>{null==Zt&&(Zt=ye)}),ht.setSelection(at.near(ht.doc.resolve(Zt),tt)))}class Lt extends gt.wx{constructor(z){super(z.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=z.selection,this.storedMarks=z.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(z){if(z.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=z,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(z){return this.storedMarks=z,this.updated|=2,this}ensureMarks(z){return D.vc.sameSet(this.storedMarks||this.selection.$from.marks(),z)||this.setStoredMarks(z),this}addStoredMark(z){return this.ensureMarks(z.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(z){return this.ensureMarks(z.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(z,tt){super.addStep(z,tt),this.updated=-3&this.updated,this.storedMarks=null}setTime(z){return this.time=z,this}replaceSelection(z){return this.selection.replace(this,z),this}replaceSelectionWith(z,tt=!0){let q=this.selection;return tt&&(z=z.mark(this.storedMarks||(q.empty?q.$from.marks():q.$from.marksAcross(q.$to)||D.vc.none))),q.replaceWith(this,z),this}deleteSelection(){return this.selection.replace(this),this}insertText(z,tt,q){let st=this.doc.type.schema;if(null==tt)return z?this.replaceSelectionWith(st.text(z),!0):this.deleteSelection();{if(null==q&&(q=tt),q=null==q?tt:q,!z)return this.deleteRange(tt,q);let St=this.storedMarks;if(!St){let Zt=this.doc.resolve(tt);St=q==tt?Zt.marks():Zt.marksAcross(this.doc.resolve(q))}return this.replaceRangeWith(tt,q,st.text(z,St)),this.selection.empty||this.setSelection(at.near(this.selection.$to)),this}}setMeta(z,tt){return this.meta["string"==typeof z?z:z.key]=tt,this}getMeta(z){return this.meta["string"==typeof z?z:z.key]}get isGeneric(){for(let z in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function xt(ht,z){return z&&ht?ht.bind(z):ht}class Jt{constructor(z,tt,q){this.name=z,this.init=xt(tt.init,q),this.apply=xt(tt.apply,q)}}const Pt=[new Jt("doc",{init:ht=>ht.doc||ht.schema.topNodeType.createAndFill(),apply:ht=>ht.doc}),new Jt("selection",{init:(ht,z)=>ht.selection||at.atStart(z.doc),apply:ht=>ht.selection}),new Jt("storedMarks",{init:ht=>ht.storedMarks||null,apply:(ht,z,tt,q)=>q.selection.$cursor?ht.storedMarks:null}),new Jt("scrollToSelection",{init:()=>0,apply:(ht,z)=>ht.scrolledIntoView?z+1:z})];class pt{constructor(z,tt){this.schema=z,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Pt.slice(),tt&&tt.forEach(q=>{if(this.pluginsByKey[q.key])throw new RangeError("Adding different instances of a keyed plugin ("+q.key+")");this.plugins.push(q),this.pluginsByKey[q.key]=q,q.spec.state&&this.fields.push(new Jt(q.key,q.spec.state,q))})}}class Qt{constructor(z){this.config=z}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(z){return this.applyTransaction(z).state}filterTransaction(z,tt=-1){for(let q=0;q<this.config.plugins.length;q++)if(q!=tt){let st=this.config.plugins[q];if(st.spec.filterTransaction&&!st.spec.filterTransaction.call(st,z,this))return!1}return!0}applyTransaction(z){if(!this.filterTransaction(z))return{state:this,transactions:[]};let tt=[z],q=this.applyInner(z),st=null;for(;;){let St=!1;for(let Zt=0;Zt<this.config.plugins.length;Zt++){let ne=this.config.plugins[Zt];if(ne.spec.appendTransaction){let jt=st?st[Zt].n:0,Ee=st?st[Zt].state:this,ye=jt<tt.length&&ne.spec.appendTransaction.call(ne,jt?tt.slice(jt):tt,Ee,q);if(ye&&q.filterTransaction(ye,Zt)){if(ye.setMeta("appendedTransaction",z),!st){st=[];for(let Pe=0;Pe<this.config.plugins.length;Pe++)st.push(Pe<Zt?{state:q,n:tt.length}:{state:this,n:0})}tt.push(ye),q=q.applyInner(ye),St=!0}st&&(st[Zt]={state:q,n:tt.length})}}if(!St)return{state:q,transactions:tt}}}applyInner(z){if(!z.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let tt=new Qt(this.config),q=this.config.fields;for(let st=0;st<q.length;st++){let St=q[st];tt[St.name]=St.apply(z,this[St.name],this,tt)}return tt}get tr(){return new Lt(this)}static create(z){let tt=new pt(z.doc?z.doc.type.schema:z.schema,z.plugins),q=new Qt(tt);for(let st=0;st<tt.fields.length;st++)q[tt.fields[st].name]=tt.fields[st].init(z,q);return q}reconfigure(z){let tt=new pt(this.schema,z.plugins),q=tt.fields,st=new Qt(tt);for(let St=0;St<q.length;St++){let Zt=q[St].name;st[Zt]=this.hasOwnProperty(Zt)?this[Zt]:q[St].init(z,st)}return st}toJSON(z){let tt={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(tt.storedMarks=this.storedMarks.map(q=>q.toJSON())),z&&"object"==typeof z)for(let q in z){if("doc"==q||"selection"==q)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let st=z[q],St=st.spec.state;St&&St.toJSON&&(tt[q]=St.toJSON.call(st,this[st.key]))}return tt}static fromJSON(z,tt,q){if(!tt)throw new RangeError("Invalid input for EditorState.fromJSON");if(!z.schema)throw new RangeError("Required config field 'schema' missing");let st=new pt(z.schema,z.plugins),St=new Qt(st);return st.fields.forEach(Zt=>{if("doc"==Zt.name)St.doc=D.NB.fromJSON(z.schema,tt.doc);else if("selection"==Zt.name)St.selection=at.fromJSON(St.doc,tt.selection);else if("storedMarks"==Zt.name)tt.storedMarks&&(St.storedMarks=tt.storedMarks.map(z.schema.markFromJSON));else{if(q)for(let ne in q){let jt=q[ne],Ee=jt.spec.state;if(jt.key==Zt.name&&Ee&&Ee.fromJSON&&Object.prototype.hasOwnProperty.call(tt,ne))return void(St[Zt.name]=Ee.fromJSON.call(jt,z,tt[ne],St))}St[Zt.name]=Zt.init(z,St)}}),St}}function fe(ht,z,tt){for(let q in ht){let st=ht[q];st instanceof Function?st=st.bind(z):"handleDOMEvents"==q&&(st=fe(st,z,{})),tt[q]=st}return tt}class le{constructor(z){this.spec=z,this.props={},z.props&&fe(z.props,this,this.props),this.key=z.key?z.key.key:vt("plugin")}getState(z){return z[this.key]}}const Ot=Object.create(null);function vt(ht){return ht in Ot?ht+"$"+ ++Ot[ht]:(Ot[ht]=0,ht+"$")}class $t{constructor(z="key"){this.key=vt(z)}get(z){return z.config.pluginsByKey[this.key]}getState(z){return z[this.key]}}},8480:(be,zt,j)=>{j.d(zt,{vs:()=>Ne,FC:()=>pt,Pu:()=>Pt,wx:()=>Yt,Mn:()=>Pe,Ax:()=>Ee,nj:()=>Je,nd:()=>z,GJ:()=>nn,k9:()=>$t,dR:()=>Ie});var D=j(7439);const Ht=Math.pow(2,16);function at(Y,k){return Y+k*Ht}function dt(Y){return 65535&Y}class Gt{constructor(k,M,x){this.pos=k,this.delInfo=M,this.recover=x}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class e{constructor(k,M=!1){if(this.ranges=k,this.inverted=M,!k.length&&e.empty)return e.empty}recover(k){let M=0,x=dt(k);if(!this.inverted)for(let J=0;J<x;J++)M+=this.ranges[3*J+2]-this.ranges[3*J+1];return this.ranges[3*x]+M+((Y=k)-(65535&Y))/Ht;var Y}mapResult(k,M=1){return this._map(k,M,!1)}map(k,M=1){return this._map(k,M,!0)}_map(k,M,x){let J=0,G=this.inverted?2:1,X=this.inverted?1:2;for(let ct=0;ct<this.ranges.length;ct+=3){let _t=this.ranges[ct]-(this.inverted?J:0);if(_t>k)break;let R=this.ranges[ct+G],a=this.ranges[ct+X],d=_t+R;if(k<=d){let S=_t+J+((R?k==_t?-1:k==d?1:M:M)<0?0:a);if(x)return S;let I=k==(M<0?_t:d)?null:at(ct/3,k-_t),H=k==_t?2:k==d?1:4;return(M<0?k!=_t:k!=d)&&(H|=8),new Gt(S,H,I)}J+=a-R}return x?k+J:new Gt(k+J,0,null)}touches(k,M){let x=0,J=dt(M),G=this.inverted?2:1,X=this.inverted?1:2;for(let ct=0;ct<this.ranges.length;ct+=3){let _t=this.ranges[ct]-(this.inverted?x:0);if(_t>k)break;let R=this.ranges[ct+G];if(k<=_t+R&&ct==3*J)return!0;x+=this.ranges[ct+X]-R}return!1}forEach(k){let M=this.inverted?2:1,x=this.inverted?1:2;for(let J=0,G=0;J<this.ranges.length;J+=3){let X=this.ranges[J],ct=X-(this.inverted?G:0),_t=X+(this.inverted?0:G),R=this.ranges[J+M],a=this.ranges[J+x];k(ct,ct+R,_t,_t+a),G+=a-R}}invert(){return new e(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(k){return 0==k?e.empty:new e(k<0?[0,-k,0]:[0,0,k])}}e.empty=new e([]);class Ne{constructor(k=[],M,x=0,J=k.length){this.maps=k,this.mirror=M,this.from=x,this.to=J}slice(k=0,M=this.maps.length){return new Ne(this.maps,this.mirror,k,M)}copy(){return new Ne(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(k,M){this.to=this.maps.push(k),null!=M&&this.setMirror(this.maps.length-1,M)}appendMapping(k){for(let M=0,x=this.maps.length;M<k.maps.length;M++){let J=k.getMirror(M);this.appendMap(k.maps[M],null!=J&&J<M?x+J:void 0)}}getMirror(k){if(this.mirror)for(let M=0;M<this.mirror.length;M++)if(this.mirror[M]==k)return this.mirror[M+(M%2?-1:1)]}setMirror(k,M){this.mirror||(this.mirror=[]),this.mirror.push(k,M)}appendMappingInverted(k){for(let M=k.maps.length-1,x=this.maps.length+k.maps.length;M>=0;M--){let J=k.getMirror(M);this.appendMap(k.maps[M].invert(),null!=J&&J>M?x-J-1:void 0)}}invert(){let k=new Ne;return k.appendMappingInverted(this),k}map(k,M=1){if(this.mirror)return this._map(k,M,!0);for(let x=this.from;x<this.to;x++)k=this.maps[x].map(k,M);return k}mapResult(k,M=1){return this._map(k,M,!1)}_map(k,M,x){let J=0;for(let G=this.from;G<this.to;G++){let ct=this.maps[G].mapResult(k,M);if(null!=ct.recover){let _t=this.getMirror(G);if(null!=_t&&_t>G&&_t<this.to){G=_t,k=this.maps[_t].recover(ct.recover);continue}}J|=ct.delInfo,k=ct.pos}return x?k:new Gt(k,J,null)}}const se=Object.create(null);class Nt{getMap(){return e.empty}merge(k){return null}static fromJSON(k,M){if(!M||!M.stepType)throw new RangeError("Invalid input for Step.fromJSON");let x=se[M.stepType];if(!x)throw new RangeError(`No step type ${M.stepType} defined`);return x.fromJSON(k,M)}static jsonID(k,M){if(k in se)throw new RangeError("Duplicate use of step JSON ID "+k);return se[k]=M,M.prototype.jsonID=k,M}}class Dt{constructor(k,M){this.doc=k,this.failed=M}static ok(k){return new Dt(k,null)}static fail(k){return new Dt(null,k)}static fromReplace(k,M,x,J){try{return Dt.ok(k.replace(M,x,J))}catch(G){if(G instanceof D.e4)return Dt.fail(G.message);throw G}}}function Mt(Y,k,M){let x=[];for(let J=0;J<Y.childCount;J++){let G=Y.child(J);G.content.size&&(G=G.copy(Mt(G.content,k,G))),G.isInline&&(G=k(G,M,J)),x.push(G)}return D.HY.fromArray(x)}class Bt extends Nt{constructor(k,M,x){super(),this.from=k,this.to=M,this.mark=x}apply(k){let M=k.slice(this.from,this.to),x=k.resolve(this.from),J=x.node(x.sharedDepth(this.to)),G=new D.p2(Mt(M.content,(X,ct)=>X.isAtom&&ct.type.allowsMarkType(this.mark.type)?X.mark(this.mark.addToSet(X.marks)):X,J),M.openStart,M.openEnd);return Dt.fromReplace(k,this.from,this.to,G)}invert(){return new Lt(this.from,this.to,this.mark)}map(k){let M=k.mapResult(this.from,1),x=k.mapResult(this.to,-1);return M.deleted&&x.deleted||M.pos>=x.pos?null:new Bt(M.pos,x.pos,this.mark)}merge(k){return k instanceof Bt&&k.mark.eq(this.mark)&&this.from<=k.to&&this.to>=k.from?new Bt(Math.min(this.from,k.from),Math.max(this.to,k.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(k,M){if("number"!=typeof M.from||"number"!=typeof M.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Bt(M.from,M.to,k.markFromJSON(M.mark))}}Nt.jsonID("addMark",Bt);class Lt extends Nt{constructor(k,M,x){super(),this.from=k,this.to=M,this.mark=x}apply(k){let M=k.slice(this.from,this.to),x=new D.p2(Mt(M.content,J=>J.mark(this.mark.removeFromSet(J.marks)),k),M.openStart,M.openEnd);return Dt.fromReplace(k,this.from,this.to,x)}invert(){return new Bt(this.from,this.to,this.mark)}map(k){let M=k.mapResult(this.from,1),x=k.mapResult(this.to,-1);return M.deleted&&x.deleted||M.pos>=x.pos?null:new Lt(M.pos,x.pos,this.mark)}merge(k){return k instanceof Lt&&k.mark.eq(this.mark)&&this.from<=k.to&&this.to>=k.from?new Lt(Math.min(this.from,k.from),Math.max(this.to,k.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(k,M){if("number"!=typeof M.from||"number"!=typeof M.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Lt(M.from,M.to,k.markFromJSON(M.mark))}}Nt.jsonID("removeMark",Lt);class xt extends Nt{constructor(k,M){super(),this.pos=k,this.mark=M}apply(k){let M=k.nodeAt(this.pos);if(!M)return Dt.fail("No node at mark step's position");let x=M.type.create(M.attrs,null,this.mark.addToSet(M.marks));return Dt.fromReplace(k,this.pos,this.pos+1,new D.p2(D.HY.from(x),0,M.isLeaf?0:1))}invert(k){let M=k.nodeAt(this.pos);if(M){let x=this.mark.addToSet(M.marks);if(x.length==M.marks.length){for(let J=0;J<M.marks.length;J++)if(!M.marks[J].isInSet(x))return new xt(this.pos,M.marks[J]);return new xt(this.pos,this.mark)}}return new Jt(this.pos,this.mark)}map(k){let M=k.mapResult(this.pos,1);return M.deletedAfter?null:new xt(M.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(k,M){if("number"!=typeof M.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new xt(M.pos,k.markFromJSON(M.mark))}}Nt.jsonID("addNodeMark",xt);class Jt extends Nt{constructor(k,M){super(),this.pos=k,this.mark=M}apply(k){let M=k.nodeAt(this.pos);if(!M)return Dt.fail("No node at mark step's position");let x=M.type.create(M.attrs,null,this.mark.removeFromSet(M.marks));return Dt.fromReplace(k,this.pos,this.pos+1,new D.p2(D.HY.from(x),0,M.isLeaf?0:1))}invert(k){let M=k.nodeAt(this.pos);return M&&this.mark.isInSet(M.marks)?new xt(this.pos,this.mark):this}map(k){let M=k.mapResult(this.pos,1);return M.deletedAfter?null:new Jt(M.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(k,M){if("number"!=typeof M.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Jt(M.pos,k.markFromJSON(M.mark))}}Nt.jsonID("removeNodeMark",Jt);class Pt extends Nt{constructor(k,M,x,J=!1){super(),this.from=k,this.to=M,this.slice=x,this.structure=J}apply(k){return this.structure&&Qt(k,this.from,this.to)?Dt.fail("Structure replace would overwrite content"):Dt.fromReplace(k,this.from,this.to,this.slice)}getMap(){return new e([this.from,this.to-this.from,this.slice.size])}invert(k){return new Pt(this.from,this.from+this.slice.size,k.slice(this.from,this.to))}map(k){let M=k.mapResult(this.from,1),x=k.mapResult(this.to,-1);return M.deletedAcross&&x.deletedAcross?null:new Pt(M.pos,Math.max(M.pos,x.pos),this.slice)}merge(k){if(!(k instanceof Pt)||k.structure||this.structure)return null;if(this.from+this.slice.size!=k.from||this.slice.openEnd||k.slice.openStart){if(k.to!=this.from||this.slice.openStart||k.slice.openEnd)return null;{let M=this.slice.size+k.slice.size==0?D.p2.empty:new D.p2(k.slice.content.append(this.slice.content),k.slice.openStart,this.slice.openEnd);return new Pt(k.from,this.to,M,this.structure)}}{let M=this.slice.size+k.slice.size==0?D.p2.empty:new D.p2(this.slice.content.append(k.slice.content),this.slice.openStart,k.slice.openEnd);return new Pt(this.from,this.to+(k.to-k.from),M,this.structure)}}toJSON(){let k={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(k.slice=this.slice.toJSON()),this.structure&&(k.structure=!0),k}static fromJSON(k,M){if("number"!=typeof M.from||"number"!=typeof M.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Pt(M.from,M.to,D.p2.fromJSON(k,M.slice),!!M.structure)}}Nt.jsonID("replace",Pt);class pt extends Nt{constructor(k,M,x,J,G,X,ct=!1){super(),this.from=k,this.to=M,this.gapFrom=x,this.gapTo=J,this.slice=G,this.insert=X,this.structure=ct}apply(k){if(this.structure&&(Qt(k,this.from,this.gapFrom)||Qt(k,this.gapTo,this.to)))return Dt.fail("Structure gap-replace would overwrite content");let M=k.slice(this.gapFrom,this.gapTo);if(M.openStart||M.openEnd)return Dt.fail("Gap is not a flat range");let x=this.slice.insertAt(this.insert,M.content);return x?Dt.fromReplace(k,this.from,this.to,x):Dt.fail("Content does not fit in gap")}getMap(){return new e([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(k){let M=this.gapTo-this.gapFrom;return new pt(this.from,this.from+this.slice.size+M,this.from+this.insert,this.from+this.insert+M,k.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(k){let M=k.mapResult(this.from,1),x=k.mapResult(this.to,-1),J=k.map(this.gapFrom,-1),G=k.map(this.gapTo,1);return M.deletedAcross&&x.deletedAcross||J<M.pos||G>x.pos?null:new pt(M.pos,x.pos,J,G,this.slice,this.insert,this.structure)}toJSON(){let k={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(k.slice=this.slice.toJSON()),this.structure&&(k.structure=!0),k}static fromJSON(k,M){if("number"!=typeof M.from||"number"!=typeof M.to||"number"!=typeof M.gapFrom||"number"!=typeof M.gapTo||"number"!=typeof M.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new pt(M.from,M.to,M.gapFrom,M.gapTo,D.p2.fromJSON(k,M.slice),M.insert,!!M.structure)}}function Qt(Y,k,M){let x=Y.resolve(k),J=M-k,G=x.depth;for(;J>0&&G>0&&x.indexAfter(G)==x.node(G).childCount;)G--,J--;if(J>0){let X=x.node(G).maybeChild(x.indexAfter(G));for(;J>0;){if(!X||X.isLeaf)return!0;X=X.firstChild,J--}}return!1}function vt(Y,k,M){return(0==k||Y.canReplace(k,Y.childCount))&&(M==Y.childCount||Y.canReplace(0,M))}function $t(Y){let M=Y.parent.content.cutByIndex(Y.startIndex,Y.endIndex);for(let x=Y.depth;;--x){let J=Y.$from.node(x),G=Y.$from.index(x),X=Y.$to.indexAfter(x);if(x<Y.depth&&J.canReplace(G,X,M))return x;if(0==x||J.type.spec.isolating||!vt(J,G,X))break}return null}function z(Y,k,M=null,x=Y){let J=function(Y,k){let{parent:M,startIndex:x,endIndex:J}=Y,G=M.contentMatchAt(x).findWrapping(k);return G&&M.canReplaceWith(x,J,G.length?G[0]:k)?G:null}(Y,k),G=J&&function(Y,k){let{parent:M,startIndex:x,endIndex:J}=Y,G=M.child(x),X=k.contentMatch.findWrapping(G.type);if(!X)return null;let _t=(X.length?X[X.length-1]:k).contentMatch;for(let R=x;_t&&R<J;R++)_t=_t.matchType(M.child(R).type);return _t&&_t.validEnd?X:null}(x,k);return G?J.map(tt).concat({type:k,attrs:M}).concat(G.map(tt)):null}function tt(Y){return{type:Y,attrs:null}}function Ee(Y,k,M=1,x){let J=Y.resolve(k),G=J.depth-M,X=x&&x[x.length-1]||J.parent;if(G<0||J.parent.type.spec.isolating||!J.parent.canReplace(J.index(),J.parent.childCount)||!X.type.validContent(J.parent.content.cutByIndex(J.index(),J.parent.childCount)))return!1;for(let R=J.depth-1,a=M-2;R>G;R--,a--){let d=J.node(R),C=J.index(R);if(d.type.spec.isolating)return!1;let S=d.content.cutByIndex(C,d.childCount),I=x&&x[a+1];I&&(S=S.replaceChild(0,I.type.create(I.attrs)));let H=x&&x[a]||d;if(!d.canReplace(C+1,d.childCount)||!H.type.validContent(S))return!1}let ct=J.indexAfter(G),_t=x&&x[0];return J.node(G).canReplaceWith(ct,ct,_t?_t.type:J.node(G+1).type)}function Pe(Y,k){let M=Y.resolve(k),x=M.index();return ue(M.nodeBefore,M.nodeAfter)&&M.parent.canReplace(x,x+1)}function ue(Y,k){return!(!Y||!k||Y.isLeaf||!Y.canAppend(k))}function nn(Y,k,M=-1){let x=Y.resolve(k);for(let J=x.depth;;J--){let G,X,ct=x.index(J);if(J==x.depth?(G=x.nodeBefore,X=x.nodeAfter):M>0?(G=x.node(J+1),ct++,X=x.node(J).maybeChild(ct)):(G=x.node(J).maybeChild(ct-1),X=x.node(J+1)),G&&!G.isTextblock&&ue(G,X)&&x.node(J).canReplace(ct,ct+1))return k;if(0==J)break;k=M<0?x.before(J):x.after(J)}}function Je(Y,k,M){let x=Y.resolve(k);if(!M.content.size)return k;let J=M.content;for(let G=0;G<M.openStart;G++)J=J.firstChild.content;for(let G=1;G<=(0==M.openStart&&M.size?2:1);G++)for(let X=x.depth;X>=0;X--){let ct=X==x.depth?0:x.pos<=(x.start(X+1)+x.end(X+1))/2?-1:1,_t=x.index(X)+(ct>0?1:0),R=x.node(X),a=!1;if(1==G)a=R.canReplace(_t,_t,J);else{let d=R.contentMatchAt(_t).findWrapping(J.firstChild.type);a=d&&R.canReplaceWith(_t,_t,d[0])}if(a)return 0==ct?x.pos:ct<0?x.before(X+1):x.after(X+1)}return null}function Ie(Y,k,M=k,x=D.p2.empty){if(k==M&&!x.size)return null;let J=Y.resolve(k),G=Y.resolve(M);return rn(J,G,x)?new Pt(k,M,x):new ve(J,G,x).fit()}function rn(Y,k,M){return!M.openStart&&!M.openEnd&&Y.start()==k.start()&&Y.parent.canReplace(Y.index(),k.index(),M.content)}Nt.jsonID("replaceAround",pt);class ve{constructor(k,M,x){this.$from=k,this.$to=M,this.unplaced=x,this.frontier=[],this.placed=D.HY.empty;for(let J=0;J<=k.depth;J++){let G=k.node(J);this.frontier.push({type:G.type,match:G.contentMatchAt(k.indexAfter(J))})}for(let J=k.depth;J>0;J--)this.placed=D.HY.from(k.node(J).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let R=this.findFittable();R?this.placeNodes(R):this.openMore()||this.dropNode()}let k=this.mustMoveInline(),M=this.placed.size-this.depth-this.$from.depth,x=this.$from,J=this.close(k<0?this.$to:x.doc.resolve(k));if(!J)return null;let G=this.placed,X=x.depth,ct=J.depth;for(;X&&ct&&1==G.childCount;)G=G.firstChild.content,X--,ct--;let _t=new D.p2(G,X,ct);return k>-1?new pt(x.pos,k,this.$to.pos,this.$to.end(),_t,M):_t.size||x.pos!=this.$to.pos?new Pt(x.pos,J.pos,_t):null}findFittable(){let k=this.unplaced.openStart;for(let M=this.unplaced.content,x=0,J=this.unplaced.openEnd;x<k;x++){let G=M.firstChild;if(M.childCount>1&&(J=0),G.type.spec.isolating&&J<=x){k=x;break}M=G.content}for(let M=1;M<=2;M++)for(let x=1==M?k:this.unplaced.openStart;x>=0;x--){let J,G=null;x?(G=_e(this.unplaced.content,x-1).firstChild,J=G.content):J=this.unplaced.content;let X=J.firstChild;for(let ct=this.depth;ct>=0;ct--){let a,{type:_t,match:R}=this.frontier[ct],d=null;if(1==M&&(X?R.matchType(X.type)||(d=R.fillBefore(D.HY.from(X),!1)):G&&_t.compatibleContent(G.type)))return{sliceDepth:x,frontierDepth:ct,parent:G,inject:d};if(2==M&&X&&(a=R.findWrapping(X.type)))return{sliceDepth:x,frontierDepth:ct,parent:G,wrap:a};if(G&&R.matchType(G.type))break}}}openMore(){let{content:k,openStart:M,openEnd:x}=this.unplaced,J=_e(k,M);return!(!J.childCount||J.firstChild.isLeaf||(this.unplaced=new D.p2(k,M+1,Math.max(x,J.size+M>=k.size-x?M+1:0)),0))}dropNode(){let{content:k,openStart:M,openEnd:x}=this.unplaced,J=_e(k,M);if(J.childCount<=1&&M>0){let G=k.size-M<=M+J.size;this.unplaced=new D.p2(Me(k,M-1,1),M-1,G?M-1:x)}else this.unplaced=new D.p2(Me(k,M,1),M,x)}placeNodes({sliceDepth:k,frontierDepth:M,parent:x,inject:J,wrap:G}){for(;this.depth>M;)this.closeFrontierNode();if(G)for(let H=0;H<G.length;H++)this.openFrontierNode(G[H]);let X=this.unplaced,ct=x?x.content:X.content,_t=X.openStart-k,R=0,a=[],{match:d,type:C}=this.frontier[M];if(J){for(let H=0;H<J.childCount;H++)a.push(J.child(H));d=d.matchFragment(J)}let S=ct.size+k-(X.content.size-X.openEnd);for(;R<ct.childCount;){let H=ct.child(R),K=d.matchType(H.type);if(!K)break;R++,(R>1||0==_t||H.content.size)&&(d=K,a.push(Ve(H.mark(C.allowedMarks(H.marks)),1==R?_t:0,R==ct.childCount?S:-1)))}let I=R==ct.childCount;I||(S=-1),this.placed=Ge(this.placed,M,D.HY.from(a)),this.frontier[M].match=d,I&&S<0&&x&&x.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let H=0,K=ct;H<S;H++){let lt=K.lastChild;this.frontier.push({type:lt.type,match:lt.contentMatchAt(lt.childCount)}),K=lt.content}this.unplaced=I?0==k?D.p2.empty:new D.p2(Me(X.content,k-1,1),k-1,S<0?X.openEnd:k-1):new D.p2(Me(X.content,k,R),X.openStart,X.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let M,k=this.frontier[this.depth];if(!k.type.isTextblock||!pe(this.$to,this.$to.depth,k.type,k.match,!1)||this.$to.depth==this.depth&&(M=this.findCloseLevel(this.$to))&&M.depth==this.depth)return-1;let{depth:x}=this.$to,J=this.$to.after(x);for(;x>1&&J==this.$to.end(--x);)++J;return J}findCloseLevel(k){t:for(let M=Math.min(this.depth,k.depth);M>=0;M--){let{match:x,type:J}=this.frontier[M],G=M<k.depth&&k.end(M+1)==k.pos+(k.depth-(M+1)),X=pe(k,M,J,x,G);if(X){for(let ct=M-1;ct>=0;ct--){let{match:_t,type:R}=this.frontier[ct],a=pe(k,ct,R,_t,!0);if(!a||a.childCount)continue t}return{depth:M,fit:X,move:G?k.doc.resolve(k.after(M+1)):k}}}}close(k){let M=this.findCloseLevel(k);if(!M)return null;for(;this.depth>M.depth;)this.closeFrontierNode();M.fit.childCount&&(this.placed=Ge(this.placed,M.depth,M.fit)),k=M.move;for(let x=M.depth+1;x<=k.depth;x++){let J=k.node(x),G=J.type.contentMatch.fillBefore(J.content,!0,k.index(x));this.openFrontierNode(J.type,J.attrs,G)}return k}openFrontierNode(k,M=null,x){let J=this.frontier[this.depth];J.match=J.match.matchType(k),this.placed=Ge(this.placed,this.depth,D.HY.from(k.create(M,x))),this.frontier.push({type:k,match:k.contentMatch})}closeFrontierNode(){let M=this.frontier.pop().match.fillBefore(D.HY.empty,!0);M.childCount&&(this.placed=Ge(this.placed,this.frontier.length,M))}}function Me(Y,k,M){return 0==k?Y.cutByIndex(M,Y.childCount):Y.replaceChild(0,Y.firstChild.copy(Me(Y.firstChild.content,k-1,M)))}function Ge(Y,k,M){return 0==k?Y.append(M):Y.replaceChild(Y.childCount-1,Y.lastChild.copy(Ge(Y.lastChild.content,k-1,M)))}function _e(Y,k){for(let M=0;M<k;M++)Y=Y.firstChild.content;return Y}function Ve(Y,k,M){if(k<=0)return Y;let x=Y.content;return k>1&&(x=x.replaceChild(0,Ve(x.firstChild,k-1,1==x.childCount?M-1:0))),k>0&&(x=Y.type.contentMatch.fillBefore(x).append(x),M<=0&&(x=x.append(Y.type.contentMatch.matchFragment(x).fillBefore(D.HY.empty,!0)))),Y.copy(x)}function pe(Y,k,M,x,J){let G=Y.node(k),X=J?Y.indexAfter(k):Y.index(k);if(X==G.childCount&&!M.compatibleContent(G.type))return null;let ct=x.fillBefore(G.content,!0,X);return ct&&!function(Y,k,M){for(let x=M;x<k.childCount;x++)if(!Y.allowsMarks(k.child(x).marks))return!0;return!1}(M,G.content,X)?ct:null}function Le(Y){return Y.spec.defining||Y.spec.definingForContent}function qe(Y,k,M,x,J){if(k<M){let G=Y.firstChild;Y=Y.replaceChild(0,G.copy(qe(G.content,k+1,M,x,G)))}if(k>x){let G=J.contentMatchAt(0),X=G.fillBefore(Y).append(Y);Y=X.append(G.matchFragment(X).fillBefore(D.HY.empty,!0))}return Y}function me(Y,k){let M=[];for(let J=Math.min(Y.depth,k.depth);J>=0;J--){let G=Y.start(J);if(G<Y.pos-(Y.depth-J)||k.end(J)>k.pos+(k.depth-J)||Y.node(J).type.spec.isolating||k.node(J).type.spec.isolating)break;(G==k.start(J)||J==Y.depth&&J==k.depth&&Y.parent.inlineContent&&k.parent.inlineContent&&J&&k.start(J-1)==G-1)&&M.push(J)}return M}class $e extends Nt{constructor(k,M,x){super(),this.pos=k,this.attr=M,this.value=x}apply(k){let M=k.nodeAt(this.pos);if(!M)return Dt.fail("No node at attribute step's position");let x=Object.create(null);for(let G in M.attrs)x[G]=M.attrs[G];x[this.attr]=this.value;let J=M.type.create(x,null,M.marks);return Dt.fromReplace(k,this.pos,this.pos+1,new D.p2(D.HY.from(J),0,M.isLeaf?0:1))}getMap(){return e.empty}invert(k){return new $e(this.pos,this.attr,k.nodeAt(this.pos).attrs[this.attr])}map(k){let M=k.mapResult(this.pos,1);return M.deletedAfter?null:new $e(M.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(k,M){if("number"!=typeof M.pos||"string"!=typeof M.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new $e(M.pos,M.attr,M.value)}}Nt.jsonID("attr",$e);let Ce=class extends Error{};Ce=function Y(k){let M=Error.call(this,k);return M.__proto__=Y.prototype,M},(Ce.prototype=Object.create(Error.prototype)).constructor=Ce,Ce.prototype.name="TransformError";class Yt{constructor(k){this.doc=k,this.steps=[],this.docs=[],this.mapping=new Ne}get before(){return this.docs.length?this.docs[0]:this.doc}step(k){let M=this.maybeStep(k);if(M.failed)throw new Ce(M.failed);return this}maybeStep(k){let M=k.apply(this.doc);return M.failed||this.addStep(k,M.doc),M}get docChanged(){return this.steps.length>0}addStep(k,M){this.docs.push(this.doc),this.steps.push(k),this.mapping.appendMap(k.getMap()),this.doc=M}replace(k,M=k,x=D.p2.empty){let J=Ie(this.doc,k,M,x);return J&&this.step(J),this}replaceWith(k,M,x){return this.replace(k,M,new D.p2(D.HY.from(x),0,0))}delete(k,M){return this.replace(k,M,D.p2.empty)}insert(k,M){return this.replaceWith(k,k,M)}replaceRange(k,M,x){return function(Y,k,M,x){if(!x.size)return Y.deleteRange(k,M);let J=Y.doc.resolve(k),G=Y.doc.resolve(M);if(rn(J,G,x))return Y.step(new Pt(k,M,x));let X=me(J,Y.doc.resolve(M));0==X[X.length-1]&&X.pop();let ct=-(J.depth+1);X.unshift(ct);for(let C=J.depth,S=J.pos-1;C>0;C--,S--){let I=J.node(C).type.spec;if(I.defining||I.definingAsContext||I.isolating)break;X.indexOf(C)>-1?ct=C:J.before(C)==S&&X.splice(1,0,-C)}let _t=X.indexOf(ct),R=[],a=x.openStart;for(let C=x.content,S=0;;S++){let I=C.firstChild;if(R.push(I),S==x.openStart)break;C=I.content}for(let C=a-1;C>=0;C--){let S=R[C].type,I=Le(S);if(I&&J.node(_t).type!=S)a=C;else if(I||!S.isTextblock)break}for(let C=x.openStart;C>=0;C--){let S=(C+a+1)%(x.openStart+1),I=R[S];if(I)for(let H=0;H<X.length;H++){let K=X[(H+_t)%X.length],lt=!0;K<0&&(lt=!1,K=-K);let It=J.node(K-1),Et=J.index(K-1);if(It.canReplaceWith(Et,Et,I.type,I.marks))return Y.replace(J.before(K),lt?G.after(K):M,new D.p2(qe(x.content,0,x.openStart,S),S,x.openEnd))}}let d=Y.steps.length;for(let C=X.length-1;C>=0&&(Y.replace(k,M,x),!(Y.steps.length>d));C--){let S=X[C];S<0||(k=J.before(S),M=G.after(S))}}(this,k,M,x),this}replaceRangeWith(k,M,x){return function(Y,k,M,x){if(!x.isInline&&k==M&&Y.doc.resolve(k).parent.content.size){let J=function(Y,k,M){let x=Y.resolve(k);if(x.parent.canReplaceWith(x.index(),x.index(),M))return k;if(0==x.parentOffset)for(let J=x.depth-1;J>=0;J--){let G=x.index(J);if(x.node(J).canReplaceWith(G,G,M))return x.before(J+1);if(G>0)return null}if(x.parentOffset==x.parent.content.size)for(let J=x.depth-1;J>=0;J--){let G=x.indexAfter(J);if(x.node(J).canReplaceWith(G,G,M))return x.after(J+1);if(G<x.node(J).childCount)return null}return null}(Y.doc,k,x.type);null!=J&&(k=M=J)}Y.replaceRange(k,M,new D.p2(D.HY.from(x),0,0))}(this,k,M,x),this}deleteRange(k,M){return function(Y,k,M){let x=Y.doc.resolve(k),J=Y.doc.resolve(M),G=me(x,J);for(let X=0;X<G.length;X++){let ct=G[X],_t=X==G.length-1;if(_t&&0==ct||x.node(ct).type.contentMatch.validEnd)return Y.delete(x.start(ct),J.end(ct));if(ct>0&&(_t||x.node(ct-1).canReplace(x.index(ct-1),J.indexAfter(ct-1))))return Y.delete(x.before(ct),J.after(ct))}for(let X=1;X<=x.depth&&X<=J.depth;X++)if(k-x.start(X)==x.depth-X&&M>x.end(X)&&J.end(X)-M!=J.depth-X)return Y.delete(x.before(X),M);Y.delete(k,M)}(this,k,M),this}lift(k,M){return function(Y,k,M){let{$from:x,$to:J,depth:G}=k,X=x.before(G+1),ct=J.after(G+1),_t=X,R=ct,a=D.HY.empty,d=0;for(let I=G,H=!1;I>M;I--)H||x.index(I)>0?(H=!0,a=D.HY.from(x.node(I).copy(a)),d++):_t--;let C=D.HY.empty,S=0;for(let I=G,H=!1;I>M;I--)H||J.after(I+1)<J.end(I)?(H=!0,C=D.HY.from(J.node(I).copy(C)),S++):R++;Y.step(new pt(_t,R,X,ct,new D.p2(a.append(C),d,S),a.size-d,!0))}(this,k,M),this}join(k,M=1){return function(Y,k,M){let x=new Pt(k-M,k+M,D.p2.empty,!0);Y.step(x)}(this,k,M),this}wrap(k,M){return function(Y,k,M){let x=D.HY.empty;for(let X=M.length-1;X>=0;X--){if(x.size){let ct=M[X].type.contentMatch.matchFragment(x);if(!ct||!ct.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}x=D.HY.from(M[X].type.create(M[X].attrs,x))}let J=k.start,G=k.end;Y.step(new pt(J,G,J,G,new D.p2(x,0,0),M.length,!0))}(this,k,M),this}setBlockType(k,M=k,x,J=null){return function(Y,k,M,x,J){if(!x.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let G=Y.steps.length;Y.doc.nodesBetween(k,M,(X,ct)=>{if(X.isTextblock&&!X.hasMarkup(x,J)&&function(Y,k,M){let x=Y.resolve(k),J=x.index();return x.parent.canReplaceWith(J,J+1,M)}(Y.doc,Y.mapping.slice(G).map(ct),x)){Y.clearIncompatible(Y.mapping.slice(G).map(ct,1),x);let _t=Y.mapping.slice(G),R=_t.map(ct,1),a=_t.map(ct+X.nodeSize,1);return Y.step(new pt(R,a,R+1,a-1,new D.p2(D.HY.from(x.create(J,null,X.marks)),0,0),1,!0)),!1}})}(this,k,M,x,J),this}setNodeMarkup(k,M,x=null,J){return function(Y,k,M,x,J){let G=Y.doc.nodeAt(k);if(!G)throw new RangeError("No node at given position");M||(M=G.type);let X=M.create(x,null,J||G.marks);if(G.isLeaf)return Y.replaceWith(k,k+G.nodeSize,X);if(!M.validContent(G.content))throw new RangeError("Invalid content for node type "+M.name);Y.step(new pt(k,k+G.nodeSize,k+1,k+G.nodeSize-1,new D.p2(D.HY.from(X),0,0),1,!0))}(this,k,M,x,J),this}setNodeAttribute(k,M,x){return this.step(new $e(k,M,x)),this}addNodeMark(k,M){return this.step(new xt(k,M)),this}removeNodeMark(k,M){if(!(M instanceof D.vc)){let x=this.doc.nodeAt(k);if(!x)throw new RangeError("No node at position "+k);if(!(M=M.isInSet(x.marks)))return this}return this.step(new Jt(k,M)),this}split(k,M=1,x){return function(Y,k,M=1,x){let J=Y.doc.resolve(k),G=D.HY.empty,X=D.HY.empty;for(let ct=J.depth,_t=J.depth-M,R=M-1;ct>_t;ct--,R--){G=D.HY.from(J.node(ct).copy(G));let a=x&&x[R];X=D.HY.from(a?a.type.create(a.attrs,X):J.node(ct).copy(X))}Y.step(new Pt(k,k,new D.p2(G.append(X),M,M),!0))}(this,k,M,x),this}addMark(k,M,x){return function(Y,k,M,x){let X,ct,J=[],G=[];Y.doc.nodesBetween(k,M,(_t,R,a)=>{if(!_t.isInline)return;let d=_t.marks;if(!x.isInSet(d)&&a.type.allowsMarkType(x.type)){let C=Math.max(R,k),S=Math.min(R+_t.nodeSize,M),I=x.addToSet(d);for(let H=0;H<d.length;H++)d[H].isInSet(I)||(X&&X.to==C&&X.mark.eq(d[H])?X.to=S:J.push(X=new Lt(C,S,d[H])));ct&&ct.to==C?ct.to=S:G.push(ct=new Bt(C,S,x))}}),J.forEach(_t=>Y.step(_t)),G.forEach(_t=>Y.step(_t))}(this,k,M,x),this}removeMark(k,M,x){return function(Y,k,M,x){let J=[],G=0;Y.doc.nodesBetween(k,M,(X,ct)=>{if(!X.isInline)return;G++;let _t=null;if(x instanceof D.ZU){let a,R=X.marks;for(;a=x.isInSet(R);)(_t||(_t=[])).push(a),R=a.removeFromSet(R)}else x?x.isInSet(X.marks)&&(_t=[x]):_t=X.marks;if(_t&&_t.length){let R=Math.min(ct+X.nodeSize,M);for(let a=0;a<_t.length;a++){let C,d=_t[a];for(let S=0;S<J.length;S++){let I=J[S];I.step==G-1&&d.eq(J[S].style)&&(C=I)}C?(C.to=R,C.step=G):J.push({style:d,from:Math.max(ct,k),to:R,step:G})}}}),J.forEach(X=>Y.step(new Lt(X.from,X.to,X.style)))}(this,k,M,x),this}clearIncompatible(k,M,x){return function(Y,k,M,x=M.contentMatch){let J=Y.doc.nodeAt(k),G=[],X=k+1;for(let ct=0;ct<J.childCount;ct++){let _t=J.child(ct),R=X+_t.nodeSize,a=x.matchType(_t.type);if(a){x=a;for(let d=0;d<_t.marks.length;d++)M.allowsMarkType(_t.marks[d].type)||Y.step(new Lt(X,R,_t.marks[d]))}else G.push(new Pt(X,R,D.p2.empty));X=R}if(!x.validEnd){let ct=x.fillBefore(D.HY.empty,!0);Y.replace(X,X,new D.p2(ct,0,0))}for(let ct=G.length-1;ct>=0;ct--)Y.step(G[ct])}(this,k,M,x),this}}},3594:(be,zt,j)=>{j.d(zt,{p:()=>hn,EH:()=>Qe,tk:()=>Sn});var D=j(2463),gt=j(7439),Ht=j(8480);const at=function(n){for(var t=0;;t++)if(!(n=n.previousSibling))return t},dt=function(n){let t=n.assignedSlot||n.parentNode;return t&&11==t.nodeType?t.host:t};let re=null;const Xt=function(n,t,o){let i=re||(re=document.createRange());return i.setEnd(n,null==o?n.nodeValue.length:o),i.setStart(n,t||0),i},qt=function(n,t,o,i){return o&&(ae(n,t,o,i,-1)||ae(n,t,o,i,1))},Rt=/^(img|br|input|textarea|hr)$/i;function ae(n,t,o,i,s){for(;;){if(n==o&&t==i)return!0;if(t==(s<0?0:Gt(n))){let l=n.parentNode;if(!l||1!=l.nodeType||Ne(n)||Rt.test(n.nodeName)||"false"==n.contentEditable)return!1;t=at(n)+(s<0?0:1),n=l}else{if(1!=n.nodeType)return!1;if("false"==(n=n.childNodes[t+(s<0?-1:0)]).contentEditable)return!1;t=s<0?Gt(n):0}}}function Gt(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}function Ne(n){let t;for(let o=n;o&&!(t=o.pmViewDesc);o=o.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}const se=function(n){return n.focusNode&&qt(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Nt(n,t){let o=document.createEvent("Event");return o.initEvent("keydown",!0,!0),o.keyCode=n,o.key=o.code=t,o}const Bt="undefined"!=typeof navigator?navigator:null,Lt="undefined"!=typeof document?document:null,xt=Bt&&Bt.userAgent||"",Jt=/Edge\/(\d+)/.exec(xt),Pt=/MSIE \d/.exec(xt),pt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xt),Qt=!!(Pt||pt||Jt),fe=Pt?document.documentMode:pt?+pt[1]:Jt?+Jt[1]:0,le=!Qt&&/gecko\/(\d+)/i.test(xt);le&&/Firefox\/(\d+)/.exec(xt);const Ot=!Qt&&/Chrome\/(\d+)/.exec(xt),vt=!!Ot,$t=Ot?+Ot[1]:0,ht=!Qt&&!!Bt&&/Apple Computer/.test(Bt.vendor),z=ht&&(/Mobile\/\w+/.test(xt)||!!Bt&&Bt.maxTouchPoints>2),tt=z||!!Bt&&/Mac/.test(Bt.platform),q=!!Bt&&/Win/.test(Bt.platform),st=/Android \d/.test(xt),St=!!Lt&&"webkitFontSmoothing"in Lt.documentElement.style,Zt=St?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ne(n){return{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function jt(n,t){return"number"==typeof n?n:n[t]}function Ee(n){let t=n.getBoundingClientRect();return{left:t.left,right:t.left+n.clientWidth*(t.width/n.offsetWidth||1),top:t.top,bottom:t.top+n.clientHeight*(t.height/n.offsetHeight||1)}}function ye(n,t,o){let i=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,l=n.dom.ownerDocument;for(let u=o||n.dom;u;u=dt(u)){if(1!=u.nodeType)continue;let h=u,y=h==l.body,A=y?ne(l):Ee(h),E=0,F=0;if(t.top<A.top+jt(i,"top")?F=-(A.top-t.top+jt(s,"top")):t.bottom>A.bottom-jt(i,"bottom")&&(F=t.bottom-A.bottom+jt(s,"bottom")),t.left<A.left+jt(i,"left")?E=-(A.left-t.left+jt(s,"left")):t.right>A.right-jt(i,"right")&&(E=t.right-A.right+jt(s,"right")),E||F)if(y)l.defaultView.scrollBy(E,F);else{let V=h.scrollLeft,Q=h.scrollTop;F&&(h.scrollTop+=F),E&&(h.scrollLeft+=E);let nt=h.scrollLeft-V,mt=h.scrollTop-Q;t={left:t.left-nt,top:t.top-mt,right:t.right-nt,bottom:t.bottom-mt}}if(y)break}}function ue(n){let t=[],o=n.ownerDocument;for(let i=n;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),n!=o);i=dt(i));return t}function Ue(n,t){for(let o=0;o<n.length;o++){let{dom:i,top:s,left:l}=n[o];i.scrollTop!=s+t&&(i.scrollTop=s+t),i.scrollLeft!=l&&(i.scrollLeft=l)}}let de=null;function Ie(n,t){let o,s,y,A,i=2e8,l=0,u=t.top,h=t.top;for(let E=n.firstChild,F=0;E;E=E.nextSibling,F++){let V;if(1==E.nodeType)V=E.getClientRects();else{if(3!=E.nodeType)continue;V=Xt(E).getClientRects()}for(let Q=0;Q<V.length;Q++){let nt=V[Q];if(nt.top<=u&&nt.bottom>=h){u=Math.max(nt.bottom,u),h=Math.min(nt.top,h);let mt=nt.left>t.left?nt.left-t.left:nt.right<t.left?t.left-nt.right:0;if(mt<i){o=E,i=mt,s=mt&&3==o.nodeType?{left:nt.right<t.left?nt.right:nt.left,top:t.top}:t,1==E.nodeType&&mt&&(l=F+(t.left>=(nt.left+nt.right)/2?1:0));continue}}else nt.top>t.top&&!y&&nt.left<=t.left&&nt.right>=t.left&&(y=E,A={left:Math.max(nt.left,Math.min(nt.right,t.left)),top:nt.top});!o&&(t.left>=nt.right&&t.top>=nt.top||t.left>=nt.left&&t.top>=nt.bottom)&&(l=F+1)}}return!o&&y&&(o=y,s=A,i=0),o&&3==o.nodeType?function(n,t){let o=n.nodeValue.length,i=document.createRange();for(let s=0;s<o;s++){i.setEnd(n,s+1),i.setStart(n,s);let l=Le(i,1);if(l.top!=l.bottom&&ve(t,l))return{node:n,offset:s+(t.left>=(l.left+l.right)/2?1:0)}}return{node:n,offset:0}}(o,s):!o||i&&1==o.nodeType?{node:n,offset:l}:Ie(o,s)}function ve(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function Ve(n,t,o){let i=n.childNodes.length;if(i&&o.top<o.bottom)for(let s=Math.max(0,Math.min(i-1,Math.floor(i*(t.top-o.top)/(o.bottom-o.top))-2)),l=s;;){let u=n.childNodes[l];if(1==u.nodeType){let h=u.getClientRects();for(let y=0;y<h.length;y++){let A=h[y];if(ve(t,A))return Ve(u,t,A)}}if((l=(l+1)%i)==s)break}return n}function pe(n,t){let i,o=n.dom.ownerDocument,s=0,l=function(n,t,o){if(n.caretPositionFromPoint)try{let i=n.caretPositionFromPoint(t,o);if(i)return{node:i.offsetNode,offset:i.offset}}catch(i){}if(n.caretRangeFromPoint){let i=n.caretRangeFromPoint(t,o);if(i)return{node:i.startContainer,offset:i.startOffset}}}(o,t.left,t.top);l&&({node:i,offset:s}=l);let h,u=(n.root.elementFromPoint?n.root:o).elementFromPoint(t.left,t.top);if(!u||!n.dom.contains(1!=u.nodeType?u.parentNode:u)){let A=n.dom.getBoundingClientRect();if(!ve(t,A)||(u=Ve(n.dom,t,A),!u))return null}if(ht)for(let A=u;i&&A;A=dt(A))A.draggable&&(i=void 0);if(u=function(n,t){let o=n.parentNode;return o&&/^li$/i.test(o.nodeName)&&t.left<n.getBoundingClientRect().left?o:n}(u,t),i){if(le&&1==i.nodeType&&(s=Math.min(s,i.childNodes.length),s<i.childNodes.length)){let E,A=i.childNodes[s];"IMG"==A.nodeName&&(E=A.getBoundingClientRect()).right<=t.left&&E.bottom>t.top&&s++}i==n.dom&&s==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?h=n.state.doc.content.size:(0==s||1!=i.nodeType||"BR"!=i.childNodes[s-1].nodeName)&&(h=function(n,t,o,i){let s=-1;for(let l=t,u=!1;l!=n.dom;){let h=n.docView.nearestDesc(l,!0);if(!h)return null;if(1==h.dom.nodeType&&(h.node.isBlock&&h.parent&&!u||!h.contentDOM)){let y=h.dom.getBoundingClientRect();if(h.node.isBlock&&h.parent&&!u&&(u=!0,y.left>i.left||y.top>i.top?s=h.posBefore:(y.right<i.left||y.bottom<i.top)&&(s=h.posAfter)),!h.contentDOM&&s<0)return(h.node.isBlock?i.top<(y.top+y.bottom)/2:i.left<(y.left+y.right)/2)?h.posBefore:h.posAfter}l=h.dom.parentNode}return s>-1?s:n.docView.posFromDOM(t,o,-1)}(n,i,s,t))}null==h&&(h=function(n,t,o){let{node:i,offset:s}=Ie(t,o),l=-1;if(1==i.nodeType&&!i.firstChild){let u=i.getBoundingClientRect();l=u.left!=u.right&&o.left>(u.left+u.right)/2?1:-1}return n.docView.posFromDOM(i,s,l)}(n,u,t));let y=n.docView.nearestDesc(u,!0);return{pos:h,inside:y?y.posAtStart-y.border:-1}}function ke(n){return n.top<n.bottom||n.left<n.right}function Le(n,t){let o=n.getClientRects();if(o.length){let i=o[t<0?0:o.length-1];if(ke(i))return i}return Array.prototype.find.call(o,ke)||n.getBoundingClientRect()}const an=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function qe(n,t,o){let{node:i,offset:s,atom:l}=n.docView.domFromPos(t,o<0?-1:1),u=St||le;if(3==i.nodeType){if(!u||!an.test(i.nodeValue)&&(o<0?s:s!=i.nodeValue.length)){let y=s,A=s,E=o<0?1:-1;return o<0&&!s?(A++,E=-1):o>=0&&s==i.nodeValue.length?(y--,E=1):o<0?y--:A++,Re(Le(Xt(i,y,A),E),E<0)}{let y=Le(Xt(i,s,s),o);if(le&&s&&/\s/.test(i.nodeValue[s-1])&&s<i.nodeValue.length){let A=Le(Xt(i,s-1,s-1),-1);if(A.top==y.top){let E=Le(Xt(i,s,s+1),-1);if(E.top!=y.top)return Re(E,E.left<A.left)}}return y}}if(!n.state.doc.resolve(t-(l||0)).parent.inlineContent){if(null==l&&s&&(o<0||s==Gt(i))){let y=i.childNodes[s-1];if(1==y.nodeType)return Ye(y.getBoundingClientRect(),!1)}if(null==l&&s<Gt(i)){let y=i.childNodes[s];if(1==y.nodeType)return Ye(y.getBoundingClientRect(),!0)}return Ye(i.getBoundingClientRect(),o>=0)}if(null==l&&s&&(o<0||s==Gt(i))){let y=i.childNodes[s-1],A=3==y.nodeType?Xt(y,Gt(y)-(u?0:1)):1!=y.nodeType||"BR"==y.nodeName&&y.nextSibling?null:y;if(A)return Re(Le(A,1),!1)}if(null==l&&s<Gt(i)){let y=i.childNodes[s];for(;y.pmViewDesc&&y.pmViewDesc.ignoreForCoords;)y=y.nextSibling;let A=y?3==y.nodeType?Xt(y,0,u?0:1):1==y.nodeType?y:null:null;if(A)return Re(Le(A,-1),!0)}return Re(Le(3==i.nodeType?Xt(i):i,-o),o>=0)}function Re(n,t){if(0==n.width)return n;let o=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:o,right:o}}function Ye(n,t){if(0==n.height)return n;let o=t?n.top:n.bottom;return{top:o,bottom:o,left:n.left,right:n.right}}function me(n,t,o){let i=n.state,s=n.root.activeElement;i!=t&&n.updateState(t),s!=n.dom&&n.focus();try{return o()}finally{i!=t&&n.updateState(i),s!=n.dom&&s&&s.focus()}}const Ce=/[\u0590-\u08ac]/;let Y=null,k=null,M=!1;class _t{constructor(t,o,i,s){this.parent=t,this.children=o,this.dom=i,this.contentDOM=s,this.dirty=0,i.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,o,i){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let o=0;o<this.children.length;o++)t+=this.children[o].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let o=0,i=this.posAtStart;;o++){let s=this.children[o];if(s==t)return i;i+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,o,i){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(i<0){let l,u;if(t==this.contentDOM)l=t.childNodes[o-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;l=t.previousSibling}for(;l&&(!(u=l.pmViewDesc)||u.parent!=this);)l=l.previousSibling;return l?this.posBeforeChild(u)+u.size:this.posAtStart}{let l,u;if(t==this.contentDOM)l=t.childNodes[o];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;l=t.nextSibling}for(;l&&(!(u=l.pmViewDesc)||u.parent!=this);)l=l.nextSibling;return l?this.posBeforeChild(u):this.posAtEnd}}let s;if(t==this.dom&&this.contentDOM)s=o>at(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==o)for(let l=t;;l=l.parentNode){if(l==this.dom){s=!1;break}if(l.previousSibling)break}if(null==s&&o==t.childNodes.length)for(let l=t;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return(null==s?i>0:s)?this.posAtEnd:this.posAtStart}nearestDesc(t,o=!1){for(let i=!0,s=t;s;s=s.parentNode){let u,l=this.getDesc(s);if(l&&(!o||l.node)){if(!i||!(u=l.nodeDOM)||(1==u.nodeType?u.contains(1==t.nodeType?t:t.parentNode):u==t))return l;i=!1}}}getDesc(t){let o=t.pmViewDesc;for(let i=o;i;i=i.parent)if(i==this)return o}posFromDOM(t,o,i){for(let s=t;s;s=s.parentNode){let l=this.getDesc(s);if(l)return l.localPosFromDOM(t,o,i)}return-1}descAt(t){for(let o=0,i=0;o<this.children.length;o++){let s=this.children[o],l=i+s.size;if(i==t&&l!=i){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(t<l)return s.descAt(t-i-s.border);i=l}}domFromPos(t,o){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let l,i=0,s=0;for(let l=0;i<this.children.length;i++){let u=this.children[i],h=l+u.size;if(h>t||u instanceof H){s=t-l;break}l=h}if(s)return this.children[i].domFromPos(s-this.children[i].border,o);for(;i&&!(l=this.children[i-1]).size&&l instanceof R&&l.side>=0;i--);if(o<=0){let l,u=!0;for(;l=i?this.children[i-1]:null,l&&l.dom.parentNode!=this.contentDOM;i--,u=!1);return l&&o&&u&&!l.border&&!l.domAtom?l.domFromPos(l.size,o):{node:this.contentDOM,offset:l?at(l.dom)+1:0}}{let l,u=!0;for(;l=i<this.children.length?this.children[i]:null,l&&l.dom.parentNode!=this.contentDOM;i++,u=!1);return l&&u&&!l.border&&!l.domAtom?l.domFromPos(0,o):{node:this.contentDOM,offset:l?at(l.dom):this.contentDOM.childNodes.length}}}parseRange(t,o,i=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:o,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,l=-1;for(let u=i,h=0;;h++){let y=this.children[h],A=u+y.size;if(-1==s&&t<=A){let E=u+y.border;if(t>=E&&o<=A-y.border&&y.node&&y.contentDOM&&this.contentDOM.contains(y.contentDOM))return y.parseRange(t,o,E);t=u;for(let F=h;F>0;F--){let V=this.children[F-1];if(V.size&&V.dom.parentNode==this.contentDOM&&!V.emptyChildAt(1)){s=at(V.dom)+1;break}t-=V.size}-1==s&&(s=0)}if(s>-1&&(A>o||h==this.children.length-1)){o=A;for(let E=h+1;E<this.children.length;E++){let F=this.children[E];if(F.size&&F.dom.parentNode==this.contentDOM&&!F.emptyChildAt(-1)){l=at(F.dom);break}o+=F.size}-1==l&&(l=this.contentDOM.childNodes.length);break}u=A}return{node:this.contentDOM,from:t,to:o,fromOffset:s,toOffset:l}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let o=this.children[t<0?0:this.children.length-1];return 0==o.size||o.emptyChildAt(t)}domAfterPos(t){let{node:o,offset:i}=this.domFromPos(t,0);if(1!=o.nodeType||i==o.childNodes.length)throw new RangeError("No node after pos "+t);return o.childNodes[i]}setSelection(t,o,i,s=!1){let l=Math.min(t,o),u=Math.max(t,o);for(let V=0,Q=0;V<this.children.length;V++){let nt=this.children[V],mt=Q+nt.size;if(l>Q&&u<mt)return nt.setSelection(t-Q-nt.border,o-Q-nt.border,i,s);Q=mt}let h=this.domFromPos(t,t?-1:1),y=o==t?h:this.domFromPos(o,o?-1:1),A=i.getSelection(),E=!1;if((le||ht)&&t==o){let{node:V,offset:Q}=h;if(3==V.nodeType){if(E=!(!Q||"\n"!=V.nodeValue[Q-1]),E&&Q==V.nodeValue.length)for(let mt,nt=V;nt;nt=nt.parentNode){if(mt=nt.nextSibling){"BR"==mt.nodeName&&(h=y={node:mt.parentNode,offset:at(mt)+1});break}let Tt=nt.pmViewDesc;if(Tt&&Tt.node&&Tt.node.isBlock)break}}else{let nt=V.childNodes[Q-1];E=nt&&("BR"==nt.nodeName||"false"==nt.contentEditable)}}if(le&&A.focusNode&&A.focusNode!=y.node&&1==A.focusNode.nodeType){let V=A.focusNode.childNodes[A.focusOffset];V&&"false"==V.contentEditable&&(s=!0)}if(!(s||E&&ht)&&qt(h.node,h.offset,A.anchorNode,A.anchorOffset)&&qt(y.node,y.offset,A.focusNode,A.focusOffset))return;let F=!1;if((A.extend||t==o)&&!E){A.collapse(h.node,h.offset);try{t!=o&&A.extend(y.node,y.offset),F=!0}catch(V){}}if(!F){if(t>o){let Q=h;h=y,y=Q}let V=document.createRange();V.setEnd(y.node,y.offset),V.setStart(h.node,h.offset),A.removeAllRanges(),A.addRange(V)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,o){for(let i=0,s=0;s<this.children.length;s++){let l=this.children[s],u=i+l.size;if(i==u?t<=u&&o>=i:t<u&&o>i){let h=i+l.border,y=u-l.border;if(t>=h&&o<=y)return this.dirty=t==i||o==u?2:1,void(t!=h||o!=y||!l.contentLost&&l.dom.parentNode==this.contentDOM?l.markDirty(t-h,o-h):l.dirty=3);l.dirty=l.dom!=l.contentDOM||l.dom.parentNode!=this.contentDOM||l.children.length?3:2}i=u}this.dirty=2}markParentsDirty(){let t=1;for(let o=this.parent;o;o=o.parent,t++){let i=1==t?2:1;o.dirty<i&&(o.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class R extends _t{constructor(t,o,i,s){let l,u=o.type.toDOM;if("function"==typeof u&&(u=u(i,()=>l?l.parent?l.parent.posBeforeChild(l):void 0:s)),!o.type.spec.raw){if(1!=u.nodeType){let h=document.createElement("span");h.appendChild(u),u=h}u.contentEditable="false",u.classList.add("ProseMirror-widget")}super(t,[],u,null),this.widget=o,this.widget=o,l=this}matchesWidget(t){return 0==this.dirty&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let o=this.widget.spec.stopEvent;return!!o&&o(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class a extends _t{constructor(t,o,i,s){super(t,[],o,null),this.textDOM=i,this.text=s}get size(){return this.text.length}localPosFromDOM(t,o){return t!=this.textDOM?this.posAtStart+(o?this.size:0):this.posAtStart+o}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class d extends _t{constructor(t,o,i,s){super(t,[],i,s),this.mark=o}static create(t,o,i,s){let l=s.nodeViews[o.type.name],u=l&&l(o,s,i);return(!u||!u.dom)&&(u=gt.PW.renderSpec(document,o.type.spec.toDOM(o,i))),new d(t,o,u.dom,u.contentDOM||u.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return 3!=this.dirty&&this.mark.eq(t)}markDirty(t,o){if(super.markDirty(t,o),0!=this.dirty){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=0}}slice(t,o,i){let s=d.create(this.parent,this.mark,!0,i),l=this.children,u=this.size;o<u&&(l=he(l,o,u,i)),t>0&&(l=he(l,0,t,i));for(let h=0;h<l.length;h++)l[h].parent=s;return s.children=l,s}}class C extends _t{constructor(t,o,i,s,l,u,h,y,A){super(t,[],l,u),this.node=o,this.outerDeco=i,this.innerDeco=s,this.nodeDOM=h}static create(t,o,i,s,l,u){let y,h=l.nodeViews[o.type.name],A=h&&h(o,l,()=>y?y.parent?y.parent.posBeforeChild(y):void 0:u,i,s),E=A&&A.dom,F=A&&A.contentDOM;if(o.isText)if(E){if(3!=E.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else E=document.createTextNode(o.text);else E||({dom:E,contentDOM:F}=gt.PW.renderSpec(document,o.type.spec.toDOM(o)));!F&&!o.isText&&"BR"!=E.nodeName&&(E.hasAttribute("contenteditable")||(E.contentEditable="false"),o.type.spec.draggable&&(E.draggable=!0));let V=E;return E=W(E,i,o),A?y=new K(t,o,i,s,E,F||null,V,A,l,u+1):o.isText?new I(t,o,i,s,E,V,l):new C(t,o,i,s,E,F||null,V,l,u+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let o=this.children.length-1;o>=0;o--){let i=this.children[o];if(this.dom.contains(i.dom.parentNode)){t.contentElement=i.dom.parentNode;break}}t.contentElement||(t.getContent=()=>gt.HY.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,o,i){return 0==this.dirty&&t.eq(this.node)&&it(o,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,o){let i=this.node.inlineContent,s=o,l=t.composing?this.localCompositionInfo(t,o):null,u=l&&l.pos>-1?l:null,h=l&&l.pos<0,y=new bt(this,u&&u.node,t);(function(n,t,o,i){let s=t.locals(n),l=0;if(0==s.length){for(let A=0;A<n.childCount;A++){let E=n.child(A);i(E,s,t.forChild(l,E),A),l+=E.nodeSize}return}let u=0,h=[],y=null;for(let A=0;;){if(u<s.length&&s[u].to==l){let mt,nt=s[u++];for(;u<s.length&&s[u].to==l;)(mt||(mt=[nt])).push(s[u++]);if(mt){mt.sort(Ct);for(let Tt=0;Tt<mt.length;Tt++)o(mt[Tt],A,!!y)}else o(nt,A,!!y)}let E,F;if(y)F=-1,E=y,y=null;else{if(!(A<n.childCount))break;F=A,E=n.child(A++)}for(let nt=0;nt<h.length;nt++)h[nt].to<=l&&h.splice(nt--,1);for(;u<s.length&&s[u].from<=l&&s[u].to>l;)h.push(s[u++]);let V=l+E.nodeSize;if(E.isText){let nt=V;u<s.length&&s[u].from<nt&&(nt=s[u].from);for(let mt=0;mt<h.length;mt++)h[mt].to<nt&&(nt=h[mt].to);nt<V&&(y=E.cut(nt-l),E=E.cut(0,nt-l),V=nt,F=-1)}i(E,E.isInline&&!E.isLeaf?h.filter(nt=>!nt.inline):h.slice(),t.forChild(l,E),F),l=V}})(this.node,this.innerDeco,(A,E,F)=>{A.spec.marks?y.syncToMarks(A.spec.marks,i,t):A.type.side>=0&&!F&&y.syncToMarks(E==this.node.childCount?gt.vc.none:this.node.child(E).marks,i,t),y.placeWidget(A,t,s)},(A,E,F,V)=>{let Q;y.syncToMarks(A.marks,i,t),y.findNodeMatch(A,E,F,V)||h&&t.state.selection.from>s&&t.state.selection.to<s+A.nodeSize&&(Q=y.findIndexWithChild(l.node))>-1&&y.updateNodeAt(A,E,F,Q,t)||y.updateNextNode(A,E,F,t,V,s)||y.addNode(A,E,F,t,s),s+=A.nodeSize}),y.syncToMarks([],i,t),this.node.isTextblock&&y.addTextblockHacks(),y.destroyRest(),(y.changed||2==this.dirty)&&(u&&this.protectLocalComposition(t,u),lt(this.contentDOM,this.children,t),z&&function(n){if("UL"==n.nodeName||"OL"==n.nodeName){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n),n.style.cssText=t}}(this.dom))}localCompositionInfo(t,o){let{from:i,to:s}=t.state.selection;if(!(t.state.selection instanceof D.Bs)||i<o||s>o+this.node.content.size)return null;let l=t.domSelectionRange(),u=function(n,t){for(;;){if(3==n.nodeType)return n;if(1==n.nodeType&&t>0){if(n.childNodes.length>t&&3==n.childNodes[t].nodeType)return n.childNodes[t];t=Gt(n=n.childNodes[t-1])}else{if(!(1==n.nodeType&&t<n.childNodes.length))return null;n=n.childNodes[t],t=0}}}(l.focusNode,l.focusOffset);if(!u||!this.dom.contains(u.parentNode))return null;if(this.node.inlineContent){let h=u.nodeValue,y=function(n,t,o,i){for(let s=0,l=0;s<n.childCount&&l<=i;){let u=n.child(s++),h=l;if(l+=u.nodeSize,!u.isText)continue;let y=u.text;for(;s<n.childCount;){let A=n.child(s++);if(l+=A.nodeSize,!A.isText)break;y+=A.text}if(l>=o){let A=h<i?y.lastIndexOf(t,i-h-1):-1;if(A>=0&&A+t.length+h>=o)return h+A;if(o==i&&y.length>=i+t.length-h&&y.slice(i-h,i-h+t.length)==t)return i}}return-1}(this.node.content,h,i-o,s-o);return y<0?null:{node:u,pos:y,text:h}}return{node:u,pos:-1,text:""}}protectLocalComposition(t,{node:o,pos:i,text:s}){if(this.getDesc(o))return;let l=o;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let u=new a(this,l,o,s);t.input.compositionNodes.push(u),this.children=he(this.children,i,i+s.length,t,u)}update(t,o,i,s){return!(3==this.dirty||!t.sameMarkup(this.node)||(this.updateInner(t,o,i,s),0))}updateInner(t,o,i,s){this.updateOuterDeco(o),this.node=t,this.innerDeco=i,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=0}updateOuterDeco(t){if(it(t,this.outerDeco))return;let o=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=B(this.dom,this.nodeDOM,De(this.outerDeco,this.node,o),De(t,this.node,o)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function S(n,t,o,i,s){W(i,t,n);let l=new C(void 0,n,t,o,i,i,i,s,0);return l.contentDOM&&l.updateChildren(s,0),l}class I extends C{constructor(t,o,i,s,l,u,h){super(t,o,i,s,l,null,u,h,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,o,i,s){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node)||(this.updateOuterDeco(o),(0!=this.dirty||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=0,0))}inParent(){let t=this.parent.contentDOM;for(let o=this.nodeDOM;o;o=o.parentNode)if(o==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,o,i){return t==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):super.localPosFromDOM(t,o,i)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,o,i){let s=this.node.cut(t,o),l=document.createTextNode(s.text);return new I(this.parent,s,this.outerDeco,this.innerDeco,l,l,i)}markDirty(t,o){super.markDirty(t,o),this.dom!=this.nodeDOM&&(0==t||o==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class H extends _t{parseRule(){return{ignore:!0}}matchesHack(t){return 0==this.dirty&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class K extends C{constructor(t,o,i,s,l,u,h,y,A,E){super(t,o,i,s,l,u,h,A,E),this.spec=y}update(t,o,i,s){if(3==this.dirty)return!1;if(this.spec.update){let l=this.spec.update(t,o,i);return l&&this.updateInner(t,o,i,s),l}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,o,i,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,o,i,s){this.spec.setSelection?this.spec.setSelection(t,o,i):super.setSelection(t,o,i,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function lt(n,t,o){let i=n.firstChild,s=!1;for(let l=0;l<t.length;l++){let u=t[l],h=u.dom;if(h.parentNode==n){for(;h!=i;)i=ot(i),s=!0;i=i.nextSibling}else s=!0,n.insertBefore(h,i);if(u instanceof d){let y=i?i.previousSibling:n.lastChild;lt(u.contentDOM,u.children,o),i=y?y.nextSibling:n.firstChild}}for(;i;)i=ot(i),s=!0;s&&o.trackWrites==n&&(o.trackWrites=null)}const It=function(n){n&&(this.nodeName=n)};It.prototype=Object.create(null);const Et=[new It];function De(n,t,o){if(0==n.length)return Et;let i=o?Et[0]:new It,s=[i];for(let l=0;l<n.length;l++){let u=n[l].type.attrs;if(u){u.nodeName&&s.push(i=new It(u.nodeName));for(let h in u){let y=u[h];null!=y&&(o&&1==s.length&&s.push(i=new It(t.isInline?"span":"div")),"class"==h?i.class=(i.class?i.class+" ":"")+y:"style"==h?i.style=(i.style?i.style+";":"")+y:"nodeName"!=h&&(i[h]=y))}}}return s}function B(n,t,o,i){if(o==Et&&i==Et)return t;let s=t;for(let l=0;l<i.length;l++){let u=i[l],h=o[l];if(l){let y;h&&h.nodeName==u.nodeName&&s!=n&&(y=s.parentNode)&&y.nodeName.toLowerCase()==u.nodeName||(y=document.createElement(u.nodeName),y.pmIsDeco=!0,y.appendChild(s),h=Et[0]),s=y}O(s,h||Et[0],u)}return s}function O(n,t,o){for(let i in t)"class"!=i&&"style"!=i&&"nodeName"!=i&&!(i in o)&&n.removeAttribute(i);for(let i in o)"class"!=i&&"style"!=i&&"nodeName"!=i&&o[i]!=t[i]&&n.setAttribute(i,o[i]);if(t.class!=o.class){let i=t.class?t.class.split(" ").filter(Boolean):[],s=o.class?o.class.split(" ").filter(Boolean):[];for(let l=0;l<i.length;l++)-1==s.indexOf(i[l])&&n.classList.remove(i[l]);for(let l=0;l<s.length;l++)-1==i.indexOf(s[l])&&n.classList.add(s[l]);0==n.classList.length&&n.removeAttribute("class")}if(t.style!=o.style){if(t.style){let s,i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;s=i.exec(t.style);)n.style.removeProperty(s[1])}o.style&&(n.style.cssText+=o.style)}}function W(n,t,o){return B(n,n,Et,De(t,o,1!=n.nodeType))}function it(n,t){if(n.length!=t.length)return!1;for(let o=0;o<n.length;o++)if(!n[o].type.eq(t[o].type))return!1;return!0}function ot(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class bt{constructor(t,o,i){this.lock=o,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(n,t){let o=t,i=o.children.length,s=n.childCount,l=new Map,u=[];t:for(;s>0;){let h;for(;;)if(i){let A=o.children[i-1];if(!(A instanceof d)){h=A,i--;break}o=A,i=A.children.length}else{if(o==t)break t;i=o.parent.children.indexOf(o),o=o.parent}let y=h.node;if(y){if(y!=n.child(s-1))break;--s,l.set(h,s),u.push(h)}}return{index:s,matched:l,matches:u.reverse()}}(t.node.content,t)}destroyBetween(t,o){if(t!=o){for(let i=t;i<o;i++)this.top.children[i].destroy();this.top.children.splice(t,o-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,o,i){let s=0,l=this.stack.length>>1,u=Math.min(l,t.length);for(;s<u&&(s==l-1?this.top:this.stack[s+1<<1]).matchesMark(t[s])&&!1!==t[s].type.spec.spanning;)s++;for(;s<l;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<t.length;){this.stack.push(this.top,this.index+1);let h=-1;for(let y=this.index;y<Math.min(this.index+3,this.top.children.length);y++){let A=this.top.children[y];if(A.matchesMark(t[l])&&!this.isLocked(A.dom)){h=y;break}}if(h>-1)h>this.index&&(this.changed=!0,this.destroyBetween(this.index,h)),this.top=this.top.children[this.index];else{let y=d.create(this.top,t[l],o,i);this.top.children.splice(this.index,0,y),this.top=y,this.changed=!0}this.index=0,l++}}findNodeMatch(t,o,i,s){let u,l=-1;if(s>=this.preMatch.index&&(u=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&u.matchesNode(t,o,i))l=this.top.children.indexOf(u,this.index);else for(let h=this.index,y=Math.min(this.top.children.length,h+5);h<y;h++){let A=this.top.children[h];if(A.matchesNode(t,o,i)&&!this.preMatch.matched.has(A)){l=h;break}}return!(l<0||(this.destroyBetween(this.index,l),this.index++,0))}updateNodeAt(t,o,i,s,l){let u=this.top.children[s];return 3==u.dirty&&u.dom==u.contentDOM&&(u.dirty=2),!!u.update(t,o,i,l)&&(this.destroyBetween(this.index,s),this.index++,!0)}findIndexWithChild(t){for(;;){let o=t.parentNode;if(!o)return-1;if(o==this.top.contentDOM){let i=t.pmViewDesc;if(i)for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==i)return s;return-1}t=o}}updateNextNode(t,o,i,s,l,u){for(let h=this.index;h<this.top.children.length;h++){let y=this.top.children[h];if(y instanceof C){let A=this.preMatch.matched.get(y);if(null!=A&&A!=l)return!1;let F,E=y.dom,V=this.isLocked(E)&&!(t.isText&&y.node&&y.node.isText&&y.nodeDOM.nodeValue==t.text&&3!=y.dirty&&it(o,y.outerDeco));if(!V&&y.update(t,o,i,s))return this.destroyBetween(this.index,h),y.dom!=E&&(this.changed=!0),this.index++,!0;if(!V&&(F=this.recreateWrapper(y,t,o,i,s,u)))return this.top.children[this.index]=F,F.dirty=2,F.updateChildren(s,u+1),F.dirty=0,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,o,i,s,l,u){if(t.dirty||o.isAtom||!t.children.length||!t.node.content.eq(o.content))return null;let h=C.create(this.top,o,i,s,l,u);if(!h.contentDOM)return null;h.children=t.children,t.children=[],t.destroy();for(let y of h.children)y.parent=h;return h}addNode(t,o,i,s,l){let u=C.create(this.top,t,o,i,s,l);u.contentDOM&&u.updateChildren(s,l+1),this.top.children.splice(this.index++,0,u),this.changed=!0}placeWidget(t,o,i){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(!s||!s.matchesWidget(t)||t!=s.widget&&s.widget.type.toDOM.parentNode){let l=new R(this.top,t,o,i);this.top.children.splice(this.index++,0,l),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],o=this.top;for(;t instanceof d;)o=t,t=o.children[o.children.length-1];(!t||!(t instanceof I)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ht||vt)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",o),this.addHackNode("BR",this.top))}addHackNode(t,o){if(o==this.top&&this.index<o.children.length&&o.children[this.index].matchesHack(t))this.index++;else{let i=document.createElement(t);"IMG"==t&&(i.className="ProseMirror-separator",i.alt=""),"BR"==t&&(i.className="ProseMirror-trailingBreak");let s=new H(this.top,[],i,null);o!=this.top?o.children.push(s):o.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function Ct(n,t){return n.type.side-t.type.side}function he(n,t,o,i,s){let l=[];for(let u=0,h=0;u<n.length;u++){let y=n[u],A=h,E=h+=y.size;A>=o||E<=t?l.push(y):(A<t&&l.push(y.slice(0,t-A,i)),s&&(l.push(s),s=void 0),E>o&&l.push(y.slice(o-A,y.size,i)))}return l}function ce(n,t=null){let o=n.domSelectionRange(),i=n.state.doc;if(!o.focusNode)return null;let s=n.docView.nearestDesc(o.focusNode),l=s&&0==s.size,u=n.docView.posFromDOM(o.focusNode,o.focusOffset,1);if(u<0)return null;let y,A,h=i.resolve(u);if(se(o)){for(y=h;s&&!s.node;)s=s.parent;let E=s.node;if(s&&E.isAtom&&D.qv.isSelectable(E)&&s.parent&&(!E.isInline||!function(n,t,o){for(let i=0==t,s=t==Gt(n);i||s;){if(n==o)return!0;let l=at(n);if(!(n=n.parentNode))return!1;i=i&&0==l,s=s&&l==Gt(n)}}(o.focusNode,o.focusOffset,s.dom))){let F=s.posBefore;A=new D.qv(u==F?h:i.resolve(F))}}else{let E=n.docView.posFromDOM(o.anchorNode,o.anchorOffset,1);if(E<0)return null;y=i.resolve(E)}return A||(A=vn(n,y,h,"pointer"==t||n.state.selection.head<h.pos&&!l?1:-1)),A}function Xe(n){return n.editable?n.hasFocus():mn(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Be(n,t=!1){let o=n.state.selection;if(Jn(n,o),Xe(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&vt){let i=n.domSelectionRange(),s=n.domObserver.currentSelection;if(i.anchorNode&&s.anchorNode&&qt(i.anchorNode,i.anchorOffset,s.anchorNode,s.anchorOffset))return n.input.mouseDown.delayedSelectionSync=!0,void n.domObserver.setCurSelection()}if(n.domObserver.disconnectSelection(),n.cursorWrapper)!function(n){let t=n.domSelection(),o=document.createRange(),i=n.cursorWrapper.dom,s="IMG"==i.nodeName;s?o.setEnd(i.parentNode,at(i)+1):o.setEnd(i,0),o.collapse(!1),t.removeAllRanges(),t.addRange(o),!s&&!n.state.selection.visible&&Qt&&fe<=11&&(i.disabled=!0,i.disabled=!1)}(n);else{let l,u,{anchor:i,head:s}=o;fn&&!(o instanceof D.Bs)&&(o.$from.parent.inlineContent||(l=ie(n,o.from)),!o.empty&&!o.$from.parent.inlineContent&&(u=ie(n,o.to))),n.docView.setSelection(i,s,n.root,t),fn&&(l&&Qn(l),u&&Qn(u)),o.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let o=n.domSelectionRange(),i=o.anchorNode,s=o.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(o.anchorNode!=i||o.anchorOffset!=s)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Xe(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const fn=ht||vt&&$t<63;function ie(n,t){let{node:o,offset:i}=n.docView.domFromPos(t,0),s=i<o.childNodes.length?o.childNodes[i]:null,l=i?o.childNodes[i-1]:null;if(ht&&s&&"false"==s.contentEditable)return On(s);if(!(s&&"false"!=s.contentEditable||l&&"false"!=l.contentEditable)){if(s)return On(s);if(l)return On(l)}}function On(n){return n.contentEditable="true",ht&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Qn(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Jn(n,t){if(t instanceof D.qv){let o=n.docView.descAt(t.from);o!=n.lastSelectedViewDesc&&(En(n),o&&o.selectNode(),n.lastSelectedViewDesc=o)}else En(n)}function En(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function vn(n,t,o,i){return n.someProp("createSelectionBetween",s=>s(n,t,o))||D.Bs.between(t,o,i)}function Rn(n){return!(n.editable&&!n.hasFocus())&&mn(n)}function mn(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(o){return!1}}function yn(n,t){let{$anchor:o,$head:i}=n.selection,s=t>0?o.max(i):o.min(i),l=s.parent.inlineContent?s.depth?n.doc.resolve(t>0?s.after():s.before()):null:s;return l&&D.Y1.findFrom(l,t)}function We(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function b(n,t,o){let i=n.state.selection;if(!(i instanceof D.Bs)){if(i instanceof D.qv&&i.node.isInline)return We(n,new D.Bs(t>0?i.$to:i.$from));{let s=yn(n.state,t);return!!s&&We(n,s)}}if(!i.empty||o.indexOf("s")>-1)return!1;if(n.endOfTextblock(t>0?"forward":"backward")){let s=yn(n.state,t);return!!(s&&s instanceof D.qv)&&We(n,s)}if(!(tt&&o.indexOf("m")>-1)){let u,s=i.$head,l=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!l||l.isText)return!1;let h=t<0?s.pos-l.nodeSize:s.pos;return!!(l.isAtom||(u=n.docView.descAt(h))&&!u.contentDOM)&&(D.qv.isSelectable(l)?We(n,new D.qv(t<0?n.state.doc.resolve(s.pos-l.nodeSize):s)):!!St&&We(n,new D.Bs(n.state.doc.resolve(t<0?h:h+l.nodeSize))))}}function _(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}function m(n){let t=n.pmViewDesc;return t&&0==t.size&&(n.nextSibling||"BR"!=n.nodeName)}function f(n,t){return t<0?function(n){let t=n.domSelectionRange(),o=t.focusNode,i=t.focusOffset;if(!o)return;let s,l,u=!1;for(le&&1==o.nodeType&&i<_(o)&&m(o.childNodes[i])&&(u=!0);;)if(i>0){if(1!=o.nodeType)break;{let h=o.childNodes[i-1];if(m(h))s=o,l=--i;else{if(3!=h.nodeType)break;o=h,i=o.nodeValue.length}}}else{if(N(o))break;{let h=o.previousSibling;for(;h&&m(h);)s=o.parentNode,l=at(h),h=h.previousSibling;if(h)o=h,i=_(o);else{if(o=o.parentNode,o==n.dom)break;i=0}}}u?Z(n,o,i):s&&Z(n,s,l)}(n):w(n)}function w(n){let t=n.domSelectionRange(),o=t.focusNode,i=t.focusOffset;if(!o)return;let l,u,s=_(o);for(;;)if(i<s){if(1!=o.nodeType)break;if(!m(o.childNodes[i]))break;l=o,u=++i}else{if(N(o))break;{let h=o.nextSibling;for(;h&&m(h);)l=h.parentNode,u=at(h)+1,h=h.nextSibling;if(h)o=h,i=0,s=_(o);else{if(o=o.parentNode,o==n.dom)break;i=s=0}}}l&&Z(n,l,u)}function N(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function Z(n,t,o){let i=n.domSelection();if(se(i)){let l=document.createRange();l.setEnd(t,o),l.setStart(t,o),i.removeAllRanges(),i.addRange(l)}else i.extend&&i.extend(t,o);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&Be(n)},50)}function L(n,t){let o=n.state.doc.resolve(t);if(!vt&&!q&&o.parent.inlineContent){let s=n.coordsAtPos(t);if(t>o.start()){let l=n.coordsAtPos(t-1),u=(l.top+l.bottom)/2;if(u>s.top&&u<s.bottom&&Math.abs(l.left-s.left)>1)return l.left<s.left?"ltr":"rtl"}if(t<o.end()){let l=n.coordsAtPos(t+1),u=(l.top+l.bottom)/2;if(u>s.top&&u<s.bottom&&Math.abs(l.left-s.left)>1)return l.left>s.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(n.dom).direction?"rtl":"ltr"}function $(n,t,o){let i=n.state.selection;if(i instanceof D.Bs&&!i.empty||o.indexOf("s")>-1||tt&&o.indexOf("m")>-1)return!1;let{$from:s,$to:l}=i;if(!s.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let u=yn(n.state,t);if(u&&u instanceof D.qv)return We(n,u)}if(!s.parent.inlineContent){let u=t<0?s:l,h=i instanceof D.C1?D.Y1.near(u,t):D.Y1.findFrom(u,t);return!!h&&We(n,h)}return!1}function et(n,t){if(!(n.state.selection instanceof D.Bs))return!0;let{$head:o,$anchor:i,empty:s}=n.state.selection;if(!o.sameParent(i))return!0;if(!s)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let l=!o.textOffset&&(t<0?o.nodeBefore:o.nodeAfter);if(l&&!l.isText){let u=n.state.tr;return t<0?u.delete(o.pos-l.nodeSize,o.pos):u.delete(o.pos,o.pos+l.nodeSize),n.dispatch(u),!0}return!1}function rt(n,t,o){n.domObserver.stop(),t.contentEditable=o,n.domObserver.start()}function Vt(n,t){n.someProp("transformCopied",Q=>{t=Q(t,n)});let o=[],{content:i,openStart:s,openEnd:l}=t;for(;s>1&&l>1&&1==i.childCount&&1==i.firstChild.childCount;){s--,l--;let Q=i.firstChild;o.push(Q.type.name,Q.attrs!=Q.type.defaultAttrs?Q.attrs:null),i=Q.content}let u=n.someProp("clipboardSerializer")||gt.PW.fromSchema(n.state.schema),h=Hn(),y=h.createElement("div");y.appendChild(u.serializeFragment(i,{document:h}));let E,A=y.firstChild,F=0;for(;A&&1==A.nodeType&&(E=ee[A.nodeName.toLowerCase()]);){for(let Q=E.length-1;Q>=0;Q--){let nt=h.createElement(E[Q]);for(;y.firstChild;)nt.appendChild(y.firstChild);y.appendChild(nt),F++}A=y.firstChild}return A&&1==A.nodeType&&A.setAttribute("data-pm-slice",`${s} ${l}${F?` -${F}`:""} ${JSON.stringify(o)}`),{dom:y,text:n.someProp("clipboardTextSerializer",Q=>Q(t,n))||t.content.textBetween(0,t.content.size,"\n\n")}}function Ft(n,t,o,i,s){let u,h,l=s.parent.type.spec.code;if(!o&&!t)return null;let y=t&&(i||l||!o);if(y){if(n.someProp("transformPastedText",V=>{t=V(t,l||i,n)}),l)return t?new gt.p2(gt.HY.from(n.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):gt.p2.empty;let F=n.someProp("clipboardTextParser",V=>V(t,s,i,n));if(F)h=F;else{let V=s.marks(),{schema:Q}=n.state,nt=gt.PW.fromSchema(Q);u=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(mt=>{let Tt=u.appendChild(document.createElement("p"));mt&&Tt.appendChild(nt.serializeNode(Q.text(mt,V)))})}}else n.someProp("transformPastedHTML",F=>{o=F(o,n)}),u=function(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let s,o=Hn().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(n);if((s=i&&ee[i[1].toLowerCase()])&&(n=s.map(l=>"<"+l+">").join("")+n+s.map(l=>"</"+l+">").reverse().join("")),o.innerHTML=n,s)for(let l=0;l<s.length;l++)o=o.querySelector(s[l])||o;return o}(o),St&&function(n){let t=n.querySelectorAll(vt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let o=0;o<t.length;o++){let i=t[o];1==i.childNodes.length&&"\xa0"==i.textContent&&i.parentNode&&i.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),i)}}(u);let A=u&&u.querySelector("[data-pm-slice]"),E=A&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(A.getAttribute("data-pm-slice")||"");if(E&&E[3])for(let F=+E[3];F>0;F--){let V=u.firstChild;for(;V&&1!=V.nodeType;)V=V.nextSibling;if(!V)break;u=V}if(h||(h=(n.someProp("clipboardParser")||n.someProp("domParser")||gt.aw.fromSchema(n.state.schema)).parseSlice(u,{preserveWhitespace:!(!y&&!E),context:s,ruleFromNode:V=>"BR"!=V.nodeName||V.nextSibling||!V.parentNode||Se.test(V.parentNode.nodeName)?null:{ignore:!0}})),E)h=function(n,t){if(!n.size)return n;let i,o=n.content.firstChild.type.schema;try{i=JSON.parse(t)}catch(h){return n}let{content:s,openStart:l,openEnd:u}=n;for(let h=i.length-2;h>=0;h-=2){let y=o.nodes[i[h]];if(!y||y.hasRequiredAttrs())break;s=gt.HY.from(y.create(i[h+1],s)),l++,u++}return new gt.p2(s,l,u)}(sn(h,+E[1],+E[2]),E[4]);else if(h=gt.p2.maxOpen(function(n,t){if(n.childCount<2)return n;for(let o=t.depth;o>=0;o--){let l,s=t.node(o).contentMatchAt(t.index(o)),u=[];if(n.forEach(h=>{if(!u)return;let A,y=s.findWrapping(h.type);if(!y)return u=null;if(A=u.length&&l.length&&Te(y,l,h,u[u.length-1],0))u[u.length-1]=A;else{u.length&&(u[u.length-1]=Ae(u[u.length-1],l.length));let E=tn(h,y);u.push(E),s=s.matchType(E.type),l=y}}),u)return gt.HY.from(u)}return n}(h.content,s),!0),h.openStart||h.openEnd){let F=0,V=0;for(let Q=h.content.firstChild;F<h.openStart&&!Q.type.spec.isolating;F++,Q=Q.firstChild);for(let Q=h.content.lastChild;V<h.openEnd&&!Q.type.spec.isolating;V++,Q=Q.lastChild);h=sn(h,F,V)}return n.someProp("transformPasted",F=>{h=F(h,n)}),h}const Se=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function tn(n,t,o=0){for(let i=t.length-1;i>=o;i--)n=t[i].create(null,gt.HY.from(n));return n}function Te(n,t,o,i,s){if(s<n.length&&s<t.length&&n[s]==t[s]){let l=Te(n,t,o,i.lastChild,s+1);if(l)return i.copy(i.content.replaceChild(i.childCount-1,l));if(i.contentMatchAt(i.childCount).matchType(s==n.length-1?o.type:n[s+1]))return i.copy(i.content.append(gt.HY.from(tn(o,n,s+1))))}}function Ae(n,t){if(0==t)return n;let o=n.content.replaceChild(n.childCount-1,Ae(n.lastChild,t-1)),i=n.contentMatchAt(n.childCount).fillBefore(gt.HY.empty,!0);return n.copy(o.append(i))}function pn(n,t,o,i,s,l){let u=t<0?n.firstChild:n.lastChild,h=u.content;return n.childCount>1&&(l=0),s<i-1&&(h=pn(h,t,o,i,s+1,l)),s>=o&&(h=t<0?u.contentMatchAt(0).fillBefore(h,l<=s).append(h):h.append(u.contentMatchAt(u.childCount).fillBefore(gt.HY.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,u.copy(h))}function sn(n,t,o){return t<n.openStart&&(n=new gt.p2(pn(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),o<n.openEnd&&(n=new gt.p2(pn(n.content,1,o,n.openEnd,0,0),n.openStart,o)),n}const ee={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let un=null;function Hn(){return un||(un=document.implementation.createHTMLDocument("title"))}const He={},je={},$n={touchstart:!0,touchmove:!0};class jn{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ln(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function gn(n){n.someProp("handleDOMEvents",t=>{for(let o in t)n.input.eventHandlers[o]||n.dom.addEventListener(o,n.input.eventHandlers[o]=i=>_n(n,i))})}function _n(n,t){return n.someProp("handleDOMEvents",o=>{let i=o[t.type];return!!i&&(i(n,t)||t.defaultPrevented)})}function Nn(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let o=t.target;o!=n.dom;o=o.parentNode)if(!o||11==o.nodeType||o.pmViewDesc&&o.pmViewDesc.stopEvent(t))return!1;return!0}function Cn(n){return{left:n.clientX,top:n.clientY}}function Kn(n,t,o,i,s){if(-1==i)return!1;let l=n.state.doc.resolve(i);for(let u=l.depth+1;u>0;u--)if(n.someProp(t,h=>u>l.depth?h(n,o,l.nodeAfter,l.before(u),s,!0):h(n,o,l.node(u),l.before(u),s,!1)))return!0;return!1}function zn(n,t,o){n.focused||n.focus();let i=n.state.tr.setSelection(t);"pointer"==o&&i.setMeta("pointer",!0),n.dispatch(i)}function no(n,t,o,i){return Kn(n,"handleDoubleClickOn",t,o,i)||n.someProp("handleDoubleClick",s=>s(n,t,i))}function Fo(n,t,o,i){return Kn(n,"handleTripleClickOn",t,o,i)||n.someProp("handleTripleClick",s=>s(n,t,i))||function(n,t,o){if(0!=o.button)return!1;let i=n.state.doc;if(-1==t)return!!i.inlineContent&&(zn(n,D.Bs.create(i,0,i.content.size),"pointer"),!0);let s=i.resolve(t);for(let l=s.depth+1;l>0;l--){let u=l>s.depth?s.nodeAfter:s.node(l),h=s.before(l);if(u.inlineContent)zn(n,D.Bs.create(i,h+1,h+1+u.content.size),"pointer");else{if(!D.qv.isSelectable(u))continue;zn(n,D.qv.create(i,h),"pointer")}return!0}}(n,o,i)}function Xn(n){return en(n)}je.keydown=(n,t)=>{let o=t;if(n.input.shiftKey=16==o.keyCode||o.shiftKey,!po(n,o)&&(n.input.lastKeyCode=o.keyCode,n.input.lastKeyCodeTime=Date.now(),!st||!vt||13!=o.keyCode))if(229!=o.keyCode&&n.domObserver.forceFlush(),!z||13!=o.keyCode||o.ctrlKey||o.altKey||o.metaKey)n.someProp("handleKeyDown",i=>i(n,o))||function(n,t){let o=t.keyCode,i=function(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}(t);if(8==o||tt&&72==o&&"c"==i)return et(n,-1)||f(n,-1);if(46==o&&!t.shiftKey||tt&&68==o&&"c"==i)return et(n,1)||f(n,1);if(13==o||27==o)return!0;if(37==o||tt&&66==o&&"c"==i){let s=37==o?"ltr"==L(n,n.state.selection.from)?-1:1:-1;return b(n,s,i)||f(n,s)}if(39==o||tt&&70==o&&"c"==i){let s=39==o?"ltr"==L(n,n.state.selection.from)?1:-1:1;return b(n,s,i)||f(n,s)}return 38==o||tt&&80==o&&"c"==i?$(n,-1,i)||f(n,-1):40==o||tt&&78==o&&"c"==i?function(n){if(!ht||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:o}=n.domSelectionRange();if(t&&1==t.nodeType&&0==o&&t.firstChild&&"false"==t.firstChild.contentEditable){let i=t.firstChild;rt(n,i,"true"),setTimeout(()=>rt(n,i,"false"),20)}return!1}(n)||$(n,1,i)||w(n):i==(tt?"m":"c")&&(66==o||73==o||89==o||90==o)}(n,o)?o.preventDefault():ln(n,"key");else{let i=Date.now();n.input.lastIOSEnter=i,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==i&&(n.someProp("handleKeyDown",s=>s(n,Nt(13,"Enter"))),n.input.lastIOSEnter=0)},200)}},je.keyup=(n,t)=>{16==t.keyCode&&(n.input.shiftKey=!1)},je.keypress=(n,t)=>{let o=t;if(po(n,o)||!o.charCode||o.ctrlKey&&!o.altKey||tt&&o.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,o)))return void o.preventDefault();let i=n.state.selection;if(!(i instanceof D.Bs&&i.$from.sameParent(i.$to))){let s=String.fromCharCode(o.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",l=>l(n,i.$from.pos,i.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),o.preventDefault()}};const Co=tt?"metaKey":"ctrlKey";He.mousedown=(n,t)=>{let o=t;n.input.shiftKey=o.shiftKey;let i=Xn(n),s=Date.now(),l="singleClick";s-n.input.lastClick.time<500&&function(n,t){let o=t.x-n.clientX,i=t.y-n.clientY;return o*o+i*i<100}(o,n.input.lastClick)&&!o[Co]&&("singleClick"==n.input.lastClick.type?l="doubleClick":"doubleClick"==n.input.lastClick.type&&(l="tripleClick")),n.input.lastClick={time:s,x:o.clientX,y:o.clientY,type:l};let u=n.posAtCoords(Cn(o));!u||("singleClick"==l?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new uo(n,u,o,!!i)):("doubleClick"==l?no:Fo)(n,u.pos,u.inside,o)?o.preventDefault():ln(n,"pointer"))};class uo{constructor(t,o,i,s){let l,u;if(this.view=t,this.pos=o,this.event=i,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!i[Co],this.allowDefault=i.shiftKey,o.inside>-1)l=t.state.doc.nodeAt(o.inside),u=o.inside;else{let E=t.state.doc.resolve(o.pos);l=E.parent,u=E.depth?E.before():0}const h=s?null:i.target,y=h?t.docView.nearestDesc(h,!0):null;this.target=y?y.dom:null;let{selection:A}=t.state;(0==i.button&&l.type.spec.draggable&&!1!==l.type.spec.selectable||A instanceof D.qv&&A.from<=u&&A.to>u)&&(this.mightDrag={node:l,pos:u,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!le||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ln(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Be(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let o=this.pos;this.view.state.doc!=this.startDoc&&(o=this.view.posAtCoords(Cn(t))),this.updateAllowDefault(t),this.allowDefault||!o?ln(this.view,"pointer"):function(n,t,o,i,s){return Kn(n,"handleClickOn",t,o,i)||n.someProp("handleClick",l=>l(n,t,i))||(s?function(n,t){if(-1==t)return!1;let i,s,o=n.state.selection;o instanceof D.qv&&(i=o.node);let l=n.state.doc.resolve(t);for(let u=l.depth+1;u>0;u--){let h=u>l.depth?l.nodeAfter:l.node(u);if(D.qv.isSelectable(h)){s=i&&o.$from.depth>0&&u>=o.$from.depth&&l.before(o.$from.depth+1)==o.$from.pos?l.before(o.$from.depth):l.before(u);break}}return null!=s&&(zn(n,D.qv.create(n.state.doc,s),"pointer"),!0)}(n,o):function(n,t){if(-1==t)return!1;let o=n.state.doc.resolve(t),i=o.nodeAfter;return!!(i&&i.isAtom&&D.qv.isSelectable(i))&&(zn(n,new D.qv(o),"pointer"),!0)}(n,o))}(this.view,o.pos,o.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||ht&&this.mightDrag&&!this.mightDrag.node.isAtom||vt&&!this.view.state.selection.visible&&Math.min(Math.abs(o.pos-this.view.state.selection.from),Math.abs(o.pos-this.view.state.selection.to))<=2)?(zn(this.view,D.Y1.near(this.view.state.doc.resolve(o.pos)),"pointer"),t.preventDefault()):ln(this.view,"pointer")}move(t){this.updateAllowDefault(t),ln(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function po(n,t){return!!n.composing||!!(ht&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500)&&(n.input.compositionEndedAt=-2e8,!0)}He.touchstart=n=>{n.input.lastTouch=Date.now(),Xn(n),ln(n,"pointer")},He.touchmove=n=>{n.input.lastTouch=Date.now(),ln(n,"pointer")},He.contextmenu=n=>Xn(n);const To=st?5e3:-1;function ho(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>en(n),t))}function xo(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=function(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function en(n,t=!1){if(!(st&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),xo(n),t||n.docView&&n.docView.dirty){let o=ce(n);return o&&!o.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(o)):n.updateState(n.state),!0}return!1}}je.compositionstart=je.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,o=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!o.textOffset&&o.parentOffset&&o.nodeBefore.marks.some(i=>!1===i.type.spec.inclusive)))n.markCursor=n.state.storedMarks||o.marks(),en(n,!0),n.markCursor=null;else if(en(n),le&&t.selection.empty&&o.parentOffset&&!o.textOffset&&o.nodeBefore.marks.length){let i=n.domSelectionRange();for(let s=i.focusNode,l=i.focusOffset;s&&1==s.nodeType&&0!=l;){let u=l<0?s.lastChild:s.childNodes[l-1];if(!u)break;if(3==u.nodeType){n.domSelection().collapse(u,u.nodeValue.length);break}s=u,l=-1}}n.input.composing=!0}ho(n,To)},je.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,n.input.compositionID++,ho(n,20))};const Tn=Qt&&fe<15||z&&Zt<604;function Fn(n,t,o,i,s){let l=Ft(n,t,o,i,n.state.selection.$from);if(n.someProp("handlePaste",y=>y(n,s,l||gt.p2.empty)))return!0;if(!l)return!1;let u=function(n){return 0==n.openStart&&0==n.openEnd&&1==n.content.childCount?n.content.firstChild:null}(l),h=u?n.state.tr.replaceSelectionWith(u,i):n.state.tr.replaceSelection(l);return n.dispatch(h.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}He.copy=je.cut=(n,t)=>{let o=t,i=n.state.selection,s="cut"==o.type;if(i.empty)return;let l=Tn?null:o.clipboardData,u=i.content(),{dom:h,text:y}=Vt(n,u);l?(o.preventDefault(),l.clearData(),l.setData("text/html",h.innerHTML),l.setData("text/plain",y)):function(n,t){if(!n.dom.parentNode)return;let o=n.dom.parentNode.appendChild(document.createElement("div"));o.appendChild(t),o.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),s=document.createRange();s.selectNodeContents(t),n.dom.blur(),i.removeAllRanges(),i.addRange(s),setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o),n.focus()},50)}(n,h),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},je.paste=(n,t)=>{let o=t;if(n.composing&&!st)return;let i=Tn?null:o.clipboardData,s=n.input.shiftKey&&45!=n.input.lastKeyCode;i&&Fn(n,i.getData("text/plain"),i.getData("text/html"),s,o)?o.preventDefault():function(n,t){if(!n.dom.parentNode)return;let o=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,i=n.dom.parentNode.appendChild(document.createElement(o?"textarea":"div"));o||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let s=n.input.shiftKey&&45!=n.input.lastKeyCode;setTimeout(()=>{n.focus(),i.parentNode&&i.parentNode.removeChild(i),o?Fn(n,i.value,null,s,t):Fn(n,i.textContent,i.innerHTML,s,t)},50)}(n,o)};class ko{constructor(t,o){this.slice=t,this.move=o}}const Mo=tt?"altKey":"ctrlKey";He.dragstart=(n,t)=>{let o=t,i=n.input.mouseDown;if(i&&i.done(),!o.dataTransfer)return;let s=n.state.selection,l=s.empty?null:n.posAtCoords(Cn(o));if(!(l&&l.pos>=s.from&&l.pos<=(s instanceof D.qv?s.to-1:s.to)))if(i&&i.mightDrag)n.dispatch(n.state.tr.setSelection(D.qv.create(n.state.doc,i.mightDrag.pos)));else if(o.target&&1==o.target.nodeType){let A=n.docView.nearestDesc(o.target,!0);A&&A.node.type.spec.draggable&&A!=n.docView&&n.dispatch(n.state.tr.setSelection(D.qv.create(n.state.doc,A.posBefore)))}let u=n.state.selection.content(),{dom:h,text:y}=Vt(n,u);o.dataTransfer.clearData(),o.dataTransfer.setData(Tn?"Text":"text/html",h.innerHTML),o.dataTransfer.effectAllowed="copyMove",Tn||o.dataTransfer.setData("text/plain",y),n.dragging=new ko(u,!o[Mo])},He.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)},je.dragover=je.dragenter=(n,t)=>t.preventDefault(),je.drop=(n,t)=>{let o=t,i=n.dragging;if(n.dragging=null,!o.dataTransfer)return;let s=n.posAtCoords(Cn(o));if(!s)return;let l=n.state.doc.resolve(s.pos),u=i&&i.slice;u?n.someProp("transformPasted",nt=>{u=nt(u,n)}):u=Ft(n,o.dataTransfer.getData(Tn?"Text":"text/plain"),Tn?null:o.dataTransfer.getData("text/html"),!1,l);let h=!(!i||o[Mo]);if(n.someProp("handleDrop",nt=>nt(n,o,u||gt.p2.empty,h)))return void o.preventDefault();if(!u)return;o.preventDefault();let y=u?(0,Ht.nj)(n.state.doc,l.pos,u):l.pos;null==y&&(y=l.pos);let A=n.state.tr;h&&A.deleteSelection();let E=A.mapping.map(y),F=0==u.openStart&&0==u.openEnd&&1==u.content.childCount,V=A.doc;if(F?A.replaceRangeWith(E,E,u.content.firstChild):A.replaceRange(E,E,u),A.doc.eq(V))return;let Q=A.doc.resolve(E);if(F&&D.qv.isSelectable(u.content.firstChild)&&Q.nodeAfter&&Q.nodeAfter.sameMarkup(u.content.firstChild))A.setSelection(new D.qv(Q));else{let nt=A.mapping.map(y);A.mapping.maps[A.mapping.maps.length-1].forEach((mt,Tt,Kt,Oe)=>nt=Oe),A.setSelection(vn(n,Q,A.doc.resolve(nt)))}n.focus(),n.dispatch(A.setMeta("uiEvent","drop"))},He.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Be(n)},20))},He.blur=(n,t)=>{let o=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),o.relatedTarget&&n.dom.contains(o.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)},He.beforeinput=(n,t)=>{if(vt&&st&&"deleteContentBackward"==t.inputType){n.domObserver.flushSoon();let{domChangeCount:i}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=i||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",l=>l(n,Nt(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in je)He[n]=je[n];function to(n,t){if(n==t)return!0;for(let o in n)if(n[o]!==t[o])return!1;for(let o in t)if(!(o in n))return!1;return!0}class bn{constructor(t,o){this.toDOM=t,this.spec=o||Zn,this.side=this.spec.side||0}map(t,o,i,s){let{pos:l,deleted:u}=t.mapResult(o.from+s,this.side<0?-1:1);return u?null:new hn(l-i,l-i,this)}valid(){return!0}eq(t){return this==t||t instanceof bn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&to(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Dn{constructor(t,o){this.attrs=t,this.spec=o||Zn}map(t,o,i,s){let l=t.map(o.from+s,this.spec.inclusiveStart?-1:1)-i,u=t.map(o.to+s,this.spec.inclusiveEnd?1:-1)-i;return l>=u?null:new hn(l,u,this)}valid(t,o){return o.from<o.to}eq(t){return this==t||t instanceof Dn&&to(this.attrs,t.attrs)&&to(this.spec,t.spec)}static is(t){return t.type instanceof Dn}destroy(){}}class mo{constructor(t,o){this.attrs=t,this.spec=o||Zn}map(t,o,i,s){let l=t.mapResult(o.from+s,1);if(l.deleted)return null;let u=t.mapResult(o.to+s,-1);return u.deleted||u.pos<=l.pos?null:new hn(l.pos-i,u.pos-i,this)}valid(t,o){let l,{index:i,offset:s}=t.content.findIndex(o.from);return s==o.from&&!(l=t.child(i)).isText&&s+l.nodeSize==o.to}eq(t){return this==t||t instanceof mo&&to(this.attrs,t.attrs)&&to(this.spec,t.spec)}destroy(){}}class hn{constructor(t,o,i){this.from=t,this.to=o,this.type=i}copy(t,o){return new hn(t,o,this.type)}eq(t,o=0){return this.type.eq(t.type)&&this.from+o==t.from&&this.to+o==t.to}map(t,o,i){return this.type.map(t,this,o,i)}static widget(t,o,i){return new hn(t,t,new bn(o,i))}static inline(t,o,i,s){return new hn(t,o,new Dn(i,s))}static node(t,o,i,s){return new hn(t,o,new mo(i,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Dn}}const Un=[],Zn={};class Qe{constructor(t,o){this.local=t.length?t:Un,this.children=o.length?o:Un}static create(t,o){return o.length?bo(o,t,0,Zn):on}find(t,o,i){let s=[];return this.findInner(null==t?0:t,null==o?1e9:o,s,0,i),s}findInner(t,o,i,s,l){for(let u=0;u<this.local.length;u++){let h=this.local[u];h.from<=o&&h.to>=t&&(!l||l(h.spec))&&i.push(h.copy(h.from+s,h.to+s))}for(let u=0;u<this.children.length;u+=3)if(this.children[u]<o&&this.children[u+1]>t){let h=this.children[u]+1;this.children[u+2].findInner(t-h,o-h,i,s+h,l)}}map(t,o,i){return this==on||0==t.maps.length?this:this.mapInner(t,o,0,0,i||Zn)}mapInner(t,o,i,s,l){let u;for(let h=0;h<this.local.length;h++){let y=this.local[h].map(t,i,s);y&&y.type.valid(o,y)?(u||(u=[])).push(y):l.onRemove&&l.onRemove(this.local[h].spec)}return this.children.length?function(n,t,o,i,s,l,u){let h=n.slice();for(let A=0,E=l;A<o.maps.length;A++){let F=0;o.maps[A].forEach((V,Q,nt,mt)=>{let Tt=mt-nt-(Q-V);for(let Kt=0;Kt<h.length;Kt+=3){let Oe=h[Kt+1];if(Oe<0||V>Oe+E-F)continue;let ze=h[Kt]+E-F;Q>=ze?h[Kt+1]=V<=ze?-2:-1:nt>=s&&Tt&&(h[Kt]+=Tt,h[Kt+1]+=Tt)}F+=Tt}),E=o.maps[A].map(E,-1)}let y=!1;for(let A=0;A<h.length;A+=3)if(h[A+1]<0){if(-2==h[A+1]){y=!0,h[A+1]=-1;continue}let E=o.map(n[A]+l),F=E-s;if(F<0||F>=i.content.size){y=!0;continue}let Q=o.map(n[A+1]+l,-1)-s,{index:nt,offset:mt}=i.content.findIndex(F),Tt=i.maybeChild(nt);if(Tt&&mt==F&&mt+Tt.nodeSize==Q){let Kt=h[A+2].mapInner(o,Tt,E+1,n[A]+l+1,u);Kt!=on?(h[A]=F,h[A+1]=Q,h[A+2]=Kt):(h[A+1]=-2,y=!0)}else y=!0}if(y){let A=function(n,t,o,i,s,l,u){function h(y,A){for(let E=0;E<y.local.length;E++){let F=y.local[E].map(i,s,A);F?o.push(F):u.onRemove&&u.onRemove(y.local[E].spec)}for(let E=0;E<y.children.length;E+=3)h(y.children[E+2],y.children[E]+A+1)}for(let y=0;y<n.length;y+=3)-1==n[y+1]&&h(n[y+2],t[y]+l+1);return o}(h,n,t,o,s,l,u),E=bo(A,i,0,u);t=E.local;for(let F=0;F<h.length;F+=3)h[F+1]<0&&(h.splice(F,3),F-=3);for(let F=0,V=0;F<E.children.length;F+=3){let Q=E.children[F];for(;V<h.length&&h[V]<Q;)V+=3;h.splice(V,0,E.children[F],E.children[F+1],E.children[F+2])}}return new Qe(t.sort(Vn),h)}(this.children,u||[],t,o,i,s,l):u?new Qe(u.sort(Vn),Un):on}add(t,o){return o.length?this==on?Qe.create(t,o):this.addInner(t,o,0):this}addInner(t,o,i){let s,l=0;t.forEach((h,y)=>{let E,A=y+i;if(E=$o(o,h,A)){for(s||(s=this.children.slice());l<s.length&&s[l]<y;)l+=3;s[l]==y?s[l+2]=s[l+2].addInner(h,E,A+1):s.splice(l,0,y,y+h.nodeSize,bo(E,h,A+1,Zn)),l+=3}});let u=io(l?jo(o):o,-i);for(let h=0;h<u.length;h++)u[h].type.valid(t,u[h])||u.splice(h--,1);return new Qe(u.length?this.local.concat(u).sort(Vn):this.local,s||this.children)}remove(t){return 0==t.length||this==on?this:this.removeInner(t,0)}removeInner(t,o){let i=this.children,s=this.local;for(let l=0;l<i.length;l+=3){let u,h=i[l]+o,y=i[l+1]+o;for(let F,E=0;E<t.length;E++)(F=t[E])&&F.from>h&&F.to<y&&(t[E]=null,(u||(u=[])).push(F));if(!u)continue;i==this.children&&(i=this.children.slice());let A=i[l+2].removeInner(u,h+1);A!=on?i[l+2]=A:(i.splice(l,3),l-=3)}if(s.length)for(let u,l=0;l<t.length;l++)if(u=t[l])for(let h=0;h<s.length;h++)s[h].eq(u,o)&&(s==this.local&&(s=this.local.slice()),s.splice(h--,1));return i==this.children&&s==this.local?this:s.length||i.length?new Qe(s,i):on}forChild(t,o){if(this==on)return this;if(o.isLeaf)return Qe.empty;let i,s;for(let h=0;h<this.children.length;h+=3)if(this.children[h]>=t){this.children[h]==t&&(i=this.children[h+2]);break}let l=t+1,u=l+o.content.size;for(let h=0;h<this.local.length;h++){let y=this.local[h];if(y.from<u&&y.to>l&&y.type instanceof Dn){let A=Math.max(l,y.from)-l,E=Math.min(u,y.to)-l;A<E&&(s||(s=[])).push(y.copy(A,E))}}if(s){let h=new Qe(s.sort(Vn),Un);return i?new Pn([h,i]):h}return i||on}eq(t){if(this==t)return!0;if(!(t instanceof Qe)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let o=0;o<this.local.length;o++)if(!this.local[o].eq(t.local[o]))return!1;for(let o=0;o<this.children.length;o+=3)if(this.children[o]!=t.children[o]||this.children[o+1]!=t.children[o+1]||!this.children[o+2].eq(t.children[o+2]))return!1;return!0}locals(t){return wo(this.localsInner(t))}localsInner(t){if(this==on)return Un;if(t.inlineContent||!this.local.some(Dn.is))return this.local;let o=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof Dn||o.push(this.local[i]);return o}}Qe.empty=new Qe([],[]),Qe.removeOverlap=wo;const on=Qe.empty;class Pn{constructor(t){this.members=t}map(t,o){const i=this.members.map(s=>s.map(t,o,Zn));return Pn.from(i)}forChild(t,o){if(o.isLeaf)return Qe.empty;let i=[];for(let s=0;s<this.members.length;s++){let l=this.members[s].forChild(t,o);l!=on&&(l instanceof Pn?i=i.concat(l.members):i.push(l))}return Pn.from(i)}eq(t){if(!(t instanceof Pn)||t.members.length!=this.members.length)return!1;for(let o=0;o<this.members.length;o++)if(!this.members[o].eq(t.members[o]))return!1;return!0}locals(t){let o,i=!0;for(let s=0;s<this.members.length;s++){let l=this.members[s].localsInner(t);if(l.length)if(o){i&&(o=o.slice(),i=!1);for(let u=0;u<l.length;u++)o.push(l[u])}else o=l}return o?wo(i?o:o.sort(Vn)):Un}static from(t){switch(t.length){case 0:return on;case 1:return t[0];default:return new Pn(t.every(o=>o instanceof Qe)?t:t.reduce((o,i)=>o.concat(i instanceof Qe?i:i.members),[]))}}}function io(n,t){if(!t||!n.length)return n;let o=[];for(let i=0;i<n.length;i++){let s=n[i];o.push(new hn(s.from+t,s.to+t,s.type))}return o}function $o(n,t,o){if(t.isLeaf)return null;let i=o+t.nodeSize,s=null;for(let u,l=0;l<n.length;l++)(u=n[l])&&u.from>o&&u.to<i&&((s||(s=[])).push(u),n[l]=null);return s}function jo(n){let t=[];for(let o=0;o<n.length;o++)null!=n[o]&&t.push(n[o]);return t}function bo(n,t,o,i){let s=[],l=!1;t.forEach((h,y)=>{let A=$o(n,h,y+o);if(A){l=!0;let E=bo(A,h,o+y+1,i);E!=on&&s.push(y,y+h.nodeSize,E)}});let u=io(l?jo(n):n,-o).sort(Vn);for(let h=0;h<u.length;h++)u[h].type.valid(t,u[h])||(i.onRemove&&i.onRemove(u[h].spec),u.splice(h--,1));return u.length||s.length?new Qe(u,s):on}function Vn(n,t){return n.from-t.from||n.to-t.to}function wo(n){let t=n;for(let o=0;o<t.length-1;o++){let i=t[o];if(i.from!=i.to)for(let s=o+1;s<t.length;s++){let l=t[s];if(l.from!=i.from){l.from<i.to&&(t==n&&(t=n.slice()),t[o]=i.copy(i.from,l.from),Uo(t,s,i.copy(l.from,i.to)));break}l.to!=i.to&&(t==n&&(t=n.slice()),t[s]=l.copy(l.from,i.to),Uo(t,s+1,l.copy(i.to,l.to)))}}return t}function Uo(n,t,o){for(;t<n.length&&Vn(o,n[t])>0;)t++;n.splice(t,0,o)}function So(n){let t=[];return n.someProp("decorations",o=>{let i=o(n.state);i&&i!=on&&t.push(i)}),n.cursorWrapper&&t.push(Qe.create(n.state.doc,[n.cursorWrapper.deco])),Pn.from(t)}const oi={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ii=Qt&&fe<=11;class ri{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Vo{constructor(t,o){this.view=t,this.handleDOMChange=o,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ri,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let s=0;s<i.length;s++)this.queue.push(i[s]);Qt&&fe<=11&&i.some(s=>"childList"==s.type&&s.removedNodes.length||"characterData"==s.type&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),ii&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,oi)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let o=0;o<t.length;o++)this.queue.push(t[o]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Rn(this.view)){if(this.suppressingSelectionUpdates)return Be(this.view);if(Qt&&fe<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&qt(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let i,o=new Set;for(let l=t.focusNode;l;l=dt(l))o.add(l);for(let l=t.anchorNode;l;l=dt(l))if(o.has(l)){i=l;break}let s=i&&this.view.docView.nearestDesc(i);return s&&s.ignoreMutation({type:"selection",target:3==i.nodeType?i.parentNode:i})?(this.setCurSelection(),!0):void 0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let o=this.observer?this.observer.takeRecords():[];this.queue.length&&(o=this.queue.concat(o),this.queue.length=0);let i=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&Rn(t)&&!this.ignoreSelectionChange(i),l=-1,u=-1,h=!1,y=[];if(t.editable)for(let E=0;E<o.length;E++){let F=this.registerMutation(o[E],y);F&&(l=l<0?F.from:Math.min(F.from,l),u=u<0?F.to:Math.max(F.to,u),F.typeOver&&(h=!0))}if(le&&y.length>1){let E=y.filter(F=>"BR"==F.nodeName);if(2==E.length){let F=E[0],V=E[1];F.parentNode&&F.parentNode.parentNode==V.parentNode?V.remove():F.remove()}}let A=null;l<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&se(i)&&(A=ce(t))&&A.eq(D.Y1.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Be(t),this.currentSelection.set(i),t.scrollToSelection()):(l>-1||s)&&(l>-1&&(t.docView.markDirty(l,u),function(n){if(!Ao.has(n)&&(Ao.set(n,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace))){if(n.requiresGeckoHackNode=le,Oo)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Oo=!0}}(t)),this.handleDOMChange(l,u,h,y),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(i)||Be(t),this.currentSelection.set(i))}registerMutation(t,o){if(o.indexOf(t.target)>-1)return null;let i=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(i==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style"))||!i||i.ignoreMutation(t))return null;if("childList"==t.type){for(let E=0;E<t.addedNodes.length;E++)o.push(t.addedNodes[E]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(t.target))return{from:i.posBefore,to:i.posAfter};let s=t.previousSibling,l=t.nextSibling;if(Qt&&fe<=11&&t.addedNodes.length)for(let E=0;E<t.addedNodes.length;E++){let{previousSibling:F,nextSibling:V}=t.addedNodes[E];(!F||Array.prototype.indexOf.call(t.addedNodes,F)<0)&&(s=F),(!V||Array.prototype.indexOf.call(t.addedNodes,V)<0)&&(l=V)}let u=s&&s.parentNode==t.target?at(s)+1:0,h=i.localPosFromDOM(t.target,u,-1),y=l&&l.parentNode==t.target?at(l):t.target.childNodes.length;return{from:h,to:i.localPosFromDOM(t.target,y,1)}}return"attributes"==t.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Ao=new WeakMap,Oo=!1;function Eo(n){let t=n.pmViewDesc;if(t)return t.parseRule();if("BR"==n.nodeName&&n.parentNode){if(ht&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let o=document.createElement("div");return o.appendChild(document.createElement("li")),{skip:o}}if(n.parentNode.lastChild==n||ht&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if("IMG"==n.nodeName&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Ko=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function No(n,t,o){return Math.max(o.anchor,o.head)>t.content.size?null:vn(n,t.resolve(o.anchor),t.resolve(o.head))}function yo(n,t,o){let i=n.depth,s=t?n.end():n.pos;for(;i>0&&(t||n.indexAfter(i)==n.node(i).childCount);)i--,s++,t=!1;if(o){let l=n.node(i).maybeChild(n.indexAfter(i));for(;l&&!l.isLeaf;)l=l.firstChild,s++}return s}class Sn{constructor(t,o){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new jn,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=o,this.state=o.state,this.directPlugins=o.plugins||[],this.directPlugins.forEach(p),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Lo(this),Po(this),this.nodeViews=Ro(this),this.docView=S(this.state.doc,Do(this),So(this),this.dom,this),this.domObserver=new Vo(this,(i,s,l,u)=>function(n,t,o,i,s){if(t<0){let ge=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,Wn=ce(n,ge);if(Wn&&!n.state.selection.eq(Wn)){if(vt&&st&&13===n.input.lastKeyCode&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ci=>ci(n,Nt(13,"Enter"))))return;let Ho=n.state.tr.setSelection(Wn);"pointer"==ge?Ho.setMeta("pointer",!0):"key"==ge&&Ho.scrollIntoView(),n.composing&&Ho.setMeta("composition",n.input.compositionID),n.dispatch(Ho)}return}let l=n.state.doc.resolve(t),u=l.sharedDepth(o);t=l.before(u+1),o=n.state.doc.resolve(o).after(u+1);let F,V,h=n.state.selection,y=function(n,t,o){let A,{node:i,fromOffset:s,toOffset:l,from:u,to:h}=n.docView.parseRange(t,o),y=n.domSelectionRange(),E=y.anchorNode;if(E&&n.dom.contains(1==E.nodeType?E:E.parentNode)&&(A=[{node:E,offset:y.anchorOffset}],se(y)||A.push({node:y.focusNode,offset:y.focusOffset})),vt&&8===n.input.lastKeyCode)for(let Tt=l;Tt>s;Tt--){let Kt=i.childNodes[Tt-1],Oe=Kt.pmViewDesc;if("BR"==Kt.nodeName&&!Oe){l=Tt;break}if(!Oe||Oe.size)break}let F=n.state.doc,V=n.someProp("domParser")||gt.aw.fromSchema(n.state.schema),Q=F.resolve(u),nt=null,mt=V.parse(i,{topNode:Q.parent,topMatch:Q.parent.contentMatchAt(Q.index()),topOpen:!0,from:s,to:l,preserveWhitespace:"pre"!=Q.parent.type.whitespace||"full",findPositions:A,ruleFromNode:Eo,context:Q});if(A&&null!=A[0].pos){let Tt=A[0].pos,Kt=A[1]&&A[1].pos;null==Kt&&(Kt=Tt),nt={anchor:Tt+u,head:Kt+u}}return{doc:mt,sel:nt,from:u,to:h}}(n,t,o),A=n.state.doc,E=A.slice(y.from,y.to);8===n.input.lastKeyCode&&Date.now()-100<n.input.lastKeyCodeTime?(F=n.state.selection.to,V="end"):(F=n.state.selection.from,V="start"),n.input.lastKeyCode=null;let Q=function(n,t,o,i,s){let l=n.findDiffStart(t,o);if(null==l)return null;let{a:u,b:h}=n.findDiffEnd(t,o+n.size,o+t.size);return"end"==s&&(i-=u+Math.max(0,l-Math.min(u,h))-l),u<l&&n.size<t.size?(l-=i<=l&&i>=u?l-i:0,h=l+(h-u),u=l):h<l&&(l-=i<=l&&i>=h?l-i:0,u=l+(u-h),h=l),{start:l,endA:u,endB:h}}(E.content,y.doc.content,y.from,F,V);if((z&&n.input.lastIOSEnter>Date.now()-225||st)&&s.some(ge=>1==ge.nodeType&&!Ko.test(ge.nodeName))&&(!Q||Q.endA>=Q.endB)&&n.someProp("handleKeyDown",ge=>ge(n,Nt(13,"Enter"))))return void(n.input.lastIOSEnter=0);if(!Q){if(!(i&&h instanceof D.Bs&&!h.empty&&h.$head.sameParent(h.$anchor))||n.composing||y.sel&&y.sel.anchor!=y.sel.head){if(y.sel){let ge=No(n,n.state.doc,y.sel);if(ge&&!ge.eq(n.state.selection)){let Wn=n.state.tr.setSelection(ge);n.composing&&Wn.setMeta("composition",n.input.compositionID),n.dispatch(Wn)}}return}Q={start:h.from,endA:h.to,endB:h.to}}if(vt&&n.cursorWrapper&&y.sel&&y.sel.anchor==n.cursorWrapper.deco.from&&y.sel.head==y.sel.anchor){let ge=Q.endB-Q.start;y.sel={anchor:y.sel.anchor+ge,head:y.sel.anchor+ge}}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&Q.start==Q.endB&&n.state.selection instanceof D.Bs&&(Q.start>n.state.selection.from&&Q.start<=n.state.selection.from+2&&n.state.selection.from>=y.from?Q.start=n.state.selection.from:Q.endA<n.state.selection.to&&Q.endA>=n.state.selection.to-2&&n.state.selection.to<=y.to&&(Q.endB+=n.state.selection.to-Q.endA,Q.endA=n.state.selection.to)),Qt&&fe<=11&&Q.endB==Q.start+1&&Q.endA==Q.start&&Q.start>y.from&&" \xa0"==y.doc.textBetween(Q.start-y.from-1,Q.start-y.from+1)&&(Q.start--,Q.endA--,Q.endB--);let Oe,nt=y.doc.resolveNoCache(Q.start-y.from),mt=y.doc.resolveNoCache(Q.endB-y.from),Tt=A.resolve(Q.start),Kt=nt.sameParent(mt)&&nt.parent.inlineContent&&Tt.end()>=Q.endA;if((z&&n.input.lastIOSEnter>Date.now()-225&&(!Kt||s.some(ge=>"DIV"==ge.nodeName||"P"==ge.nodeName))||!Kt&&nt.pos<y.doc.content.size&&!nt.sameParent(mt)&&(Oe=D.Y1.findFrom(y.doc.resolve(nt.pos+1),1,!0))&&Oe.head==mt.pos)&&n.someProp("handleKeyDown",ge=>ge(n,Nt(13,"Enter"))))return void(n.input.lastIOSEnter=0);if(n.state.selection.anchor>Q.start&&function(n,t,o,i,s){if(!i.parent.isTextblock||o-t<=s.pos-i.pos||yo(i,!0,!1)<s.pos)return!1;let l=n.resolve(t);if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let u=n.resolve(yo(l,!0,!0));return!(!u.parent.isTextblock||u.pos>o||yo(u,!0,!1)<o)&&i.parent.content.cut(i.parentOffset).eq(u.parent.content)}(A,Q.start,Q.endA,nt,mt)&&n.someProp("handleKeyDown",ge=>ge(n,Nt(8,"Backspace"))))return void(st&&vt&&n.domObserver.suppressSelectionUpdates());vt&&st&&Q.endB==Q.start&&(n.input.lastAndroidDelete=Date.now()),st&&!Kt&&nt.start()!=mt.start()&&0==mt.parentOffset&&nt.depth==mt.depth&&y.sel&&y.sel.anchor==y.sel.head&&y.sel.head==Q.endA&&(Q.endB-=2,mt=y.doc.resolveNoCache(Q.endB-y.from),setTimeout(()=>{n.someProp("handleKeyDown",function(ge){return ge(n,Nt(13,"Enter"))})},20));let Fe,xn,Yn,ze=Q.start,Ke=Q.endA;if(Kt)if(nt.pos==mt.pos)Qt&&fe<=11&&0==nt.parentOffset&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Be(n),20)),Fe=n.state.tr.delete(ze,Ke),xn=A.resolve(Q.start).marksAcross(A.resolve(Q.endA));else if(Q.endA==Q.endB&&(Yn=function(n,t){let u,h,y,o=n.firstChild.marks,i=t.firstChild.marks,s=o,l=i;for(let E=0;E<i.length;E++)s=i[E].removeFromSet(s);for(let E=0;E<o.length;E++)l=o[E].removeFromSet(l);if(1==s.length&&0==l.length)h=s[0],u="add",y=E=>E.mark(h.addToSet(E.marks));else{if(0!=s.length||1!=l.length)return null;h=l[0],u="remove",y=E=>E.mark(h.removeFromSet(E.marks))}let A=[];for(let E=0;E<t.childCount;E++)A.push(y(t.child(E)));if(gt.HY.from(A).eq(n))return{mark:h,type:u}}(nt.parent.content.cut(nt.parentOffset,mt.parentOffset),Tt.parent.content.cut(Tt.parentOffset,Q.endA-Tt.start()))))Fe=n.state.tr,"add"==Yn.type?Fe.addMark(ze,Ke,Yn.mark):Fe.removeMark(ze,Ke,Yn.mark);else if(nt.parent.child(nt.index()).isText&&nt.index()==mt.index()-(mt.textOffset?0:1)){let ge=nt.parent.textBetween(nt.parentOffset,mt.parentOffset);if(n.someProp("handleTextInput",Wn=>Wn(n,ze,Ke,ge)))return;Fe=n.state.tr.insertText(ge,ze,Ke)}if(Fe||(Fe=n.state.tr.replace(ze,Ke,y.doc.slice(Q.start-y.from,Q.endB-y.from))),y.sel){let ge=No(n,Fe.doc,y.sel);ge&&!(vt&&st&&n.composing&&ge.empty&&(Q.start!=Q.endB||n.input.lastAndroidDelete<Date.now()-100)&&(ge.head==ze||ge.head==Fe.mapping.map(Ke)-1)||Qt&&ge.empty&&ge.head==ze)&&Fe.setSelection(ge)}xn&&Fe.ensureMarks(xn),n.composing&&Fe.setMeta("composition",n.input.compositionID),n.dispatch(Fe.scrollIntoView())}(this,i,s,l,u)),this.domObserver.start(),function(n){for(let t in He){let o=He[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=i=>{Nn(n,i)&&!_n(n,i)&&(n.editable||!(i.type in je))&&o(n,i)},$n[t]?{passive:!0}:void 0)}ht&&n.dom.addEventListener("input",()=>null),gn(n)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let o in t)this._props[o]=t[o];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&gn(this);let o=this._props;this._props=t,t.plugins&&(t.plugins.forEach(p),this.directPlugins=t.plugins),this.updateStateInner(t.state,o)}setProps(t){let o={};for(let i in this._props)o[i]=this._props[i];o.state=this.state;for(let i in t)o[i]=t[i];this.update(o)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,o){let i=this.state,s=!1,l=!1;t.storedMarks&&this.composing&&(xo(this),l=!0),this.state=t;let u=i.plugins!=t.plugins||this._props.plugins!=o.plugins;if(u||this._props.plugins!=o.plugins||this._props.nodeViews!=o.nodeViews){let V=Ro(this);(function(n,t){let o=0,i=0;for(let s in n){if(n[s]!=t[s])return!0;o++}for(let s in t)i++;return o!=i})(V,this.nodeViews)&&(this.nodeViews=V,s=!0)}(u||o.handleDOMEvents!=this._props.handleDOMEvents)&&gn(this),this.editable=Lo(this),Po(this);let h=So(this),y=Do(this),A=i.plugins==t.plugins||i.doc.eq(t.doc)?t.scrollToSelection>i.scrollToSelection?"to selection":"preserve":"reset",E=s||!this.docView.matchesNode(t.doc,y,h);(E||!t.selection.eq(i.selection))&&(l=!0);let F="preserve"==A&&l&&null==this.dom.style.overflowAnchor&&function(n){let i,s,t=n.dom.getBoundingClientRect(),o=Math.max(0,t.top);for(let l=(t.left+t.right)/2,u=o+1;u<Math.min(innerHeight,t.bottom);u+=5){let h=n.root.elementFromPoint(l,u);if(!h||h==n.dom||!n.dom.contains(h))continue;let y=h.getBoundingClientRect();if(y.top>=o-20){i=h,s=y.top;break}}return{refDOM:i,refTop:s,stack:ue(n.dom)}}(this);if(l){this.domObserver.stop();let V=E&&(Qt||vt)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&function(n,t){let o=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(o)!=t.$anchor.start(o)}(i.selection,t.selection);if(E){let Q=vt?this.trackWrites=this.domSelectionRange().focusNode:null;(s||!this.docView.update(t.doc,y,h,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=S(t.doc,y,h,this.dom,this)),Q&&!this.trackWrites&&(V=!0)}V||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),o=n.domSelectionRange();return qt(t.node,t.offset,o.anchorNode,o.anchorOffset)}(this))?Be(this,V):(Jn(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),"reset"==A?this.dom.scrollTop=0:"to selection"==A?this.scrollToSelection():F&&function({refDOM:n,refTop:t,stack:o}){let i=n?n.getBoundingClientRect().top:0;Ue(o,0==i?0:i-t)}(F)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",o=>o(this)))if(this.state.selection instanceof D.qv){let o=this.docView.domAfterPos(this.state.selection.from);1==o.nodeType&&ye(this,o.getBoundingClientRect(),t)}else ye(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let o=0;o<this.pluginViews.length;o++){let i=this.pluginViews[o];i.update&&i.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let o=0;o<this.directPlugins.length;o++){let i=this.directPlugins[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let o=0;o<this.state.plugins.length;o++){let i=this.state.plugins[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}}someProp(t,o){let s,i=this._props&&this._props[t];if(null!=i&&(s=o?o(i):i))return s;for(let u=0;u<this.directPlugins.length;u++){let h=this.directPlugins[u].props[t];if(null!=h&&(s=o?o(h):h))return s}let l=this.state.plugins;if(l)for(let u=0;u<l.length;u++){let h=l[u].props[t];if(null!=h&&(s=o?o(h):h))return s}}hasFocus(){if(Qt){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(n){if(n.setActive)return n.setActive();if(de)return n.focus(de);let t=ue(n);n.focus(null==de?{get preventScroll(){return de={preventScroll:!0},!0}}:void 0),de||(de=!1,Ue(t,0))}(this.dom),Be(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let o=this.dom.parentNode;o;o=o.parentNode)if(9==o.nodeType||11==o.nodeType&&o.host)return o.getSelection||(Object.getPrototypeOf(o).getSelection=()=>o.ownerDocument.getSelection()),this._root=o;return t||document}posAtCoords(t){return pe(this,t)}coordsAtPos(t,o=1){return qe(this,t,o)}domAtPos(t,o=0){return this.docView.domFromPos(t,o)}nodeDOM(t){let o=this.docView.descAt(t);return o?o.nodeDOM:null}posAtDOM(t,o,i=-1){let s=this.docView.posFromDOM(t,o,i);if(null==s)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,o){return function(n,t,o){return Y==t&&k==o?M:(Y=t,k=o,M="up"==o||"down"==o?function(n,t,o){let i=t.selection,s="up"==o?i.$from:i.$to;return me(n,t,()=>{let{node:l}=n.docView.domFromPos(s.pos,"up"==o?-1:1);for(;;){let h=n.docView.nearestDesc(l,!0);if(!h)break;if(h.node.isBlock){l=h.contentDOM||h.dom;break}l=h.dom.parentNode}let u=qe(n,s.pos,1);for(let h=l.firstChild;h;h=h.nextSibling){let y;if(1==h.nodeType)y=h.getClientRects();else{if(3!=h.nodeType)continue;y=Xt(h,0,h.nodeValue.length).getClientRects()}for(let A=0;A<y.length;A++){let E=y[A];if(E.bottom>E.top+1&&("up"==o?u.top-E.top>2*(E.bottom-u.top):E.bottom-u.bottom>2*(u.bottom-E.top)))return!1}}return!0})}(n,t,o):function(n,t,o){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let s=i.parentOffset,l=!s,u=s==i.parent.content.size,h=n.domSelection();return Ce.test(i.parent.textContent)&&h.modify?me(n,t,()=>{let{focusNode:y,focusOffset:A,anchorNode:E,anchorOffset:F}=n.domSelectionRange(),V=h.caretBidiLevel;h.modify("move",o,"character");let Q=i.depth?n.docView.domAfterPos(i.before()):n.dom,{focusNode:nt,focusOffset:mt}=n.domSelectionRange(),Tt=nt&&!Q.contains(1==nt.nodeType?nt:nt.parentNode)||y==nt&&A==mt;try{h.collapse(E,F),y&&(y!=E||A!=F)&&h.extend&&h.extend(y,A)}catch(Kt){}return null!=V&&(h.caretBidiLevel=V),Tt}):"left"==o||"backward"==o?l:u}(n,t,o))}(this,o||this.state,t)}pasteHTML(t,o){return Fn(this,"",t,!1,o||new ClipboardEvent("paste"))}pasteText(t,o){return Fn(this,t,null,!0,o||new ClipboardEvent("paste"))}destroy(){!this.docView||(function(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],So(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return function(n,t){!_n(n,t)&&He[t.type]&&(n.editable||!(t.type in je))&&He[t.type](n,t)}(this,t)}dispatch(t){let o=this._props.dispatchTransaction;o?o.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){return ht&&11===this.root.nodeType&&function(n){let t=n.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom?function(n){let t;function o(y){y.preventDefault(),y.stopImmediatePropagation(),t=y.getTargetRanges()[0]}n.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",o,!0);let i=t.startContainer,s=t.startOffset,l=t.endContainer,u=t.endOffset,h=n.domAtPos(n.state.selection.anchor);return qt(h.node,h.offset,l,u)&&([i,s,l,u]=[l,u,i,s]),{anchorNode:i,anchorOffset:s,focusNode:l,focusOffset:u}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Do(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),n.someProp("attributes",o=>{if("function"==typeof o&&(o=o(n.state)),o)for(let i in o)"class"==i?t.class+=" "+o[i]:"style"==i?t.style=(t.style?t.style+";":"")+o[i]:!t[i]&&"contenteditable"!=i&&"nodeName"!=i&&(t[i]=String(o[i]))}),t.translate||(t.translate="no"),[hn.node(0,n.state.doc.content.size,t)]}function Po(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:hn.widget(n.state.selection.head,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Lo(n){return!n.someProp("editable",t=>!1===t(n.state))}function Ro(n){let t=Object.create(null);function o(i){for(let s in i)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=i[s])}return n.someProp("nodeViews",o),n.someProp("markViews",o),t}function p(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);