"use strict";(self.webpackChunktui_editor=self.webpackChunktui_editor||[]).push([[5273],{25273:(Ge,E,a)=>{a.r(E),a.d(E,{ExampleTuiEditorPreviewImagesToolModule:()=>Xe});var m=a(12057),c=a(24751),I=a(34016),j=a(70997),K=a(44427),Q=a(221),O=a(54789),z=a(82847),X=a(23917),h=a(12628),v=a(31414),e=a(74788),A=a(98267),k=a(99434),P=a(27103),G=a(10215),q=a(96152);let ee=(()=>{class i{constructor(){this.imagePreview=new e.vpe}click(t){t instanceof HTMLImageElement&&this.imagePreview.emit(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(t,n){1&t&&e.NdJ("click",function(s){return n.click(s.target)})},outputs:{imagePreview:"imagePreview"}}),i})();var Z=a(49941),b=a(89570),H=a(76480);function te(i,o){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=o.polymorpheusOutlet;e.xp6(1),e.hij(" ",t," ")}}let ie=(()=>{class i{constructor(t){this.context=t}onKeyDownEsc(){this.context.$implicit.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.yf))},i.\u0275cmp=e.Xpm({type:i,selectors:[["tui-preview-dialog"]],hostBindings:function(t,n){1&t&&e.NdJ("keydown.esc",function(){return n.onKeyDownEsc()},!1,e.evT)},decls:2,vars:3,consts:[[1,"t-dialog-content"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,te,2,1,"ng-container",1),e.qZA()),2&t&&(e.Q6J("@tuiSlideInTop",void 0),e.xp6(1),e.Q6J("polymorpheusOutlet",n.context.content)("polymorpheusOutletContext",n.context))},directives:[b.Li],styles:[".t-dialog-content{position:fixed;width:100%;height:100%}[tuiWrapper][data-appearance=preview-action]{background:rgba(104,104,104,.96);color:var(--tui-text-01-night)}@media (hover: hover){[tuiWrapper][data-appearance=preview-action]:hover:not(._no-hover),[tuiWrapper][data-appearance=preview-action][data-state=hover]{background:rgba(159,159,159,.86)}}[tuiWrapper][data-appearance=preview-action]:active:not(._no-active),[tuiWrapper][data-appearance=preview-action][data-state=active],[tuiWrapper][data-appearance=preview-action][data-state=active]:hover{background:rgba(159,159,159,.75)}\n"],encapsulation:2,data:{animation:[Z.X9]},changeDetection:0}),i})(),B=(()=>{class i extends H.d5{constructor(){super(...arguments),this.defaultOptions={},this.component=new b.Al(ie)}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ne=(()=>{class i{constructor(t){this.tuiPan=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.l))},i.\u0275dir=e.lG2({type:i,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[e._Bn([P.l])]}),i})(),oe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),re=(()=>{class i{constructor(t){this.tuiZoom=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(P.bW))},i.\u0275dir=e.lG2({type:i,selectors:[["","tuiZoom",""]],hostVars:2,hostBindings:function(t,n){2&t&&e.Udp("touch-action","none")},outputs:{tuiZoom:"tuiZoom"},features:[e._Bn([P.bW])]}),i})(),ae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();var $=a(5962),f=a(33770),_=a(85648),T=a(66749),N=a(75675),se=a(69727),ue=a(41213),ce=a(44358),le=a(57179);function R(i,o){const t=i.findIndex((s,u)=>u&&o(s));return[i[t-1],i[t]]}a(18939),a(18269);var pe=a(64762),ve=a(62579),he=a(15257);const fe=["type","range","tuiSlider",""],_e=["tuiSliderThumbLabel",""];function Te(i,o){1&i&&e.GkF(0)}const we=["*",[["input","type","range"]]],Pe=["*","input[type=range]"],F={size:"m",trackColor:"var(--tui-base-03)"},L=new e.OlP("[TUI_SLIDER_OPTIONS]",{factory:()=>F});let x=(()=>{class i{constructor(t,n,r,s,u,l){var p;this.control=t,this.options=r,this.el=s,this.userAgent=u,this.injector=l,this.size=this.options.size,this.segments=1,t instanceof c.On&&(null===(p=t.valueChanges)||void 0===p||p.pipe((0,T.NA)(n),(0,he.q)(1)).subscribe())}get min(){return Number(this.el.nativeElement.min)}get max(){return Number(this.el.nativeElement.max||100)}get step(){return Number(this.el.nativeElement.step)||1}get value(){const{el:t,control:n,hasKeySteps:r}=this;return!r&&n instanceof c.On?n.viewModel:Number(t.nativeElement.value)||0}set value(t){this.el.nativeElement.value=`${t}`}get valuePercentage(){return 100*(this.value-this.min)/(this.max-this.min)||0}get segmentWidth(){return 100/Math.max(1,this.segments)}get isOldEdge(){return(0,ue.xz)(f.FS,this.userAgent)}get hasKeySteps(){return Boolean(this.injector.get(be,null))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.a5,10),e.Y36(e.sBO),e.Y36(L),e.Y36(e.SBq),e.Y36(ve.yZ),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["input","type","range","tuiSlider",""]],hostVars:9,hostBindings:function(t,n){1&t&&e.NdJ("input",function(){return 0}),2&t&&(e.uIk("data-size",n.size),e.Udp("--tui-slider-track-color",n.options.trackColor)("--tui-slider-fill-percentage",n.valuePercentage,"%")("--tui-slider-segment-width",n.segmentWidth,"%"),e.ekj("_old-edge",n.isOldEdge))},inputs:{size:"size",segments:"segments"},attrs:fe,decls:0,vars:0,template:function(t,n){},styles:["[_nghost-%COMP%]{display:block;width:100%;color:var(--tui-primary);cursor:pointer}[_nghost-%COMP%]:active{cursor:ew-resize}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);cursor:auto}[_nghost-%COMP%]:not(._old-edge){-webkit-appearance:none;-moz-appearance:none;appearance:none;height:.125rem;padding:.4375rem 0;background-color:transparent;background-clip:content-box;outline:none;border-radius:var(--tui-radius-m)}[_nghost-%COMP%]:not(._old-edge)::-webkit-slider-container{border-radius:inherit}[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-runnable-track{height:.125rem;border-radius:inherit;background-repeat:no-repeat;background-color:var(--tui-slider-track-color);background-image:linear-gradient(to right,currentColor 0px .625rem,transparent .25rem),repeating-linear-gradient(to right,var(--tui-base-07) 0 .25rem,transparent 0 var(--tui-slider-segment-width)),linear-gradient(to right,currentColor var(--tui-slider-fill-percentage),transparent var(--tui-slider-fill-percentage));background-position-x:0,.375rem,0;background-size:calc(100% - 1rem),calc(100% - 1rem),auto}[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-runnable-track{height:.125rem;border-radius:inherit;background-repeat:no-repeat;background-color:var(--tui-slider-track-color);background-image:linear-gradient(to right,currentColor 0px .375rem,transparent .25rem),repeating-linear-gradient(to right,var(--tui-base-07) 0 .25rem,transparent 0 var(--tui-slider-segment-width)),linear-gradient(to right,currentColor var(--tui-slider-fill-percentage),transparent var(--tui-slider-fill-percentage));background-position-x:0,.125rem,0;background-size:calc(100% - .5rem),calc(100% - .5rem),auto}[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-track{height:.125rem;border-radius:inherit;background-repeat:no-repeat;background-color:var(--tui-slider-track-color);background-image:linear-gradient(to right,currentColor 0px .625rem,transparent .25rem),repeating-linear-gradient(to right,var(--tui-base-07) 0 .25rem,transparent 0 var(--tui-slider-segment-width));background-position-x:0,.375rem;background-size:calc(100% - 1rem)}[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-track{height:.125rem;border-radius:inherit;background-repeat:no-repeat;background-color:var(--tui-slider-track-color);background-image:linear-gradient(to right,currentColor 0px .375rem,transparent .25rem),repeating-linear-gradient(to right,var(--tui-base-07) 0 .25rem,transparent 0 var(--tui-slider-segment-width));background-position-x:0,.125rem;background-size:calc(100% - .5rem)}[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background-color:currentColor;border:none;border-radius:50%;height:1rem;width:1rem;margin-top:-.4375rem}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb{cursor:ew-resize}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb:hover{background:var(--tui-primary-hover)}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb:active{background:var(--tui-primary-active)}:focus-visible[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb{box-shadow:0 0 0 2px inset var(--tui-focus)}[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background-color:currentColor;border:none;border-radius:50%;height:.5rem;width:.5rem;margin-top:-.1875rem}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb{cursor:ew-resize}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb:hover{background:var(--tui-primary-hover)}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb:active{background:var(--tui-primary-active)}:focus-visible[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb{box-shadow:0 0 0 2px inset var(--tui-focus)}[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb{-moz-appearance:none;appearance:none;background-color:currentColor;border:none;border-radius:50%;height:1rem;width:1rem}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb{cursor:ew-resize}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb:hover{background:var(--tui-primary-hover)}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb:active{background:var(--tui-primary-active)}:focus-visible[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb{box-shadow:0 0 0 2px inset var(--tui-focus)}[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb{-moz-appearance:none;appearance:none;background-color:currentColor;border:none;border-radius:50%;height:.5rem;width:.5rem}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb{cursor:ew-resize}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb:hover{background:var(--tui-primary-hover)}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb:active{background:var(--tui-primary-active)}:focus-visible[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb{box-shadow:0 0 0 2px inset var(--tui-focus)}[_nghost-%COMP%]:not(._old-edge)::-moz-range-progress{border-radius:inherit}[_nghost-%COMP%]:not(._old-edge)::-moz-range-progress{height:.125rem;background:currentColor;border-top-right-radius:0;border-bottom-right-radius:0}._old-edge[_nghost-%COMP%]::-ms-thumb{background:currentColor;border-radius:50%}._old-edge[_nghost-%COMP%]::-ms-fill-lower{background:currentColor}._old-edge[_nghost-%COMP%]::-ms-track{background:var(--tui-slider-track-color);border:none}"],changeDetection:0}),(0,pe.gn)([ce.UM],i.prototype,"hasKeySteps",null),i})(),be=(()=>{class i extends H.M${constructor(t,n,r,s){super(t,n),this.el=r,this.slider=s}get nativeFocusableElement(){return this.computedDisabled?null:this.el.nativeElement}get focused(){return(0,le.V8)(this.nativeFocusableElement)}get min(){return this.keySteps[0][1]}get max(){return this.keySteps[this.keySteps.length-1][1]}updateControlValue(){this.value=function(i,o){const[[t,n],[r,s]]=R(o,([p,C])=>i<=p);return(0,_.FG)((i-t)/(r-t)*(s-n)+n,7)}(this.slider.valuePercentage,this.keySteps)}writeValue(t){if(null===t)return;const n=(0,_.Ki)(t,this.min,this.max);this.slider.value=this.transformToNativeValue(n)}getFallbackValue(){return 0}transformToNativeValue(t){const{min:n,max:r}=this.slider;return function(i,o){const[[t,n],[r,s]]=R(o,([l,p])=>i<=p);return(r-t)*((i-n)/(s-n)||0)+t}(t,this.keySteps)*(r-n)/100+n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.a5,10),e.Y36(e.sBO),e.Y36(e.SBq),e.Y36((0,e.Gpc)(()=>x)))},i.\u0275dir=e.lG2({type:i,selectors:[["input","tuiSlider","","keySteps",""]],hostVars:4,hostBindings:function(t,n){1&t&&e.NdJ("input",function(){return n.updateControlValue()})("change",function(){return n.updateControlValue()}),2&t&&(e.Ikx("disabled",n.computedDisabled),e.uIk("aria-valuenow",n.safeCurrentValue)("aria-valuemin",n.min)("aria-valuemax",n.max))},inputs:{keySteps:"keySteps"},features:[e.qOj]}),i})();new Set(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"]);let Ce=(()=>{class i{get size(){var t;return(null===(t=this.slider)||void 0===t?void 0:t.size)||"m"}get ratio(){var t;return((null===(t=this.slider)||void 0===t?void 0:t.valuePercentage)||0)/100}get ghostLeft(){var t;return this.ratio*((null===(t=this.slider)||void 0===t?void 0:t.el.nativeElement.offsetWidth)||0)}ngAfterContentInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","tuiSliderThumbLabel",""]],contentQueries:function(t,n,r){if(1&t&&(e.Suo(r,x,5),e.Suo(r,c.a5,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.slider=s.first),e.iGM(s=e.CRH())&&(n.control=s.first)}},attrs:_e,ngContentSelectors:Pe,decls:5,vars:8,consts:[[4,"ngIf"],[1,"t-ghost"]],template:function(t,n){1&t&&(e.F$t(we),e.YNc(0,Te,1,0,"ng-container",0),e.ALo(1,"async"),e.TgZ(2,"div",1),e.Hsn(3),e.qZA(),e.Hsn(4,1)),2&t&&(e.Q6J("ngIf",e.lcZ(1,6,null==n.control?null:n.control.valueChanges)),e.xp6(2),e.Udp("left",n.ghostLeft,"px")("--tui-slider-thumb-ratio",n.ratio),e.uIk("data-size",n.size))},directives:[m.O5],pipes:[m.Ov],styles:["[_nghost-%COMP%]{position:relative}.t-ghost[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;margin:auto;border-radius:50%;pointer-events:none}.t-ghost[data-size=s][_ngcontent-%COMP%]{width:.5rem;height:.5rem;transform:translate(calc(var(--tui-slider-thumb-ratio) * -.5rem))}.t-ghost[data-size=m][_ngcontent-%COMP%]{width:1rem;height:1rem;transform:translate(calc(var(--tui-slider-thumb-ratio) * -1rem))}"],changeDetection:0}),i})(),ye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.ez]]}),i})();var g=a(90022),xe=a(40719),U=a(66682),Me=a(25917),De=a(41291),M=a(26215),Se=a(9112),J=a(47232);const Ee=new e.OlP("[TUI_PREVIEW_TEXTS]",{factory:(0,J.v)("previewTexts")}),Ie=new e.OlP("[TUI_PREVIEW_ZOOM_TEXTS]",{factory:(0,J.v)("zoomTexts")});var Oe=a(43190),w=a(88002),Y=a(39761),V=a(23764);function ze(i,o){if(1&i&&(e._uU(0),e.ALo(1,"percent"),e.ALo(2,"async")),2&i){const t=e.oxw(2);e.hij(" ",e.lcZ(1,1,e.lcZ(2,3,t.valueChange)||t.value)," ")}}function Ae(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().onMinus()}),e.qZA(),e.TgZ(3,"label",3),e._UZ(4,"div",4),e.ALo(5,"async"),e.YNc(6,ze,3,5,"ng-template",null,5,e.W1O),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().onModelChange(r)}),e.qZA(),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().onPlus()}),e.qZA(),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e.qZA(),e.BQk()}if(2&i){const t=o.ngIf,n=e.MAs(7),r=e.oxw();e.xp6(2),e.Q6J("title",t.zoomOut)("disabled",r.leftButtonDisabled),e.xp6(2),e.Q6J("tuiHint",n)("tuiHintManual",!!e.lcZ(5,12,r.hintShow$)),e.xp6(4),e.Q6J("min",r.min)("max",r.max)("ngModel",r.value),e.xp6(1),e.Q6J("title",t.zoomIn)("disabled",r.rightButtonDisabled),e.xp6(1),e.ekj("t-invisible",!r.collapseVisible),e.Q6J("tuiHint",t.reset)}}function ke(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).rotate()}),e.qZA()}if(2&i){const t=e.oxw().ngIf;e.Q6J("tuiHint",t.rotate)}}function Ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tui-preview-zoom",10),e.NdJ("valueChange",function(r){return e.CHM(t),e.oxw(2).zoom$.next(r)})("reset",function(){return e.CHM(t),e.oxw(2).reset()}),e.ALo(1,"async"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("min",t.minZoom)("value",e.lcZ(1,2,t.zoom$)||1)}}function He(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"section",1,2),e.NdJ("tuiPan",function(r){return e.CHM(t),e.oxw().onPan(r)})("tuiZoom",function(r){return e.CHM(t),e.oxw().onZoom(r)})("tuiResize",function(r){return e.CHM(t),e.oxw().onResize(r)})("waMutationObserver",function(){e.CHM(t);const r=e.MAs(2);return e.oxw().onMutation(r)}),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.Hsn(6),e.qZA(),e.TgZ(7,"header",3),e.TgZ(8,"div",4),e.Hsn(9,1),e.qZA(),e.Hsn(10,2),e.TgZ(11,"div",5),e.Hsn(12,3),e.qZA(),e.qZA(),e.TgZ(13,"footer",6),e.YNc(14,ke,1,1,"button",7),e.YNc(15,Ze,2,4,"tui-preview-zoom",8),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Udp("transform",e.lcZ(3,10,t.wrapperTransform$))("cursor",e.lcZ(4,12,t.cursor$)),e.ekj("t-not-interactive-content",t.zoomable)("t-transitive",e.lcZ(5,14,t.transitioned$)),e.xp6(13),e.Q6J("ngIf",t.rotatable),e.xp6(1),e.Q6J("ngIf",t.zoomable)}}const Be=["*",[["tui-preview-title"]],[["tui-preview-pagination"]],[["","tuiPreviewAction",""]]],$e=["*","tui-preview-title","tui-preview-pagination","[tuiPreviewAction]"];let D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i,selectors:[["","tuiPreviewAction",""]],features:[e._Bn([(0,h.O0)({appearance:"preview-action",shape:"rounded",size:"s"})])]}),i})(),Ne=(()=>{class i{constructor(t){this.zoomTexts$=t,this.min=.5,this.max=2,this.value=1,this.valueChange=new e.vpe,this.reset=new e.vpe,this.hintShow$=this.valueChange.pipe((0,Oe.w)(()=>(0,U.T)((0,Me.of)(!0),(0,De.H)(1e3).pipe((0,w.U)(f.Iy)))),(0,Y.O)(!1))}get leftButtonDisabled(){return this.value===this.min}get rightButtonDisabled(){return this.value===this.max}get collapseVisible(){return this.value>this.min}onModelChange(t){const n=(0,_.Ki)(t,this.min,this.max);n!==this.value&&(this.value=n,this.valueChange.emit(n))}onReset(){this.reset.emit()}onMinus(){this.onModelChange(this.value-.5)}onPlus(){this.onModelChange(this.value<1?1:this.value+.5)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ie))},i.\u0275cmp=e.Xpm({type:i,selectors:[["tui-preview-zoom"]],inputs:{min:"min",max:"max",value:"value"},outputs:{valueChange:"valueChange",reset:"reset"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"t-zoom"],["type","button","tuiIconButton","","tuiPreviewAction","","icon","tuiIconMinus",1,"t-sign_minus",3,"title","disabled","click"],["tuiSliderThumbLabel",""],["tuiHintAppearance","onDark","tuiHintDirection","top-right",3,"tuiHint","tuiHintManual"],["hint",""],["tuiSlider","","type","range","step","any",1,"t-slider",3,"min","max","ngModel","ngModelChange"],["type","button","tuiIconButton","","tuiPreviewAction","","icon","tuiIconPlus",1,"t-sign_plus",3,"title","disabled","click"],["type","button","tuiIconButton","","tuiPreviewAction","","icon","tuiIconMinimize","tuiHintDirection","top-right","tuiHintAppearance","onDark","tuiHintDescribe","",1,"t-reset-button",3,"tuiHint","click"]],template:function(t,n){1&t&&(e.YNc(0,Ae,11,14,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.zoomTexts$))},directives:[m.O5,h.v0,D,Ce,g.D,g.xn,g.t6,g.DM,g.ZY,x,c.eT,c.Fj,c.JJ,c.On,g.$o],pipes:[m.Ov,m.Zx],styles:["[_nghost-%COMP%]{position:relative;display:flex}.t-zoom[_ngcontent-%COMP%]{border-radius:1rem;background:rgba(104,104,104,.96);color:var(--tui-text-01-night);font:var(--tui-font-text-s);display:flex;justify-content:space-between;align-items:center;width:12rem}.t-slider[_ngcontent-%COMP%]{width:7.5rem}.t-sign_minus[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.t-sign_plus[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}.t-invisible[_ngcontent-%COMP%]{visibility:hidden}.t-reset-button[_ngcontent-%COMP%]{margin-left:.3125rem}"],changeDetection:0}),i})();const y=.8,S=[0,0];let Fe=(()=>{class i{constructor(t,n){this.el=t,this.texts$=n,this.zoomable=!0,this.rotatable=!1,this.minZoom=1,this.width=0,this.height=0,this.zoom$=new M.X(this.minZoom),this.rotation$=new M.X(0),this.coordinates$=new M.X(S),this.transitioned$=(0,U.T)((0,T.mM)(this.el.nativeElement).pipe((0,w.U)(({stage:r})=>r!==T.nc.Continues)),(0,T.mL)(this.el.nativeElement,"touchmove",{passive:!0}).pipe((0,w.U)(f.Iy)),(0,T.mL)(this.el.nativeElement,"wheel",{passive:!0}).pipe((0,w.U)(f.Iy))),this.cursor$=(0,T.mM)(this.el.nativeElement).pipe((0,w.U)(({stage:r})=>r===T.nc.Continues?"grabbing":"initial"),(0,Y.O)("initial")),this.wrapperTransform$=(0,Se.aj)([this.coordinates$.pipe((0,w.U)(([r,s])=>`${(0,N.O)(r)}, ${(0,N.O)(s)}`)),this.zoom$,this.rotation$]).pipe((0,w.U)(([r,s,u])=>`translate(${r}) scale(${s}) rotate(${u}deg)`))}rotate(){this.rotation$.next(this.rotation$.value-90)}onPan(t){this.coordinates$.next(this.getGuardedCoordinates(this.coordinates$.value[0]+t[0],this.coordinates$.value[1]+t[1]))}onMutation(t){const{clientWidth:n,clientHeight:r}=t;this.refresh(n,r)}onZoom({clientX:t,clientY:n,delta:r}){this.zoomable&&this.processZoom(t,n,r)}onResize(t){if(0===t.length)return;const{width:n,height:r}=t[0].contentRect;this.refresh(n,r)}reset(){this.zoom$.next(this.minZoom),this.coordinates$.next(S)}get offsets(){return{offsetX:(this.zoom$.value-this.minZoom)*this.width/2,offsetY:(this.zoom$.value-this.minZoom)*this.height/2}}calculateMinZoom(t,n,r,s){const u=t>r*y||n>s*y,{clientHeight:l,clientWidth:p}=this.el.nativeElement;return u?(0,_.FG)(Math.min(l*y/t,p*y/n),2):1}refresh(t,n){this.width=t,this.height=n,this.minZoom=this.calculateMinZoom(n,t,this.el.nativeElement.clientHeight,this.el.nativeElement.clientWidth),this.zoom$.next(this.minZoom),this.coordinates$.next(S),this.rotation$.next(0)}processZoom(t,n,r){const s=this.zoom$.value,u=(0,_.Ki)(s+r,this.minZoom,2),l=this.getScaleCenter({clientX:t,clientY:n},this.coordinates$.value,this.zoom$.value),p=l[0]*s-l[0]*u,C=l[1]*s-l[1]*u;this.zoom$.next(u),this.coordinates$.next(this.getGuardedCoordinates(this.coordinates$.value[0]+p,this.coordinates$.value[1]+C))}getGuardedCoordinates(t,n){const{offsetX:r,offsetY:s}=this.offsets;return[(0,_.Ki)(t,-r,r),(0,_.Ki)(n,-s,s)]}getScaleCenter({clientX:t,clientY:n},[r,s],u){return[(t-r-this.el.nativeElement.offsetWidth/2)/u,(n-s-this.el.nativeElement.offsetHeight/2)/u]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(Ee))},i.\u0275cmp=e.Xpm({type:i,selectors:[["tui-preview"]],inputs:{zoomable:"zoomable",rotatable:"rotatable"},ngContentSelectors:$e,decls:2,vars:3,consts:[[4,"ngIf"],["subtree","","childList","","characterData","","attributeFilter","src",1,"t-wrapper",3,"tuiPan","tuiZoom","tuiResize","waMutationObserver"],["contentWrapper",""],[1,"t-header"],[1,"t-title"],[1,"t-actions"],[1,"t-footer"],["tuiIconButton","","tuiPreviewAction","","type","button","icon","tuiIconRotate","tuiHintDirection","top-right","tuiHintAppearance","onDark","tuiHintDescribe","","class","t-rotate-button",3,"tuiHint","click",4,"ngIf"],[3,"min","value","valueChange","reset",4,"ngIf"],["tuiIconButton","","tuiPreviewAction","","type","button","icon","tuiIconRotate","tuiHintDirection","top-right","tuiHintAppearance","onDark","tuiHintDescribe","",1,"t-rotate-button",3,"tuiHint","click"],[3,"min","value","valueChange","reset"]],template:function(t,n){1&t&&(e.F$t(Be),e.YNc(0,He,16,16,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.texts$))},directives:[m.O5,ne,re,$.$,V.Vi,h.v0,D,g.$o,g.D,g.xn,g.t6,g.DM,Ne],pipes:[m.Ov],styles:["[_nghost-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}.t-header[_ngcontent-%COMP%]{position:fixed;top:1rem;display:flex;width:100%;padding:0 1rem;box-sizing:border-box}.t-footer[_ngcontent-%COMP%]{position:absolute;bottom:1rem;display:flex;width:100%;padding:0 1rem;box-sizing:border-box;justify-content:center}.t-actions[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:flex-end}.t-actions[_ngcontent-%COMP%]    >*{margin-left:.625rem}.t-rotate-button[_ngcontent-%COMP%]{margin-right:.3125rem}.t-title[_ngcontent-%COMP%]{flex:1}tui-root._mobile[_nghost-%COMP%]   .t-title[_ngcontent-%COMP%], tui-root._mobile   [_nghost-%COMP%]   .t-title[_ngcontent-%COMP%]{display:none}.t-not-interactive-content[_ngcontent-%COMP%]    >*{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{will-change:transform}.t-transitive[_ngcontent-%COMP%]{transition-duration:.3s}"],data:{animation:[Z.X9]},changeDetection:0}),i})(),Le=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),Ue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[(0,k.Q)(B)],imports:[[m.ez,b.wq,V.NI,h.fN,c.u5,ye,g.go,se.N,$.k,O.EI,xe.dS,oe,ae,Le]]}),i})();const Je=["previewImages"];function Ye(i,o){if(1&i&&e._UZ(0,"img",4),2&i){const t=e.oxw(2);e.Q6J("src",t.image.src,e.LSH)}}function Ve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tui-preview",1),e.YNc(1,Ye,1,1,"img",2),e.TgZ(2,"button",3),e.NdJ("click",function(){return e.CHM(t).$implicit.complete()}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("rotatable",!0),e.xp6(1),e.Q6J("ngIf",t.image)}}let We=(()=>{class i{constructor(t){this.dialogs=t}showImage(t){this.image=t,this.dialogs.open(this.template||"").subscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B))},i.\u0275cmp=e.Xpm({type:i,selectors:[["image-preview-example"]],viewQuery:function(t,n){if(1&t&&e.Gf(Je,5),2&t){let r;e.iGM(r=e.CRH())&&(n.template=r.first)}},decls:2,vars:0,consts:[["previewImages",""],[3,"rotatable"],["loading","lazy","alt","","class","t-image-preview",3,"src",4,"ngIf"],["tuiIconButton","","tuiPreviewAction","","icon","tuiIconCloseLarge","title","Close","type","button",3,"click"],["loading","lazy","alt","",1,"t-image-preview",3,"src"]],template:function(t,n){1&t&&e.YNc(0,Ve,3,2,"ng-template",null,0,e.W1O)},directives:[Fe,m.O5,h.v0,D],styles:[".t-image-preview[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),i})(),je=(()=>{class i{constructor(t){this.isStackblitz=t,this.relativePath=this.isStackblitz?"https://taiga-ui.dev/":"",this.builtInTools=[v._2.Undo,v._2.Img],this.control=new c.NI(""),this.control.patchValue(`<p>Small image</p><img data-type="image-editor" src="${this.relativePath}assets/images/lumberjack.png" width="300"><p>Big image</p><img data-type="image-editor" src="${this.relativePath}assets/images/big-wallpaper.jpg" width="500">`)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.Sg))},i.\u0275cmp=e.Xpm({type:i,selectors:[["tui-editor-preview-images-example-1"]],features:[e._Bn([P.a3,{provide:v.Wf,deps:[e.zs3],useFactory:o=>[Promise.resolve().then(a.bind(a,66826)).then(({StarterKit:t})=>t),Promise.resolve().then(a.bind(a,45267)).then(({createImageEditorExtension:t})=>t(o))]}])],decls:6,vars:3,consts:[[1,"editor",3,"formControl","tools"],[3,"content","imagePreview"],["preview",""]],template:function(t,n){if(1&t){const r=e.EpF();e._UZ(0,"tui-editor",0),e.TgZ(1,"h4"),e._uU(2,"HTML:"),e.qZA(),e.TgZ(3,"tui-editor-socket",1),e.NdJ("imagePreview",function(u){return e.CHM(r),e.MAs(5).showImage(u)}),e._UZ(4,"image-preview-example",null,2),e.qZA()}2&t&&(e.Q6J("formControl",n.control)("tools",n.builtInTools),e.xp6(3),e.Q6J("content",n.control.value||""))},directives:[G.a,c.JJ,c.oH,q.D,ee,We],encapsulation:2,changeDetection:0}),i})(),Ke=(()=>{class i{constructor(){this.example1={TypeScript:a.e(424).then(a.t.bind(a,50424,17)),HTML:a.e(7788).then(a.t.bind(a,57788,17)),"image-preview/image-preview.template.html":a.e(4711).then(a.t.bind(a,84711,17)),"image-preview/image-preview.style.less":a.e(5380).then(a.t.bind(a,5380,17)),"image-preview/image-preview.component.ts":a.e(2286).then(a.t.bind(a,82286,17)),"image-preview/image-preview.module.ts":a.e(9742).then(a.t.bind(a,39742,17))}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["editor-preview-images"]],features:[e._Bn([{provide:v.Wf,useValue:v.PD}])],decls:11,vars:1,consts:[["header","Editor","package","ADDON-EDITOR","type","components"],["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icons/bundled","fragment","sanitizer"],["id","preview-image","heading","Preview for images",3,"content"]],template:function(t,n){1&t&&(e.TgZ(0,"tui-doc-page",0),e.TgZ(1,"p"),e._uU(2," Rich Text Editor based on "),e.TgZ(3,"a",1),e._uU(4," TipTap Editor "),e.qZA(),e._uU(5," for using with Angular forms. For safety reasons use a "),e.TgZ(6,"a",2),e._uU(7," sanitizer "),e.qZA(),e._uU(8," with this component. "),e.qZA(),e.TgZ(9,"tui-doc-example",3),e._UZ(10,"tui-editor-preview-images-example-1"),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("content",n.example1))},directives:[A.qo,z.V,I.yS,A.f2,je],encapsulation:2,changeDetection:0}),i})(),Qe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.ez,Ue,h.fN,b.wq,v.BN],v.BN,v.BN]}),i})(),Xe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.ez,Q.A,O.EI,z.j,X.jh,h.fN,j.fV,c.u5,c.UX,v.T_,v.GK,Qe,I.Bz.forChild((0,K.Ve)(Ke))]]}),i})()}}]);