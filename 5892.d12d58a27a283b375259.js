"use strict";(self.webpackChunktui_editor=self.webpackChunktui_editor||[]).push([[5892],{15892:(ct,T,i)=>{i.r(T),i.d(T,{ExampleTuiEditorUploadImagesModule:()=>ut});var l=i(12057),s=i(24751),y=i(34016),F=i(70997),U=i(44427),o=i(74788),S=i(33770);let O=(()=>{class e{constructor(){this.onChange=S.iD,this.tuiValidator=s.kI.nullValidator}validate(t){return this.tuiValidator(t)}registerOnValidatorChange(t){this.onChange=t}ngOnChanges(){this.onChange()}ngOnDestroy(){this.tuiValidator=s.kI.nullValidator,this.onChange()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.lG2({type:e,selectors:[["","tuiValidator",""]],inputs:{tuiValidator:"tuiValidator"},features:[o._Bn([{provide:s.Cf,useExisting:(0,o.Gpc)(()=>e),multi:!0}]),o.TTD]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({}),e})();var V=i(221),E=i(11927),u=i(18939),I=i(49941),z=i(12130),p=i(79456),M=i(89570);function B(e,n){if(1&e&&(o.ynx(0),o._uU(1),o.BQk()),2&e){const t=n.polymorpheusOutlet;o.xp6(1),o.hij(" ",t," ")}}const Y=function(){return{}};function J(e,n){if(1&e&&(o.TgZ(0,"div",1),o.ALo(1,"async"),o.YNc(2,B,2,1,"ng-container",2),o.ALo(3,"async"),o.qZA()),2&e){const t=o.oxw();o.ekj("t-message-text_light","onDark"===o.lcZ(1,6,t.mode$)),o.Q6J("@tuiHeightCollapse",t.animation)("@tuiFadeIn",t.animation),o.xp6(2),o.Q6J("polymorpheusOutlet",t.error.message||o.lcZ(3,8,t.defaultErrorMessage$))("polymorpheusOutletContext",t.error.context||o.DdM(10,Y))}}let R=(()=>{class e{constructor(t,r,a){this.animation=t,this.mode$=r,this.defaultErrorMessage$=a,this.error=null,this.visible=!0}set errorSetter(t){this.error=(0,E.Aj)(t)?new u.T(t):t}onAnimation(t){this.visible=t}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.Pw),o.Y36(p.Au),o.Y36(p.PL))},e.\u0275cmp=o.Xpm({type:e,selectors:[["tui-error"]],hostBindings:function(t,r){1&t&&o.NdJ("animationcancel.self",function(){return r.onAnimation(!1)})("animationstart.self",function(){return r.onAnimation(!0)})},inputs:{errorSetter:["error","errorSetter"]},features:[o._Bn([z.CV])],decls:1,vars:1,consts:[["automation-id","tui-error__text","class","t-message-text",3,"t-message-text_light",4,"ngIf"],["automation-id","tui-error__text",1,"t-message-text"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(t,r){1&t&&o.YNc(0,J,4,11,"div",0),2&t&&o.Q6J("ngIf",r.error&&r.visible)},directives:[l.O5,M.Li],pipes:[l.Ov],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:block;color:var(--tui-negative);word-wrap:break-word;animation:tuiPresent 1s infinite}.t-message-text[_ngcontent-%COMP%]{margin-top:.25rem;white-space:pre-line}.t-message-text_light[_ngcontent-%COMP%]{color:var(--tui-negative-night)}"],data:{animation:[I.eu,I.QF]},changeDetection:0}),e})(),Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[l.ez,M.wq]]}),e})();var b=i(54789),C=i(82847),G=i(23917),H=i(12628),D=i(40719),v=i(64762),x=i(44358),$=i(56747),m=i(25917),P=i(95639),f=i(88002);const W={};let X=(()=>{class e{constructor(t,r,a,c){this.parent=t,this.self=r,this.container=a,this.validationErrors=c,this.order=[],this.self&&!this.self.valueAccessor&&(this.self.valueAccessor=this)}transform(t){return this.order=t,this.computedError}get computedError(){return this.invalid&&this.touched&&this.error||(0,m.of)(null)}registerOnChange(){}registerOnTouched(){}setDisabledState(){}writeValue(){}get error(){const{errorId:t}=this;return t?this.getError(this.controlErrors[t],this.validationErrors[t]):null}get invalid(){var t;return!!(null===(t=this.control)||void 0===t?void 0:t.invalid)}get touched(){var t;return!!(null===(t=this.control)||void 0===t?void 0:t.touched)}get control(){var t,r,a;return(null===(t=this.self)||void 0===t?void 0:t.control)||(null===(r=this.parent)||void 0===r?void 0:r.control)||(null===(a=this.container)||void 0===a?void 0:a.control)}get errorId(){return this.getErrorId(this.order,this.controlErrors)}get controlErrors(){var t;return(null===(t=this.control)||void 0===t?void 0:t.errors)||W}getErrorId(t,r){const a=null==t?void 0:t.find(g=>r[g]),c=Object.keys(r)[0];return a||c||""}getError(t,r){if(t instanceof u.T)return(0,m.of)(t);if(void 0===r&&(0,E.Aj)(t))return(0,m.of)(new u.T(t));if((0,P.b)(r))return j(r,t);if(r instanceof Function){const a=r(t);return(0,P.b)(a)?j(a,t):L(a,t)}return L(r,t)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(s.a5,28),o.Y36(s.a5,26),o.Y36(s.gN,24),o.Y36($.Z4,16))},e.\u0275pipe=o.Yjl({name:"tuiFieldError",type:e,pure:!1}),(0,v.gn)([x.UM],e.prototype,"getErrorId",null),(0,v.gn)([x.UM],e.prototype,"getError",null),e})();function j(e,n){return e.pipe((0,f.U)(t=>new u.T(t||"",n)))}function L(e,n){return(0,m.of)(new u.T(e||"",n))}let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({}),e})();var d=i(31414),Z=i(70652),K=i(99434),k=i(27103),q=i(22759),_=i(87874),tt=i(43190),ot=i(68939);function et(e){return n=>{const t=new FileReader;return e.loading$.next(!0),t.readAsDataURL(n),(0,q.R)(t,"load").pipe((0,_.g)(2e3),(0,f.U)(()=>String(t.result)),(0,tt.w)(r=>e.save(r)),(0,ot.x)(()=>e.loading$.next(!1)))}}var it=i(26215),rt=i(97968);let A=(()=>{class e{constructor(){this.loading$=new it.X(!1)}static createBody(t){const r=new FormData;return r.append("image",t.split(",").pop()||""),new URLSearchParams(r)}get isLoading(){return this.loading$.getValue()}save(t){return(0,rt.D)(fetch("https://api.imgbb.com/1/upload?key=3c1615980dcf693b282c4b0fb608b28a&expiration=300",{method:"POST",body:e.createBody(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(r=>(0,v.mG)(this,void 0,void 0,function*(){return r.json()}))).pipe((0,f.U)(r=>r.data.url))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var nt=i(10215),at=i(96152);const st=function(){return[]};let dt=(()=>{class e{constructor(t,r,a){this.doc=t,this.imgbbService=r,this.isStackblitz=a,this.relativePath=this.isStackblitz?"https://taiga-ui.dev/":"",this.builtInTools=[d._2.Undo,d._2.Img],this.control=new s.NI(""),this.validator=({value:c})=>{var g;return(null===(g=this.editor)||void 0===g?void 0:g.focused)||this.imgbbService.isLoading||!this.doc.hasFocus()||c.length?null:{empty:new u.T("ERROR: content must not be empty")}},this.control.patchValue(`\n                <img data-type="image-editor" src="${this.relativePath}assets/images/lumberjack.png" width="300">\n                <p>Try to drag right border of image!</p>\n                <p>To change min/max size of image use token <code>TUI_IMAGE_EDITOR_OPTIONS</code>.</p>\n                <img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUwIDUwIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPjxzdHlsZT4uYXtmaWxsOiNkZDAwMzF9LmJ7ZmlsbDojYzMwMDJmfS5je2ZpbGw6I2ZmZn08L3N0eWxlPjxwYXRoIGNsYXNzPSJhIiBkPSJtNDMuNiAxMi42bC0yLjggMjQuNy0xNS44IDguNy0xNS44LTguNy0yLjgtMjQuNyAxOC42LTYuNnoiLz48cGF0aCBjbGFzcz0iYiIgZD0ibTI1IDZsMTguNiA2LjYtMi44IDI0LjctMTUuOCA4Ljd2LTE1LjMtMjAuMy00LjR6Ii8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0iYyIgZD0ibTM2LjYgMzYuNWgtNC4zbC0yLjQtNS44aC05LjlsLTIuMyA1LjhoLTQuM2wxMS42LTI2LjF6bS0xMS42LTE3LjZsLTMuNCA4LjJoNi44eiIvPjwvc3ZnPg==" />`)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(l.K0),o.Y36(A),o.Y36(K.Sg))},e.\u0275cmp=o.Xpm({type:e,selectors:[["tui-editor-upload-images-example-1"]],viewQuery:function(t,r){if(1&t&&o.Gf(d.aI,7),2&t){let a;o.iGM(a=o.CRH())&&(r.editor=a.first)}},features:[o._Bn([k.a3,{provide:d.Wf,deps:[o.zs3],useFactory:n=>[Promise.resolve().then(i.bind(i,66826)).then(({StarterKit:t})=>t),Promise.resolve().then(i.bind(i,45267)).then(({createImageEditorExtension:t})=>t(n)),Promise.resolve().then(i.bind(i,44632)).then(({default:t})=>t.configure({inline:!0,allowBase64:!0}))]},{provide:d.kB,useValue:150},{provide:d.VE,useValue:400},{provide:d.p7,useFactory:et,deps:[A]}])],decls:13,vars:16,consts:[[3,"overlay","showLoader"],[1,"editor",3,"formControl","tools","tuiValidator"],[3,"formControl","error"],[3,"content"]],template:function(t,r){1&t&&(o.TgZ(0,"tui-loader",0),o.ALo(1,"async"),o._UZ(2,"tui-editor",1),o.qZA(),o._UZ(3,"tui-error",2),o.ALo(4,"async"),o.ALo(5,"tuiFieldError"),o.TgZ(6,"h4"),o._uU(7,"HTML:"),o.qZA(),o._UZ(8,"tui-editor-socket",3),o.TgZ(9,"h4"),o._uU(10,"Text:"),o.qZA(),o.TgZ(11,"p"),o._uU(12),o.qZA()),2&t&&(o.Q6J("overlay",!0)("showLoader",!!o.lcZ(1,9,r.imgbbService.loading$)),o.xp6(2),o.Q6J("formControl",r.control)("tools",r.builtInTools)("tuiValidator",r.validator),o.xp6(1),o.Q6J("formControl",r.control)("error",o.lcZ(4,11,o.lcZ(5,13,o.DdM(15,st)))),o.xp6(5),o.Q6J("content",r.control.value||""),o.xp6(4),o.Oqu(r.control.value))},directives:[D.kM,nt.a,s.JJ,s.oH,O,R,at.D],pipes:[l.Ov,X],encapsulation:2,changeDetection:0}),e})(),lt=(()=>{class e{constructor(){this.example1={TypeScript:i.e(4057).then(i.t.bind(i,84057,17)),HTML:i.e(4424).then(i.t.bind(i,64424,17)),"image-loader.ts":i.e(7219).then(i.t.bind(i,37219,17)),"imgbb.service.ts":i.e(8557).then(i.t.bind(i,58557,17))}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["editor-upload-images"]],features:[o._Bn([{provide:d.Wf,useValue:d.PD}])],decls:11,vars:1,consts:[["header","Editor","package","TUI-EDITOR","type","components"],["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icons/bundled","fragment","sanitizer"],["id","upload-images","heading","Upload images to a web server",3,"content"]],template:function(t,r){1&t&&(o.TgZ(0,"tui-doc-page",0),o.TgZ(1,"p"),o._uU(2," Rich Text Editor based on "),o.TgZ(3,"a",1),o._uU(4," TipTap Editor "),o.qZA(),o._uU(5," for using with Angular forms. For safety reasons use a "),o.TgZ(6,"a",2),o._uU(7," sanitizer "),o.qZA(),o._uU(8," with this component. "),o.qZA(),o.TgZ(9,"tui-doc-example",3),o._UZ(10,"tui-editor-upload-images-example-1"),o.qZA(),o.qZA()),2&t&&(o.xp6(9),o.Q6J("content",r.example1))},directives:[Z.qo,C.V,y.yS,Z.f2,dt],encapsulation:2,changeDetection:0}),e})(),ut=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[l.ez,V.A,b.EI,C.j,G.jh,H.fN,F.fV,s.u5,s.UX,d.T_,D.dS,d.GK,Q,w,y.Bz.forChild((0,U.Ve)(lt)),N]]}),e})()}}]);