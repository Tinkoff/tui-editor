(self.webpackChunkeditor_demo=self.webpackChunkeditor_demo||[]).push([[2623],{12623:(t,n,e)=>{e.r(n),e.d(n,{default:()=>w});var o,i=e(56610),s=e(37222),r=e(91920),a=e(97270),l=e(2978),u=e(29253),c=e(22792),m=e(10352);const d=["container"];function g(t,n){if(1&t){const t=l.RV6();l.j41(0,"button",2,3),l.bIt("click",(function(){const n=l.eBV(t).$implicit,e=l.XpG();return l.Njj(e.setMention.emit(n))}))("keydown.enter",(function(){const n=l.eBV(t).$implicit,e=l.XpG();return l.Njj(e.setMention.emit(n))})),l.EFF(2),l.nrm(3,"tui-avatar",4),l.nI1(4,"tuiInitials"),l.k0s()}if(2&t){const t=n.$implicit;l.R7$(2),l.SpI(" ",t.name," "),l.R7$(1),l.Y8G("src",t.avatar||l.bMT(4,2,t.name))}}class p{constructor(){this.items=[{name:"Alexander Inkin",avatar:"https://taiga-ui.dev/assets/images/avatar.jpg",login:"a.inkin"},{name:"Roman Sedov",avatar:"",login:"r.sedov"}],this.setMention=new l.bkB}getFilteredItems(t,n){return n?.length?t.filter((({name:t,login:e})=>e.toLocaleLowerCase().startsWith(n.toLocaleLowerCase())||t.toLocaleLowerCase().startsWith(n.toLocaleLowerCase()))):t}down(t,n){const e=Array.from(this.el?.querySelectorAll("button")??[]),o=n?e[0]:e[e.length-1];this.el?.contains(t.target)||o.focus()}get el(){return this.container?.nativeElement??null}}function f(t,n){if(1&t){const t=l.RV6();l.j41(0,"mentions",4),l.bIt("setMention",(function(n){l.eBV(t);const e=l.XpG();return l.Njj(e.setMention(n))})),l.k0s()}if(2&t){const t=l.XpG();l.Y8G("mentionSuggestions",null==t.wysiwyg?null:t.wysiwyg.mentionSuggestions)}}(o=p).ɵfac=function(t){return new(t||o)},o.ɵcmp=l.VBU({type:o,selectors:[["mentions"]],viewQuery:function(t,n){if(1&t&&l.GBs(d,5,l.aKT),2&t){let t;l.mGM(t=l.lsd())&&(n.container=t.first)}},hostBindings:function(t,n){1&t&&l.bIt("keydown.arrowUp",(function(t){return n.down(t,!1)}),!1,l.tSv)("keydown.arrowDown",(function(t){return n.down(t,!0)}),!1,l.tSv)},inputs:{mentionSuggestions:"mentionSuggestions"},outputs:{setMention:"setMention"},standalone:!0,features:[l.aNF],decls:4,vars:1,consts:[["container",""],["tuiOption","",3,"click","keydown.enter",4,"ngFor","ngForOf"],["tuiOption","",3,"click","keydown.enter"],["button",""],["size","s",3,"src"]],template:function(t,n){1&t&&(l.j41(0,"tui-data-list")(1,"div",null,0),l.DNE(3,g,5,4,"button",1),l.k0s()()),2&t&&(l.R7$(3),l.Y8G("ngForOf",n.getFilteredItems(n.items,n.mentionSuggestions)))},dependencies:[i.Sq,m.Elh,c.uEM,c.aOZ,c.eoQ],encapsulation:2,changeDetection:0}),(0,a.Cg)([u.PEb],p.prototype,"getFilteredItems",null);const w=(()=>{var t;class n{constructor(){this.builtInTools=[r.TuiEditorTool.Undo,r.TuiEditorTool.Size,r.TuiEditorTool.Link],this.control=new s.MJ('\n        <p><span class="my-mention" data-type="mention">@a.inkin</span> FYI</p>\n    ')}setMention(t){const n=this.wysiwyg?.editor?.getOriginTiptapEditor();if(!n)return;const e=`<span class="my-mention" data-type="mention">@${t.login}</span>&nbsp;`,o=n.state.selection.to,i=n.state.selection.from-(this.wysiwyg?.mentionSuggestions.length??0)-1;n.chain().focus().insertContentAt({from:i,to:o},e).run()}}return(t=n).ɵfac=function(n){return new(n||t)},t.ɵcmp=l.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&l.GBs(r.TuiEditor,5),2&t){let t;l.mGM(t=l.lsd())&&(n.wysiwyg=t.first)}},standalone:!0,features:[l.Jv_([{provide:r.TUI_EDITOR_EXTENSIONS,useValue:[Promise.resolve().then(e.bind(e,91920)).then((({TuiStarterKit:t})=>t)),Promise.resolve().then(e.bind(e,91920)).then((({TuiLink:t})=>t)),Promise.resolve().then(e.bind(e,25377)).then((({default:t})=>t)),Promise.resolve().then(e.bind(e,91920)).then((({TuiMention:t})=>t))]}]),l.aNF],decls:10,vars:5,consts:[[3,"formControl","tools"],["ngProjectAs","mention",5,["mention"]],[3,"mentionSuggestions","setMention",4,"ngIf"],[3,"content"],[3,"mentionSuggestions","setMention"]],template:function(t,n){1&t&&(l.j41(0,"tui-editor",0),l.qex(1,1),l.DNE(2,f,1,1,"mentions",2),l.bVm(),l.k0s(),l.j41(3,"h4"),l.EFF(4,"HTML:"),l.k0s(),l.nrm(5,"tui-editor-socket",3),l.j41(6,"h4"),l.EFF(7,"Text:"),l.k0s(),l.j41(8,"p"),l.EFF(9),l.k0s()),2&t&&(l.Y8G("formControl",n.control)("tools",n.builtInTools),l.R7$(2),l.Y8G("ngIf",null==n.wysiwyg?null:n.wysiwyg.isMentionMode),l.R7$(3),l.Y8G("content",n.control.value||""),l.R7$(4),l.JRh(n.control.value))},dependencies:[p,i.bT,s.X1,s.BC,s.l_,r.TuiEditor,r.TuiEditorSocket],styles:["[_nghost-%COMP%]     .my-mention{background:var(--tui-autofill);border:.0625rem solid var(--tui-background-accent-opposite-hover);border-radius:.4rem;padding:.1rem .3rem;cursor:default}"],changeDetection:0}),n})()}}]);