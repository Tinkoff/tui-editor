(self.webpackChunktui_editor=self.webpackChunktui_editor||[]).push([[5273],{25273:(t,e,n)=>{n.r(e),n.d(e,{ExampleTuiEditorPreviewImagesToolModule:()=>Jt});var i=n(12057),o=n(24751),r=n(34016),a=n(70997),s=n(44427),c=n(221),u=n(54789),l=n(82847),d=n(23917),g=n(12628),h=n(31414),p=n(74788),m=n(98267),v=n(99434),b=n(27103),f=n(10215),w=n(96152);let C=(()=>{class t{constructor(){this.imagePreview=new p.vpe}click(t){t instanceof HTMLImageElement&&this.imagePreview.emit(t)}}return t.ɵfac=function(e){return new(e||t)},t.ɵdir=p.lG2({type:t,selectors:[["tui-editor-socket","imagePreview",""]],hostAttrs:[1,"_preview-image"],hostBindings:function(t,e){1&t&&p.NdJ("click",(function(t){return e.click(t.target)}))},outputs:{imagePreview:"imagePreview"}}),t})();var _=n(49941),k=n(89570),x=n(76480);function z(t,e){if(1&t&&(p.ynx(0),p._uU(1),p.BQk()),2&t){const t=e.polymorpheusOutlet;p.xp6(1),p.hij(" ",t," ")}}let y=(()=>{class t{constructor(t){this.context=t}onKeyDownEsc(){this.context.$implicit.complete()}}return t.ɵfac=function(e){return new(e||t)(p.Y36(k.yf))},t.ɵcmp=p.Xpm({type:t,selectors:[["tui-preview-dialog"]],hostBindings:function(t,e){1&t&&p.NdJ("keydown.esc",(function(){return e.onKeyDownEsc()}),!1,p.evT)},decls:2,vars:3,consts:[[1,"t-dialog-content"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.YNc(1,z,2,1,"ng-container",1),p.qZA()),2&t&&(p.Q6J("@tuiSlideInTop",void 0),p.xp6(1),p.Q6J("polymorpheusOutlet",e.context.content)("polymorpheusOutletContext",e.context))},directives:[k.Li],styles:[".t-dialog-content{position:fixed;width:100%;height:100%}[tuiWrapper][data-appearance=preview-action]{background:rgba(104,104,104,.96);color:var(--tui-text-01-night)}@media (hover: hover){[tuiWrapper][data-appearance=preview-action]:hover:not(._no-hover),[tuiWrapper][data-appearance=preview-action][data-state=hover]{background:rgba(159,159,159,.86)}}[tuiWrapper][data-appearance=preview-action]:active:not(._no-active),[tuiWrapper][data-appearance=preview-action][data-state=active],[tuiWrapper][data-appearance=preview-action][data-state=active]:hover{background:rgba(159,159,159,.75)}\n"],encapsulation:2,data:{animation:[_.X9]},changeDetection:0}),t})(),M=(()=>{class t extends x.d5{constructor(){super(...arguments),this.defaultOptions={},this.component=new k.Al(y)}}return t.ɵfac=function(){let e;return function(n){return(e||(e=p.n5z(t)))(n||t)}}(),t.ɵprov=p.Yz7({token:t,factory:t.ɵfac,providedIn:"root"}),t})(),P=(()=>{class t{constructor(t){this.tuiPan=t}}return t.ɵfac=function(e){return new(e||t)(p.Y36(b.l))},t.ɵdir=p.lG2({type:t,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[p._Bn([b.l])]}),t})(),O=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵmod=p.oAB({type:t}),t.ɵinj=p.cJS({}),t})(),Z=(()=>{class t{constructor(t){this.tuiZoom=t}}return t.ɵfac=function(e){return new(e||t)(p.Y36(b.bW))},t.ɵdir=p.lG2({type:t,selectors:[["","tuiZoom",""]],hostVars:2,hostBindings:function(t,e){2&t&&p.Udp("touch-action","none")},outputs:{tuiZoom:"tuiZoom"},features:[p._Bn([b.bW])]}),t})(),A=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵmod=p.oAB({type:t}),t.ɵinj=p.cJS({}),t})();var T=n(5962),I=n(33770),$=n(85648),H=n(66749),S=n(75675),E=n(69727),J=n(41213),B=n(44358),D=n(57179),N=(n(18939),n(18269));function W(t,e){const n=t.findIndex(((t,n)=>n&&e(t)));return[t[n-1],t[n]]}I.kU,N.hW,N.hW,N.hW,N.hW,N.hW,N.hW,I.fv,N.hW,N.hW,I.fv,N.hW,N.hW,N.hW,N.hW,N.hW,N.hW;var Y=n(64762),U=n(62579),q=n(15257);const L=["type","range","tuiSlider",""],Q=["tuiSliderThumbLabel",""];function j(t,e){1&t&&p.GkF(0)}const V=["*",[["input","type","range"]]],X=["*","input[type=range]"],F={size:"m",trackColor:"var(--tui-base-03)"},R=new p.OlP("[TUI_SLIDER_OPTIONS]",{factory:()=>F});let G=(()=>{class t{constructor(t,e,n,i,r,a){var s;this.control=t,this.options=n,this.el=i,this.userAgent=r,this.injector=a,this.size=this.options.size,this.segments=1,t instanceof o.On&&(null===(s=t.valueChanges)||void 0===s||s.pipe((0,H.NA)(e),(0,q.q)(1)).subscribe())}get min(){return Number(this.el.nativeElement.min)}get max(){return Number(this.el.nativeElement.max||100)}get step(){return Number(this.el.nativeElement.step)||1}get value(){const{el:t,control:e,hasKeySteps:n}=this;return!n&&e instanceof o.On?e.viewModel:Number(t.nativeElement.value)||0}set value(t){this.el.nativeElement.value=`${t}`}get valuePercentage(){return 100*(this.value-this.min)/(this.max-this.min)||0}get segmentWidth(){return 100/Math.max(1,this.segments)}get isOldEdge(){return(0,J.xz)(I.FS,this.userAgent)}get hasKeySteps(){return Boolean(this.injector.get(K,null))}}return t.ɵfac=function(e){return new(e||t)(p.Y36(o.a5,10),p.Y36(p.sBO),p.Y36(R),p.Y36(p.SBq),p.Y36(U.yZ),p.Y36(p.zs3))},t.ɵcmp=p.Xpm({type:t,selectors:[["input","type","range","tuiSlider",""]],hostVars:9,hostBindings:function(t,e){1&t&&p.NdJ("input",(function(){return 0})),2&t&&(p.uIk("data-size",e.size),p.Udp("--tui-slider-track-color",e.options.trackColor)("--tui-slider-fill-percentage",e.valuePercentage,"%")("--tui-slider-segment-width",e.segmentWidth,"%"),p.ekj("_old-edge",e.isOldEdge))},inputs:{size:"size",segments:"segments"},attrs:L,decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]{display:block;width:100%;color:var(--tui-primary);cursor:pointer}[_nghost-%COMP%]:active{cursor:ew-resize}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);cursor:auto}[_nghost-%COMP%]:not(._old-edge){-webkit-appearance:none;-moz-appearance:none;appearance:none;height:.125rem;padding:.4375rem 0;background-color:transparent;background-clip:content-box;outline:none;border-radius:var(--tui-radius-m)}[_nghost-%COMP%]:not(._old-edge)::-webkit-slider-container{border-radius:inherit}[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-runnable-track{height:.125rem;border-radius:inherit;background-repeat:no-repeat;background-color:var(--tui-slider-track-color);background-image:linear-gradient(to right,currentColor 0px .625rem,transparent .25rem),repeating-linear-gradient(to right,var(--tui-base-07) 0 .25rem,transparent 0 var(--tui-slider-segment-width)),linear-gradient(to right,currentColor var(--tui-slider-fill-percentage),transparent var(--tui-slider-fill-percentage));background-position-x:0,.375rem,0;background-size:calc(100% - 1rem),calc(100% - 1rem),auto}[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-runnable-track{height:.125rem;border-radius:inherit;background-repeat:no-repeat;background-color:var(--tui-slider-track-color);background-image:linear-gradient(to right,currentColor 0px .375rem,transparent .25rem),repeating-linear-gradient(to right,var(--tui-base-07) 0 .25rem,transparent 0 var(--tui-slider-segment-width)),linear-gradient(to right,currentColor var(--tui-slider-fill-percentage),transparent var(--tui-slider-fill-percentage));background-position-x:0,.125rem,0;background-size:calc(100% - .5rem),calc(100% - .5rem),auto}[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-track{height:.125rem;border-radius:inherit;background-repeat:no-repeat;background-color:var(--tui-slider-track-color);background-image:linear-gradient(to right,currentColor 0px .625rem,transparent .25rem),repeating-linear-gradient(to right,var(--tui-base-07) 0 .25rem,transparent 0 var(--tui-slider-segment-width));background-position-x:0,.375rem;background-size:calc(100% - 1rem)}[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-track{height:.125rem;border-radius:inherit;background-repeat:no-repeat;background-color:var(--tui-slider-track-color);background-image:linear-gradient(to right,currentColor 0px .375rem,transparent .25rem),repeating-linear-gradient(to right,var(--tui-base-07) 0 .25rem,transparent 0 var(--tui-slider-segment-width));background-position-x:0,.125rem;background-size:calc(100% - .5rem)}[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background-color:currentColor;border:none;border-radius:50%;height:1rem;width:1rem;margin-top:-.4375rem}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb{cursor:ew-resize}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb:hover{background:var(--tui-primary-hover)}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb:active{background:var(--tui-primary-active)}:focus-visible[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-webkit-slider-thumb{box-shadow:0 0 0 2px inset var(--tui-focus)}[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;background-color:currentColor;border:none;border-radius:50%;height:.5rem;width:.5rem;margin-top:-.1875rem}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb{cursor:ew-resize}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb:hover{background:var(--tui-primary-hover)}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb:active{background:var(--tui-primary-active)}:focus-visible[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-webkit-slider-thumb{box-shadow:0 0 0 2px inset var(--tui-focus)}[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb{-moz-appearance:none;appearance:none;background-color:currentColor;border:none;border-radius:50%;height:1rem;width:1rem}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb{cursor:ew-resize}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb:hover{background:var(--tui-primary-hover)}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb:active{background:var(--tui-primary-active)}:focus-visible[_nghost-%COMP%]:not(._old-edge)[data-size=m]::-moz-range-thumb{box-shadow:0 0 0 2px inset var(--tui-focus)}[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb{-moz-appearance:none;appearance:none;background-color:currentColor;border:none;border-radius:50%;height:.5rem;width:.5rem}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb{cursor:ew-resize}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb:hover{background:var(--tui-primary-hover)}:not(:disabled)[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb:active{background:var(--tui-primary-active)}:focus-visible[_nghost-%COMP%]:not(._old-edge)[data-size=s]::-moz-range-thumb{box-shadow:0 0 0 2px inset var(--tui-focus)}[_nghost-%COMP%]:not(._old-edge)::-moz-range-progress{border-radius:inherit}[_nghost-%COMP%]:not(._old-edge)::-moz-range-progress{height:.125rem;background:currentColor;border-top-right-radius:0;border-bottom-right-radius:0}._old-edge[_nghost-%COMP%]::-ms-thumb{background:currentColor;border-radius:50%}._old-edge[_nghost-%COMP%]::-ms-fill-lower{background:currentColor}._old-edge[_nghost-%COMP%]::-ms-track{background:var(--tui-slider-track-color);border:none}"],changeDetection:0}),(0,Y.gn)([B.UM],t.prototype,"hasKeySteps",null),t})(),K=(()=>{class t extends x.M${constructor(t,e,n,i){super(t,e),this.el=n,this.slider=i}get nativeFocusableElement(){return this.computedDisabled?null:this.el.nativeElement}get focused(){return(0,D.V8)(this.nativeFocusableElement)}get min(){return this.keySteps[0][1]}get max(){return this.keySteps[this.keySteps.length-1][1]}updateControlValue(){this.value=function(t,e){const[[n,i],[o,r]]=W(e,(([e,n])=>t<=e)),a=(t-n)/(o-n)*(r-i)+i;return(0,$.FG)(a,7)}(this.slider.valuePercentage,this.keySteps)}writeValue(t){if(null===t)return;const e=(0,$.Ki)(t,this.min,this.max);this.slider.value=this.transformToNativeValue(e)}getFallbackValue(){return 0}transformToNativeValue(t){const{min:e,max:n}=this.slider;return function(t,e){const[[n,i],[o,r]]=W(e,(([e,n])=>t<=n));return(o-n)*((t-i)/(r-i)||0)+n}(t,this.keySteps)*(n-e)/100+e}}return t.ɵfac=function(e){return new(e||t)(p.Y36(o.a5,10),p.Y36(p.sBO),p.Y36(p.SBq),p.Y36((0,p.Gpc)((()=>G))))},t.ɵdir=p.lG2({type:t,selectors:[["input","tuiSlider","","keySteps",""]],hostVars:4,hostBindings:function(t,e){1&t&&p.NdJ("input",(function(){return e.updateControlValue()}))("change",(function(){return e.updateControlValue()})),2&t&&(p.Ikx("disabled",e.computedDisabled),p.uIk("aria-valuenow",e.safeCurrentValue)("aria-valuemin",e.min)("aria-valuemax",e.max))},inputs:{keySteps:"keySteps"},features:[p.qOj]}),t})();new Set(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"]);let tt=(()=>{class t{get size(){var t;return(null===(t=this.slider)||void 0===t?void 0:t.size)||"m"}get ratio(){var t;return((null===(t=this.slider)||void 0===t?void 0:t.valuePercentage)||0)/100}get ghostLeft(){var t;return this.ratio*((null===(t=this.slider)||void 0===t?void 0:t.el.nativeElement.offsetWidth)||0)}ngAfterContentInit(){}}return t.ɵfac=function(e){return new(e||t)},t.ɵcmp=p.Xpm({type:t,selectors:[["","tuiSliderThumbLabel",""]],contentQueries:function(t,e,n){if(1&t&&(p.Suo(n,G,5),p.Suo(n,o.a5,5)),2&t){let t;p.iGM(t=p.CRH())&&(e.slider=t.first),p.iGM(t=p.CRH())&&(e.control=t.first)}},attrs:Q,ngContentSelectors:X,decls:5,vars:8,consts:[[4,"ngIf"],[1,"t-ghost"]],template:function(t,e){1&t&&(p.F$t(V),p.YNc(0,j,1,0,"ng-container",0),p.ALo(1,"async"),p.TgZ(2,"div",1),p.Hsn(3),p.qZA(),p.Hsn(4,1)),2&t&&(p.Q6J("ngIf",p.lcZ(1,6,null==e.control?null:e.control.valueChanges)),p.xp6(2),p.Udp("left",e.ghostLeft,"px")("--tui-slider-thumb-ratio",e.ratio),p.uIk("data-size",e.size))},directives:[i.O5],pipes:[i.Ov],styles:["[_nghost-%COMP%]{position:relative}.t-ghost[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;margin:auto;border-radius:50%;pointer-events:none}.t-ghost[data-size=s][_ngcontent-%COMP%]{width:.5rem;height:.5rem;transform:translate(calc(var(--tui-slider-thumb-ratio) * -.5rem))}.t-ghost[data-size=m][_ngcontent-%COMP%]{width:1rem;height:1rem;transform:translate(calc(var(--tui-slider-thumb-ratio) * -1rem))}"],changeDetection:0}),t})(),et=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵmod=p.oAB({type:t}),t.ɵinj=p.cJS({imports:[[i.ez]]}),t})();var nt=n(90022),it=n(40719),ot=n(66682),rt=n(25917),at=n(41291),st=n(26215),ct=n(9112),ut=n(47232);const lt=new p.OlP("[TUI_PREVIEW_TEXTS]",{factory:(0,ut.v)("previewTexts")}),dt=new p.OlP("[TUI_PREVIEW_ZOOM_TEXTS]",{factory:(0,ut.v)("zoomTexts")});var gt=n(43190),ht=n(88002),pt=n(39761),mt=n(23764);function vt(t,e){if(1&t&&(p._uU(0),p.ALo(1,"percent"),p.ALo(2,"async")),2&t){const t=p.oxw(2);p.hij(" ",p.lcZ(1,1,p.lcZ(2,3,t.valueChange)||t.value)," ")}}function bt(t,e){if(1&t){const t=p.EpF();p.ynx(0),p.TgZ(1,"section",1),p.TgZ(2,"button",2),p.NdJ("click",(function(){return p.CHM(t),p.oxw().onMinus()})),p.qZA(),p.TgZ(3,"label",3),p._UZ(4,"div",4),p.ALo(5,"async"),p.YNc(6,vt,3,5,"ng-template",null,5,p.W1O),p.TgZ(8,"input",6),p.NdJ("ngModelChange",(function(e){return p.CHM(t),p.oxw().onModelChange(e)})),p.qZA(),p.qZA(),p.TgZ(9,"button",7),p.NdJ("click",(function(){return p.CHM(t),p.oxw().onPlus()})),p.qZA(),p.qZA(),p.TgZ(10,"button",8),p.NdJ("click",(function(){return p.CHM(t),p.oxw().onReset()})),p.qZA(),p.BQk()}if(2&t){const t=e.ngIf,n=p.MAs(7),i=p.oxw();p.xp6(2),p.Q6J("title",t.zoomOut)("disabled",i.leftButtonDisabled),p.xp6(2),p.Q6J("tuiHint",n)("tuiHintManual",!!p.lcZ(5,12,i.hintShow$)),p.xp6(4),p.Q6J("min",i.min)("max",i.max)("ngModel",i.value),p.xp6(1),p.Q6J("title",t.zoomIn)("disabled",i.rightButtonDisabled),p.xp6(1),p.ekj("t-invisible",!i.collapseVisible),p.Q6J("tuiHint",t.reset)}}function ft(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"button",9),p.NdJ("click",(function(){return p.CHM(t),p.oxw(2).rotate()})),p.qZA()}if(2&t){const t=p.oxw().ngIf;p.Q6J("tuiHint",t.rotate)}}function wt(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"tui-preview-zoom",10),p.NdJ("valueChange",(function(e){return p.CHM(t),p.oxw(2).zoom$.next(e)}))("reset",(function(){return p.CHM(t),p.oxw(2).reset()})),p.ALo(1,"async"),p.qZA()}if(2&t){const t=p.oxw(2);p.Q6J("min",t.minZoom)("value",p.lcZ(1,2,t.zoom$)||1)}}function Ct(t,e){if(1&t){const t=p.EpF();p.ynx(0),p.TgZ(1,"section",1,2),p.NdJ("tuiPan",(function(e){return p.CHM(t),p.oxw().onPan(e)}))("tuiZoom",(function(e){return p.CHM(t),p.oxw().onZoom(e)}))("tuiResize",(function(e){return p.CHM(t),p.oxw().onResize(e)}))("waMutationObserver",(function(){p.CHM(t);const e=p.MAs(2);return p.oxw().onMutation(e)})),p.ALo(3,"async"),p.ALo(4,"async"),p.ALo(5,"async"),p.Hsn(6),p.qZA(),p.TgZ(7,"header",3),p.TgZ(8,"div",4),p.Hsn(9,1),p.qZA(),p.Hsn(10,2),p.TgZ(11,"div",5),p.Hsn(12,3),p.qZA(),p.qZA(),p.TgZ(13,"footer",6),p.YNc(14,ft,1,1,"button",7),p.YNc(15,wt,2,4,"tui-preview-zoom",8),p.qZA(),p.BQk()}if(2&t){const t=p.oxw();p.xp6(1),p.Udp("transform",p.lcZ(3,10,t.wrapperTransform$))("cursor",p.lcZ(4,12,t.cursor$)),p.ekj("t-not-interactive-content",t.zoomable)("t-transitive",p.lcZ(5,14,t.transitioned$)),p.xp6(13),p.Q6J("ngIf",t.rotatable),p.xp6(1),p.Q6J("ngIf",t.zoomable)}}const _t=["*",[["tui-preview-title"]],[["tui-preview-pagination"]],[["","tuiPreviewAction",""]]],kt=["*","tui-preview-title","tui-preview-pagination","[tuiPreviewAction]"];let xt=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵdir=p.lG2({type:t,selectors:[["","tuiPreviewAction",""]],features:[p._Bn([(0,g.O0)({appearance:"preview-action",shape:"rounded",size:"s"})])]}),t})(),zt=(()=>{class t{constructor(t){this.zoomTexts$=t,this.min=.5,this.max=2,this.value=1,this.valueChange=new p.vpe,this.reset=new p.vpe,this.hintShow$=this.valueChange.pipe((0,gt.w)((()=>(0,ot.T)((0,rt.of)(!0),(0,at.H)(1e3).pipe((0,ht.U)(I.Iy))))),(0,pt.O)(!1))}get leftButtonDisabled(){return this.value===this.min}get rightButtonDisabled(){return this.value===this.max}get collapseVisible(){return this.value>this.min}onModelChange(t){const e=(0,$.Ki)(t,this.min,this.max);e!==this.value&&(this.value=e,this.valueChange.emit(e))}onReset(){this.reset.emit()}onMinus(){this.onModelChange(this.value-.5)}onPlus(){this.onModelChange(this.value<1?1:this.value+.5)}}return t.ɵfac=function(e){return new(e||t)(p.Y36(dt))},t.ɵcmp=p.Xpm({type:t,selectors:[["tui-preview-zoom"]],inputs:{min:"min",max:"max",value:"value"},outputs:{valueChange:"valueChange",reset:"reset"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"t-zoom"],["type","button","tuiIconButton","","tuiPreviewAction","","icon","tuiIconMinus",1,"t-sign_minus",3,"title","disabled","click"],["tuiSliderThumbLabel",""],["tuiHintAppearance","onDark","tuiHintDirection","top-right",3,"tuiHint","tuiHintManual"],["hint",""],["tuiSlider","","type","range","step","any",1,"t-slider",3,"min","max","ngModel","ngModelChange"],["type","button","tuiIconButton","","tuiPreviewAction","","icon","tuiIconPlus",1,"t-sign_plus",3,"title","disabled","click"],["type","button","tuiIconButton","","tuiPreviewAction","","icon","tuiIconMinimize","tuiHintDirection","top-right","tuiHintAppearance","onDark","tuiHintDescribe","",1,"t-reset-button",3,"tuiHint","click"]],template:function(t,e){1&t&&(p.YNc(0,bt,11,14,"ng-container",0),p.ALo(1,"async")),2&t&&p.Q6J("ngIf",p.lcZ(1,1,e.zoomTexts$))},directives:[i.O5,g.v0,xt,tt,nt.D,nt.xn,nt.t6,nt.DM,nt.ZY,G,o.eT,o.Fj,o.JJ,o.On,nt.$o],pipes:[i.Ov,i.Zx],styles:["[_nghost-%COMP%]{position:relative;display:flex}.t-zoom[_ngcontent-%COMP%]{border-radius:1rem;background:rgba(104,104,104,.96);color:var(--tui-text-01-night);font:var(--tui-font-text-s);display:flex;justify-content:space-between;align-items:center;width:12rem}.t-slider[_ngcontent-%COMP%]{width:7.5rem}.t-sign_minus[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}.t-sign_plus[_ngcontent-%COMP%]{border-top-left-radius:0;border-bottom-left-radius:0}.t-invisible[_ngcontent-%COMP%]{visibility:hidden}.t-reset-button[_ngcontent-%COMP%]{margin-left:.3125rem}"],changeDetection:0}),t})();const yt=.8,Mt=[0,0];let Pt=(()=>{class t{constructor(t,e){this.el=t,this.texts$=e,this.zoomable=!0,this.rotatable=!1,this.minZoom=1,this.width=0,this.height=0,this.zoom$=new st.X(this.minZoom),this.rotation$=new st.X(0),this.coordinates$=new st.X(Mt),this.transitioned$=(0,ot.T)((0,H.mM)(this.el.nativeElement).pipe((0,ht.U)((({stage:t})=>t!==H.nc.Continues))),(0,H.mL)(this.el.nativeElement,"touchmove",{passive:!0}).pipe((0,ht.U)(I.Iy)),(0,H.mL)(this.el.nativeElement,"wheel",{passive:!0}).pipe((0,ht.U)(I.Iy))),this.cursor$=(0,H.mM)(this.el.nativeElement).pipe((0,ht.U)((({stage:t})=>t===H.nc.Continues?"grabbing":"initial")),(0,pt.O)("initial")),this.wrapperTransform$=(0,ct.aj)([this.coordinates$.pipe((0,ht.U)((([t,e])=>`${(0,S.O)(t)}, ${(0,S.O)(e)}`))),this.zoom$,this.rotation$]).pipe((0,ht.U)((([t,e,n])=>`translate(${t}) scale(${e}) rotate(${n}deg)`)))}rotate(){this.rotation$.next(this.rotation$.value-90)}onPan(t){this.coordinates$.next(this.getGuardedCoordinates(this.coordinates$.value[0]+t[0],this.coordinates$.value[1]+t[1]))}onMutation(t){const{clientWidth:e,clientHeight:n}=t;this.refresh(e,n)}onZoom({clientX:t,clientY:e,delta:n}){this.zoomable&&this.processZoom(t,e,n)}onResize(t){if(0===t.length)return;const{width:e,height:n}=t[0].contentRect;this.refresh(e,n)}reset(){this.zoom$.next(this.minZoom),this.coordinates$.next(Mt)}get offsets(){return{offsetX:(this.zoom$.value-this.minZoom)*this.width/2,offsetY:(this.zoom$.value-this.minZoom)*this.height/2}}calculateMinZoom(t,e,n,i){const o=t>n*yt||e>i*yt,{clientHeight:r,clientWidth:a}=this.el.nativeElement;return o?(0,$.FG)(Math.min(r*yt/t,a*yt/e),2):1}refresh(t,e){this.width=t,this.height=e,this.minZoom=this.calculateMinZoom(e,t,this.el.nativeElement.clientHeight,this.el.nativeElement.clientWidth),this.zoom$.next(this.minZoom),this.coordinates$.next(Mt),this.rotation$.next(0)}processZoom(t,e,n){const i=this.zoom$.value,o=(0,$.Ki)(i+n,this.minZoom,2),r=this.getScaleCenter({clientX:t,clientY:e},this.coordinates$.value,this.zoom$.value),a=r[0]*i-r[0]*o,s=r[1]*i-r[1]*o;this.zoom$.next(o),this.coordinates$.next(this.getGuardedCoordinates(this.coordinates$.value[0]+a,this.coordinates$.value[1]+s))}getGuardedCoordinates(t,e){const{offsetX:n,offsetY:i}=this.offsets;return[(0,$.Ki)(t,-n,n),(0,$.Ki)(e,-i,i)]}getScaleCenter({clientX:t,clientY:e},[n,i],o){return[(t-n-this.el.nativeElement.offsetWidth/2)/o,(e-i-this.el.nativeElement.offsetHeight/2)/o]}}return t.ɵfac=function(e){return new(e||t)(p.Y36(p.SBq),p.Y36(lt))},t.ɵcmp=p.Xpm({type:t,selectors:[["tui-preview"]],inputs:{zoomable:"zoomable",rotatable:"rotatable"},ngContentSelectors:kt,decls:2,vars:3,consts:[[4,"ngIf"],["subtree","","childList","","characterData","","attributeFilter","src",1,"t-wrapper",3,"tuiPan","tuiZoom","tuiResize","waMutationObserver"],["contentWrapper",""],[1,"t-header"],[1,"t-title"],[1,"t-actions"],[1,"t-footer"],["tuiIconButton","","tuiPreviewAction","","type","button","icon","tuiIconRotate","tuiHintDirection","top-right","tuiHintAppearance","onDark","tuiHintDescribe","","class","t-rotate-button",3,"tuiHint","click",4,"ngIf"],[3,"min","value","valueChange","reset",4,"ngIf"],["tuiIconButton","","tuiPreviewAction","","type","button","icon","tuiIconRotate","tuiHintDirection","top-right","tuiHintAppearance","onDark","tuiHintDescribe","",1,"t-rotate-button",3,"tuiHint","click"],[3,"min","value","valueChange","reset"]],template:function(t,e){1&t&&(p.F$t(_t),p.YNc(0,Ct,16,16,"ng-container",0),p.ALo(1,"async")),2&t&&p.Q6J("ngIf",p.lcZ(1,1,e.texts$))},directives:[i.O5,P,Z,T.$,mt.Vi,g.v0,xt,nt.$o,nt.D,nt.xn,nt.t6,nt.DM,zt],pipes:[i.Ov],styles:["[_nghost-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}.t-header[_ngcontent-%COMP%]{position:fixed;top:1rem;display:flex;width:100%;padding:0 1rem;box-sizing:border-box}.t-footer[_ngcontent-%COMP%]{position:absolute;bottom:1rem;display:flex;width:100%;padding:0 1rem;box-sizing:border-box;justify-content:center}.t-actions[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:flex-end}.t-actions[_ngcontent-%COMP%]    >*{margin-left:.625rem}.t-rotate-button[_ngcontent-%COMP%]{margin-right:.3125rem}.t-title[_ngcontent-%COMP%]{flex:1}tui-root._mobile[_nghost-%COMP%]   .t-title[_ngcontent-%COMP%], tui-root._mobile   [_nghost-%COMP%]   .t-title[_ngcontent-%COMP%]{display:none}.t-not-interactive-content[_ngcontent-%COMP%]    >*{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{will-change:transform}.t-transitive[_ngcontent-%COMP%]{transition-duration:.3s}"],data:{animation:[_.X9]},changeDetection:0}),t})(),Ot=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵmod=p.oAB({type:t}),t.ɵinj=p.cJS({}),t})(),Zt=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵmod=p.oAB({type:t}),t.ɵinj=p.cJS({providers:[(0,v.Q)(M)],imports:[[i.ez,k.wq,mt.NI,g.fN,o.u5,et,nt.go,E.N,T.k,u.EI,it.dS,O,A,Ot]]}),t})();const At=["previewImages"];function Tt(t,e){if(1&t&&p._UZ(0,"img",4),2&t){const t=p.oxw(2);p.Q6J("src",t.image.src,p.LSH)}}function It(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"tui-preview",1),p.YNc(1,Tt,1,1,"img",2),p.TgZ(2,"button",3),p.NdJ("click",(function(){return p.CHM(t).$implicit.complete()})),p.qZA(),p.qZA()}if(2&t){const t=p.oxw();p.Q6J("rotatable",!0),p.xp6(1),p.Q6J("ngIf",t.image)}}let $t=(()=>{class t{constructor(t){this.dialogs=t}showImage(t){this.image=t,this.dialogs.open(this.template||"").subscribe()}}return t.ɵfac=function(e){return new(e||t)(p.Y36(M))},t.ɵcmp=p.Xpm({type:t,selectors:[["image-preview-example"]],viewQuery:function(t,e){if(1&t&&p.Gf(At,5),2&t){let t;p.iGM(t=p.CRH())&&(e.template=t.first)}},decls:2,vars:0,consts:[["previewImages",""],[3,"rotatable"],["loading","lazy","alt","","class","t-image-preview",3,"src",4,"ngIf"],["tuiIconButton","","tuiPreviewAction","","icon","tuiIconCloseLarge","title","Close","type","button",3,"click"],["loading","lazy","alt","",1,"t-image-preview",3,"src"]],template:function(t,e){1&t&&p.YNc(0,It,3,2,"ng-template",null,0,p.W1O)},directives:[Pt,i.O5,g.v0,xt],styles:[".t-image-preview[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),t})(),Ht=(()=>{class t{constructor(t){this.isStackblitz=t,this.relativePath=this.isStackblitz?"https://taiga-ui.dev/":"",this.builtInTools=[h._2.Undo,h._2.Img],this.control=new o.NI(""),this.control.patchValue(`<p>Small image</p><img data-type="image-editor" src="${this.relativePath}assets/images/lumberjack.png" width="300"><p>Big image</p><img data-type="image-editor" src="${this.relativePath}assets/images/big-wallpaper.jpg" width="500">`)}}return t.ɵfac=function(e){return new(e||t)(p.Y36(v.Sg))},t.ɵcmp=p.Xpm({type:t,selectors:[["tui-editor-preview-images-example-1"]],features:[p._Bn([b.a3,{provide:h.Wf,deps:[p.zs3],useFactory:t=>[Promise.resolve().then(n.bind(n,66826)).then((({StarterKit:t})=>t)),Promise.resolve().then(n.bind(n,45267)).then((({createImageEditorExtension:e})=>e(t)))]}])],decls:6,vars:3,consts:[[1,"editor",3,"formControl","tools"],[3,"content","imagePreview"],["preview",""]],template:function(t,e){if(1&t){const t=p.EpF();p._UZ(0,"tui-editor",0),p.TgZ(1,"h4"),p._uU(2,"HTML:"),p.qZA(),p.TgZ(3,"tui-editor-socket",1),p.NdJ("imagePreview",(function(e){return p.CHM(t),p.MAs(5).showImage(e)})),p._UZ(4,"image-preview-example",null,2),p.qZA()}2&t&&(p.Q6J("formControl",e.control)("tools",e.builtInTools),p.xp6(3),p.Q6J("content",e.control.value||""))},directives:[f.a,o.JJ,o.oH,w.D,C,$t],encapsulation:2,changeDetection:0}),t})(),St=(()=>{class t{constructor(){this.example1={TypeScript:n.e(424).then(n.t.bind(n,50424,17)),HTML:n.e(7788).then(n.t.bind(n,57788,17)),"image-preview/image-preview.template.html":n.e(4711).then(n.t.bind(n,84711,17)),"image-preview/image-preview.style.less":n.e(5380).then(n.t.bind(n,5380,17)),"image-preview/image-preview.component.ts":n.e(2286).then(n.t.bind(n,82286,17)),"image-preview/image-preview.module.ts":n.e(9742).then(n.t.bind(n,39742,17))}}}return t.ɵfac=function(e){return new(e||t)},t.ɵcmp=p.Xpm({type:t,selectors:[["editor-preview-images"]],features:[p._Bn([{provide:h.Wf,useValue:h.PD}])],decls:11,vars:1,consts:[["header","Editor","package","ADDON-EDITOR","type","components"],["tuiLink","","href","https://www.tiptap.dev/"],["tuiLink","","routerLink","/icons/bundled","fragment","sanitizer"],["id","preview-image","heading","Preview for images",3,"content"]],template:function(t,e){1&t&&(p.TgZ(0,"tui-doc-page",0),p.TgZ(1,"p"),p._uU(2," Rich Text Editor based on "),p.TgZ(3,"a",1),p._uU(4," TipTap Editor "),p.qZA(),p._uU(5," for using with Angular forms. For safety reasons use a "),p.TgZ(6,"a",2),p._uU(7," sanitizer "),p.qZA(),p._uU(8," with this component. "),p.qZA(),p.TgZ(9,"tui-doc-example",3),p._UZ(10,"tui-editor-preview-images-example-1"),p.qZA(),p.qZA()),2&t&&(p.xp6(9),p.Q6J("content",e.example1))},directives:[m.qo,l.V,r.yS,m.f2,Ht],encapsulation:2,changeDetection:0}),t})(),Et=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵmod=p.oAB({type:t}),t.ɵinj=p.cJS({imports:[[i.ez,Zt,g.fN,k.wq,h.BN],h.BN,h.BN]}),t})(),Jt=(()=>{class t{}return t.ɵfac=function(e){return new(e||t)},t.ɵmod=p.oAB({type:t}),t.ɵinj=p.cJS({imports:[[i.ez,c.A,u.EI,l.j,d.jh,g.fN,a.fV,o.u5,o.UX,h.T_,h.GK,Et,r.Bz.forChild((0,s.Ve)(St))]]}),t})()}}]);