(self.webpackChunktui_editor=self.webpackChunktui_editor||[]).push([[5681],{5681:(e,t,a)=>{a.r(t),a.d(t,{TuiDetails:()=>s,TuiDetailsContent:()=>o,TuiSummary:()=>i});var n=a(48178),r=a(46309);const s=r.Node.create({name:"details",addOptions:()=>({HTMLAttributes:{}}),addAttributes:()=>({opened:{default:!0,keepOnSplit:!1,parseHTML:e=>"true"===e.getAttribute("data-opened"),renderHTML:e=>({"data-opened":e.opened})}}),content:"summary detailsContent",group:"block",draggable:!0,allowGapCursor:!0,isolating:!0,parseHTML:()=>[{tag:"details"}],renderHTML({HTMLAttributes:e}){return["div",{class:"t-details-wrapper t-details-wrapper_rendered"},["details",(0,r.mergeAttributes)(this.options.HTMLAttributes,e),0],["button",{class:"t-details-arrow"}]]},addNodeView(){return({node:e,getPos:t})=>{if(globalThis.document){const a=document.createElement("div"),n=document.createElement("details"),r=document.createElement("button"),s=document.createElement("button");a.className="t-details-wrapper",r.className="t-details-arrow",r.type="button",s.className="t-details-delete",s.type="button",n.open=e.attrs.opened;const o=()=>{n.open=!n.open,e.attrs.opened=n.open};return r.addEventListener("click",o),s.addEventListener("click",(e=>{r.removeEventListener("click",o);const a=t?.()??0;this.editor.chain().focus().setTextSelection(t?.()).run();const n=this.editor.state.selection.$anchor.nodeAfter,s=a+(n?.nodeSize??0);this.editor.commands.deleteRange({from:a,to:s}),e.preventDefault()}),{capture:!0,once:!0}),a.append(n,r,s),{dom:a,contentDOM:n}}}},addCommands(){return{setDetails:()=>({commands:e,editor:t,state:a})=>{let r="";const s=this.editor.state.selection.$anchor.pos;return globalThis.document&&(r=(document.defaultView?.window.getSelection()?.toString().trim().length??0)>0?(0,n.Ap)(a):"",setTimeout((()=>t.chain().focus().setTextSelection(s).run()))),e.insertContent(`<details data-opened="true"><summary><p></p></summary><div data-type="details-content"><p>${r}</p></div></details><p></p>`)},removeDetails:()=>({editor:e,state:t,dispatch:a})=>((0,n.yU)(t,a,this.name),e.commands.focus("end"))}}}),o=r.Node.create({name:"detailsContent",content:"block+",group:"block",allowGapCursor:!0,parseHTML:()=>[{tag:'div[data-type="details-content"]'}],renderHTML({HTMLAttributes:e}){return["div",(0,r.mergeAttributes)(this.options.HTMLAttributes,e,{"data-type":"details-content"}),0]}}),i=r.Node.create({name:"summary",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph",group:"block",parseHTML:()=>[{tag:"summary"}],renderHTML({HTMLAttributes:e}){return["summary",(0,r.mergeAttributes)(this.options.HTMLAttributes,e),0]}})}}]);